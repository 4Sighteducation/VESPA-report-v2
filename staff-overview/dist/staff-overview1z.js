(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ao(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const he={},us=[],Ct=()=>{},fr=()=>!1,vn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),io=e=>e.startsWith("onUpdate:"),Ue=Object.assign,lo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Ha=Object.prototype.hasOwnProperty,fe=(e,t)=>Ha.call(e,t),G=Array.isArray,ds=e=>js(e)==="[object Map]",pn=e=>js(e)==="[object Set]",$o=e=>js(e)==="[object Date]",ne=e=>typeof e=="function",$e=e=>typeof e=="string",St=e=>typeof e=="symbol",pe=e=>e!==null&&typeof e=="object",vr=e=>(pe(e)||ne(e))&&ne(e.then)&&ne(e.catch),pr=Object.prototype.toString,js=e=>pr.call(e),Da=e=>js(e).slice(8,-1),hr=e=>js(e)==="[object Object]",co=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ks=ao(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Va=/-\w/g,Bt=hn(e=>e.replace(Va,t=>t.slice(1).toUpperCase())),Ba=/\B([A-Z])/g,ss=hn(e=>e.replace(Ba,"-$1").toLowerCase()),mr=hn(e=>e.charAt(0).toUpperCase()+e.slice(1)),jn=hn(e=>e?`on${mr(e)}`:""),Vt=(e,t)=>!Object.is(e,t),Ws=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},gr=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},mn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ka=e=>{const t=$e(e)?Number(e):NaN;return isNaN(t)?e:t};let To;const gn=()=>To||(To=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bt(e){if(G(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=$e(n)?za(n):bt(n);if(o)for(const a in o)t[a]=o[a]}return t}else if($e(e)||pe(e))return e}const Ga=/;(?![^(]*\))/g,Ya=/:([^]+)/,Wa=/\/\*[^]*?\*\//g;function za(e){const t={};return e.replace(Wa,"").split(Ga).forEach(s=>{if(s){const n=s.split(Ya);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function se(e){let t="";if($e(e))t=e;else if(G(e))for(let s=0;s<e.length;s++){const n=se(e[s]);n&&(t+=n+" ")}else if(pe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Ja="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xa=ao(Ja);function yr(e){return!!e||e===""}function Qa(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=yn(e[n],t[n]);return s}function yn(e,t){if(e===t)return!0;let s=$o(e),n=$o(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=St(e),n=St(t),s||n)return e===t;if(s=G(e),n=G(t),s||n)return s&&n?Qa(e,t):!1;if(s=pe(e),n=pe(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const l in e){const c=e.hasOwnProperty(l),f=t.hasOwnProperty(l);if(c&&!f||!c&&f||!yn(e[l],t[l]))return!1}}return String(e)===String(t)}function Za(e,t){return e.findIndex(s=>yn(s,t))}const br=e=>!!(e&&e.__v_isRef===!0),x=e=>$e(e)?e:e==null?"":G(e)||pe(e)&&(e.toString===pr||!ne(e.toString))?br(e)?x(e.value):JSON.stringify(e,_r,2):String(e),_r=(e,t)=>br(t)?_r(e,t.value):ds(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[Nn(n,a)+" =>"]=o,s),{})}:pn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Nn(s))}:St(t)?Nn(t):pe(t)&&!G(t)&&!hr(t)?String(t):t,Nn=(e,t="")=>{var s;return St(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ze;class ei{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ze,!t&&ze&&(this.index=(ze.scopes||(ze.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ze;try{return ze=this,t()}finally{ze=s}}}on(){++this._on===1&&(this.prevScope=ze,ze=this)}off(){this._on>0&&--this._on===0&&(ze=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function ti(){return ze}let ge;const Ln=new WeakSet;class wr{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ze&&ze.active&&ze.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ln.has(this)&&(Ln.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Io(this),Sr(this);const t=ge,s=vt;ge=this,vt=!0;try{return this.fn()}finally{xr(this),ge=t,vt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)vo(t);this.deps=this.depsTail=void 0,Io(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ln.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wn(this)&&this.run()}get dirty(){return Wn(this)}}let kr=0,Cs,Ss;function Cr(e,t=!1){if(e.flags|=8,t){e.next=Ss,Ss=e;return}e.next=Cs,Cs=e}function uo(){kr++}function fo(){if(--kr>0)return;if(Ss){let t=Ss;for(Ss=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Cs;){let t=Cs;for(Cs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Sr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xr(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),vo(n),si(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Wn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Er(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Er(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ts)||(e.globalVersion=Ts,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Wn(e))))return;e.flags|=2;const t=e.dep,s=ge,n=vt;ge=e,vt=!0;try{Sr(e);const o=e.fn(e._value);(t.version===0||Vt(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{ge=s,vt=n,xr(e),e.flags&=-3}}function vo(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)vo(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function si(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let vt=!0;const Ar=[];function Mt(){Ar.push(vt),vt=!1}function Ft(){const e=Ar.pop();vt=e===void 0?!0:e}function Io(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=ge;ge=void 0;try{t()}finally{ge=s}}}let Ts=0;class ni{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class po{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ge||!vt||ge===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ge)s=this.activeLink=new ni(ge,this),ge.deps?(s.prevDep=ge.depsTail,ge.depsTail.nextDep=s,ge.depsTail=s):ge.deps=ge.depsTail=s,$r(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ge.depsTail,s.nextDep=void 0,ge.depsTail.nextDep=s,ge.depsTail=s,ge.deps===s&&(ge.deps=n)}return s}trigger(t){this.version++,Ts++,this.notify(t)}notify(t){uo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{fo()}}}function $r(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)$r(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const zn=new WeakMap,ts=Symbol(""),Jn=Symbol(""),Is=Symbol("");function Ne(e,t,s){if(vt&&ge){let n=zn.get(e);n||zn.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new po),o.map=n,o.key=s),o.track()}}function Ot(e,t,s,n,o,a){const l=zn.get(e);if(!l){Ts++;return}const c=f=>{f&&f.trigger()};if(uo(),t==="clear")l.forEach(c);else{const f=G(e),m=f&&co(s);if(f&&s==="length"){const v=Number(n);l.forEach((y,C)=>{(C==="length"||C===Is||!St(C)&&C>=v)&&c(y)})}else switch((s!==void 0||l.has(void 0))&&c(l.get(s)),m&&c(l.get(Is)),t){case"add":f?m&&c(l.get("length")):(c(l.get(ts)),ds(e)&&c(l.get(Jn)));break;case"delete":f||(c(l.get(ts)),ds(e)&&c(l.get(Jn)));break;case"set":ds(e)&&c(l.get(ts));break}}fo()}function is(e){const t=de(e);return t===e?t:(Ne(t,"iterate",Is),lt(e)?t:t.map(Re))}function bn(e){return Ne(e=de(e),"iterate",Is),e}const oi={__proto__:null,[Symbol.iterator](){return qn(this,Symbol.iterator,Re)},concat(...e){return is(this).concat(...e.map(t=>G(t)?is(t):t))},entries(){return qn(this,"entries",e=>(e[1]=Re(e[1]),e))},every(e,t){return At(this,"every",e,t,void 0,arguments)},filter(e,t){return At(this,"filter",e,t,s=>s.map(Re),arguments)},find(e,t){return At(this,"find",e,t,Re,arguments)},findIndex(e,t){return At(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return At(this,"findLast",e,t,Re,arguments)},findLastIndex(e,t){return At(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return At(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hn(this,"includes",e)},indexOf(...e){return Hn(this,"indexOf",e)},join(e){return is(this).join(e)},lastIndexOf(...e){return Hn(this,"lastIndexOf",e)},map(e,t){return At(this,"map",e,t,void 0,arguments)},pop(){return ys(this,"pop")},push(...e){return ys(this,"push",e)},reduce(e,...t){return Oo(this,"reduce",e,t)},reduceRight(e,...t){return Oo(this,"reduceRight",e,t)},shift(){return ys(this,"shift")},some(e,t){return At(this,"some",e,t,void 0,arguments)},splice(...e){return ys(this,"splice",e)},toReversed(){return is(this).toReversed()},toSorted(e){return is(this).toSorted(e)},toSpliced(...e){return is(this).toSpliced(...e)},unshift(...e){return ys(this,"unshift",e)},values(){return qn(this,"values",Re)}};function qn(e,t,s){const n=bn(e),o=n[t]();return n!==e&&!lt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const ri=Array.prototype;function At(e,t,s,n,o,a){const l=bn(e),c=l!==e&&!lt(e),f=l[t];if(f!==ri[t]){const y=f.apply(e,a);return c?Re(y):y}let m=s;l!==e&&(c?m=function(y,C){return s.call(this,Re(y),C,e)}:s.length>2&&(m=function(y,C){return s.call(this,y,C,e)}));const v=f.call(l,m,n);return c&&o?o(v):v}function Oo(e,t,s,n){const o=bn(e);let a=s;return o!==e&&(lt(e)?s.length>3&&(a=function(l,c,f){return s.call(this,l,c,f,e)}):a=function(l,c,f){return s.call(this,l,Re(c),f,e)}),o[t](a,...n)}function Hn(e,t,s){const n=de(e);Ne(n,"iterate",Is);const o=n[t](...s);return(o===-1||o===!1)&&go(s[0])?(s[0]=de(s[0]),n[t](...s)):o}function ys(e,t,s=[]){Mt(),uo();const n=de(e)[t].apply(e,s);return fo(),Ft(),n}const ai=ao("__proto__,__v_isRef,__isVue"),Tr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function ii(e){St(e)||(e=String(e));const t=de(this);return Ne(t,"has",e),t.hasOwnProperty(e)}class Ir{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?gi:Fr:a?Mr:Pr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=G(t);if(!o){let f;if(l&&(f=oi[s]))return f;if(s==="hasOwnProperty")return ii}const c=Reflect.get(t,s,Le(t)?t:n);if((St(s)?Tr.has(s):ai(s))||(o||Ne(t,"get",s),a))return c;if(Le(c)){const f=l&&co(s)?c:c.value;return o&&pe(f)?Qn(f):f}return pe(c)?o?Qn(c):Os(c):c}}class Or extends Ir{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];if(!this._isShallow){const f=Kt(a);if(!lt(n)&&!Kt(n)&&(a=de(a),n=de(n)),!G(t)&&Le(a)&&!Le(n))return f||(a.value=n),!0}const l=G(t)&&co(s)?Number(s)<t.length:fe(t,s),c=Reflect.set(t,s,n,Le(t)?t:o);return t===de(o)&&(l?Vt(n,a)&&Ot(t,"set",s,n):Ot(t,"add",s,n)),c}deleteProperty(t,s){const n=fe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Ot(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!St(s)||!Tr.has(s))&&Ne(t,"has",s),n}ownKeys(t){return Ne(t,"iterate",G(t)?"length":ts),Reflect.ownKeys(t)}}class li extends Ir{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const ci=new Or,ui=new li,di=new Or(!0);const Xn=e=>e,Vs=e=>Reflect.getPrototypeOf(e);function fi(e,t,s){return function(...n){const o=this.__v_raw,a=de(o),l=ds(a),c=e==="entries"||e===Symbol.iterator&&l,f=e==="keys"&&l,m=o[e](...n),v=s?Xn:t?Zs:Re;return!t&&Ne(a,"iterate",f?Jn:ts),{next(){const{value:y,done:C}=m.next();return C?{value:y,done:C}:{value:c?[v(y[0]),v(y[1])]:v(y),done:C}},[Symbol.iterator](){return this}}}}function Bs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vi(e,t){const s={get(o){const a=this.__v_raw,l=de(a),c=de(o);e||(Vt(o,c)&&Ne(l,"get",o),Ne(l,"get",c));const{has:f}=Vs(l),m=t?Xn:e?Zs:Re;if(f.call(l,o))return m(a.get(o));if(f.call(l,c))return m(a.get(c));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Ne(de(o),"iterate",ts),o.size},has(o){const a=this.__v_raw,l=de(a),c=de(o);return e||(Vt(o,c)&&Ne(l,"has",o),Ne(l,"has",c)),o===c?a.has(o):a.has(o)||a.has(c)},forEach(o,a){const l=this,c=l.__v_raw,f=de(c),m=t?Xn:e?Zs:Re;return!e&&Ne(f,"iterate",ts),c.forEach((v,y)=>o.call(a,m(v),m(y),l))}};return Ue(s,e?{add:Bs("add"),set:Bs("set"),delete:Bs("delete"),clear:Bs("clear")}:{add(o){!t&&!lt(o)&&!Kt(o)&&(o=de(o));const a=de(this);return Vs(a).has.call(a,o)||(a.add(o),Ot(a,"add",o,o)),this},set(o,a){!t&&!lt(a)&&!Kt(a)&&(a=de(a));const l=de(this),{has:c,get:f}=Vs(l);let m=c.call(l,o);m||(o=de(o),m=c.call(l,o));const v=f.call(l,o);return l.set(o,a),m?Vt(a,v)&&Ot(l,"set",o,a):Ot(l,"add",o,a),this},delete(o){const a=de(this),{has:l,get:c}=Vs(a);let f=l.call(a,o);f||(o=de(o),f=l.call(a,o)),c&&c.call(a,o);const m=a.delete(o);return f&&Ot(a,"delete",o,void 0),m},clear(){const o=de(this),a=o.size!==0,l=o.clear();return a&&Ot(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=fi(o,e,t)}),s}function ho(e,t){const s=vi(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(fe(s,o)&&o in n?s:n,o,a)}const pi={get:ho(!1,!1)},hi={get:ho(!1,!0)},mi={get:ho(!0,!1)};const Pr=new WeakMap,Mr=new WeakMap,Fr=new WeakMap,gi=new WeakMap;function yi(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bi(e){return e.__v_skip||!Object.isExtensible(e)?0:yi(Da(e))}function Os(e){return Kt(e)?e:mo(e,!1,ci,pi,Pr)}function _i(e){return mo(e,!1,di,hi,Mr)}function Qn(e){return mo(e,!0,ui,mi,Fr)}function mo(e,t,s,n,o){if(!pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=bi(e);if(a===0)return e;const l=o.get(e);if(l)return l;const c=new Proxy(e,a===2?n:s);return o.set(e,c),c}function fs(e){return Kt(e)?fs(e.__v_raw):!!(e&&e.__v_isReactive)}function Kt(e){return!!(e&&e.__v_isReadonly)}function lt(e){return!!(e&&e.__v_isShallow)}function go(e){return e?!!e.__v_raw:!1}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function wi(e){return!fe(e,"__v_skip")&&Object.isExtensible(e)&&gr(e,"__v_skip",!0),e}const Re=e=>pe(e)?Os(e):e,Zs=e=>pe(e)?Qn(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function M(e){return ki(e,!1)}function ki(e,t){return Le(e)?e:new Ci(e,t)}class Ci{constructor(t,s){this.dep=new po,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:de(t),this._value=s?t:Re(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||lt(t)||Kt(t);t=n?t:de(t),Vt(t,s)&&(this._rawValue=t,this._value=n?t:Re(t),this.dep.trigger())}}function Xt(e){return Le(e)?e.value:e}const Si={get:(e,t,s)=>t==="__v_raw"?e:Xt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return Le(o)&&!Le(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Rr(e){return fs(e)?e:new Proxy(e,Si)}class xi{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new po(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ts-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ge!==this)return Cr(this,!0),!0}get value(){const t=this.dep.track();return Er(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ei(e,t,s=!1){let n,o;return ne(e)?n=e:(n=e.get,o=e.set),new xi(n,o,s)}const Ks={},en=new WeakMap;let Qt;function Ai(e,t=!1,s=Qt){if(s){let n=en.get(s);n||en.set(s,n=[]),n.push(e)}}function $i(e,t,s=he){const{immediate:n,deep:o,once:a,scheduler:l,augmentJob:c,call:f}=s,m=P=>o?P:lt(P)||o===!1||o===0?Pt(P,1):Pt(P);let v,y,C,E,F=!1,N=!1;if(Le(e)?(y=()=>e.value,F=lt(e)):fs(e)?(y=()=>m(e),F=!0):G(e)?(N=!0,F=e.some(P=>fs(P)||lt(P)),y=()=>e.map(P=>{if(Le(P))return P.value;if(fs(P))return m(P);if(ne(P))return f?f(P,2):P()})):ne(e)?t?y=f?()=>f(e,2):e:y=()=>{if(C){Mt();try{C()}finally{Ft()}}const P=Qt;Qt=v;try{return f?f(e,3,[E]):e(E)}finally{Qt=P}}:y=Ct,t&&o){const P=y,D=o===!0?1/0:o;y=()=>Pt(P(),D)}const Z=ti(),L=()=>{v.stop(),Z&&Z.active&&lo(Z.effects,v)};if(a&&t){const P=t;t=(...D)=>{P(...D),L()}}let K=N?new Array(e.length).fill(Ks):Ks;const Y=P=>{if(!(!(v.flags&1)||!v.dirty&&!P))if(t){const D=v.run();if(o||F||(N?D.some((le,Ce)=>Vt(le,K[Ce])):Vt(D,K))){C&&C();const le=Qt;Qt=v;try{const Ce=[D,K===Ks?void 0:N&&K[0]===Ks?[]:K,E];K=D,f?f(t,3,Ce):t(...Ce)}finally{Qt=le}}}else v.run()};return c&&c(Y),v=new wr(y),v.scheduler=l?()=>l(Y,!1):Y,E=P=>Ai(P,!1,v),C=v.onStop=()=>{const P=en.get(v);if(P){if(f)f(P,4);else for(const D of P)D();en.delete(v)}},t?n?Y(!0):K=v.run():l?l(Y.bind(null,!0),!0):v.run(),L.pause=v.pause.bind(v),L.resume=v.resume.bind(v),L.stop=L,L}function Pt(e,t=1/0,s){if(t<=0||!pe(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Le(e))Pt(e.value,t,s);else if(G(e))for(let n=0;n<e.length;n++)Pt(e[n],t,s);else if(pn(e)||ds(e))e.forEach(n=>{Pt(n,t,s)});else if(hr(e)){for(const n in e)Pt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Pt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ns(e,t,s,n){try{return n?e(...n):e()}catch(o){_n(o,t,s)}}function pt(e,t,s,n){if(ne(e)){const o=Ns(e,t,s,n);return o&&vr(o)&&o.catch(a=>{_n(a,t,s)}),o}if(G(e)){const o=[];for(let a=0;a<e.length;a++)o.push(pt(e[a],t,s,n));return o}}function _n(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||he;if(t){let c=t.parent;const f=t.proxy,m=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const v=c.ec;if(v){for(let y=0;y<v.length;y++)if(v[y](e,f,m)===!1)return}c=c.parent}if(a){Mt(),Ns(a,null,10,[e,f,m]),Ft();return}}Ti(e,s,o,n,l)}function Ti(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const Ve=[];let yt=-1;const vs=[];let qt=null,cs=0;const Ur=Promise.resolve();let tn=null;function jr(e){const t=tn||Ur;return e?t.then(this?e.bind(this):e):t}function Ii(e){let t=yt+1,s=Ve.length;for(;t<s;){const n=t+s>>>1,o=Ve[n],a=Ps(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function yo(e){if(!(e.flags&1)){const t=Ps(e),s=Ve[Ve.length-1];!s||!(e.flags&2)&&t>=Ps(s)?Ve.push(e):Ve.splice(Ii(t),0,e),e.flags|=1,Nr()}}function Nr(){tn||(tn=Ur.then(qr))}function Oi(e){G(e)?vs.push(...e):qt&&e.id===-1?qt.splice(cs+1,0,e):e.flags&1||(vs.push(e),e.flags|=1),Nr()}function Po(e,t,s=yt+1){for(;s<Ve.length;s++){const n=Ve[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ve.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Lr(e){if(vs.length){const t=[...new Set(vs)].sort((s,n)=>Ps(s)-Ps(n));if(vs.length=0,qt){qt.push(...t);return}for(qt=t,cs=0;cs<qt.length;cs++){const s=qt[cs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}qt=null,cs=0}}const Ps=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qr(e){try{for(yt=0;yt<Ve.length;yt++){const t=Ve[yt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ns(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;yt<Ve.length;yt++){const t=Ve[yt];t&&(t.flags&=-2)}yt=-1,Ve.length=0,Lr(),tn=null,(Ve.length||vs.length)&&qr()}}let it=null,Hr=null;function sn(e){const t=it;return it=e,Hr=e&&e.type.__scopeId||null,t}function Dr(e,t=it,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&rn(-1);const a=sn(t);let l;try{l=e(...o)}finally{sn(a),n._d&&rn(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Ie(e,t){if(it===null)return e;const s=En(it),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,c,f=he]=t[o];a&&(ne(a)&&(a={mounted:a,updated:a}),a.deep&&Pt(l),n.push({dir:a,instance:s,value:l,oldValue:void 0,arg:c,modifiers:f}))}return e}function Yt(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let l=0;l<o.length;l++){const c=o[l];a&&(c.oldValue=a[l].value);let f=c.dir[n];f&&(Mt(),pt(f,s,8,[e.el,c,e,t]),Ft())}}const Pi=Symbol("_vte"),Vr=e=>e.__isTeleport,It=Symbol("_leaveCb"),Gs=Symbol("_enterCb");function Mi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cn(()=>{e.isMounted=!0}),Xr(()=>{e.isUnmounting=!0}),e}const rt=[Function,Array],Br={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rt,onEnter:rt,onAfterEnter:rt,onEnterCancelled:rt,onBeforeLeave:rt,onLeave:rt,onAfterLeave:rt,onLeaveCancelled:rt,onBeforeAppear:rt,onAppear:rt,onAfterAppear:rt,onAppearCancelled:rt},Kr=e=>{const t=e.subTree;return t.component?Kr(t.component):t},Fi={name:"BaseTransition",props:Br,setup(e,{slots:t}){const s=ya(),n=Mi();return()=>{const o=t.default&&Wr(t.default(),!0);if(!o||!o.length)return;const a=Gr(o),l=de(e),{mode:c}=l;if(n.isLeaving)return Dn(a);const f=Mo(a);if(!f)return Dn(a);let m=Zn(f,l,n,s,y=>m=y);f.type!==Be&&Ms(f,m);let v=s.subTree&&Mo(s.subTree);if(v&&v.type!==Be&&!Zt(v,f)&&Kr(s).type!==Be){let y=Zn(v,l,n,s);if(Ms(v,y),c==="out-in"&&f.type!==Be)return n.isLeaving=!0,y.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete y.afterLeave,v=void 0},Dn(a);c==="in-out"&&f.type!==Be?y.delayLeave=(C,E,F)=>{const N=Yr(n,v);N[String(v.key)]=v,C[It]=()=>{E(),C[It]=void 0,delete m.delayedLeave,v=void 0},m.delayedLeave=()=>{F(),delete m.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return a}}};function Gr(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Be){t=s;break}}return t}const Ri=Fi;function Yr(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Zn(e,t,s,n,o){const{appear:a,mode:l,persisted:c=!1,onBeforeEnter:f,onEnter:m,onAfterEnter:v,onEnterCancelled:y,onBeforeLeave:C,onLeave:E,onAfterLeave:F,onLeaveCancelled:N,onBeforeAppear:Z,onAppear:L,onAfterAppear:K,onAppearCancelled:Y}=t,P=String(e.key),D=Yr(s,e),le=(W,ce)=>{W&&pt(W,n,9,ce)},Ce=(W,ce)=>{const re=ce[1];le(W,ce),G(W)?W.every(U=>U.length<=1)&&re():W.length<=1&&re()},ye={mode:l,persisted:c,beforeEnter(W){let ce=f;if(!s.isMounted)if(a)ce=Z||f;else return;W[It]&&W[It](!0);const re=D[P];re&&Zt(e,re)&&re.el[It]&&re.el[It](),le(ce,[W])},enter(W){let ce=m,re=v,U=y;if(!s.isMounted)if(a)ce=L||m,re=K||v,U=Y||y;else return;let ae=!1;const be=W[Gs]=qe=>{ae||(ae=!0,qe?le(U,[W]):le(re,[W]),ye.delayedLeave&&ye.delayedLeave(),W[Gs]=void 0)};ce?Ce(ce,[W,be]):be()},leave(W,ce){const re=String(e.key);if(W[Gs]&&W[Gs](!0),s.isUnmounting)return ce();le(C,[W]);let U=!1;const ae=W[It]=be=>{U||(U=!0,ce(),be?le(N,[W]):le(F,[W]),W[It]=void 0,D[re]===e&&delete D[re])};D[re]=e,E?Ce(E,[W,ae]):ae()},clone(W){const ce=Zn(W,t,s,n,o);return o&&o(ce),ce}};return ye}function Dn(e){if(wn(e))return e=Gt(e),e.children=null,e}function Mo(e){if(!wn(e))return Vr(e.type)&&e.children?Gr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&ne(s.default))return s.default()}}function Ms(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ms(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wr(e,t=!1,s){let n=[],o=0;for(let a=0;a<e.length;a++){let l=e[a];const c=s==null?l.key:String(s)+String(l.key!=null?l.key:a);l.type===oe?(l.patchFlag&128&&o++,n=n.concat(Wr(l.children,t,c))):(t||l.type!==Be)&&n.push(c!=null?Gt(l,{key:c}):l)}if(o>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function zr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const nn=new WeakMap;function xs(e,t,s,n,o=!1){if(G(e)){e.forEach((F,N)=>xs(F,t&&(G(t)?t[N]:t),s,n,o));return}if(Es(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xs(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?En(n.component):n.el,l=o?null:a,{i:c,r:f}=e,m=t&&t.r,v=c.refs===he?c.refs={}:c.refs,y=c.setupState,C=de(y),E=y===he?fr:F=>fe(C,F);if(m!=null&&m!==f){if(Fo(t),$e(m))v[m]=null,E(m)&&(y[m]=null);else if(Le(m)){m.value=null;const F=t;F.k&&(v[F.k]=null)}}if(ne(f))Ns(f,c,12,[l,v]);else{const F=$e(f),N=Le(f);if(F||N){const Z=()=>{if(e.f){const L=F?E(f)?y[f]:v[f]:f.value;if(o)G(L)&&lo(L,a);else if(G(L))L.includes(a)||L.push(a);else if(F)v[f]=[a],E(f)&&(y[f]=v[f]);else{const K=[a];f.value=K,e.k&&(v[e.k]=K)}}else F?(v[f]=l,E(f)&&(y[f]=l)):N&&(f.value=l,e.k&&(v[e.k]=l))};if(l){const L=()=>{Z(),nn.delete(e)};L.id=-1,nn.set(e,L),Xe(L,s)}else Fo(e),Z()}}}function Fo(e){const t=nn.get(e);t&&(t.flags|=8,nn.delete(e))}gn().requestIdleCallback;gn().cancelIdleCallback;const Es=e=>!!e.type.__asyncLoader,wn=e=>e.type.__isKeepAlive;function Ui(e,t){Jr(e,"a",t)}function ji(e,t){Jr(e,"da",t)}function Jr(e,t,s=Ke){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(kn(t,n,s),s){let o=s.parent;for(;o&&o.parent;)wn(o.parent.vnode)&&Ni(n,t,s,o),o=o.parent}}function Ni(e,t,s,n){const o=kn(t,e,n,!0);Qr(()=>{lo(n[t],o)},s)}function kn(e,t,s=Ke,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{Mt();const c=Ls(s),f=pt(t,s,e,l);return c(),Ft(),f});return n?o.unshift(a):o.push(a),a}}const Rt=e=>(t,s=Ke)=>{(!Rs||e==="sp")&&kn(e,(...n)=>t(...n),s)},Li=Rt("bm"),Cn=Rt("m"),qi=Rt("bu"),Hi=Rt("u"),Xr=Rt("bum"),Qr=Rt("um"),Di=Rt("sp"),Vi=Rt("rtg"),Bi=Rt("rtc");function Ki(e,t=Ke){kn("ec",e,t)}const Gi=Symbol.for("v-ndc");function Ae(e,t,s,n){let o;const a=s,l=G(e);if(l||$e(e)){const c=l&&fs(e);let f=!1,m=!1;c&&(f=!lt(e),m=Kt(e),e=bn(e)),o=new Array(e.length);for(let v=0,y=e.length;v<y;v++)o[v]=t(f?m?Zs(Re(e[v])):Re(e[v]):e[v],v,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a)}else if(pe(e))if(e[Symbol.iterator])o=Array.from(e,(c,f)=>t(c,f,void 0,a));else{const c=Object.keys(e);o=new Array(c.length);for(let f=0,m=c.length;f<m;f++){const v=c[f];o[f]=t(e[v],v,f,a)}}else o=[];return o}const eo=e=>e?ba(e)?En(e):eo(e.parent):null,As=Ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eo(e.parent),$root:e=>eo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ea(e),$forceUpdate:e=>e.f||(e.f=()=>{yo(e.update)}),$nextTick:e=>e.n||(e.n=jr.bind(e.proxy)),$watch:e=>pl.bind(e)}),Vn=(e,t)=>e!==he&&!e.__isScriptSetup&&fe(e,t),Yi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:l,type:c,appContext:f}=e;let m;if(t[0]!=="$"){const E=l[t];if(E!==void 0)switch(E){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(Vn(n,t))return l[t]=1,n[t];if(o!==he&&fe(o,t))return l[t]=2,o[t];if((m=e.propsOptions[0])&&fe(m,t))return l[t]=3,a[t];if(s!==he&&fe(s,t))return l[t]=4,s[t];to&&(l[t]=0)}}const v=As[t];let y,C;if(v)return t==="$attrs"&&Ne(e.attrs,"get",""),v(e);if((y=c.__cssModules)&&(y=y[t]))return y;if(s!==he&&fe(s,t))return l[t]=4,s[t];if(C=f.config.globalProperties,fe(C,t))return C[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return Vn(o,t)?(o[t]=s,!0):n!==he&&fe(n,t)?(n[t]=s,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,propsOptions:a,type:l}},c){let f,m;return!!(s[c]||e!==he&&c[0]!=="$"&&fe(e,c)||Vn(t,c)||(f=a[0])&&fe(f,c)||fe(n,c)||fe(As,c)||fe(o.config.globalProperties,c)||(m=l.__cssModules)&&m[c])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:fe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ro(e){return G(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let to=!0;function Wi(e){const t=ea(e),s=e.proxy,n=e.ctx;to=!1,t.beforeCreate&&Uo(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:c,provide:f,inject:m,created:v,beforeMount:y,mounted:C,beforeUpdate:E,updated:F,activated:N,deactivated:Z,beforeDestroy:L,beforeUnmount:K,destroyed:Y,unmounted:P,render:D,renderTracked:le,renderTriggered:Ce,errorCaptured:ye,serverPrefetch:W,expose:ce,inheritAttrs:re,components:U,directives:ae,filters:be}=t;if(m&&zi(m,n,null),l)for(const ee in l){const J=l[ee];ne(J)&&(n[ee]=J.bind(s))}if(o){const ee=o.call(s,s);pe(ee)&&(e.data=Os(ee))}if(to=!0,a)for(const ee in a){const J=a[ee],Oe=ne(J)?J.bind(s,s):ne(J.get)?J.get.bind(s,s):Ct,Se=!ne(J)&&ne(J.set)?J.set.bind(s):Ct,Te=Q({get:Oe,set:Se});Object.defineProperty(n,ee,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ee=>Te.value=Ee})}if(c)for(const ee in c)Zr(c[ee],n,s,ee);if(f){const ee=ne(f)?f.call(s):f;Reflect.ownKeys(ee).forEach(J=>{tl(J,ee[J])})}v&&Uo(v,e,"c");function _e(ee,J){G(J)?J.forEach(Oe=>ee(Oe.bind(s))):J&&ee(J.bind(s))}if(_e(Li,y),_e(Cn,C),_e(qi,E),_e(Hi,F),_e(Ui,N),_e(ji,Z),_e(Ki,ye),_e(Bi,le),_e(Vi,Ce),_e(Xr,K),_e(Qr,P),_e(Di,W),G(ce))if(ce.length){const ee=e.exposed||(e.exposed={});ce.forEach(J=>{Object.defineProperty(ee,J,{get:()=>s[J],set:Oe=>s[J]=Oe,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===Ct&&(e.render=D),re!=null&&(e.inheritAttrs=re),U&&(e.components=U),ae&&(e.directives=ae),W&&zr(e)}function zi(e,t,s=Ct){G(e)&&(e=so(e));for(const n in e){const o=e[n];let a;pe(o)?"default"in o?a=zs(o.from||n,o.default,!0):a=zs(o.from||n):a=zs(o),Le(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[n]=a}}function Uo(e,t,s){pt(G(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Zr(e,t,s,n){let o=n.includes(".")?va(s,n):()=>s[n];if($e(e)){const a=t[e];ne(a)&&et(o,a)}else if(ne(e))et(o,e.bind(s));else if(pe(e))if(G(e))e.forEach(a=>Zr(a,t,s,n));else{const a=ne(e.handler)?e.handler.bind(s):t[e.handler];ne(a)&&et(o,a,e)}}function ea(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,c=a.get(t);let f;return c?f=c:!o.length&&!s&&!n?f=t:(f={},o.length&&o.forEach(m=>on(f,m,l,!0)),on(f,t,l)),pe(t)&&a.set(t,f),f}function on(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&on(e,a,s,!0),o&&o.forEach(l=>on(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const c=Ji[l]||s&&s[l];e[l]=c?c(e[l],t[l]):t[l]}return e}const Ji={data:jo,props:No,emits:No,methods:ws,computed:ws,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:ws,directives:ws,watch:Qi,provide:jo,inject:Xi};function jo(e,t){return t?e?function(){return Ue(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function Xi(e,t){return ws(so(e),so(t))}function so(e){if(G(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function De(e,t){return e?[...new Set([].concat(e,t))]:t}function ws(e,t){return e?Ue(Object.create(null),e,t):t}function No(e,t){return e?G(e)&&G(t)?[...new Set([...e,...t])]:Ue(Object.create(null),Ro(e),Ro(t??{})):t}function Qi(e,t){if(!e)return t;if(!t)return e;const s=Ue(Object.create(null),e);for(const n in t)s[n]=De(e[n],t[n]);return s}function ta(){return{app:null,config:{isNativeTag:fr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zi=0;function el(e,t){return function(n,o=null){ne(n)||(n=Ue({},n)),o!=null&&!pe(o)&&(o=null);const a=ta(),l=new WeakSet,c=[];let f=!1;const m=a.app={_uid:Zi++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Ul,get config(){return a.config},set config(v){},use(v,...y){return l.has(v)||(v&&ne(v.install)?(l.add(v),v.install(m,...y)):ne(v)&&(l.add(v),v(m,...y))),m},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),m},component(v,y){return y?(a.components[v]=y,m):a.components[v]},directive(v,y){return y?(a.directives[v]=y,m):a.directives[v]},mount(v,y,C){if(!f){const E=m._ceVNode||ke(n,o);return E.appContext=a,C===!0?C="svg":C===!1&&(C=void 0),e(E,v,C),f=!0,m._container=v,v.__vue_app__=m,En(E.component)}},onUnmount(v){c.push(v)},unmount(){f&&(pt(c,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(v,y){return a.provides[v]=y,m},runWithContext(v){const y=ps;ps=m;try{return v()}finally{ps=y}}};return m}}let ps=null;function tl(e,t){if(Ke){let s=Ke.provides;const n=Ke.parent&&Ke.parent.provides;n===s&&(s=Ke.provides=Object.create(n)),s[e]=t}}function zs(e,t,s=!1){const n=ya();if(n||ps){let o=ps?ps._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ne(t)?t.call(n&&n.proxy):t}}const sa={},na=()=>Object.create(sa),oa=e=>Object.getPrototypeOf(e)===sa;function sl(e,t,s,n=!1){const o={},a=na();e.propsDefaults=Object.create(null),ra(e,t,o,a);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:_i(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function nl(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,c=de(o),[f]=e.propsOptions;let m=!1;if((n||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let y=0;y<v.length;y++){let C=v[y];if(Sn(e.emitsOptions,C))continue;const E=t[C];if(f)if(fe(a,C))E!==a[C]&&(a[C]=E,m=!0);else{const F=Bt(C);o[F]=no(f,c,F,E,e,!1)}else E!==a[C]&&(a[C]=E,m=!0)}}}else{ra(e,t,o,a)&&(m=!0);let v;for(const y in c)(!t||!fe(t,y)&&((v=ss(y))===y||!fe(t,v)))&&(f?s&&(s[y]!==void 0||s[v]!==void 0)&&(o[y]=no(f,c,y,void 0,e,!0)):delete o[y]);if(a!==c)for(const y in a)(!t||!fe(t,y))&&(delete a[y],m=!0)}m&&Ot(e.attrs,"set","")}function ra(e,t,s,n){const[o,a]=e.propsOptions;let l=!1,c;if(t)for(let f in t){if(ks(f))continue;const m=t[f];let v;o&&fe(o,v=Bt(f))?!a||!a.includes(v)?s[v]=m:(c||(c={}))[v]=m:Sn(e.emitsOptions,f)||(!(f in n)||m!==n[f])&&(n[f]=m,l=!0)}if(a){const f=de(s),m=c||he;for(let v=0;v<a.length;v++){const y=a[v];s[y]=no(o,f,y,m[y],e,!fe(m,y))}}return l}function no(e,t,s,n,o,a){const l=e[s];if(l!=null){const c=fe(l,"default");if(c&&n===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&ne(f)){const{propsDefaults:m}=o;if(s in m)n=m[s];else{const v=Ls(o);n=m[s]=f.call(null,t),v()}}else n=f;o.ce&&o.ce._setProp(s,n)}l[0]&&(a&&!c?n=!1:l[1]&&(n===""||n===ss(s))&&(n=!0))}return n}const ol=new WeakMap;function aa(e,t,s=!1){const n=s?ol:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,l={},c=[];let f=!1;if(!ne(e)){const v=y=>{f=!0;const[C,E]=aa(y,t,!0);Ue(l,C),E&&c.push(...E)};!s&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!f)return pe(e)&&n.set(e,us),us;if(G(a))for(let v=0;v<a.length;v++){const y=Bt(a[v]);Lo(y)&&(l[y]=he)}else if(a)for(const v in a){const y=Bt(v);if(Lo(y)){const C=a[v],E=l[y]=G(C)||ne(C)?{type:C}:Ue({},C),F=E.type;let N=!1,Z=!0;if(G(F))for(let L=0;L<F.length;++L){const K=F[L],Y=ne(K)&&K.name;if(Y==="Boolean"){N=!0;break}else Y==="String"&&(Z=!1)}else N=ne(F)&&F.name==="Boolean";E[0]=N,E[1]=Z,(N||fe(E,"default"))&&c.push(y)}}const m=[l,c];return pe(e)&&n.set(e,m),m}function Lo(e){return e[0]!=="$"&&!ks(e)}const bo=e=>e==="_"||e==="_ctx"||e==="$stable",_o=e=>G(e)?e.map(_t):[_t(e)],rl=(e,t,s)=>{if(t._n)return t;const n=Dr((...o)=>_o(t(...o)),s);return n._c=!1,n},ia=(e,t,s)=>{const n=e._ctx;for(const o in e){if(bo(o))continue;const a=e[o];if(ne(a))t[o]=rl(o,a,n);else if(a!=null){const l=_o(a);t[o]=()=>l}}},la=(e,t)=>{const s=_o(t);e.slots.default=()=>s},ca=(e,t,s)=>{for(const n in t)(s||!bo(n))&&(e[n]=t[n])},al=(e,t,s)=>{const n=e.slots=na();if(e.vnode.shapeFlag&32){const o=t._;o?(ca(n,t,s),s&&gr(n,"_",o,!0)):ia(t,n)}else t&&la(e,t)},il=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,l=he;if(n.shapeFlag&32){const c=t._;c?s&&c===1?a=!1:ca(o,t,s):(a=!t.$stable,ia(t,o)),l=t}else t&&(la(e,t),l={default:1});if(a)for(const c in o)!bo(c)&&l[c]==null&&delete o[c]},Xe=kl;function ll(e){return cl(e)}function cl(e,t){const s=gn();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:l,createText:c,createComment:f,setText:m,setElementText:v,parentNode:y,nextSibling:C,setScopeId:E=Ct,insertStaticContent:F}=e,N=(p,u,d,h=null,b=null,_=null,$=void 0,I=null,O=!!u.dynamicChildren)=>{if(p===u)return;p&&!Zt(p,u)&&(h=st(p),Ee(p,b,_,!0),p=null),u.patchFlag===-2&&(O=!1,u.dynamicChildren=null);const{type:T,ref:H,shapeFlag:j}=u;switch(T){case xn:Z(p,u,d,h);break;case Be:L(p,u,d,h);break;case Js:p==null&&K(u,d,h,$);break;case oe:U(p,u,d,h,b,_,$,I,O);break;default:j&1?D(p,u,d,h,b,_,$,I,O):j&6?ae(p,u,d,h,b,_,$,I,O):(j&64||j&128)&&T.process(p,u,d,h,b,_,$,I,O,Pe)}H!=null&&b?xs(H,p&&p.ref,_,u||p,!u):H==null&&p&&p.ref!=null&&xs(p.ref,null,_,p,!0)},Z=(p,u,d,h)=>{if(p==null)n(u.el=c(u.children),d,h);else{const b=u.el=p.el;u.children!==p.children&&m(b,u.children)}},L=(p,u,d,h)=>{p==null?n(u.el=f(u.children||""),d,h):u.el=p.el},K=(p,u,d,h)=>{[p.el,p.anchor]=F(p.children,u,d,h,p.el,p.anchor)},Y=({el:p,anchor:u},d,h)=>{let b;for(;p&&p!==u;)b=C(p),n(p,d,h),p=b;n(u,d,h)},P=({el:p,anchor:u})=>{let d;for(;p&&p!==u;)d=C(p),o(p),p=d;o(u)},D=(p,u,d,h,b,_,$,I,O)=>{if(u.type==="svg"?$="svg":u.type==="math"&&($="mathml"),p==null)le(u,d,h,b,_,$,I,O);else{const T=p.el&&p.el._isVueCE?p.el:null;try{T&&T._beginPatch(),W(p,u,b,_,$,I,O)}finally{T&&T._endPatch()}}},le=(p,u,d,h,b,_,$,I)=>{let O,T;const{props:H,shapeFlag:j,transition:q,dirs:B}=p;if(O=p.el=l(p.type,_,H&&H.is,H),j&8?v(O,p.children):j&16&&ye(p.children,O,null,h,b,Bn(p,_),$,I),B&&Yt(p,null,h,"created"),Ce(O,p,p.scopeId,$,h),H){for(const ue in H)ue!=="value"&&!ks(ue)&&a(O,ue,null,H[ue],_,h);"value"in H&&a(O,"value",null,H.value,_),(T=H.onVnodeBeforeMount)&&ht(T,h,p)}B&&Yt(p,null,h,"beforeMount");const te=ul(b,q);te&&q.beforeEnter(O),n(O,u,d),((T=H&&H.onVnodeMounted)||te||B)&&Xe(()=>{T&&ht(T,h,p),te&&q.enter(O),B&&Yt(p,null,h,"mounted")},b)},Ce=(p,u,d,h,b)=>{if(d&&E(p,d),h)for(let _=0;_<h.length;_++)E(p,h[_]);if(b){let _=b.subTree;if(u===_||ha(_.type)&&(_.ssContent===u||_.ssFallback===u)){const $=b.vnode;Ce(p,$,$.scopeId,$.slotScopeIds,b.parent)}}},ye=(p,u,d,h,b,_,$,I,O=0)=>{for(let T=O;T<p.length;T++){const H=p[T]=I?Ht(p[T]):_t(p[T]);N(null,H,u,d,h,b,_,$,I)}},W=(p,u,d,h,b,_,$)=>{const I=u.el=p.el;let{patchFlag:O,dynamicChildren:T,dirs:H}=u;O|=p.patchFlag&16;const j=p.props||he,q=u.props||he;let B;if(d&&Wt(d,!1),(B=q.onVnodeBeforeUpdate)&&ht(B,d,u,p),H&&Yt(u,p,d,"beforeUpdate"),d&&Wt(d,!0),(j.innerHTML&&q.innerHTML==null||j.textContent&&q.textContent==null)&&v(I,""),T?ce(p.dynamicChildren,T,I,d,h,Bn(u,b),_):$||J(p,u,I,null,d,h,Bn(u,b),_,!1),O>0){if(O&16)re(I,j,q,d,b);else if(O&2&&j.class!==q.class&&a(I,"class",null,q.class,b),O&4&&a(I,"style",j.style,q.style,b),O&8){const te=u.dynamicProps;for(let ue=0;ue<te.length;ue++){const ie=te[ue],Fe=j[ie],Me=q[ie];(Me!==Fe||ie==="value")&&a(I,ie,Fe,Me,b,d)}}O&1&&p.children!==u.children&&v(I,u.children)}else!$&&T==null&&re(I,j,q,d,b);((B=q.onVnodeUpdated)||H)&&Xe(()=>{B&&ht(B,d,u,p),H&&Yt(u,p,d,"updated")},h)},ce=(p,u,d,h,b,_,$)=>{for(let I=0;I<u.length;I++){const O=p[I],T=u[I],H=O.el&&(O.type===oe||!Zt(O,T)||O.shapeFlag&198)?y(O.el):d;N(O,T,H,null,h,b,_,$,!0)}},re=(p,u,d,h,b)=>{if(u!==d){if(u!==he)for(const _ in u)!ks(_)&&!(_ in d)&&a(p,_,u[_],null,b,h);for(const _ in d){if(ks(_))continue;const $=d[_],I=u[_];$!==I&&_!=="value"&&a(p,_,I,$,b,h)}"value"in d&&a(p,"value",u.value,d.value,b)}},U=(p,u,d,h,b,_,$,I,O)=>{const T=u.el=p?p.el:c(""),H=u.anchor=p?p.anchor:c("");let{patchFlag:j,dynamicChildren:q,slotScopeIds:B}=u;B&&(I=I?I.concat(B):B),p==null?(n(T,d,h),n(H,d,h),ye(u.children||[],d,H,b,_,$,I,O)):j>0&&j&64&&q&&p.dynamicChildren?(ce(p.dynamicChildren,q,d,b,_,$,I),(u.key!=null||b&&u===b.subTree)&&ua(p,u,!0)):J(p,u,d,H,b,_,$,I,O)},ae=(p,u,d,h,b,_,$,I,O)=>{u.slotScopeIds=I,p==null?u.shapeFlag&512?b.ctx.activate(u,d,h,$,O):be(u,d,h,b,_,$,O):qe(p,u,O)},be=(p,u,d,h,b,_,$)=>{const I=p.component=Tl(p,h,b);if(wn(p)&&(I.ctx.renderer=Pe),Il(I,!1,$),I.asyncDep){if(b&&b.registerDep(I,_e,$),!p.el){const O=I.subTree=ke(Be);L(null,O,u,d),p.placeholder=O.el}}else _e(I,p,u,d,b,_,$)},qe=(p,u,d)=>{const h=u.component=p.component;if(_l(p,u,d))if(h.asyncDep&&!h.asyncResolved){ee(h,u,d);return}else h.next=u,h.update();else u.el=p.el,h.vnode=u},_e=(p,u,d,h,b,_,$)=>{const I=()=>{if(p.isMounted){let{next:j,bu:q,u:B,parent:te,vnode:ue}=p;{const Je=da(p);if(Je){j&&(j.el=ue.el,ee(p,j,$)),Je.asyncDep.then(()=>{p.isUnmounted||I()});return}}let ie=j,Fe;Wt(p,!1),j?(j.el=ue.el,ee(p,j,$)):j=ue,q&&Ws(q),(Fe=j.props&&j.props.onVnodeBeforeUpdate)&&ht(Fe,te,j,ue),Wt(p,!0);const Me=Ho(p),Ge=p.subTree;p.subTree=Me,N(Ge,Me,y(Ge.el),st(Ge),p,b,_),j.el=Me.el,ie===null&&wl(p,Me.el),B&&Xe(B,b),(Fe=j.props&&j.props.onVnodeUpdated)&&Xe(()=>ht(Fe,te,j,ue),b)}else{let j;const{el:q,props:B}=u,{bm:te,m:ue,parent:ie,root:Fe,type:Me}=p,Ge=Es(u);Wt(p,!1),te&&Ws(te),!Ge&&(j=B&&B.onVnodeBeforeMount)&&ht(j,ie,u),Wt(p,!0);{Fe.ce&&Fe.ce._def.shadowRoot!==!1&&Fe.ce._injectChildStyle(Me);const Je=p.subTree=Ho(p);N(null,Je,d,h,p,b,_),u.el=Je.el}if(ue&&Xe(ue,b),!Ge&&(j=B&&B.onVnodeMounted)){const Je=u;Xe(()=>ht(j,ie,Je),b)}(u.shapeFlag&256||ie&&Es(ie.vnode)&&ie.vnode.shapeFlag&256)&&p.a&&Xe(p.a,b),p.isMounted=!0,u=d=h=null}};p.scope.on();const O=p.effect=new wr(I);p.scope.off();const T=p.update=O.run.bind(O),H=p.job=O.runIfDirty.bind(O);H.i=p,H.id=p.uid,O.scheduler=()=>yo(H),Wt(p,!0),T()},ee=(p,u,d)=>{u.component=p;const h=p.vnode.props;p.vnode=u,p.next=null,nl(p,u.props,h,d),il(p,u.children,d),Mt(),Po(p),Ft()},J=(p,u,d,h,b,_,$,I,O=!1)=>{const T=p&&p.children,H=p?p.shapeFlag:0,j=u.children,{patchFlag:q,shapeFlag:B}=u;if(q>0){if(q&128){Se(T,j,d,h,b,_,$,I,O);return}else if(q&256){Oe(T,j,d,h,b,_,$,I,O);return}}B&8?(H&16&&ut(T,b,_),j!==T&&v(d,j)):H&16?B&16?Se(T,j,d,h,b,_,$,I,O):ut(T,b,_,!0):(H&8&&v(d,""),B&16&&ye(j,d,h,b,_,$,I,O))},Oe=(p,u,d,h,b,_,$,I,O)=>{p=p||us,u=u||us;const T=p.length,H=u.length,j=Math.min(T,H);let q;for(q=0;q<j;q++){const B=u[q]=O?Ht(u[q]):_t(u[q]);N(p[q],B,d,null,b,_,$,I,O)}T>H?ut(p,b,_,!0,!1,j):ye(u,d,h,b,_,$,I,O,j)},Se=(p,u,d,h,b,_,$,I,O)=>{let T=0;const H=u.length;let j=p.length-1,q=H-1;for(;T<=j&&T<=q;){const B=p[T],te=u[T]=O?Ht(u[T]):_t(u[T]);if(Zt(B,te))N(B,te,d,null,b,_,$,I,O);else break;T++}for(;T<=j&&T<=q;){const B=p[j],te=u[q]=O?Ht(u[q]):_t(u[q]);if(Zt(B,te))N(B,te,d,null,b,_,$,I,O);else break;j--,q--}if(T>j){if(T<=q){const B=q+1,te=B<H?u[B].el:h;for(;T<=q;)N(null,u[T]=O?Ht(u[T]):_t(u[T]),d,te,b,_,$,I,O),T++}}else if(T>q)for(;T<=j;)Ee(p[T],b,_,!0),T++;else{const B=T,te=T,ue=new Map;for(T=te;T<=q;T++){const je=u[T]=O?Ht(u[T]):_t(u[T]);je.key!=null&&ue.set(je.key,T)}let ie,Fe=0;const Me=q-te+1;let Ge=!1,Je=0;const ft=new Array(Me);for(T=0;T<Me;T++)ft[T]=0;for(T=B;T<=j;T++){const je=p[T];if(Fe>=Me){Ee(je,b,_,!0);continue}let nt;if(je.key!=null)nt=ue.get(je.key);else for(ie=te;ie<=q;ie++)if(ft[ie-te]===0&&Zt(je,u[ie])){nt=ie;break}nt===void 0?Ee(je,b,_,!0):(ft[nt-te]=T+1,nt>=Je?Je=nt:Ge=!0,N(je,u[nt],d,null,b,_,$,I,O),Fe++)}const ms=Ge?dl(ft):us;for(ie=ms.length-1,T=Me-1;T>=0;T--){const je=te+T,nt=u[je],ns=u[je+1],ot=je+1<H?ns.el||ns.placeholder:h;ft[T]===0?N(null,nt,d,ot,b,_,$,I,O):Ge&&(ie<0||T!==ms[ie]?Te(nt,d,ot,2):ie--)}}},Te=(p,u,d,h,b=null)=>{const{el:_,type:$,transition:I,children:O,shapeFlag:T}=p;if(T&6){Te(p.component.subTree,u,d,h);return}if(T&128){p.suspense.move(u,d,h);return}if(T&64){$.move(p,u,d,Pe);return}if($===oe){n(_,u,d);for(let j=0;j<O.length;j++)Te(O[j],u,d,h);n(p.anchor,u,d);return}if($===Js){Y(p,u,d);return}if(h!==2&&T&1&&I)if(h===0)I.beforeEnter(_),n(_,u,d),Xe(()=>I.enter(_),b);else{const{leave:j,delayLeave:q,afterLeave:B}=I,te=()=>{p.ctx.isUnmounted?o(_):n(_,u,d)},ue=()=>{_._isLeaving&&_[It](!0),j(_,()=>{te(),B&&B()})};q?q(_,te,ue):ue()}else n(_,u,d)},Ee=(p,u,d,h=!1,b=!1)=>{const{type:_,props:$,ref:I,children:O,dynamicChildren:T,shapeFlag:H,patchFlag:j,dirs:q,cacheIndex:B}=p;if(j===-2&&(b=!1),I!=null&&(Mt(),xs(I,null,d,p,!0),Ft()),B!=null&&(u.renderCache[B]=void 0),H&256){u.ctx.deactivate(p);return}const te=H&1&&q,ue=!Es(p);let ie;if(ue&&(ie=$&&$.onVnodeBeforeUnmount)&&ht(ie,u,p),H&6)Ut(p.component,d,h);else{if(H&128){p.suspense.unmount(d,h);return}te&&Yt(p,null,u,"beforeUnmount"),H&64?p.type.remove(p,u,d,Pe,h):T&&!T.hasOnce&&(_!==oe||j>0&&j&64)?ut(T,u,d,!1,!0):(_===oe&&j&384||!b&&H&16)&&ut(O,u,d),h&&He(p)}(ue&&(ie=$&&$.onVnodeUnmounted)||te)&&Xe(()=>{ie&&ht(ie,u,p),te&&Yt(p,null,u,"unmounted")},d)},He=p=>{const{type:u,el:d,anchor:h,transition:b}=p;if(u===oe){tt(d,h);return}if(u===Js){P(p);return}const _=()=>{o(d),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(p.shapeFlag&1&&b&&!b.persisted){const{leave:$,delayLeave:I}=b,O=()=>$(d,_);I?I(p.el,_,O):O()}else _()},tt=(p,u)=>{let d;for(;p!==u;)d=C(p),o(p),p=d;o(u)},Ut=(p,u,d)=>{const{bum:h,scope:b,job:_,subTree:$,um:I,m:O,a:T}=p;qo(O),qo(T),h&&Ws(h),b.stop(),_&&(_.flags|=8,Ee($,p,u,d)),I&&Xe(I,u),Xe(()=>{p.isUnmounted=!0},u)},ut=(p,u,d,h=!1,b=!1,_=0)=>{for(let $=_;$<p.length;$++)Ee(p[$],u,d,h,b)},st=p=>{if(p.shapeFlag&6)return st(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const u=C(p.anchor||p.el),d=u&&u[Pi];return d?C(d):u};let dt=!1;const xt=(p,u,d)=>{p==null?u._vnode&&Ee(u._vnode,null,null,!0):N(u._vnode||null,p,u,null,null,null,d),u._vnode=p,dt||(dt=!0,Po(),Lr(),dt=!1)},Pe={p:N,um:Ee,m:Te,r:He,mt:be,mc:ye,pc:J,pbc:ce,n:st,o:e};return{render:xt,hydrate:void 0,createApp:el(xt)}}function Bn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Wt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ul(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ua(e,t,s=!1){const n=e.children,o=t.children;if(G(n)&&G(o))for(let a=0;a<n.length;a++){const l=n[a];let c=o[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[a]=Ht(o[a]),c.el=l.el),!s&&c.patchFlag!==-2&&ua(l,c)),c.type===xn&&c.patchFlag!==-1&&(c.el=l.el),c.type===Be&&!c.el&&(c.el=l.el)}}function dl(e){const t=e.slice(),s=[0];let n,o,a,l,c;const f=e.length;for(n=0;n<f;n++){const m=e[n];if(m!==0){if(o=s[s.length-1],e[o]<m){t[n]=o,s.push(n);continue}for(a=0,l=s.length-1;a<l;)c=a+l>>1,e[s[c]]<m?a=c+1:l=c;m<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function da(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:da(t)}function qo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fl=Symbol.for("v-scx"),vl=()=>zs(fl);function et(e,t,s){return fa(e,t,s)}function fa(e,t,s=he){const{immediate:n,deep:o,flush:a,once:l}=s,c=Ue({},s),f=t&&n||!t&&a!=="post";let m;if(Rs){if(a==="sync"){const E=vl();m=E.__watcherHandles||(E.__watcherHandles=[])}else if(!f){const E=()=>{};return E.stop=Ct,E.resume=Ct,E.pause=Ct,E}}const v=Ke;c.call=(E,F,N)=>pt(E,v,F,N);let y=!1;a==="post"?c.scheduler=E=>{Xe(E,v&&v.suspense)}:a!=="sync"&&(y=!0,c.scheduler=(E,F)=>{F?E():yo(E)}),c.augmentJob=E=>{t&&(E.flags|=4),y&&(E.flags|=2,v&&(E.id=v.uid,E.i=v))};const C=$i(e,t,c);return Rs&&(m?m.push(C):f&&C()),C}function pl(e,t,s){const n=this.proxy,o=$e(e)?e.includes(".")?va(n,e):()=>n[e]:e.bind(n,n);let a;ne(t)?a=t:(a=t.handler,s=t);const l=Ls(this),c=fa(o,a.bind(n),s);return l(),c}function va(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const hl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Bt(t)}Modifiers`]||e[`${ss(t)}Modifiers`];function ml(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||he;let o=s;const a=t.startsWith("update:"),l=a&&hl(n,t.slice(7));l&&(l.trim&&(o=s.map(v=>$e(v)?v.trim():v)),l.number&&(o=s.map(mn)));let c,f=n[c=jn(t)]||n[c=jn(Bt(t))];!f&&a&&(f=n[c=jn(ss(t))]),f&&pt(f,e,6,o);const m=n[c+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,pt(m,e,6,o)}}const gl=new WeakMap;function pa(e,t,s=!1){const n=s?gl:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let l={},c=!1;if(!ne(e)){const f=m=>{const v=pa(m,t,!0);v&&(c=!0,Ue(l,v))};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!c?(pe(e)&&n.set(e,null),null):(G(a)?a.forEach(f=>l[f]=null):Ue(l,a),pe(e)&&n.set(e,l),l)}function Sn(e,t){return!e||!vn(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,ss(t))||fe(e,t))}function Ho(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:l,attrs:c,emit:f,render:m,renderCache:v,props:y,data:C,setupState:E,ctx:F,inheritAttrs:N}=e,Z=sn(e);let L,K;try{if(s.shapeFlag&4){const P=o||n,D=P;L=_t(m.call(D,P,v,y,E,C,F)),K=c}else{const P=t;L=_t(P.length>1?P(y,{attrs:c,slots:l,emit:f}):P(y,null)),K=t.props?c:yl(c)}}catch(P){$s.length=0,_n(P,e,1),L=ke(Be)}let Y=L;if(K&&N!==!1){const P=Object.keys(K),{shapeFlag:D}=Y;P.length&&D&7&&(a&&P.some(io)&&(K=bl(K,a)),Y=Gt(Y,K,!1,!0))}return s.dirs&&(Y=Gt(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(s.dirs):s.dirs),s.transition&&Ms(Y,s.transition),L=Y,sn(Z),L}const yl=e=>{let t;for(const s in e)(s==="class"||s==="style"||vn(s))&&((t||(t={}))[s]=e[s]);return t},bl=(e,t)=>{const s={};for(const n in e)(!io(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function _l(e,t,s){const{props:n,children:o,component:a}=e,{props:l,children:c,patchFlag:f}=t,m=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&f>=0){if(f&1024)return!0;if(f&16)return n?Do(n,l,m):!!l;if(f&8){const v=t.dynamicProps;for(let y=0;y<v.length;y++){const C=v[y];if(l[C]!==n[C]&&!Sn(m,C))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?Do(n,l,m):!0:!!l;return!1}function Do(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!Sn(s,a))return!0}return!1}function wl({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const ha=e=>e.__isSuspense;function kl(e,t){t&&t.pendingBranch?G(e)?t.effects.push(...e):t.effects.push(e):Oi(e)}const oe=Symbol.for("v-fgt"),xn=Symbol.for("v-txt"),Be=Symbol.for("v-cmt"),Js=Symbol.for("v-stc"),$s=[];let Ze=null;function w(e=!1){$s.push(Ze=e?null:[])}function Cl(){$s.pop(),Ze=$s[$s.length-1]||null}let Fs=1;function rn(e,t=!1){Fs+=e,e<0&&Ze&&t&&(Ze.hasOnce=!0)}function ma(e){return e.dynamicChildren=Fs>0?Ze||us:null,Cl(),Fs>0&&Ze&&Ze.push(e),e}function k(e,t,s,n,o,a){return ma(r(e,t,s,n,o,a,!0))}function an(e,t,s,n,o){return ma(ke(e,t,s,n,o,!0))}function ln(e){return e?e.__v_isVNode===!0:!1}function Zt(e,t){return e.type===t.type&&e.key===t.key}const ga=({key:e})=>e??null,Xs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?$e(e)||Le(e)||ne(e)?{i:it,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===oe?0:1,l=!1,c=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ga(t),ref:t&&Xs(t),scopeId:Hr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:it};return c?(wo(f,s),a&128&&e.normalize(f)):s&&(f.shapeFlag|=$e(s)?8:16),Fs>0&&!l&&Ze&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Ze.push(f),f}const ke=Sl;function Sl(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===Gi)&&(e=Be),ln(e)){const c=Gt(e,t,!0);return s&&wo(c,s),Fs>0&&!a&&Ze&&(c.shapeFlag&6?Ze[Ze.indexOf(e)]=c:Ze.push(c)),c.patchFlag=-2,c}if(Fl(e)&&(e=e.__vccOpts),t){t=xl(t);let{class:c,style:f}=t;c&&!$e(c)&&(t.class=se(c)),pe(f)&&(go(f)&&!G(f)&&(f=Ue({},f)),t.style=bt(f))}const l=$e(e)?1:ha(e)?128:Vr(e)?64:pe(e)?4:ne(e)?2:0;return r(e,t,s,n,o,l,a,!0)}function xl(e){return e?go(e)||oa(e)?Ue({},e):e:null}function Gt(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:l,children:c,transition:f}=e,m=t?El(o||{},t):o,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&ga(m),ref:t&&t.ref?s&&a?G(a)?a.concat(Xs(t)):[a,Xs(t)]:Xs(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gt(e.ssContent),ssFallback:e.ssFallback&&Gt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&n&&Ms(v,f.clone(v)),v}function X(e=" ",t=0){return ke(xn,null,e,t)}function Qe(e,t){const s=ke(Js,null,e);return s.staticCount=t,s}function V(e="",t=!1){return t?(w(),an(Be,null,e)):ke(Be,null,e)}function _t(e){return e==null||typeof e=="boolean"?ke(Be):G(e)?ke(oe,null,e.slice()):ln(e)?Ht(e):ke(xn,null,String(e))}function Ht(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gt(e)}function wo(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(G(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),wo(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!oa(t)?t._ctx=it:o===3&&it&&(it.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:it},s=32):(t=String(t),n&64?(s=16,t=[X(t)]):s=8);e.children=t,e.shapeFlag|=s}function El(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=se([t.class,n.class]));else if(o==="style")t.style=bt([t.style,n.style]);else if(vn(o)){const a=t[o],l=n[o];l&&a!==l&&!(G(a)&&a.includes(l))&&(t[o]=a?[].concat(a,l):l)}else o!==""&&(t[o]=n[o])}return t}function ht(e,t,s,n=null){pt(e,t,7,[s,n])}const Al=ta();let $l=0;function Tl(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Al,a={uid:$l++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ei(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:aa(n,o),emitsOptions:pa(n,o),emit:null,emitted:null,propsDefaults:he,inheritAttrs:n.inheritAttrs,ctx:he,data:he,props:he,attrs:he,slots:he,refs:he,setupState:he,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=ml.bind(null,a),e.ce&&e.ce(a),a}let Ke=null;const ya=()=>Ke||it;let cn,oo;{const e=gn(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};cn=t("__VUE_INSTANCE_SETTERS__",s=>Ke=s),oo=t("__VUE_SSR_SETTERS__",s=>Rs=s)}const Ls=e=>{const t=Ke;return cn(e),e.scope.on(),()=>{e.scope.off(),cn(t)}},Vo=()=>{Ke&&Ke.scope.off(),cn(null)};function ba(e){return e.vnode.shapeFlag&4}let Rs=!1;function Il(e,t=!1,s=!1){t&&oo(t);const{props:n,children:o}=e.vnode,a=ba(e);sl(e,n,a,t),al(e,o,s||t);const l=a?Ol(e,t):void 0;return t&&oo(!1),l}function Ol(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Yi);const{setup:n}=s;if(n){Mt();const o=e.setupContext=n.length>1?Ml(e):null,a=Ls(e),l=Ns(n,e,0,[e.props,o]),c=vr(l);if(Ft(),a(),(c||e.sp)&&!Es(e)&&zr(e),c){if(l.then(Vo,Vo),t)return l.then(f=>{Bo(e,f)}).catch(f=>{_n(f,e,0)});e.asyncDep=l}else Bo(e,l)}else _a(e)}function Bo(e,t,s){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pe(t)&&(e.setupState=Rr(t)),_a(e)}function _a(e,t,s){const n=e.type;e.render||(e.render=n.render||Ct);{const o=Ls(e);Mt();try{Wi(e)}finally{Ft(),o()}}}const Pl={get(e,t){return Ne(e,"get",""),e[t]}};function Ml(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Pl),slots:e.slots,emit:e.emit,expose:t}}function En(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Rr(wi(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in As)return As[s](e)},has(t,s){return s in t||s in As}})):e.proxy}function Fl(e){return ne(e)&&"__vccOpts"in e}const Q=(e,t)=>Ei(e,t,Rs);function Rl(e,t,s){try{rn(-1);const n=arguments.length;return n===2?pe(t)&&!G(t)?ln(t)?ke(e,null,[t]):ke(e,t):ke(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&ln(s)&&(s=[s]),ke(e,t,s))}finally{rn(1)}}const Ul="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ro;const Ko=typeof window<"u"&&window.trustedTypes;if(Ko)try{ro=Ko.createPolicy("vue",{createHTML:e=>e})}catch{}const wa=ro?e=>ro.createHTML(e):e=>e,jl="http://www.w3.org/2000/svg",Nl="http://www.w3.org/1998/Math/MathML",Tt=typeof document<"u"?document:null,Go=Tt&&Tt.createElement("template"),Ll={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?Tt.createElementNS(jl,e):t==="mathml"?Tt.createElementNS(Nl,e):s?Tt.createElement(e,{is:s}):Tt.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Tt.createTextNode(e),createComment:e=>Tt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const l=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{Go.innerHTML=wa(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const c=Go.content;if(n==="svg"||n==="mathml"){const f=c.firstChild;for(;f.firstChild;)c.appendChild(f.firstChild);c.removeChild(f)}t.insertBefore(c,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Lt="transition",bs="animation",Us=Symbol("_vtc"),ka={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ql=Ue({},Br,ka),Hl=e=>(e.displayName="Transition",e.props=ql,e),Dl=Hl((e,{slots:t})=>Rl(Ri,Vl(e),t)),zt=(e,t=[])=>{G(e)?e.forEach(s=>s(...t)):e&&e(...t)},Yo=e=>e?G(e)?e.some(t=>t.length>1):e.length>1:!1;function Vl(e){const t={};for(const U in e)U in ka||(t[U]=e[U]);if(e.css===!1)return t;const{name:s="v",type:n,duration:o,enterFromClass:a=`${s}-enter-from`,enterActiveClass:l=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:f=a,appearActiveClass:m=l,appearToClass:v=c,leaveFromClass:y=`${s}-leave-from`,leaveActiveClass:C=`${s}-leave-active`,leaveToClass:E=`${s}-leave-to`}=e,F=Bl(o),N=F&&F[0],Z=F&&F[1],{onBeforeEnter:L,onEnter:K,onEnterCancelled:Y,onLeave:P,onLeaveCancelled:D,onBeforeAppear:le=L,onAppear:Ce=K,onAppearCancelled:ye=Y}=t,W=(U,ae,be,qe)=>{U._enterCancelled=qe,Jt(U,ae?v:c),Jt(U,ae?m:l),be&&be()},ce=(U,ae)=>{U._isLeaving=!1,Jt(U,y),Jt(U,E),Jt(U,C),ae&&ae()},re=U=>(ae,be)=>{const qe=U?Ce:K,_e=()=>W(ae,U,be);zt(qe,[ae,_e]),Wo(()=>{Jt(ae,U?f:a),$t(ae,U?v:c),Yo(qe)||zo(ae,n,N,_e)})};return Ue(t,{onBeforeEnter(U){zt(L,[U]),$t(U,a),$t(U,l)},onBeforeAppear(U){zt(le,[U]),$t(U,f),$t(U,m)},onEnter:re(!1),onAppear:re(!0),onLeave(U,ae){U._isLeaving=!0;const be=()=>ce(U,ae);$t(U,y),U._enterCancelled?($t(U,C),Qo(U)):(Qo(U),$t(U,C)),Wo(()=>{U._isLeaving&&(Jt(U,y),$t(U,E),Yo(P)||zo(U,n,Z,be))}),zt(P,[U,be])},onEnterCancelled(U){W(U,!1,void 0,!0),zt(Y,[U])},onAppearCancelled(U){W(U,!0,void 0,!0),zt(ye,[U])},onLeaveCancelled(U){ce(U),zt(D,[U])}})}function Bl(e){if(e==null)return null;if(pe(e))return[Kn(e.enter),Kn(e.leave)];{const t=Kn(e);return[t,t]}}function Kn(e){return Ka(e)}function $t(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Us]||(e[Us]=new Set)).add(t)}function Jt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[Us];s&&(s.delete(t),s.size||(e[Us]=void 0))}function Wo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Kl=0;function zo(e,t,s,n){const o=e._endId=++Kl,a=()=>{o===e._endId&&n()};if(s!=null)return setTimeout(a,s);const{type:l,timeout:c,propCount:f}=Gl(e,t);if(!l)return n();const m=l+"end";let v=0;const y=()=>{e.removeEventListener(m,C),a()},C=E=>{E.target===e&&++v>=f&&y()};setTimeout(()=>{v<f&&y()},c+1),e.addEventListener(m,C)}function Gl(e,t){const s=window.getComputedStyle(e),n=F=>(s[F]||"").split(", "),o=n(`${Lt}Delay`),a=n(`${Lt}Duration`),l=Jo(o,a),c=n(`${bs}Delay`),f=n(`${bs}Duration`),m=Jo(c,f);let v=null,y=0,C=0;t===Lt?l>0&&(v=Lt,y=l,C=a.length):t===bs?m>0&&(v=bs,y=m,C=f.length):(y=Math.max(l,m),v=y>0?l>m?Lt:bs:null,C=v?v===Lt?a.length:f.length:0);const E=v===Lt&&/\b(?:transform|all)(?:,|$)/.test(n(`${Lt}Property`).toString());return{type:v,timeout:y,propCount:C,hasTransform:E}}function Jo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Xo(s)+Xo(e[n])))}function Xo(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Qo(e){return(e?e.ownerDocument:document).body.offsetHeight}function Yl(e,t,s){const n=e[Us];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const un=Symbol("_vod"),Ca=Symbol("_vsh"),Sa={name:"show",beforeMount(e,{value:t},{transition:s}){e[un]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):_s(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),_s(e,!0),n.enter(e)):n.leave(e,()=>{_s(e,!1)}):_s(e,t))},beforeUnmount(e,{value:t}){_s(e,t)}};function _s(e,t){e.style.display=t?e[un]:"none",e[Ca]=!t}const Wl=Symbol(""),zl=/(?:^|;)\s*display\s*:/;function Jl(e,t,s){const n=e.style,o=$e(s);let a=!1;if(s&&!o){if(t)if($e(t))for(const l of t.split(";")){const c=l.slice(0,l.indexOf(":")).trim();s[c]==null&&Qs(n,c,"")}else for(const l in t)s[l]==null&&Qs(n,l,"");for(const l in s)l==="display"&&(a=!0),Qs(n,l,s[l])}else if(o){if(t!==s){const l=n[Wl];l&&(s+=";"+l),n.cssText=s,a=zl.test(s)}}else t&&e.removeAttribute("style");un in e&&(e[un]=a?n.display:"",e[Ca]&&(n.display="none"))}const Zo=/\s*!important$/;function Qs(e,t,s){if(G(s))s.forEach(n=>Qs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Xl(e,t);Zo.test(s)?e.setProperty(ss(n),s.replace(Zo,""),"important"):e[n]=s}}const er=["Webkit","Moz","ms"],Gn={};function Xl(e,t){const s=Gn[t];if(s)return s;let n=Bt(t);if(n!=="filter"&&n in e)return Gn[t]=n;n=mr(n);for(let o=0;o<er.length;o++){const a=er[o]+n;if(a in e)return Gn[t]=a}return t}const tr="http://www.w3.org/1999/xlink";function sr(e,t,s,n,o,a=Xa(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(tr,t.slice(6,t.length)):e.setAttributeNS(tr,t,s):s==null||a&&!yr(s)?e.removeAttribute(t):e.setAttribute(t,a?"":St(s)?String(s):s)}function nr(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?wa(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?e.getAttribute("value")||"":e.value,f=s==null?e.type==="checkbox"?"on":"":String(s);(c!==f||!("_value"in e))&&(e.value=f),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const c=typeof e[t];c==="boolean"?s=yr(s):s==null&&c==="string"?(s="",l=!0):c==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function es(e,t,s,n){e.addEventListener(t,s,n)}function Ql(e,t,s,n){e.removeEventListener(t,s,n)}const or=Symbol("_vei");function Zl(e,t,s,n,o=null){const a=e[or]||(e[or]={}),l=a[t];if(n&&l)l.value=n;else{const[c,f]=ec(t);if(n){const m=a[t]=nc(n,o);es(e,c,m,f)}else l&&(Ql(e,c,l,f),a[t]=void 0)}}const rr=/(?:Once|Passive|Capture)$/;function ec(e){let t;if(rr.test(e)){t={};let n;for(;n=e.match(rr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ss(e.slice(2)),t]}let Yn=0;const tc=Promise.resolve(),sc=()=>Yn||(tc.then(()=>Yn=0),Yn=Date.now());function nc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;pt(oc(n,s.value),t,5,[n])};return s.value=e,s.attached=sc(),s}function oc(e,t){if(G(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const ar=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,rc=(e,t,s,n,o,a)=>{const l=o==="svg";t==="class"?Yl(e,n,l):t==="style"?Jl(e,s,n):vn(t)?io(t)||Zl(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ac(e,t,n,l))?(nr(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sr(e,t,n,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!$e(n))?nr(e,Bt(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),sr(e,t,n,l))};function ac(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ar(t)&&ne(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return ar(t)&&$e(s)?!1:t in e}const dn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return G(t)?s=>Ws(t,s):t};function ic(e){e.target.composing=!0}function ir(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const hs=Symbol("_assign");function lr(e,t,s){return t&&(e=e.trim()),s&&(e=mn(e)),e}const Dt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[hs]=dn(o);const a=n||o.props&&o.props.type==="number";es(e,t?"change":"input",l=>{l.target.composing||e[hs](lr(e.value,s,a))}),(s||a)&&es(e,"change",()=>{e.value=lr(e.value,s,a)}),t||(es(e,"compositionstart",ic),es(e,"compositionend",ir),es(e,"change",ir))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},l){if(e[hs]=dn(l),e.composing)return;const c=(a||e.type==="number")&&!/^0\d/.test(e.value)?mn(e.value):e.value,f=t??"";c!==f&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===f)||(e.value=f))}},kt={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=pn(t);es(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?mn(fn(l)):fn(l));e[hs](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,jr(()=>{e._assigning=!1})}),e[hs]=dn(n)},mounted(e,{value:t}){cr(e,t)},beforeUpdate(e,t,s){e[hs]=dn(s)},updated(e,{value:t}){e._assigning||cr(e,t)}};function cr(e,t){const s=e.multiple,n=G(t);if(!(s&&!n&&!pn(t))){for(let o=0,a=e.options.length;o<a;o++){const l=e.options[o],c=fn(l);if(s)if(n){const f=typeof c;f==="string"||f==="number"?l.selected=t.some(m=>String(m)===String(c)):l.selected=Za(t,c)>-1}else l.selected=t.has(c);else if(yn(fn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function fn(e){return"_value"in e?e._value:e.value}const lc=["ctrl","shift","alt","meta"],cc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>lc.some(s=>e[`${s}Key`]&&!t.includes(s))},wt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let l=0;l<t.length;l++){const c=cc[t[l]];if(c&&c(o,t))return}return e(o,...a)})},uc=Ue({patchProp:rc},Ll);let ur;function dc(){return ur||(ur=ll(uc))}const fc=(...e)=>{const t=dc().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=pc(n);if(!o)return;const a=t._component;!ne(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,vc(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function vc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function pc(e){return $e(e)?document.querySelector(e):e}const ct=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},hc={class:"loading-container"},mc={__name:"LoadingState",props:{message:{type:String,default:"Loading student data..."}},setup(e){return(t,s)=>(w(),k("div",hc,[s[0]||(s[0]=r("div",{class:"spinner"},null,-1)),r("p",null,x(e.message),1)]))}},gc=ct(mc,[["__scopeId","data-v-5a5ef9a8"]]),yc={class:"error-container"},bc={__name:"ErrorState",props:{title:{type:String,default:"Something went wrong"},message:{type:String,required:!0},showRetry:{type:Boolean,default:!0}},emits:["retry"],setup(e,{emit:t}){return(s,n)=>(w(),k("div",yc,[n[1]||(n[1]=r("div",{class:"error-icon"},"",-1)),r("h3",null,x(e.title),1),r("p",null,x(e.message),1),e.showRetry?(w(),k("button",{key:0,onClick:n[0]||(n[0]=o=>s.$emit("retry")),class:"retry-button"}," Try Again ")):V("",!0)]))}},_c=ct(bc,[["__scopeId","data-v-fed208d7"]]),wc={class:"staff-overview-header"},kc={class:"header-content"},Cc={class:"header-meta"},Sc={class:"staff-name"},xc={class:"student-count"},Ec={__name:"StaffOverviewHeader",props:{staffMember:{type:Object,required:!0},totalStudents:{type:Number,default:0}},setup(e){const t=e,s={staff_admin:"Staff Admin",tutor:"Tutor",head_of_year:"Head of Year",subject_teacher:"Subject Teacher"},n=Q(()=>{var o;return((o=t.staffMember.roles)==null?void 0:o.map(a=>s[a]||a))||[]});return(o,a)=>(w(),k("div",wc,[r("div",kc,[a[0]||(a[0]=r("h1",null,"Staff Overview",-1)),r("div",Cc,[r("span",Sc,x(e.staffMember.name),1),(w(!0),k(oe,null,Ae(n.value,l=>(w(),k("span",{class:"role-badge",key:l},x(l),1))),128)),r("span",xc,x(e.totalStudents)+" students",1)])])]))}},Ac=ct(Ec,[["__scopeId","data-v-af34e02e"]]),$c={class:"filter-bar"},Tc={class:"filter-label-row"},Ic=["title"],Oc=["value"],Pc={class:"filter-label-row"},Mc=["title"],Fc=["value"],Rc={class:"filter-label-row"},Uc=["title"],jc=["value"],Nc={class:"filter-label-row"},Lc=["title"],qc={class:"filter-label-row"},Hc=["title"],Dc={__name:"FilterBar",props:{filters:{type:Object,required:!0},lockedFilters:{type:Object,default:()=>({cycle:!1,group:!1,year:!1,status:!1,search:!1})},preservedValues:{type:Object,default:()=>({})}},emits:["filter-changed","lock-changed"],setup(e,{emit:t}){const s=e,n=t,o=M(String(s.preservedValues.cycle||"1")),a=M(String(s.preservedValues.group||"")),l=M(String(s.preservedValues.year||"")),c=M(String(s.preservedValues.status||"")),f=M(String(s.preservedValues.search||""));et(()=>s.preservedValues,C=>{C.cycle!==void 0&&o.value!==String(C.cycle||"")&&(o.value=String(C.cycle||"")),C.group!==void 0&&a.value!==(C.group||"")&&(a.value=C.group||""),C.year!==void 0&&l.value!==(C.year||"")&&(l.value=C.year||""),C.status!==void 0&&c.value!==(C.status||"")&&(c.value=C.status||""),C.search!==void 0&&f.value!==(C.search||"")&&(f.value=C.search||"")},{deep:!0,immediate:!1});const m=C=>{const E={...s.lockedFilters};E[C]=!E[C],n("lock-changed",E)},v=()=>{n("filter-changed",{cycle:o.value||"",group:a.value||"",year:l.value||"",status:c.value||"",search:f.value||""})},y=()=>{s.lockedFilters.cycle||(o.value="1"),s.lockedFilters.group||(a.value=""),s.lockedFilters.year||(l.value=""),s.lockedFilters.status||(c.value=""),s.lockedFilters.search||(f.value=""),v()};return(C,E)=>(w(),k("div",$c,[r("div",{class:se(["filter-group",{locked:e.lockedFilters.cycle}])},[r("div",Tc,[E[10]||(E[10]=r("label",{for:"cycle-filter"},"Cycle:",-1)),r("button",{onClick:E[0]||(E[0]=F=>m("cycle")),class:"lock-button",title:e.lockedFilters.cycle?"Unlock filter":"Lock filter"},x(e.lockedFilters.cycle?"":""),9,Ic)]),Ie(r("select",{id:"cycle-filter","onUpdate:modelValue":E[1]||(E[1]=F=>o.value=F),onChange:v},[(w(!0),k(oe,null,Ae(e.filters.cycles,F=>(w(),k("option",{key:F,value:F}," Cycle "+x(F),9,Oc))),128))],544),[[kt,o.value]])],2),r("div",{class:se(["filter-group",{locked:e.lockedFilters.group}])},[r("div",Pc,[E[11]||(E[11]=r("label",{for:"group-filter"},"Group:",-1)),r("button",{onClick:E[2]||(E[2]=F=>m("group")),class:"lock-button",title:e.lockedFilters.group?"Unlock filter":"Lock filter"},x(e.lockedFilters.group?"":""),9,Mc)]),Ie(r("select",{id:"group-filter","onUpdate:modelValue":E[3]||(E[3]=F=>a.value=F),onChange:v},[E[12]||(E[12]=r("option",{value:""},"All Groups",-1)),(w(!0),k(oe,null,Ae(e.filters.groups,F=>(w(),k("option",{key:F,value:F},x(F),9,Fc))),128))],544),[[kt,a.value]])],2),r("div",{class:se(["filter-group",{locked:e.lockedFilters.year}])},[r("div",Rc,[E[13]||(E[13]=r("label",{for:"year-filter"},"Year:",-1)),r("button",{onClick:E[4]||(E[4]=F=>m("year")),class:"lock-button",title:e.lockedFilters.year?"Unlock filter":"Lock filter"},x(e.lockedFilters.year?"":""),9,Uc)]),Ie(r("select",{id:"year-filter","onUpdate:modelValue":E[5]||(E[5]=F=>l.value=F),onChange:v},[E[14]||(E[14]=r("option",{value:""},"All Years",-1)),(w(!0),k(oe,null,Ae(e.filters.yearGroups,F=>(w(),k("option",{key:F,value:F}," Year "+x(F),9,jc))),128))],544),[[kt,l.value]])],2),r("div",{class:se(["filter-group",{locked:e.lockedFilters.status}])},[r("div",Nc,[E[15]||(E[15]=r("label",{for:"status-filter"},"Status:",-1)),r("button",{onClick:E[6]||(E[6]=F=>m("status")),class:"lock-button",title:e.lockedFilters.status?"Unlock filter":"Lock filter"},x(e.lockedFilters.status?"":""),9,Lc)]),Ie(r("select",{id:"status-filter","onUpdate:modelValue":E[7]||(E[7]=F=>c.value=F),onChange:v},[...E[16]||(E[16]=[r("option",{value:""},"All Students",-1),r("option",{value:"completed"},"Completed",-1),r("option",{value:"not_completed"},"Not Completed",-1)])],544),[[kt,c.value]])],2),r("div",{class:se(["filter-group",{locked:e.lockedFilters.search}])},[r("div",qc,[E[17]||(E[17]=r("label",{for:"search-input"},"Search:",-1)),r("button",{onClick:E[8]||(E[8]=F=>m("search")),class:"lock-button",title:e.lockedFilters.search?"Unlock filter":"Lock filter"},x(e.lockedFilters.search?"":""),9,Hc)]),Ie(r("input",{id:"search-input",type:"text","onUpdate:modelValue":E[9]||(E[9]=F=>f.value=F),onInput:v,placeholder:"Search by name...",class:"search-input"},null,544),[[Dt,f.value]])],2),r("button",{onClick:y,class:"clear-button"},"Clear Filters")]))}},Vc=ct(Dc,[["__scopeId","data-v-36a3b4fc"]]),Bc={class:"smart-filters-section"},Kc={class:"header-left"},Gc={class:"expand-icon"},Yc={key:0,class:"filter-count-badge"},Wc={class:"smart-filters-content"},zc={key:0,class:"no-filters-message"},Jc={key:1,class:"smart-filters-list"},Xc=["onUpdate:modelValue"],Qc=["onUpdate:modelValue"],Zc=["onUpdate:modelValue"],eu=["onClick"],tu={__name:"SmartFilters",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=M(!1),n=e,o=t,a=M([...n.modelValue]);let l=0;const c=()=>{s.value=!s.value},f=()=>{a.value.push({id:`filter-${Date.now()}-${l++}`,dimension:"vision",operator:"gte",value:5}),s.value=!0,v()},m=y=>{a.value.splice(y,1),v()},v=()=>{o("update:modelValue",a.value)};return(y,C)=>(w(),k("div",Bc,[r("div",{class:"smart-filters-header",onClick:c},[r("div",Kc,[r("span",Gc,x(s.value?"":""),1),C[0]||(C[0]=r("h3",null,"Smart Filters",-1)),a.value.length>0?(w(),k("span",Yc,x(a.value.length),1)):V("",!0)]),r("button",{onClick:wt(f,["stop"]),class:se(["add-filter-button",{compact:!s.value}])}," + ",2)]),Ie(r("div",Wc,[a.value.length===0?(w(),k("div",zc,[...C[1]||(C[1]=[r("p",null,'Click "+ Add Filter" to filter by VESPA scores (e.g., Vision  7)',-1)])])):(w(),k("div",Jc,[(w(!0),k(oe,null,Ae(a.value,(E,F)=>(w(),k("div",{key:E.id,class:"smart-filter-row"},[Ie(r("select",{"onUpdate:modelValue":N=>E.dimension=N,onChange:v,class:"filter-select dimension-select"},[...C[2]||(C[2]=[Qe('<option value="vision" data-v-1f780447>Vision</option><option value="effort" data-v-1f780447>Effort</option><option value="systems" data-v-1f780447>Systems</option><option value="practice" data-v-1f780447>Practice</option><option value="attitude" data-v-1f780447>Attitude</option><option value="overall" data-v-1f780447>Overall</option>',6)])],40,Xc),[[kt,E.dimension]]),Ie(r("select",{"onUpdate:modelValue":N=>E.operator=N,onChange:v,class:"filter-select operator-select"},[...C[3]||(C[3]=[Qe('<option value="gt" data-v-1f780447>Greater than</option><option value="gte" data-v-1f780447>Greater or equal to</option><option value="lt" data-v-1f780447>Less than</option><option value="lte" data-v-1f780447>Less than or equal to</option><option value="eq" data-v-1f780447>Equal to</option>',5)])],40,Qc),[[kt,E.operator]]),Ie(r("input",{type:"number","onUpdate:modelValue":N=>E.value=N,onInput:v,min:"0",max:"10",step:"0.1",class:"filter-input value-input",placeholder:"0-10"},null,40,Zc),[[Dt,E.value,void 0,{number:!0}]]),r("button",{onClick:N=>m(F),class:"remove-filter-button",title:"Remove filter"},"  ",8,eu)]))),128))]))],512),[[Sa,s.value]])]))}},su=ct(tu,[["__scopeId","data-v-1f780447"]]),ls=e=>{if(e==null)return"#f5f5f5";const t=parseFloat(e);return t>=9?"#86efac":t>=7?"#bbf7d0":t>=5?"#fed7aa":t>=3?"#fee2e2":"#ffb5bb"},nu={class:"modal-container"},ou={class:"modal-header"},ru={class:"modal-body"},au={class:"text-content"},iu={__name:"TextViewModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"View Text"},text:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=t,n=()=>{s("close")};return(o,a)=>e.isOpen?(w(),k("div",{key:0,class:"modal-overlay",onClick:wt(n,["self"])},[r("div",nu,[r("div",ou,[r("h3",null,x(e.title),1),r("button",{class:"close-button",onClick:n},"")]),r("div",ru,[r("div",au,x(e.text),1)])])])):V("",!0)}},lu=ct(iu,[["__scopeId","data-v-5ffca5e6"]]),cu={class:"modal-container"},uu={class:"modal-header"},du={class:"modal-body"},fu=["placeholder","disabled"],vu={class:"modal-footer"},pu={key:0,class:"error-text"},hu={class:"button-group"},mu=["disabled"],gu=["disabled"],yu={__name:"EditableTextModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"Edit Text"},text:{type:String,default:""},placeholder:{type:String,default:"Enter text here..."}},emits:["close","save"],setup(e,{emit:t}){const s=e,n=t,o=M(""),a=M(""),l=M(!1),c=M(null);et(()=>[s.isOpen,s.text],([y,C])=>{y&&(o.value=C||"",a.value=C||"",c.value=null)},{immediate:!0});const f=Q(()=>o.value.trim()!==a.value.trim()),m=async()=>{if(f.value){l.value=!0,c.value=null;try{await n("save",o.value),n("close")}catch(y){c.value=y.message||"Failed to save"}finally{l.value=!1}}},v=()=>{f.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")};return(y,C)=>e.isOpen?(w(),k("div",{key:0,class:"modal-overlay",onClick:wt(v,["self"])},[r("div",cu,[r("div",uu,[r("h3",null,x(e.title),1),r("button",{class:"close-button",onClick:v},"")]),r("div",du,[Ie(r("textarea",{"onUpdate:modelValue":C[0]||(C[0]=E=>o.value=E),class:"edit-textarea",placeholder:e.placeholder,rows:"12",disabled:l.value},null,8,fu),[[Dt,o.value]])]),r("div",vu,[c.value?(w(),k("span",pu,x(c.value),1)):V("",!0),r("div",hu,[r("button",{onClick:v,class:"cancel-button",disabled:l.value}," Cancel ",8,mu),r("button",{onClick:m,class:"save-button",disabled:l.value||!f.value},x(l.value?"Saving...":"Save Changes"),9,gu)])])])])):V("",!0)}},dr=ct(yu,[["__scopeId","data-v-e2fc5fac"]]),mt="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",at={async getStaffOverview(e,t=null){try{let s=`${mt}/api/vespa/staff-overview?email=${encodeURIComponent(e)}`;t!=null&&t!==""&&(s+=`&cycle=${t}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(s){throw console.error("[Staff API] Error fetching overview:",s),s}},async saveStudentGoals(e,t,s){try{console.log("[Staff API] Saving student goals:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});const n=await fetch(`${mt}/api/vespa/report/save-goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,cycle:t,goalText:s.goalText||"",goalSetDate:s.goalSetDate||null,goalDueDate:s.goalDueDate||null,knackRecordId:s.knackRecordId||null})});if(!n.ok){const a=await n.json();throw new Error(a.error||`HTTP error! status: ${n.status}`)}const o=await n.json();return console.log("[Staff API] Goals saved successfully:",o),o}catch(n){throw console.error("[Staff API] Error saving goals:",n),n}},async saveCoachingComments(e,t,s){try{console.log("[Staff API] Saving coaching comments:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});let n=null;if(typeof Knack<"u"&&Knack.getUserAttributes){const l=Knack.getUserAttributes();n=l==null?void 0:l.email}if(!n)throw new Error("Staff email not available");const o=await fetch(`${mt}/api/vespa/report/save-coaching`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,staffEmail:n,cycle:t,coachingText:s.coachingText||"",coachingDate:s.coachingDate||null,knackRecordId:s.knackRecordId||null})});if(!o.ok){const l=await o.json();throw new Error(l.error||`HTTP error! status: ${o.status}`)}const a=await o.json();return console.log("[Staff API] Coaching comments saved successfully:",a),a}catch(n){throw console.error("[Staff API] Error saving coaching comments:",n),n}},async getUcasApplication(e,t="current"){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching UCAS application:",s),s}},async getReferenceFull(e,t="current"){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/full?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching reference full:",s),s}},async saveTutorCompiled(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error saving tutor compiled narrative:",s),s}},async markTutorCompiledComplete(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/mark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error marking tutor compiled complete:",s),s}},async unmarkTutorCompiledComplete(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/unmark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error unmarking tutor compiled complete:",s),s}},async requestUcasStatementEdits(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/request-edits`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error requesting UCAS statement edits:",s),s}},async getAcademicProfile(e,t="current",s={}){try{const n=new URLSearchParams,o=t==null?"":String(t).trim();o&&o.toLowerCase()!=="current"&&n.append("academic_year",o);const a=`${mt}/api/academic-profile/${encodeURIComponent(e)}${n.toString()?`?${n.toString()}`:""}`,l={};s!=null&&s.roleHint&&(l["X-User-Role"]=String(s.roleHint)),s!=null&&s.staffEmail&&(l["X-User-Email"]=String(s.staffEmail));const c=await fetch(a,{headers:l});if(!c.ok){const f=await c.json().catch(()=>null);throw new Error((f==null?void 0:f.error)||`HTTP error! status: ${c.status}`)}return await c.json()}catch(n){throw console.error("[Staff API] Error fetching academic profile:",n),n}}};async function bu(e,t,s=null){try{const n=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`,o=new URLSearchParams;s&&o.append("academic_year",s);const a=await fetch(o.toString()?`${n}?${o.toString()}`:n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){if(a.status===404)return{success:!0,data:null};let l=`API error: ${a.status}`;try{const c=await a.json();c&&(c.error||c.message)&&(l=c.error||c.message)}catch{}throw new Error(l)}return await a.json()}catch(n){return console.error("[Academic Profile API] fetchUcasApplication error:",n),{success:!1,error:n.message||"Failed to fetch UCAS Application"}}}async function _u(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const f=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t})});if(!f.ok){let m=`API error: ${f.status}`;try{const v=await f.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await f.json()}catch(a){return console.error("[Academic Profile API] saveUcasApplication error:",a),{success:!1,error:a.message||"Failed to save UCAS Application"}}}async function wu(e,t,s,n=null){try{const o=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/comment`;let a=null;const l=t&&typeof t=="object"?t.__roleHint:null;l&&(a=String(l).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const m=(Knack.getUserRoles()||[]).some(v=>v&&v.name==="Student"||typeof v=="string"&&v.toLowerCase().includes("student"));a||(a=m?"student":"staff")}}catch{}const c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",...a?{"X-User-Role":a}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!c.ok){let f=`API error: ${c.status}`;try{const m=await c.json();m&&(m.error||m.message)&&(f=m.error||m.message)}catch{}throw new Error(f)}return await c.json()}catch(o){return console.error("[Academic Profile API] addUcasApplicationComment error:",o),{success:!1,error:o.message||"Failed to add comment"}}}async function ku(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/feedback`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const f=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!f.ok){let m=`API error: ${f.status}`;try{const v=await f.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await f.json()}catch(a){return console.error("[Academic Profile API] generateUcasFeedback error:",a),{success:!1,error:a.message||"Failed to generate feedback"}}}async function Cu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/virtual-tutor-comment`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const f=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!f.ok){let m=`API error: ${f.status}`;try{const v=await f.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await f.json()}catch(a){return console.error("[Academic Profile API] addVirtualTutorComment error:",a),{success:!1,error:a.message||"Failed to add comment"}}}async function Su(e,t,s=null){try{const n=s?`?academic_year=${encodeURIComponent(s)}`:"",o=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/status${n}`,a=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}),l=await a.json().catch(()=>({}));if(!a.ok)throw new Error((l==null?void 0:l.error)||(l==null?void 0:l.message)||`API error: ${a.status}`);return l}catch(n){return console.error("[Academic Profile API] fetchReferenceStatus error:",n),{success:!1,error:n.message||"Failed to fetch reference status"}}}async function xu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/invite`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"student",c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),f=await c.json().catch(()=>({}));if(!c.ok)throw new Error((f==null?void 0:f.error)||(f==null?void 0:f.message)||`API error: ${c.status}`);return f}catch(a){return console.error("[Academic Profile API] createReferenceInvite error:",a),{success:!1,error:a.message||"Failed to invite teacher"}}}async function Eu(e,t,s=null,n=null){try{const o=s?`?academic_year=${encodeURIComponent(s)}`:"",a=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/full${o}`,l=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"staff",c=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json","X-User-Role":l}}),f=await c.json().catch(()=>({}));if(!c.ok)throw new Error((f==null?void 0:f.error)||(f==null?void 0:f.message)||`API error: ${c.status}`);return f}catch(o){return console.error("[Academic Profile API] fetchReferenceFull error:",o),{success:!1,error:o.message||"Failed to fetch reference"}}}async function Au(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/contribution`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"staff",c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),f=await c.json().catch(()=>({}));if(!c.ok)throw new Error((f==null?void 0:f.error)||(f==null?void 0:f.message)||`API error: ${c.status}`);return f}catch(a){return console.error("[Academic Profile API] saveReferenceContribution error:",a),{success:!1,error:a.message||"Failed to save contribution"}}}async function $u(e,t,s=null,n=null){try{const o=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/mark-complete`,a=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"student",l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":a},body:JSON.stringify({academicYear:s})}),c=await l.json().catch(()=>({}));if(!l.ok)throw new Error((c==null?void 0:c.error)||(c==null?void 0:c.message)||`API error: ${l.status}`);return c}catch(o){return console.error("[Academic Profile API] markUcasStatementComplete error:",o),{success:!1,error:o.message||"Failed to mark complete"}}}const Tu={class:"ucas-modal"},Iu={class:"ucas-header"},Ou={class:"ucas-header-left"},Pu={class:"ucas-course-row"},Mu=["disabled"],Fu={key:0,value:""},Ru=["value"],Uu=["href"],ju={key:1,class:"ucas-course-meta"},Nu=["title"],Lu={class:"ucas-meta-value"},qu=["title"],Hu={class:"ucas-meta-value"},Du={class:"ucas-header-right"},Vu={key:0,class:"ucas-refbar"},Bu=["disabled"],Ku={key:0,class:"ucas-refbar-count"},Gu={key:1,class:"ucas-refbar"},Yu=["disabled"],Wu=["disabled","title"],zu=["disabled"],Ju=["disabled","title"],Xu=["disabled","title"],Qu={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Zu={key:1,class:"ucas-spinner"},ed={class:"ucas-body"},td={class:"ucas-top-grid"},sd={class:"ucas-card"},nd={key:0,class:"ucas-empty"},od={key:1,class:"ucas-subjects-grid"},rd=["title"],ad=["disabled","value","onInput"],id={key:2,class:"ucas-tariff"},ld={class:"ucas-tariff-grid"},cd=["title"],ud={class:"ucas-tariff-value"},dd=["title"],fd={class:"ucas-tariff-value"},vd=["title"],pd={class:"ucas-tariff-value"},hd={key:0,class:"ucas-tariff-note"},md={class:"ucas-card"},gd={class:"ucas-metrics"},yd={class:"ucas-metric-value"},bd={class:"ucas-metric-max"},_d={class:"ucas-progress-bar"},wd={class:"ucas-metric-status"},kd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Cd={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sd={class:"ucas-preview"},xd={class:"ucas-preview-header"},Ed={class:"ucas-preview-box"},Ad={class:"ucas-questions"},$d={class:"ucas-q"},Td={class:"ucas-q-header"},Id={class:"ucas-q-actions"},Od=["title"],Pd=["disabled","value"],Md={class:"ucas-q"},Fd={class:"ucas-q-header"},Rd={class:"ucas-q-actions"},Ud=["title"],jd=["disabled","value"],Nd={class:"ucas-q"},Ld={class:"ucas-q-header"},qd={class:"ucas-q-actions"},Hd=["title"],Dd=["disabled","value"],Vd={key:0,class:"ucas-comments"},Bd={class:"ucas-comments-shell"},Kd={class:"ucas-comments-header"},Gd=["title"],Yd={class:"ucas-comments-count-num"},Wd={key:0,class:"ucas-comments-compose"},zd={class:"ucas-comments-compose-row"},Jd={class:"ucas-comments-avatar ucas-comments-avatar--compose"},Xd={class:"ucas-comments-compose-main"},Qd=["disabled"],Zd={class:"ucas-comments-compose-footer"},ef={class:"ucas-comments-compose-actions"},tf=["disabled"],sf=["disabled"],nf={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},of={class:"ucas-comments-quick"},rf={class:"ucas-comments-quick-chips"},af=["onClick","disabled"],lf={key:1,class:"ucas-comments-empty"},cf={key:2,class:"ucas-comments-list"},uf=["aria-label"],df={class:"ucas-comments-divider-text"},ff={class:"ucas-comments-item-main"},vf={class:"ucas-comments-item-content"},pf={class:"ucas-comments-item-header"},hf={class:"ucas-comments-item-author"},mf={class:"ucas-comments-author"},gf={key:0,class:"ucas-comments-role"},yf={class:"ucas-comments-date"},bf=["onClick"],_f={class:"ucas-footer"},wf={class:"ucas-footer-left"},kf={class:"ucas-footer-stats"},Cf={class:"ucas-footer-total"},Sf={class:"ucas-footer-max"},xf={class:"ucas-footer-remaining"},Ef={key:0,class:"ucas-footer-warning"},Af={key:1,class:"ucas-footer-error"},$f={key:2,class:"ucas-footer-error"},Tf={class:"ucas-footer-right"},If={key:0,class:"ucas-toast"},Of={class:"ucas-feedback-modal",role:"dialog","aria-modal":"true","aria-label":"Feedback"},Pf={class:"ucas-feedback-header"},Mf={class:"ucas-feedback-body"},Ff={key:0,class:"ucas-feedback-loading"},Rf={key:1,class:"ucas-feedback-error"},Uf={key:2,class:"ucas-feedback-text"},jf={class:"ucas-feedback-footer"},Nf=["disabled"],Lf=["disabled","title"],qf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded writing"},Hf={class:"ucas-expand-header"},Df={class:"ucas-expand-title"},Vf={class:"ucas-expand-meta"},Bf={class:"ucas-expand-pill"},Kf={class:"ucas-expand-pill"},Gf={class:"ucas-expand-body"},Yf={key:0,class:"ucas-preview-box ucas-preview-box--expanded"},Wf=["disabled","value"],zf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded reference writing"},Jf={class:"ucas-expand-header"},Xf={class:"ucas-expand-title"},Qf={class:"ucas-expand-meta"},Zf={class:"ucas-expand-pill"},ev={class:"ucas-expand-body"},tv=["disabled","value"],sv={class:"ucas-feedback-modal ucas-ref-modal",role:"dialog","aria-modal":"true","aria-label":"Teacher reference"},nv={class:"ucas-ref-header"},ov={class:"ucas-ref-header-left"},rv={class:"ucas-ref-icon","aria-hidden":"true"},av={width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},iv={key:0,d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},lv={key:1,cx:"9",cy:"7",r:"4"},cv={key:2,d:"M22 21v-2a4 4 0 0 0-3-3.87"},uv={key:3,d:"M16 3.13a4 4 0 0 1 0 7.75"},dv={key:4,d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},fv={key:5,points:"14 2 14 8 20 8"},vv={key:6,x1:"16",y1:"13",x2:"8",y2:"13"},pv={key:7,x1:"16",y1:"17",x2:"8",y2:"17"},hv={key:8,x1:"10",y1:"9",x2:"8",y2:"9"},mv={class:"ucas-ref-title-group"},gv={class:"ucas-ref-subtitle"},yv={key:0},bv={key:1},_v={class:"ucas-ref-statusbar"},wv={class:"ucas-ref-statusbar-left"},kv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Cv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sv={key:0,class:"ucas-ref-status-count"},xv={key:1,class:"ucas-ref-status-count"},Ev=["disabled"],Av={class:"ucas-ref-body"},$v={key:0,class:"ucas-ref-student"},Tv={class:"ucas-ref-steps"},Iv={class:"ucas-ref-step"},Ov={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Pv={key:1},Mv={class:"ucas-ref-step"},Fv={class:"ucas-ref-step"},Rv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Uv={key:1},jv={class:"ucas-ref-section"},Nv={class:"ucas-ref-section-head"},Lv={class:"ucas-ref-section-pill"},qv={key:0,class:"ucas-ref-empty"},Hv={key:1,class:"ucas-ref-invite-list"},Dv={class:"ucas-ref-invite-left"},Vv={class:"ucas-ref-invite-meta"},Bv={class:"ucas-ref-invite-name"},Kv={class:"ucas-ref-invite-sub"},Gv={class:"ucas-ref-invite-actions"},Yv=["onClick","disabled"],Wv=["onClick"],zv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Jv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Xv={key:2,class:"ucas-ref-hidden-row"},Qv={class:"hint"},Zv={class:"ucas-ref-section ucas-ref-section--form"},ep={class:"ucas-ref-form-grid"},tp=["value"],sp={class:"ucas-ref-form-actions"},np=["disabled"],op=["disabled"],rp={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ap={key:0,class:"ucas-ref-linkcopy"},ip={class:"ucas-ref-linkcopy-row"},lp=["value"],cp={key:1,class:"ucas-ref-staff"},up={class:"ucas-ref-staff-head"},dp={key:0,class:"ucas-ref-staff-meta"},fp={key:0,class:"ucas-empty ucas-empty--small"},vp={key:1,class:"ucas-empty ucas-empty--small"},pp={key:2,class:"ucas-ref-staff-body"},hp={class:"ucas-ref-contrib"},mp={class:"ucas-ref-contrib-head"},gp={class:"ucas-ref-badge has-content"},yp={class:"ucas-ref-editor"},bp={class:"ucas-ref-editor-select"},_p=["value"],wp={class:"ucas-ref-editor-footer"},kp={class:"ucas-ref-char"},Cp=["disabled"],Sp=["disabled"],xp={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ep={key:0,class:"hint"},Ap={key:0,class:"ucas-ref-existing"},$p={class:"ucas-ref-existing-list"},Tp={class:"ucas-ref-existing-meta"},Ip={class:"ucas-ref-existing-author"},Op={class:"ucas-ref-existing-avatar"},Pp={class:"ucas-ref-existing-name"},Mp={class:"ucas-ref-existing-subject"},Fp={class:"ucas-ref-existing-text"},Rp={class:"ucas-ref-contrib ucas-ref-contrib--accordion"},Up={class:"ucas-ref-accordion-right"},jp={class:"ucas-ref-accordion-chevron"},Np={key:0,class:"ucas-ref-accordion-body"},Lp={class:"ucas-ref-editor"},qp={class:"ucas-ref-editor-footer"},Hp={class:"ucas-ref-char"},Dp=["disabled"],Vp=["disabled"],Bp={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Kp={key:0,class:"hint"},Gp={class:"ucas-ref-section"},Yp={class:"ucas-ref-section-body"},Wp={class:"ucas-ref-section"},zp={class:"ucas-ref-section-head"},Jp={class:"ucas-ref-section-pill"},Xp={key:0,class:"ucas-empty ucas-empty--small"},Qp={key:1,class:"ucas-ref-contrib-list"},Zp={class:"ucas-ref-contrib-meta"},eh={key:0},th={class:"ucas-ref-contrib-text"},sh={class:"ucas-ref-section"},nh={class:"ucas-ref-section-head"},oh={class:"ucas-ref-section-pill"},rh={key:0,class:"ucas-empty ucas-empty--small"},ah={key:1,class:"ucas-ref-invite-list"},ih={class:"ucas-ref-invite-left"},lh={class:"ucas-ref-invite-meta"},ch={class:"ucas-ref-invite-name"},uh={class:"ucas-ref-invite-sub"},dh={class:"ucas-ref-invite-actions"},fh=["onClick","disabled"],vh=["onClick"],ph={key:2,class:"ucas-ref-hidden-row"},hh={class:"hint"},mh={class:"ucas-ref-footer"},We=4e3,gt=350,Ys=450,gh={__name:"UcasApplicationModal",props:{studentEmail:{type:String,default:""},academicYear:{type:String,default:""},subjects:{type:Array,default:()=>[]},offers:{type:Array,default:()=>[]},topOffer:{type:Object,default:null},apiUrl:{type:String,default:""},canEdit:{type:Boolean,default:!1},commentsEnabled:{type:Boolean,default:!0},canAddComment:{type:Boolean,default:!1},staffEmail:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=M("");let a=null;function l(S){o.value=S,a&&clearTimeout(a),a=setTimeout(()=>o.value="",2200)}function c(S){return S==null?"":String(S)}function f(S){const i=c(S==null?void 0:S.universityName).trim().toLowerCase(),A=c(S==null?void 0:S.courseTitle).trim().toLowerCase(),g=c(S==null?void 0:S.courseLink).trim().toLowerCase();return`${i}|${A}|${g}`.replace(/\s+/g," ").trim()}const m=Q(()=>(Array.isArray(s.offers)?s.offers:[]).map(A=>({key:f(A),ranking:(A==null?void 0:A.ranking)??1,universityName:c(A==null?void 0:A.universityName).trim()||"University",courseTitle:c(A==null?void 0:A.courseTitle).trim(),courseLink:c(A==null?void 0:A.courseLink).trim(),offer:c(A==null?void 0:A.offer).trim(),ucasPoints:(A==null?void 0:A.ucasPoints)===null||(A==null?void 0:A.ucasPoints)===void 0||String(A==null?void 0:A.ucasPoints).trim()===""?null:Number(A==null?void 0:A.ucasPoints)})).filter(A=>A.key).sort((A,g)=>(Number(A.ranking)||999)-(Number(g.ranking)||999))),v=M(""),y=Q(()=>m.value.find(S=>S.key===v.value)||null),C=Os({q1:"",q2:"",q3:""}),E=Os({}),F=M([]),N=M(""),Z=M(!1),L=M(!1),K=M(!1),Y=M(!1),P=M(""),D=M(""),le=M(new Set),Ce=[" Add more specific examples",' Strengthen your "why this course"'," Trim repetition"," Show reflection, not just description"," Link skills to the course"];function ye(S){return le.value.has(String(S||""))}function W(S){const i=String(S||""),A=new Set(le.value);A.has(i)?A.delete(i):A.add(i),le.value=A}function ce(S){const i=c(S);return i.length<=Ys?i:i.slice(0,Ys).trimEnd()+""}function re(S){const i=c(S).trim();if(!i)return;const A=c(N.value),g=A?A.trimEnd()+`
`+i:i;N.value=g}function U(S){const i=c(S).trim();if(!i)return"ST";const g=(i.includes("@")?i.split("@")[0]:i).replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean),R=(g[0]||"").slice(0,1),z=(g[1]||g[0]||"").slice(1,2);return(R+z).toUpperCase()||"ST"}function ae(S){const i=c(S).trim().toLowerCase();if(!i)return"ucas-comments-avatar--blue";let A=0;for(let R=0;R<i.length;R++)A=A*31+i.charCodeAt(R)>>>0;const g=A%4;return g===0?"ucas-comments-avatar--green":g===1?"ucas-comments-avatar--blue":g===2?"ucas-comments-avatar--purple":"ucas-comments-avatar--orange"}function be(S){try{const i=new Date(S);if(Number.isNaN(i.getTime()))return null;const A=i.getFullYear(),g=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0");return`${A}-${g}-${R}`}catch{return null}}function qe(S){try{const i=new Date,A=i.getFullYear(),g=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0"),z=`${A}-${g}-${R}`,me=new Date(z+"T00:00:00"),we=new Date(S+"T00:00:00"),ve=Math.round((me.getTime()-we.getTime())/(1e3*60*60*24));return ve===0?"Today":ve===1?"Yesterday":we.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return S}}const _e=Q(()=>{const S=Array.isArray(F.value)?F.value:[],i=[];let A=null;for(const g of S){const R=be(g==null?void 0:g.createdAt)||"unknown";(!A||A.key!==R)&&(A={key:R,label:R==="unknown"?"Earlier":qe(R),items:[]},i.push(A)),A.items.push(g)}return i}),ee=M(!1),J=M("not_started"),Oe=M([]),Se=M(new Set),Te=M(""),Ee=M(""),He=M(!1),tt=M(""),Ut=Q(()=>{const S=c(s.studentEmail).trim().toLowerCase(),i=c(s.academicYear).trim().toLowerCase();return`ucas_ref_hidden_invites:${S||"unknown"}:${i||"unknown"}`});function ut(){try{const S=localStorage.getItem(Ut.value);if(!S){Se.value=new Set;return}const i=JSON.parse(S);Se.value=new Set(Array.isArray(i)?i.map(A=>String(A)):[])}catch{Se.value=new Set}}function st(){try{localStorage.setItem(Ut.value,JSON.stringify(Array.from(Se.value)))}catch{}}function dt(S){try{const i=String((S==null?void 0:S.id)||"");if(!i)return;const A=new Set(Se.value);A.add(i),Se.value=A,st(),l("Invite removed from list")}catch{}}function xt(){Se.value=new Set,st(),l("Restored hidden invites")}const Pe=Q(()=>{const S=Array.isArray(Oe.value)?Oe.value:[],i=Se.value,A=S.filter(R=>R&&!i.has(String(R.id||""))),g=new Map;for(const R of A){const z=c((R==null?void 0:R.teacherEmail)||(R==null?void 0:R.email)).trim().toLowerCase(),me=c(R==null?void 0:R.subjectKey).trim().toLowerCase(),we=`${z}__${me}`,ve=g.get(we);if(!ve){g.set(we,R);continue}const Rn=Date.parse((ve==null?void 0:ve.createdAt)||(ve==null?void 0:ve.expiresAt)||"")||0;(Date.parse((R==null?void 0:R.createdAt)||(R==null?void 0:R.expiresAt)||"")||0)>Rn&&g.set(we,R)}return Array.from(g.values())}),Et=Q(()=>{const S=J.value;return S==="finalised"?"Finalised":S==="completed"?"Completed":S==="in_progress"?"In progress":"Not started"}),p=Q(()=>{const S=Array.isArray(Pe.value)?Pe.value:[],i=S.length,A=S.filter(g=>g&&g.status==="submitted").length;return{total:i,submitted:A}}),u=M(!1),d=M(!1),h=M(null),b=Q(()=>!s.canEdit&&!!c(s.staffEmail).trim()&&!!c(s.apiUrl).trim()&&!!c(s.studentEmail).trim()),_=M(""),$=M(""),I=M(""),O=M(!1),T=M(!1),H=M(!1),j=M(!1),q=M("staff3"),B=M(null),te=Q(()=>q.value==="staff2"?"Section 2: Extenuating circumstances":"Section 3: Subject teacher contribution"),ue=Q(()=>q.value==="staff2"?c(_.value):c(I.value)),ie=Q(()=>c(ue.value).length);function Fe(S){b.value&&(q.value=S==="staff2"?"staff2":"staff3",j.value=!0,setTimeout(()=>{try{B.value&&B.value.focus&&B.value.focus()}catch{}},0))}function Me(){j.value=!1}function Ge(S,i){const A=c(s.staffEmail).trim().toLowerCase();if(!A)return null;const g=h.value;if(!g)return null;const R=S===2?g.section2||[]:g.section3||[],z=c(i||"").trim().toLowerCase();for(const me of Array.isArray(R)?R:[]){if(!me||c(me.authorEmail).trim().toLowerCase()!==A)continue;const ve=c(me.subjectKey||"").trim().toLowerCase();if(S===3){if(ve===z)return me}else return me}return null}async function Je(S){if(!b.value)return;const i=Number(S);if(i!==2&&i!==3)return;const g=c(i===2?_.value:I.value).trim();if(g){i===2?O.value=!0:T.value=!0;try{const R={section:i,text:g,subjectKey:i===3&&c($.value).trim()||null,authorName:null,staffEmail:c(s.staffEmail).trim()},z=await Au(s.studentEmail,R,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(z!=null&&z.success))throw new Error((z==null?void 0:z.error)||"Save failed");l("Saved"),await ft()}catch(R){l((R==null?void 0:R.message)||"Save failed")}finally{i===2?O.value=!1:T.value=!1}}}async function ft(){var S,i,A,g,R;if(!(!s.apiUrl||!s.studentEmail)){ee.value=!0;try{if(ut(),s.canEdit){const ve=await Su(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(ve!=null&&ve.success))throw new Error((ve==null?void 0:ve.error)||"Failed to load reference status");J.value=c(((S=ve==null?void 0:ve.data)==null?void 0:S.status)||"not_started"),Oe.value=Array.isArray((i=ve==null?void 0:ve.data)==null?void 0:i.invites)?ve.data.invites:[];return}d.value=!0;const z=await Eu(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(z!=null&&z.success))throw new Error((z==null?void 0:z.error)||"Failed to load reference");h.value=(z==null?void 0:z.data)||null,J.value=c(((A=z==null?void 0:z.data)==null?void 0:A.status)||"not_started"),Oe.value=Array.isArray((g=z==null?void 0:z.data)==null?void 0:g.invites)?z.data.invites:[];const me=Ge(2,null);_.value=c((me==null?void 0:me.text)||""),!c($.value).trim()&&Nt.value.length&&($.value=c(((R=Nt.value[0])==null?void 0:R.label)||""));const we=Ge(3,$.value);I.value=c((we==null?void 0:we.text)||"")}catch(z){l((z==null?void 0:z.message)||"Failed to load reference")}finally{ee.value=!1,d.value=!1}}}et(()=>$.value,()=>{const S=Ge(3,$.value);I.value=c((S==null?void 0:S.text)||"")}),et(()=>u.value,async S=>{S&&await ft()});async function ms(){var i,A;if(!s.canEdit||!s.apiUrl||!s.studentEmail)return;const S=Te.value.trim();if(S){He.value=!0,tt.value="";try{const g=await xu(s.studentEmail,{teacherEmail:S,subjectKey:Ee.value||null,allowedSections:[3]},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(g!=null&&g.success))throw new Error((g==null?void 0:g.error)||"Invite failed");const R=c(((i=g==null?void 0:g.data)==null?void 0:i.inboxUrl)||((A=g==null?void 0:g.data)==null?void 0:A.inviteUrl)||"");R.includes("/reference-contribution")&&R.includes("token=")?tt.value=R.replace("/reference-contribution","/reference-inbox"):tt.value=R,l("Invite created"),Te.value="",Ee.value="",await ft()}catch(g){l((g==null?void 0:g.message)||"Invite failed")}finally{He.value=!1}}}async function je(S){s.canEdit&&(Te.value=c((S==null?void 0:S.teacherEmail)||(S==null?void 0:S.email)||"").trim(),Ee.value=c((S==null?void 0:S.subjectKey)||"").trim(),Te.value&&await ms())}function nt(S){try{navigator.clipboard.writeText(String(S||"")),l("Copied")}catch{l("Copy failed")}}const ns=M(!1),ot=M("q1"),qs=M(null),xa=Q(()=>ot.value==="preview"?"Preview: Combined statement":ot.value==="q2"?"Q2: How studies prepared you":ot.value==="q3"?"Q3: Outside education":"Q1: Why this course?"),An=Q(()=>ot.value==="preview"?gs.value||"":C[ot.value]||""),Ea=Q(()=>An.value.length),ko=M(0);function jt(){if(s.canEdit)return;const S=Date.now();S-ko.value<1500||(ko.value=S,l("Only students can edit their UCAS statement."))}function Hs(S){ot.value=S,ns.value=!0,setTimeout(()=>{try{ot.value!=="preview"&&s.canEdit&&qs.value&&qs.value.focus&&qs.value.focus()}catch{}},0)}function $n(){ns.value=!1}const Nt=Q(()=>(Array.isArray(s.subjects)?s.subjects:[]).slice(0,5).map((i,A)=>{const g=c((i==null?void 0:i.id)||(i==null?void 0:i.originalRecordId)||(i==null?void 0:i.position)||(i==null?void 0:i.subjectName)||`idx_${A}`),R=c(i==null?void 0:i.subjectName).trim()||"Subject",z=R.replace(/^\s*(?:[a-z]{1,2}\d?\s*-\s*)+/i,"").trim()||R;return{key:g,label:z}})),Co=Q(()=>{const S=v.value||"";return S?E[S]||{}:{}});function Aa(S,i){if(!s.canEdit)return;const A=v.value||"";A&&(E[A]||(E[A]={}),E[A][S]=c(i).slice(0,24))}const xe=Q(()=>C.q1.length+C.q2.length+C.q3.length),Tn=Q(()=>Math.max(0,We-xe.value)),os=Q(()=>Math.max(0,xe.value-We)),gs=Q(()=>{const S=c(C.q1).trim(),i=c(C.q2).trim(),A=c(C.q3).trim();return[S,i,A].filter(Boolean).join(`

`)});function Ds(S,i){s.canEdit&&(C[S]=c(i))}function $a(){try{if(!gs.value)return;navigator.clipboard.writeText(gs.value),l("Copied to clipboard")}catch{l("Copy failed (browser blocked)")}}function Ta(S){try{const i=new Date(S);return Number.isNaN(i.getTime())?"":i.toLocaleString()}catch{return""}}const In=Q(()=>`vespa:ucas_application:v1:${(s.studentEmail||"").toLowerCase()}:${s.academicYear||"current"}`);function Ia(){try{const S=localStorage.getItem(In.value);if(!S)return;const i=JSON.parse(S);if(i!=null&&i.answers&&(C.q1=c(i.answers.q1),C.q2=c(i.answers.q2),C.q3=c(i.answers.q3)),i!=null&&i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,g]of Object.entries(i.requirementsByCourse))E[A]=g&&typeof g=="object"?g:{};i!=null&&i.selectedCourseKey&&(v.value=c(i.selectedCourseKey))}catch{}}function Oa(){try{localStorage.setItem(In.value,JSON.stringify({updatedAt:new Date().toISOString(),selectedCourseKey:v.value,answers:{...C},requirementsByCourse:{...E}}))}catch{}}let On=null;et(()=>[C.q1,C.q2,C.q3,v.value,JSON.stringify(E),In.value],()=>{On&&clearTimeout(On),On=setTimeout(()=>Oa(),450)});const rs=M(!1),as=M(""),Pn=M(!1);async function Pa(){if(!s.apiUrl||!s.studentEmail)return;const S=await bu(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(S!=null&&S.success))return;const i=S.data||{};if(i.answers&&(C.q1=c(i.answers.q1),C.q2=c(i.answers.q2),C.q3=c(i.answers.q3)),i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,g]of Object.entries(i.requirementsByCourse))E[A]=g&&typeof g=="object"?g:{};F.value=Array.isArray(i.staffComments)?i.staffComments:[],i.selectedCourseKey&&(v.value=c(i.selectedCourseKey)),as.value=c(i.statementCompletedAt||"")}async function Ma(){var S;if(!(!s.canEdit||!s.apiUrl||!s.studentEmail)&&!as.value){if(xe.value>We){l(`Over the ${We} character limit  please shorten before marking complete`);return}if(xe.value<gt){l(`Need at least ${gt} characters before marking complete`);return}Pn.value=!0;try{const i=await $u(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to mark statement complete");as.value=c(((S=i==null?void 0:i.data)==null?void 0:S.statementCompletedAt)||new Date().toISOString()),l("Statement marked complete (staff notified)")}catch(i){l((i==null?void 0:i.message)||"Failed to mark statement complete")}finally{Pn.value=!1}}}async function Fa(){if(!s.canEdit){l("Read-only for staff  students can save");return}if(!(!s.apiUrl||!s.studentEmail)){rs.value=!0;try{const S={selectedCourseKey:v.value||null,answers:{q1:C.q1,q2:C.q2,q3:C.q3},requirementsByCourse:{...E}},i=await _u(s.studentEmail,S,s.apiUrl,s.academicYear||null,{roleHint:s.canEdit?"student":"staff"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Save failed");l("Saved")}catch(S){l((S==null?void 0:S.message)||"Save failed")}finally{rs.value=!1}}}async function So(S=!1){if(!s.canEdit){l("Available for students");return}L.value=!0,!(!S&&P.value)&&await Ra()}async function Ra(){var S;if(!(!s.apiUrl||!s.studentEmail)){K.value=!0,D.value="",P.value="";try{const i={answers:{q1:C.q1,q2:C.q2,q3:C.q3},course:y.value?{...y.value}:null,totals:{totalChars:xe.value,remainingChars:Tn.value}},A=await ku(s.studentEmail,i,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Failed to generate feedback");const g=c(((S=A==null?void 0:A.data)==null?void 0:S.feedback)||(A==null?void 0:A.data)||"");P.value=g.trim(),P.value||(D.value="No feedback returned.")}catch(i){D.value=(i==null?void 0:i.message)||"Failed to generate feedback"}finally{K.value=!1}}}async function Ua(){var S;if(!(!P.value||!s.apiUrl||!s.studentEmail)){Y.value=!0;try{const i=await Cu(s.studentEmail,{comment:P.value},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to add comment");F.value=Array.isArray((S=i.data)==null?void 0:S.staffComments)?i.data.staffComments:F.value,l("Added to Tutor comments"),L.value=!1}catch(i){l((i==null?void 0:i.message)||"Failed to add comment")}finally{Y.value=!1}}}const ja={"A-Level":{grades:{"A*":56,A:48,B:40,C:32,D:24,E:16}},"AS-Level":{grades:{A:20,B:16,C:12,D:10,E:6}},"BTEC Extended Certificate (1 A-Level)":{grades:{"D*":56,D:48,M:32,P:16}},"EPQ (Extended Project)":{grades:{"A*":28,A:24,B:20,C:16,D:12,E:8}}};function Na(S){const i=c(S).trim();if(!i)return"";const A=i.toUpperCase();return A==="DISTINCTION*"||A==="DISTINCTION *"?"D*":A==="DISTINCTION"?"D":A==="MERIT"?"M":A==="PASS"?"P":A.replace(/\s+/g,"")}function La(S){const i=c(S==null?void 0:S.examType).toLowerCase();return i.includes("epq")||i.includes("extended project")?"EPQ (Extended Project)":i.includes("as")&&i.includes("level")?"AS-Level":i.includes("a level")||i.includes("a-level")?"A-Level":i.includes("btec")?"BTEC Extended Certificate (1 A-Level)":"A-Level"}function Mn(S,i){var me;const A=Na(i);if(!A)return{points:0,unknown:0};const g=La(S),z=(((me=ja[g])==null?void 0:me.grades)||{})[A];return typeof z=="number"?{points:z,unknown:0}:{points:0,unknown:1}}const Ye=Q(()=>{var z;const S=Array.isArray(s.subjects)?s.subjects.slice(0,5):[];let i=0,A=0,g=0,R=0;for(let me=0;me<S.length;me++){const we=S[me],ve=(z=Nt.value[me])==null?void 0:z.key,Rn=ve&&Co.value[ve]||"",Un=Mn(we,we==null?void 0:we.currentGrade),Eo=Mn(we,we==null?void 0:we.targetGrade),Ao=Mn(we,Rn);i+=Un.points,A+=Eo.points,g+=Ao.points,R+=Un.unknown+Eo.unknown+Ao.unknown}return{current:i,target:A,required:g,unknownCount:R}});function xo(S,i){const A=Number(S)||0,g=Number(i)||0;return!g||!A?"":A>=g?"ucas-tariff-box--good":A>=Math.ceil(g*.9)?"ucas-tariff-box--warn":"ucas-tariff-box--bad"}function Fn(S,i,A,g){const R=Number(A)||0,z=Number(g)||0,me=[`${S} UCAS points`,i,`Total: ${R}`];if(S!=="Required"&&z){me.push(`Required: ${z}`);const we=R-z;me.push(we>=0?`Above by: ${we}`:`Below by: ${Math.abs(we)}`)}return me.join(`
`)}async function qa(){var i;if(!s.canAddComment)return;const S=N.value.trim();if(S){Z.value=!0;try{const A=await wu(s.studentEmail,{comment:S,staffEmail:s.staffEmail||null,__roleHint:s.canAddComment?"staff":"student"},s.apiUrl,s.academicYear||null);if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Comment failed");F.value=Array.isArray((i=A.data)==null?void 0:i.staffComments)?A.data.staffComments:F.value,N.value="",l("Comment posted")}catch(A){l((A==null?void 0:A.message)||"Comment failed")}finally{Z.value=!1}}}return Cn(async()=>{const S=s.topOffer||(s.offers&&s.offers.length?s.offers[0]:null);S&&(v.value=f(S)),Ia(),await Pa(),s.canEdit&&await ft(),!v.value&&S&&(v.value=f(S))}),(S,i)=>{var A;return w(),k("div",{class:"ucas-overlay",role:"dialog","aria-modal":"true","aria-label":"UCAS Application",onClick:i[33]||(i[33]=wt(g=>n("close"),["self"]))},[r("div",Tu,[r("button",{class:"ucas-btn-close ucas-btn-close--corner",type:"button",onClick:i[0]||(i[0]=g=>n("close")),"aria-label":"Close UCAS application"},[...i[34]||(i[34]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])]),r("header",Iu,[r("div",Ou,[i[39]||(i[39]=r("div",{class:"ucas-title"},"UCAS Application",-1)),r("div",Pu,[i[38]||(i[38]=r("label",{class:"ucas-course-label",for:"course-select"},"Course",-1)),Ie(r("select",{id:"course-select","onUpdate:modelValue":i[1]||(i[1]=g=>v.value=g),class:"ucas-select",disabled:m.value.length===0},[m.value.length===0?(w(),k("option",Fu,"No offers yet")):V("",!0),(w(!0),k(oe,null,Ae(m.value,g=>(w(),k("option",{key:g.key,value:g.key}," #"+x(g.ranking)+" "+x(g.universityName)+"  "+x(g.courseTitle||"Course"),9,Ru))),128))],8,Mu),[[kt,v.value]]),(A=y.value)!=null&&A.courseLink?(w(),k("a",{key:0,class:"ucas-btn ucas-btn-outline",href:y.value.courseLink,target:"_blank",rel:"noopener noreferrer",title:"Open course link in a new tab"},[...i[35]||(i[35]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),r("polyline",{points:"15 3 21 3 21 9"}),r("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),X(" Course link ",-1)])],8,Uu)):V("",!0),y.value?(w(),k("div",ju,[y.value.offer?(w(),k("div",{key:0,class:"ucas-meta-pill",title:`Course offer requirement (grade): ${y.value.offer}`},[i[36]||(i[36]=r("span",{class:"ucas-meta-label"},"Required grade",-1)),r("span",Lu,x(y.value.offer),1)],8,Nu)):V("",!0),y.value.ucasPoints!==null&&y.value.ucasPoints!==void 0&&y.value.ucasPoints!==""?(w(),k("div",{key:1,class:"ucas-meta-pill",title:`Course offer requirement (UCAS points): ${y.value.ucasPoints}`},[i[37]||(i[37]=r("span",{class:"ucas-meta-label"},"Required UCAS",-1)),r("span",Hu,x(y.value.ucasPoints),1)],8,qu)):V("",!0)])):V("",!0)])]),r("div",Du,[e.canEdit?(w(),k("div",Vu,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[2]||(i[2]=g=>u.value=!0),disabled:ee.value||!e.studentEmail||!e.apiUrl,title:"Invite a teacher and track reference progress"},[...i[40]||(i[40]=[Qe('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z" data-v-9e3c962d></path><path d="M4 21a8 8 0 0 1 16 0" data-v-9e3c962d></path><path d="M19 8h2" data-v-9e3c962d></path><path d="M20 7v2" data-v-9e3c962d></path></svg> Teacher reference ',2)])],8,Bu),r("span",{class:se(["ucas-refbar-pill",`ucas-refbar--${J.value}`])},[X(x(Et.value)+" ",1),p.value.total?(w(),k("span",Ku," ("+x(p.value.submitted)+"/"+x(p.value.total)+") ",1)):V("",!0)],2)])):(w(),k("div",Gu,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[3]||(i[3]=g=>u.value=!0),disabled:ee.value||!e.studentEmail||!e.apiUrl,title:"View teacher reference"},[...i[41]||(i[41]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z"}),r("path",{d:"M4 21a8 8 0 0 1 16 0"})],-1),X(" Teacher reference ",-1)])],8,Yu),r("span",{class:se(["ucas-refbar-pill",`ucas-refbar--${J.value}`])},x(Et.value),3)])),i[46]||(i[46]=r("a",{class:"ucas-btn ucas-btn-outline",href:"https://www.ucas.com/",target:"_blank",rel:"noopener noreferrer",title:"Open UCAS in a new tab"},[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"})]),X(" UCAS ")],-1)),r("button",{class:"ucas-btn ucas-btn-feedback",type:"button",onClick:So,disabled:!e.canEdit||K.value||!e.studentEmail||!e.apiUrl,title:e.canEdit?"Get feedback to improve your statement":"Available for students"},[...i[42]||(i[42]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"}),r("path",{d:"M8 11h8"}),r("path",{d:"M8 15h5"})],-1),X(" Get Feedback ",-1)])],8,Wu),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:$a,disabled:!gs.value},[...i[43]||(i[43]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),r("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1),X(" Copy ",-1)])],8,zu),e.canEdit?(w(),k("button",{key:2,class:"ucas-btn ucas-btn-outline",type:"button",onClick:Ma,disabled:Pn.value||!!as.value||xe.value>We||xe.value<gt||!e.studentEmail,title:as.value?"Already marked complete":"Mark your personal statement complete and notify staff"},[i[44]||(i[44]=r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M20 6 9 17l-5-5"})],-1)),X(" "+x(as.value?"Statement complete":"Mark statement complete"),1)],8,Ju)):V("",!0),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Fa,disabled:!e.canEdit||rs.value||!e.studentEmail,title:e.canEdit?"Save UCAS application":"Read-only for staff  students can save"},[rs.value?V("",!0):(w(),k("svg",Qu,[...i[45]||(i[45]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),rs.value?(w(),k("span",Zu)):V("",!0),X(" "+x(rs.value?"Saving":"Save"),1)],8,Xu)])]),r("main",ed,[r("section",td,[r("div",sd,[i[54]||(i[54]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Subjects + offer requirements"),r("p",{class:"ucas-card-hint"},"Enter the grades required by the university for this course (max 5 subjects).")],-1)),Nt.value.length===0?(w(),k("div",nd,[...i[47]||(i[47]=[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[r("path",{d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),r("span",null,"No subjects found in the academic profile.",-1)])])):(w(),k("div",od,[i[48]||(i[48]=r("div",{class:"ucas-subjects-head"},"Subject",-1)),i[49]||(i[49]=r("div",{class:"ucas-subjects-head"},"Offer grade",-1)),(w(!0),k(oe,null,Ae(Nt.value,g=>(w(),k(oe,{key:g.key},[r("div",{class:"ucas-subject-name",title:g.label},x(g.label),9,rd),r("div",null,[r("input",{class:"ucas-input",type:"text",disabled:!e.canEdit,value:Co.value[g.key]||"",onClick:jt,onFocus:jt,onInput:R=>Aa(g.key,R.target.value),placeholder:"e.g. AAA"},null,40,ad)])],64))),128))])),Nt.value.length?(w(),k("div",id,[i[53]||(i[53]=r("div",{class:"ucas-preview-header"},[r("h3",{class:"ucas-preview-title"},"UCAS points (estimated)"),r("span",{class:"ucas-preview-hint"},"Based on the subjects shown (max 5)")],-1)),r("div",ld,[r("div",{class:se(["ucas-tariff-box",xo(Ye.value.current,Ye.value.required)]),title:Fn("Current","Calculated from Current grades shown in your Academic Profile.",Ye.value.current,Ye.value.required)},[i[50]||(i[50]=r("div",{class:"ucas-tariff-label"},"Current",-1)),r("div",ud,x(Ye.value.current.toLocaleString()),1)],10,cd),r("div",{class:se(["ucas-tariff-box",xo(Ye.value.target,Ye.value.required)]),title:Fn("Target","Calculated from Target grades shown in your Academic Profile.",Ye.value.target,Ye.value.required)},[i[51]||(i[51]=r("div",{class:"ucas-tariff-label"},"Target",-1)),r("div",fd,x(Ye.value.target.toLocaleString()),1)],10,dd),r("div",{class:"ucas-tariff-box ucas-tariff-box--required",title:Fn("Required","Calculated from the Offer grade inputs on this page (per subject).",Ye.value.required,Ye.value.required)},[i[52]||(i[52]=r("div",{class:"ucas-tariff-label"},"Required",-1)),r("div",pd,x(Ye.value.required.toLocaleString()),1)],8,vd)]),Ye.value.unknownCount>0?(w(),k("div",hd," Some grades couldnt be converted to points (format/qualification not recognised). ")):V("",!0)])):V("",!0)]),r("div",md,[i[63]||(i[63]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Character budget")],-1)),r("div",gd,[r("div",{class:se(["ucas-metric",{"ucas-metric--danger":xe.value>=We}])},[i[55]||(i[55]=r("div",{class:"ucas-metric-label"},"Total characters",-1)),r("div",yd,[X(x(xe.value.toLocaleString())+" ",1),r("span",bd,"/ "+x(We.toLocaleString()),1)]),r("div",_d,[r("div",{class:se(["ucas-progress-fill",{"ucas-progress--warning":xe.value>We*.85,"ucas-progress--danger":xe.value>=We}]),style:bt({width:Math.min(100,xe.value/We*100)+"%"})},null,6)]),r("div",{class:se(["ucas-metric-sub",{"ucas-metric-sub--danger":os.value>0}])},[os.value>0?(w(),k(oe,{key:0},[X(x(os.value.toLocaleString())+" over limit",1)],64)):(w(),k(oe,{key:1},[X(x(Tn.value.toLocaleString())+" remaining",1)],64))],2)],2),r("div",{class:se(["ucas-metric",{"ucas-metric--success":xe.value>=gt}])},[i[59]||(i[59]=r("div",{class:"ucas-metric-label"},"Minimum required",-1)),r("div",{class:"ucas-metric-value"},[X(x(gt)+" "),i[56]||(i[56]=r("span",{class:"ucas-metric-max"},"characters",-1))]),r("div",wd,[xe.value>=gt?(w(),k("svg",kd,[...i[57]||(i[57]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(w(),k("svg",Cd,[...i[58]||(i[58]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),r("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),r("span",null,x(xe.value>=gt?"Minimum met":`Need ${gt-xe.value} more`),1)])],2)]),r("div",Sd,[r("div",xd,[i[61]||(i[61]=r("h3",{class:"ucas-preview-title"},"Preview",-1)),i[62]||(i[62]=r("span",{class:"ucas-preview-hint"},"Combined statement as it will appear",-1)),r("button",{class:"ucas-q-expand",type:"button",onClick:i[4]||(i[4]=g=>Hs("preview")),title:"Expand preview to read comfortably"},[...i[60]||(i[60]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])])]),r("div",Ed,x(gs.value||"Your combined statement will appear here as you type"),1)])])]),r("section",Ad,[r("div",$d,[r("div",Td,[i[65]||(i[65]=r("label",{class:"ucas-q-label",for:"q1"},[r("span",{class:"ucas-q-number"},"1"),r("span",{class:"ucas-q-title"},"Why do you want to study this course or subject?")],-1)),r("div",Id,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[5]||(i[5]=g=>Hs("q1")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[64]||(i[64]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Od),r("span",{class:se(["ucas-q-count",{"ucas-q-count--active":C.q1.length>0}])},x(C.q1.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q1",class:"ucas-textarea",disabled:!e.canEdit,value:C.q1,onClick:jt,onFocus:jt,onInput:i[6]||(i[6]=g=>Ds("q1",g.target.value)),placeholder:"Be specific. What sparked your interest, and why this course?"},null,40,Pd)]),r("div",Md,[r("div",Fd,[i[67]||(i[67]=r("label",{class:"ucas-q-label",for:"q2"},[r("span",{class:"ucas-q-number"},"2"),r("span",{class:"ucas-q-title"},"How have your qualifications and studies prepared you?")],-1)),r("div",Rd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[7]||(i[7]=g=>Hs("q2")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[66]||(i[66]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Ud),r("span",{class:se(["ucas-q-count",{"ucas-q-count--active":C.q2.length>0}])},x(C.q2.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q2",class:"ucas-textarea",disabled:!e.canEdit,value:C.q2,onClick:jt,onFocus:jt,onInput:i[8]||(i[8]=g=>Ds("q2",g.target.value)),placeholder:"Use evidence: topics, projects, what you learned, and how it links."},null,40,jd)]),r("div",Nd,[r("div",Ld,[i[69]||(i[69]=r("label",{class:"ucas-q-label",for:"q3"},[r("span",{class:"ucas-q-number"},"3"),r("span",{class:"ucas-q-title"},"What have you done outside education to prepare, and why is it useful?")],-1)),r("div",qd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[9]||(i[9]=g=>Hs("q3")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[68]||(i[68]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Hd),r("span",{class:se(["ucas-q-count",{"ucas-q-count--active":C.q3.length>0}])},x(C.q3.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q3",class:"ucas-textarea",disabled:!e.canEdit,value:C.q3,onClick:jt,onFocus:jt,onInput:i[10]||(i[10]=g=>Ds("q3",g.target.value)),placeholder:"Super-curricular, work experience, reading, volunteering, clubs what did it develop?"},null,40,Dd)])]),e.commentsEnabled?(w(),k("section",Vd,[r("div",Bd,[r("div",Kd,[i[71]||(i[71]=Qe('<div class="ucas-comments-header-left" data-v-9e3c962d><div class="ucas-comments-icon" aria-hidden="true" data-v-9e3c962d><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-title-group" data-v-9e3c962d><h2 class="ucas-comments-title" data-v-9e3c962d>Tutor feedback</h2><p class="ucas-comments-subtitle" data-v-9e3c962d>Comments from staff to help improve your statement</p></div></div>',1)),r("div",{class:"ucas-comments-count",title:`${(F.value||[]).length} comment(s)`},[r("span",Yd,x((F.value||[]).length),1),i[70]||(i[70]=r("span",null,"Comments",-1))],8,Gd)]),e.canAddComment?(w(),k("div",Wd,[r("div",zd,[r("div",Jd,x(U(e.staffEmail||"Staff")),1),r("div",Xd,[Ie(r("textarea",{"onUpdate:modelValue":i[11]||(i[11]=g=>N.value=g),class:"ucas-comments-textarea",placeholder:"Write feedback for this student's personal statement",disabled:Z.value},null,8,Qd),[[Dt,N.value]]),r("div",Zd,[i[73]||(i[73]=Qe('<div class="ucas-comments-compose-hint" data-v-9e3c962d><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><circle cx="12" cy="12" r="10" data-v-9e3c962d></circle><path d="M12 16v-4" data-v-9e3c962d></path><path d="M12 8h.01" data-v-9e3c962d></path></svg><span data-v-9e3c962d>Visible to the student immediately</span></div>',1)),r("div",ef,[r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:i[12]||(i[12]=g=>N.value=""),disabled:Z.value||!N.value}," Cancel ",8,tf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:qa,disabled:Z.value||!N.value.trim()},[Z.value?V("",!0):(w(),k("svg",nf,[...i[72]||(i[72]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),X(" "+x(Z.value?"Posting":"Post feedback"),1)],8,sf)])])])]),r("div",of,[i[74]||(i[74]=r("div",{class:"ucas-comments-quick-label"},"Quick feedback",-1)),r("div",rf,[(w(),k(oe,null,Ae(Ce,g=>r("button",{key:g,class:"ucas-comments-chip",type:"button",onClick:R=>re(g),disabled:Z.value},x(g),9,af)),64))])])])):V("",!0),_e.value.length===0?(w(),k("div",lf,[...i[75]||(i[75]=[Qe('<div class="ucas-comments-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-empty-title" data-v-9e3c962d>No feedback yet</div><div class="ucas-comments-empty-text" data-v-9e3c962d>Staff comments will appear here to help improve your personal statement.</div>',3)])])):(w(),k("div",cf,[(w(!0),k(oe,null,Ae(_e.value,g=>(w(),k(oe,{key:g.key},[r("div",{class:"ucas-comments-divider","aria-label":g.label},[i[76]||(i[76]=r("div",{class:"ucas-comments-divider-line"},null,-1)),r("span",df,x(g.label),1),i[77]||(i[77]=r("div",{class:"ucas-comments-divider-line"},null,-1))],8,uf),(w(!0),k(oe,null,Ae(g.items,R=>(w(),k("div",{key:R.id,class:"ucas-comments-item"},[r("div",ff,[r("div",{class:se(["ucas-comments-avatar",ae(R.staffEmail)])},x(U(R.staffEmail||"Staff")),3),r("div",vf,[r("div",pf,[r("div",hf,[r("span",mf,x(R.staffEmail||"Staff"),1),c(R.staffEmail).trim().toLowerCase()==="virtual tutor"?(w(),k("span",gf," Virtual Tutor ")):V("",!0)]),r("span",yf,x(Ta(R.createdAt)),1)]),r("div",{class:se(["ucas-comments-body",{"ucas-comments-body--collapsed":!ye(R.id)&&c(R.comment).length>Ys}])},[ye(R.id)?(w(),k(oe,{key:0},[X(x(R.comment),1)],64)):(w(),k(oe,{key:1},[X(x(ce(R.comment)),1)],64))],2),c(R.comment).length>Ys?(w(),k("button",{key:0,class:"ucas-comments-more",type:"button",onClick:z=>W(R.id)},x(ye(R.id)?"Show less":"Show more"),9,bf)):V("",!0)])])]))),128))],64))),128))]))])])):V("",!0)]),r("footer",_f,[r("div",wf,[r("div",kf,[r("span",Cf,x(xe.value.toLocaleString()),1),i[80]||(i[80]=r("span",{class:"ucas-footer-divider"},"/",-1)),r("span",Sf,x(We.toLocaleString()),1),r("span",xf,[i[78]||(i[78]=X(" ( ",-1)),os.value>0?(w(),k(oe,{key:0},[X(x(os.value.toLocaleString())+" over",1)],64)):(w(),k(oe,{key:1},[X(x(Tn.value.toLocaleString())+" remaining",1)],64)),i[79]||(i[79]=X(" ) ",-1))])]),xe.value>0&&xe.value<gt?(w(),k("div",Ef,[i[81]||(i[81]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),r("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),r("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),X(" Add "+x(gt-xe.value)+" more characters to reach the minimum. ",1)])):V("",!0),xe.value>We?(w(),k("div",Af,[i[82]||(i[82]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),X(" Over the limit by "+x(os.value)+" characters. Shorten your statement before saving or marking complete. ",1)])):xe.value>=We?(w(),k("div",$f,[...i[83]||(i[83]=[r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),X(" Maximum character limit reached. ",-1)])])):V("",!0)]),r("div",Tf,[ke(Dl,{name:"toast-fade"},{default:Dr(()=>[o.value?(w(),k("span",If,[i[84]||(i[84]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),X(" "+x(o.value),1)])):V("",!0)]),_:1})])]),L.value?(w(),k("div",{key:0,class:"ucas-feedback-overlay",onClick:i[15]||(i[15]=wt(g=>L.value=!1,["self"]))},[r("div",Of,[r("div",Pf,[i[86]||(i[86]=r("div",{class:"ucas-feedback-title"},"Feedback",-1)),r("button",{class:"ucas-btn-close",type:"button",onClick:i[13]||(i[13]=g=>L.value=!1),"aria-label":"Close feedback"},[...i[85]||(i[85]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Mf,[K.value?(w(),k("div",Ff,[...i[87]||(i[87]=[r("span",{class:"ucas-spinner"},null,-1),X(" Generating feedback ",-1)])])):D.value?(w(),k("div",Rf,x(D.value),1)):(w(),k("div",Uf,x(P.value||"No feedback available yet."),1))]),r("div",jf,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[14]||(i[14]=g=>So(!0)),disabled:K.value}," Regenerate ",8,Nf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ua,disabled:K.value||Y.value||!P.value,title:P.value?"Add this feedback into Tutor comments as Virtual Tutor":"Generate feedback first"},x(Y.value?"Adding":"Add as a comment"),9,Lf)])])])):V("",!0),ns.value?(w(),k("div",{key:1,class:"ucas-expand-overlay",onClick:wt($n,["self"])},[r("div",qf,[r("div",Hf,[r("div",Df,x(xa.value),1),r("div",Vf,[r("span",Bf,x(Ea.value.toLocaleString())+" in this section",1),r("span",Kf,x(xe.value.toLocaleString())+"/"+x(We.toLocaleString())+" total",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:$n,"aria-label":"Close expanded writing"},[...i[88]||(i[88]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Gf,[ot.value==="preview"?(w(),k("div",Yf,x(An.value||"Your combined statement will appear here as you type"),1)):(w(),k("textarea",{key:1,ref_key:"expandedTextareaEl",ref:qs,class:"ucas-textarea ucas-textarea-expanded",disabled:!e.canEdit,value:An.value,onInput:i[16]||(i[16]=g=>Ds(ot.value,g.target.value))},null,40,Wf))]),r("div",{class:"ucas-expand-footer"},[i[89]||(i[89]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to see the full page again. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:$n},"Done")])])])):V("",!0),j.value?(w(),k("div",{key:2,class:"ucas-expand-overlay",onClick:wt(Me,["self"])},[r("div",zf,[r("div",Jf,[r("div",Xf,x(te.value),1),r("div",Qf,[r("span",Zf,x(ie.value.toLocaleString())+" characters",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:Me,"aria-label":"Close expanded writing"},[...i[90]||(i[90]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",ev,[r("textarea",{ref_key:"refExpandedTextareaEl",ref:B,class:"ucas-textarea ucas-textarea-expanded",disabled:!b.value,value:ue.value,onInput:i[17]||(i[17]=g=>{q.value==="staff2"?_.value=g.target.value:I.value=g.target.value})},null,40,tv)]),r("div",{class:"ucas-expand-footer"},[i[91]||(i[91]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to return to the reference panel. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Me},"Done")])])])):V("",!0),u.value?(w(),k("div",{key:3,class:"ucas-feedback-overlay",onClick:i[32]||(i[32]=wt(g=>u.value=!1,["self"]))},[r("div",sv,[r("div",nv,[r("div",ov,[r("div",rv,[(w(),k("svg",av,[e.canEdit?(w(),k("path",iv)):V("",!0),e.canEdit?(w(),k("circle",lv)):V("",!0),e.canEdit?(w(),k("path",cv)):V("",!0),e.canEdit?(w(),k("path",uv)):(w(),k("path",dv)),e.canEdit?V("",!0):(w(),k("polyline",fv)),e.canEdit?V("",!0):(w(),k("line",vv)),e.canEdit?V("",!0):(w(),k("line",pv)),e.canEdit?V("",!0):(w(),k("line",hv))]))]),r("div",mv,[i[92]||(i[92]=r("div",{class:"ucas-ref-title"},"Teacher reference",-1)),r("div",gv,[e.canEdit?(w(),k("span",yv,"Invite teachers to contribute to your UCAS reference")):(w(),k("span",bv,"View and add contributions (Sections 2 & 3)"))])])]),r("button",{class:"ucas-ref-close",type:"button",onClick:i[18]||(i[18]=g=>u.value=!1),"aria-label":"Close"},[...i[93]||(i[93]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",_v,[r("div",wv,[i[96]||(i[96]=r("span",{class:"ucas-ref-status-label"},"Reference status",-1)),r("span",{class:se(["ucas-ref-status-pill",`ucas-ref-status--${J.value}`])},[J.value==="completed"||J.value==="finalised"?(w(),k("svg",kv,[...i[94]||(i[94]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(w(),k("svg",Cv,[...i[95]||(i[95]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),X(" "+x(Et.value),1)],2),p.value.total?(w(),k("span",Sv,x(p.value.submitted)+"/"+x(p.value.total)+" submitted",1)):(w(),k("span",xv,"No invites yet"))]),r("button",{class:"ucas-ref-refresh",type:"button",onClick:ft,disabled:ee.value},[i[97]||(i[97]=Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-9e3c962d></path><path d="M21 3v5h-5" data-v-9e3c962d></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-9e3c962d></path><path d="M3 21v-5h5" data-v-9e3c962d></path></svg>',1)),X(" "+x(ee.value?"Refreshing":"Refresh"),1)],8,Ev)]),r("div",Av,[e.canEdit?(w(),k("div",$v,[r("div",Tv,[r("div",Iv,[r("div",{class:se(["ucas-ref-step-circle",{complete:p.value.total>0}])},[p.value.total>0?(w(),k("svg",Ov,[...i[98]||(i[98]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(w(),k("span",Pv,"1"))],2),i[99]||(i[99]=r("div",{class:"ucas-ref-step-label"},"Invite teachers",-1))]),r("div",Mv,[r("div",{class:se(["ucas-ref-step-circle",{active:p.value.total>0&&p.value.submitted<p.value.total,complete:p.value.total>0&&p.value.submitted===p.value.total}])},[...i[100]||(i[100]=[r("span",null,"2",-1)])],2),r("div",{class:se(["ucas-ref-step-label",{active:p.value.total>0&&p.value.submitted<p.value.total}])},"Awaiting responses",2)]),r("div",Fv,[r("div",{class:se(["ucas-ref-step-circle",{complete:J.value==="completed"||J.value==="finalised"}])},[J.value==="completed"||J.value==="finalised"?(w(),k("svg",Rv,[...i[101]||(i[101]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(w(),k("span",Uv,"3"))],2),i[102]||(i[102]=r("div",{class:"ucas-ref-step-label"},"Reference complete",-1))])]),r("div",jv,[r("div",Nv,[i[103]||(i[103]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Track who has been asked to contribute")],-1)),r("div",Lv,x((Pe.value||[]).length)+" invited",1)]),Pe.value.length===0?(w(),k("div",qv,[...i[104]||(i[104]=[Qe('<div class="ucas-ref-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div data-v-9e3c962d><div class="ucas-ref-empty-title" data-v-9e3c962d>No invitations yet</div><div class="ucas-ref-empty-text" data-v-9e3c962d>Invite a teacher below to get started.</div></div>',2)])])):(w(),k("div",Hv,[(w(!0),k(oe,null,Ae(Pe.value,g=>(w(),k("div",{key:g.id,class:se(["ucas-ref-invite",{submitted:g.status==="submitted"}])},[r("div",Dv,[r("div",{class:se(["ucas-ref-invite-avatar",ae(g.teacherEmail)])},x(U(g.teacherName||g.teacherEmail)),3),r("div",Vv,[r("div",Bv,x(g.teacherName||g.teacherEmail),1),r("div",Kv,x(g.subjectKey||"No subject"),1)])]),r("div",Gv,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>je(g),disabled:He.value}," Reinvite ",8,Yv),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>dt(g)}," Remove ",8,Wv)]),r("div",{class:se(["ucas-ref-invite-status",g.status==="submitted"?"ok":"wait"])},[g.status==="submitted"?(w(),k("svg",zv,[...i[105]||(i[105]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(w(),k("svg",Jv,[...i[106]||(i[106]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),X(" "+x(g.status==="submitted"?"Submitted":"Pending"),1)],2)],2))),128))])),Se.value.size?(w(),k("div",Xv,[r("span",Qv,x(Se.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:xt},"Restore")])):V("",!0)]),r("div",Zv,[i[113]||(i[113]=Qe('<div class="ucas-ref-form-title" data-v-9e3c962d><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-9e3c962d></path><circle cx="9" cy="7" r="4" data-v-9e3c962d></circle><line x1="19" y1="8" x2="19" y2="14" data-v-9e3c962d></line><line x1="22" y1="11" x2="16" y2="11" data-v-9e3c962d></line></svg> Invite another teacher </div>',1)),r("div",ep,[r("div",null,[i[107]||(i[107]=r("div",{class:"ucas-ref-label"},"Teacher email",-1)),Ie(r("input",{class:"ucas-ref-input",type:"email","onUpdate:modelValue":i[19]||(i[19]=g=>Te.value=g),placeholder:"teacher@school.org"},null,512),[[Dt,Te.value]])]),r("div",null,[i[109]||(i[109]=r("div",{class:"ucas-ref-label"},"Subject (optional)",-1)),Ie(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[20]||(i[20]=g=>Ee.value=g)},[i[108]||(i[108]=r("option",{value:""},"No subject",-1)),(w(!0),k(oe,null,Ae(Nt.value,g=>(w(),k("option",{key:g.key,value:g.label},x(g.label),9,tp))),128))],512),[[kt,Ee.value]])])]),r("div",sp,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[21]||(i[21]=g=>{Te.value="",Ee.value=""}),disabled:He.value}," Clear ",8,np),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:ms,disabled:He.value||!Te.value.trim()},[He.value?V("",!0):(w(),k("svg",rp,[...i[110]||(i[110]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),X(" "+x(He.value?"Sending":"Send invitation"),1)],8,op)]),tt.value?(w(),k("div",ap,[i[111]||(i[111]=r("div",{class:"ucas-ref-linkcopy-label"},"Or copy invite link",-1)),r("div",ip,[r("input",{class:"ucas-ref-linkcopy-input",type:"text",value:tt.value,readonly:""},null,8,lp),r("button",{class:"ucas-ref-linkcopy-btn",type:"button",onClick:i[22]||(i[22]=g=>nt(tt.value))},"Copy")]),i[112]||(i[112]=r("div",{class:"ucas-ref-linkcopy-hint"},"Share this link directly with your teacher if email doesn't arrive.",-1))])):V("",!0)])])):(w(),k("div",cp,[r("div",up,[i[114]||(i[114]=r("div",{class:"ucas-ref-staff-title"},"Reference (staff view)",-1)),h.value&&h.value.updatedAt?(w(),k("div",dp,"Updated "+x(new Date(h.value.updatedAt).toLocaleString()),1)):V("",!0)]),d.value?(w(),k("div",fp,[...i[115]||(i[115]=[r("span",null,"Loading reference",-1)])])):h.value?(w(),k("div",pp,[r("div",hp,[r("div",mp,[i[117]||(i[117]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"3"),X(" Subject teacher contributions ")],-1)),r("span",gp,x((h.value.section3||[]).length)+" contributions",1)]),i[121]||(i[121]=r("div",{class:"ucas-ref-contrib-sub"},"Add specific evidence of academic potential and engagement relevant to the course.",-1)),r("div",yp,[r("div",bp,[Ie(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[23]||(i[23]=g=>$.value=g)},[i[118]||(i[118]=r("option",{value:""},"No subject",-1)),(w(!0),k(oe,null,Ae(Nt.value,g=>(w(),k("option",{key:g.key,value:g.label},x(g.label),9,_p))),128))],512),[[kt,$.value]])]),Ie(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[24]||(i[24]=g=>I.value=g),placeholder:"Describe the student's ability, achievements, and potential in your subject"},null,512),[[Dt,I.value]]),r("div",wp,[r("span",kp,x((I.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[25]||(i[25]=g=>Fe("staff3")),disabled:!b.value}," Expand ",8,Cp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[26]||(i[26]=g=>Je(3)),disabled:T.value||!b.value||!I.value.trim()},[T.value?V("",!0):(w(),k("svg",xp,[...i[119]||(i[119]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),X(" "+x(T.value?"Saving":"Save Section 3"),1)],8,Sp)]),b.value?V("",!0):(w(),k("div",Ep,"Saving is unavailable because your staff email is missing in this embedded context."))]),(h.value.section3||[]).length?(w(),k("div",Ap,[i[120]||(i[120]=r("div",{class:"ucas-ref-existing-title"},"Existing contributions",-1)),r("div",$p,[(w(!0),k(oe,null,Ae(h.value.section3,g=>(w(),k("div",{key:g.id,class:"ucas-ref-existing-item"},[r("div",Tp,[r("div",Ip,[r("div",Op,x(U(g.authorName||g.authorEmail)),1),r("span",Pp,x(g.authorName||g.authorEmail),1)]),r("span",Mp,x(g.subjectKey||""),1)]),r("div",Fp,x(g.text),1)]))),128))])])):V("",!0)]),r("div",Rp,[r("button",{class:"ucas-ref-accordion-head",type:"button",onClick:i[27]||(i[27]=g=>H.value=!H.value)},[i[123]||(i[123]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"2"),X(" Extenuating circumstances ")],-1)),r("div",Up,[i[122]||(i[122]=r("span",{class:"ucas-ref-badge"},"Optional",-1)),r("span",jp,x(H.value?"":""),1)])]),H.value?(w(),k("div",Np,[i[125]||(i[125]=r("div",{class:"ucas-ref-contrib-sub"},"Add factual, course-relevant context (with student permission).",-1)),r("div",Lp,[Ie(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[28]||(i[28]=g=>_.value=g),placeholder:"Add any relevant extenuating circumstances here"},null,512),[[Dt,_.value]]),r("div",qp,[r("span",Hp,x((_.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[29]||(i[29]=g=>Fe("staff2")),disabled:!b.value}," Expand ",8,Dp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[30]||(i[30]=g=>Je(2)),disabled:O.value||!b.value||!_.value.trim()},[O.value?V("",!0):(w(),k("svg",Bp,[...i[124]||(i[124]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),X(" "+x(O.value?"Saving":"Save Section 2"),1)],8,Vp)]),b.value?V("",!0):(w(),k("div",Kp,"Saving is unavailable because your staff email is missing in this embedded context."))])])):V("",!0)]),r("div",Gp,[i[126]||(i[126]=r("div",{class:"ucas-ref-section-head"},[r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 1  Centre statement"),r("div",{class:"ucas-ref-section-subtitle"},"Standard centre template (usually written once)")])],-1)),r("div",Yp,x(c(h.value.section1Text)||"No centre template yet."),1)]),r("div",Wp,[r("div",zp,[i[127]||(i[127]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 2  Extenuating circumstances"),r("div",{class:"ucas-ref-section-subtitle"},"Existing contributions")],-1)),r("div",Jp,x((h.value.section2||[]).length),1)]),(h.value.section2||[]).length===0?(w(),k("div",Xp,[...i[128]||(i[128]=[r("span",null,"No contributions yet.",-1)])])):(w(),k("div",Qp,[(w(!0),k(oe,null,Ae(h.value.section2,g=>(w(),k("div",{key:g.id,class:"ucas-ref-contrib-item"},[r("div",Zp,[X(x(g.authorName||g.authorEmail)+" ",1),g.subjectKey?(w(),k("span",eh," "+x(g.subjectKey),1)):V("",!0)]),r("div",th,x(g.text),1)]))),128))]))]),r("div",sh,[r("div",nh,[i[129]||(i[129]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Status of external invites")],-1)),r("div",oh,x((Pe.value||[]).length),1)]),Pe.value.length===0?(w(),k("div",rh,[...i[130]||(i[130]=[r("span",null,"No invitations yet.",-1)])])):(w(),k("div",ah,[(w(!0),k(oe,null,Ae(Pe.value,g=>(w(),k("div",{key:g.id,class:se(["ucas-ref-invite",{submitted:g.status==="submitted"}])},[r("div",ih,[r("div",{class:se(["ucas-ref-invite-avatar",ae(g.teacherEmail)])},x(U(g.teacherName||g.teacherEmail)),3),r("div",lh,[r("div",ch,x(g.teacherName||g.teacherEmail),1),r("div",uh,x(g.subjectKey||"No subject"),1)])]),r("div",dh,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>je(g),disabled:He.value}," Reinvite ",8,fh),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>dt(g)}," Remove ",8,vh)]),r("div",{class:se(["ucas-ref-invite-status",g.status==="submitted"?"ok":"wait"])},x(g.status==="submitted"?"Submitted":"Pending"),3)],2))),128))])),Se.value.size?(w(),k("div",ph,[r("span",hh,x(Se.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:xt},"Restore")])):V("",!0)])])):(w(),k("div",vp,[...i[116]||(i[116]=[r("span",null,"No reference data found.",-1)])]))]))]),r("div",mh,[r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[31]||(i[31]=g=>u.value=!1)},"Done")])])])):V("",!0)])])}}},yh=ct(gh,[["__scopeId","data-v-9e3c962d"]]),bh={class:"tutor-ucas-modal"},_h={class:"tutor-ucas-header"},wh={class:"tutor-ucas-title"},kh={class:"tutor-ucas-sub"},Ch={class:"tutor-ucas-body"},Sh={key:0},xh={key:0,class:"tutor-ucas-iframe-loading",style:{position:"fixed",inset:"0","z-index":"10100"}},Eh={key:1,class:"tutor-ucas-error",style:{position:"fixed",inset:"24px","z-index":"10100","max-width":"820px",margin:"auto"}},Ah={class:"tutor-ucas-error-msg"},$h={key:1,class:"tutor-ucas-loading"},Th={key:2,class:"tutor-ucas-error"},Ih={class:"tutor-ucas-error-msg"},Oh={key:3,class:"tutor-ucas-content"},Ph={class:"tutor-ucas-status-row"},Mh={class:"tutor-ucas-status-card"},Fh={class:"detail"},Rh={class:"tutor-ucas-status-card"},Uh={class:"detail"},jh={key:0},Nh={class:"tutor-ucas-status-card"},Lh={class:"detail"},qh={key:0},Hh={class:"tutor-ucas-actions"},Dh=["disabled"],Vh={class:"tutor-ucas-section"},Bh={class:"tutor-ucas-section-head"},Kh={class:"muted"},Gh={key:0,class:"tutor-ucas-empty"},Yh={key:1,class:"tutor-ucas-contribs"},Wh={class:"tutor-ucas-contrib-group-title"},zh={class:"tutor-ucas-contrib-meta"},Jh={class:"name"},Xh={class:"muted"},Qh={class:"tutor-ucas-contrib-text"},Zh={class:"tutor-ucas-contrib-actions"},em=["onClick"],tm=["onClick"],sm={class:"tutor-ucas-section-head"},nm={style:{display:"flex","align-items":"center",gap:"10px"}},om={class:"muted"},rm=["disabled"],am={class:"tutor-ucas-editor-footer"},im={key:0,class:"tutor-ucas-inline-error"},lm={class:"tutor-ucas-editor-actions"},cm=["disabled"],um=["disabled"],dm=["disabled"],fm="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",vm={__name:"TutorUcasModal",props:{isOpen:{type:Boolean,required:!0},student:{type:Object,default:null},staffEmail:{type:String,default:""},staffName:{type:String,default:""},academicYear:{type:String,default:"current"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=M(!1),a=M(""),l=M(null),c=M(null),f=M("current"),m=M(""),v=M(""),y=M(!1),C=M(""),E=M(!1),F=M(!1),N=M(!1),Z=M(!1),L=M(!1),K=M(""),Y=M(null),P=M(null),D=M(null),le=M(null),Ce=Q(()=>{var _,$;const u=(($=(_=l.value)==null?void 0:_.data)==null?void 0:$.answers)||{},d=(u.q1||"").length,h=(u.q2||"").length,b=(u.q3||"").length;return d+h+b}),ye=Q(()=>{var b;const u=((b=l.value)==null?void 0:b.data)||{},d=!!u.selectedCourseKey,h=!!(u.requirementsByCourse&&Object.keys(u.requirementsByCourse).length>0);return d||h}),W=Q(()=>le.value?"Completed":Ce.value>=350?"In progress":"Not started"),ce=Q(()=>le.value?"pill--ok":Ce.value>=350?"pill--warn":"pill--muted"),re=Q(()=>(m.value||"").trim()),U=Q(()=>re.value.length>0),ae=Q(()=>m.value.trim()!==(v.value||"").trim());function be(u){const d=String(u||"").trim();return!d||d.toLowerCase()==="current"?"current":d}async function qe(){var d;const u=be(s.academicYear);if(u&&u!=="current")return f.value=u,u;try{const h=await at.getAcademicProfile(s.student.email,null,{roleHint:"staff",staffEmail:s.staffEmail||""}),b=be((h==null?void 0:h.academicYear)||((d=h==null?void 0:h.data)==null?void 0:d.academicYear));if(b&&b!=="current")return f.value=b,b}catch{}return f.value="current","current"}const _e=Q(()=>{var b,_;const u=((_=(b=c.value)==null?void 0:b.data)==null?void 0:_.section3)||[],d=new Map;for(const $ of u){const I=($.subjectKey||"General").trim()||"General",O=d.get(I)||[];O.push($),d.set(I,O)}const h=[];for(const[$,I]of d.entries())h.push({subjectKey:$,items:[...I].sort((O,T)=>String(T.updatedAt||T.createdAt||"").localeCompare(String(O.updatedAt||O.createdAt||"")))});return h.sort(($,I)=>$.subjectKey.localeCompare(I.subjectKey)),h});async function ee(){var u,d,h,b,_,$,I,O,T,H,j;if((u=s.student)!=null&&u.email){o.value=!0,a.value="",C.value="";try{await qe();const[q,B]=await Promise.all([at.getUcasApplication(s.student.email,f.value),at.getReferenceFull(s.student.email,f.value)]);l.value=q,c.value=B,le.value=((h=(d=l.value)==null?void 0:d.data)==null?void 0:h.statement_completed_at)||((_=(b=l.value)==null?void 0:b.data)==null?void 0:_.statementCompletedAt)||null;const te=((I=($=c.value)==null?void 0:$.data)==null?void 0:I.tutorCompiledSection3)||"";m.value=te,v.value=te,P.value=((T=(O=c.value)==null?void 0:O.data)==null?void 0:T.tutorCompiledUpdatedAt)||null,D.value=((j=(H=c.value)==null?void 0:H.data)==null?void 0:j.tutorCompiledCompletedAt)||null}catch(q){a.value=(q==null?void 0:q.message)||"Failed to load"}finally{o.value=!1}}}et(()=>{var u;return[s.isOpen,(u=s.student)==null?void 0:u.email,s.academicYear]},([u])=>{u&&ee()}),et(()=>s.isOpen,u=>{if(u)try{document.body.style.overflow="hidden"}catch{}else{try{document.body.style.overflow=""}catch{}N.value=!1,Z.value=!1}},{immediate:!0});function J(){ae.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")}async function Oe(){var u;if((u=s.student)!=null&&u.email){C.value="",y.value=!0;try{await at.saveTutorCompiled(s.student.email,{academicYear:f.value,staffEmail:s.staffEmail,staffName:s.staffName,text:m.value}),await ee()}catch(d){C.value=(d==null?void 0:d.message)||"Failed to save"}finally{y.value=!1}}}async function Se(){var u;if((u=s.student)!=null&&u.email&&U.value&&confirm("Mark this tutor reference as READY for UCAS?")){E.value=!0,C.value="";try{ae.value&&await at.saveTutorCompiled(s.student.email,{academicYear:f.value,staffEmail:s.staffEmail,staffName:s.staffName,text:m.value}),await at.markTutorCompiledComplete(s.student.email,{academicYear:f.value,staffEmail:s.staffEmail,staffName:s.staffName}),await ee()}catch(d){C.value=(d==null?void 0:d.message)||"Failed to mark complete"}finally{E.value=!1}}}async function Te(){var u;if((u=s.student)!=null&&u.email&&confirm("Send back to tutor (unmark complete)?")){E.value=!0,C.value="";try{await at.unmarkTutorCompiledComplete(s.student.email,{academicYear:f.value,staffEmail:s.staffEmail,staffName:s.staffName}),await ee()}catch(d){C.value=(d==null?void 0:d.message)||"Failed to unmark complete"}finally{E.value=!1}}}function Ee(u){const d=((u==null?void 0:u.text)||"").trim();if(!d)return;const h=m.value||"",b=h.trim().length?`

`:"";m.value=`${h}${b}${d}`.trimStart()}async function He(u){try{await navigator.clipboard.writeText(u||"")}catch{}}const tt=Q(()=>{var d,h,b;return(((d=Y.value)==null?void 0:d.academicYear)||((b=(h=Y.value)==null?void 0:h.data)==null?void 0:b.academicYear)||""||f.value||s.academicYear||"current").toString()}),Ut=Q(()=>{var d;const u=Y.value;return Array.isArray(u==null?void 0:u.subjects)?u.subjects:Array.isArray((d=u==null?void 0:u.data)==null?void 0:d.subjects)?u.data.subjects:[]}),ut=Q(()=>{var b;const u=Y.value,d=(u==null?void 0:u.student)||((b=u==null?void 0:u.data)==null?void 0:b.student)||null;return d&&Array.isArray(d.universityOffers)?d.universityOffers:[]});async function st(){var d,h;const u=String(((d=s.student)==null?void 0:d.email)||"").trim();if(u){Z.value=!0,L.value=!0,K.value="";try{const b=be(f.value)==="current"?null:f.value,_=await at.getAcademicProfile(u,b,{roleHint:"staff",staffEmail:s.staffEmail||""});if(!_||_.success===!1)throw new Error((_==null?void 0:_.error)||"Failed to load academic profile");Y.value=_;const $=be((_==null?void 0:_.academicYear)||((h=_==null?void 0:_.data)==null?void 0:h.academicYear));$&&(f.value=$)}catch(b){K.value=(b==null?void 0:b.message)||"Failed to open UCAS"}finally{L.value=!1}}}function dt(){Z.value=!1,L.value=!1,K.value=""}function xt(){N.value=!N.value}async function Pe(){var u;if((u=s.student)!=null&&u.email&&confirm("Request further edits to the students personal statement?")){F.value=!0;try{await at.requestUcasStatementEdits(s.student.email,{academicYear:f.value,staffEmail:s.staffEmail,staffName:s.staffName}),await ee()}catch(d){a.value=(d==null?void 0:d.message)||"Failed to request edits"}finally{F.value=!1}}}function Et(){ee()}function p(u){if(!u)return"";try{const d=new Date(u);return Number.isNaN(d.getTime())?String(u):d.toLocaleString()}catch{return String(u)}}return(u,d)=>{var h,b,_,$,I;return e.isOpen?(w(),k("div",{key:0,class:"tutor-ucas-overlay",onClick:wt(J,["self"])},[r("div",bh,[r("div",_h,[r("div",wh,[r("h3",null,x(((h=e.student)==null?void 0:h.name)||"Student")+"  UCAS",1),r("div",kh,x(((b=e.student)==null?void 0:b.email)||""),1)]),r("button",{class:"tutor-ucas-close",onClick:J},"")]),r("div",Ch,[Z.value?(w(),k("div",Sh,[L.value?(w(),k("div",xh,[...d[1]||(d[1]=[r("div",{class:"spinner"},null,-1),r("div",null,"Loading UCAS application",-1)])])):K.value?(w(),k("div",Eh,[d[2]||(d[2]=r("div",{class:"tutor-ucas-error-title"},"Could not open UCAS application",-1)),r("div",Ah,x(K.value),1),r("div",{style:{display:"flex",gap:"10px","flex-wrap":"wrap"}},[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:st},"Try again"),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:dt},"Back to reference")])])):(w(),an(yh,{key:2,studentEmail:((_=e.student)==null?void 0:_.email)||"",academicYear:tt.value,subjects:Ut.value,offers:ut.value,apiUrl:fm,canEdit:!1,staffEmail:e.staffEmail||"",onClose:dt},null,8,["studentEmail","academicYear","subjects","offers","staffEmail"]))])):V("",!0),o.value?(w(),k("div",$h,[...d[3]||(d[3]=[r("div",{class:"spinner"},null,-1),r("div",null,"Loading UCAS data",-1)])])):a.value?(w(),k("div",Th,[d[4]||(d[4]=r("div",{class:"tutor-ucas-error-title"},"Could not load UCAS data",-1)),r("div",Ih,x(a.value),1),r("button",{class:"tutor-ucas-btn",onClick:Et},"Try again")])):(w(),k("div",Oh,[r("div",Ph,[r("div",Mh,[d[5]||(d[5]=r("div",{class:"label"},"Application",-1)),r("div",{class:se(["pill",ye.value?"pill--ok":"pill--muted"])},x(ye.value?"Started":"Not started"),3),r("div",Fh,x(ye.value?"Course / offers started":"No course/offers yet"),1)]),r("div",Rh,[d[6]||(d[6]=r("div",{class:"label"},"Personal statement",-1)),r("div",{class:se(["pill",ce.value])},x(W.value),3),r("div",Uh,[X(x(Ce.value)+" chars ",1),le.value?(w(),k("span",jh,"  completed")):V("",!0)])]),r("div",Nh,[d[7]||(d[7]=r("div",{class:"label"},"Tutor reference",-1)),r("div",{class:se(["pill",D.value?"pill--ok":U.value?"pill--warn":"pill--muted"])},x(D.value?"Complete":U.value?"In progress":"Not started"),3),r("div",Lh,[X(x(re.value.length)+" chars ",1),D.value?(w(),k("span",qh,"  marked complete")):V("",!0)])])]),r("div",Hh,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:st}," Open UCAS application "),r("button",{class:"tutor-ucas-btn",disabled:F.value,onClick:Pe},x(F.value?"Requesting":"Request edits (statement)"),9,Dh),d[8]||(d[8]=r("div",{class:"tutor-ucas-actions-spacer"},null,-1)),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:Et}," Reload ")]),r("div",Vh,[r("div",Bh,[d[9]||(d[9]=r("h4",null,"Incoming subject teacher references",-1)),r("div",Kh,x(((($=c.value)==null?void 0:$.section3)||[]).length)+" contributions",1)]),(((I=c.value)==null?void 0:I.section3)||[]).length===0?(w(),k("div",Gh," No subject teacher contributions yet. ")):(w(),k("div",Yh,[(w(!0),k(oe,null,Ae(_e.value,O=>(w(),k("div",{key:O.subjectKey,class:"tutor-ucas-contrib-group"},[r("div",Wh,x(O.subjectKey),1),(w(!0),k(oe,null,Ae(O.items,T=>(w(),k("div",{key:T.id,class:"tutor-ucas-contrib"},[r("div",zh,[r("div",Jh,x(T.authorName||T.authorEmail||"Teacher"),1),r("div",Xh,x(p(T.updatedAt||T.createdAt)),1)]),r("div",Qh,x(T.text),1),r("div",Zh,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm",onClick:H=>Ee(T)}," Add to compiled ",8,em),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm tutor-ucas-btn--ghost",onClick:H=>He(T.text)}," Copy ",8,tm)])]))),128))]))),128))]))]),r("div",{class:se(["tutor-ucas-section",{"tutor-ucas-section--expanded":N.value}])},[r("div",sm,[d[10]||(d[10]=r("h4",null,"Tutor compiled reference (final narrative)",-1)),r("div",nm,[r("div",om," Saved: "+x(P.value?p(P.value):""),1),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost tutor-ucas-btn--sm",type:"button",onClick:xt},x(N.value?"Collapse":"Expand"),1)])]),Ie(r("textarea",{"onUpdate:modelValue":d[0]||(d[0]=O=>m.value=O),class:"tutor-ucas-textarea",placeholder:"Build the final tutor narrative here",disabled:y.value||E.value,rows:"10",spellcheck:"true",autocorrect:"on",autocapitalize:"sentences"},null,8,rm),[[Dt,m.value]]),r("div",am,[C.value?(w(),k("div",im,x(C.value),1)):V("",!0),r("div",lm,[r("button",{class:"tutor-ucas-btn",disabled:y.value||!ae.value,onClick:Oe},x(y.value?"Saving":"Save draft"),9,cm),D.value?(w(),k("button",{key:1,class:"tutor-ucas-btn tutor-ucas-btn--danger",disabled:E.value,onClick:Te},x(E.value?"Updating":"Send back (unmark complete)"),9,dm)):(w(),k("button",{key:0,class:"tutor-ucas-btn tutor-ucas-btn--primary",disabled:E.value||!U.value,onClick:Se},x(E.value?"Marking":"Mark ready for UCAS"),9,um))])])],2),d[11]||(d[11]=r("div",{class:"tutor-ucas-footnote"}," Students can see status, not the reference content. Subject teachers submit into Incoming above; tutors collate into the final narrative. ",-1))]))])])])):V("",!0)}}},pm=ct(vm,[["__scopeId","data-v-32f95c3e"]]),hm={class:"student-table-container"},mm={class:"table-header"},gm={class:"header-controls"},ym={class:"student-count"},bm={class:"page-size-selector"},_m={key:0,class:"pagination-controls pagination-top"},wm=["disabled"],km={class:"page-numbers"},Cm=["onClick"],Sm={key:1,class:"page-ellipsis"},xm=["disabled"],Em={class:"table-wrapper"},Am={class:"student-table"},$m={class:"sort-indicator"},Tm={class:"sort-indicator"},Im={class:"sort-indicator"},Om={class:"sort-indicator"},Pm={class:"sort-indicator"},Mm={class:"sort-indicator"},Fm={class:"sort-indicator"},Rm={class:"sort-indicator"},Um={class:"student-name"},jm={class:"report-cell"},Nm=["onClick"],Lm={class:"report-cell"},qm=["onClick","disabled","title"],Hm=["onClick","title"],Dm={key:0,class:"incomplete"},Vm={key:1},Bm=["onClick","title"],Km={key:0,class:"incomplete"},Gm={key:1},Ym=["onClick","title"],Wm={key:1,class:"pagination-controls"},zm=["disabled"],Jm={class:"page-numbers"},Xm=["onClick"],Qm={key:1,class:"page-ellipsis"},Zm=["disabled"],e1={key:2,class:"no-results"},t1={__name:"StudentTable",props:{students:{type:Array,required:!0},activeFilters:{type:Object,default:()=>({})},smartFilters:{type:Array,default:()=>[]}},emits:["view-report","data-updated"],setup(e,{emit:t}){const s=e,n=t,o=M("name"),a=M("asc"),l=M(!1),c=M(""),f=M(""),m=M(!1),v=M(""),y=M(""),C=M(null),E=M(!1),F=M(""),N=M(""),Z=M(null),L=M(1),K=M(50),Y=Q(()=>{let u=[...s.students];if(s.activeFilters.group&&(u=u.filter(d=>d.group===s.activeFilters.group)),s.activeFilters.year&&(u=u.filter(d=>d.yearGroup===s.activeFilters.year)),s.activeFilters.status==="completed"?u=u.filter(d=>d.hasCompleted):s.activeFilters.status==="not_completed"&&(u=u.filter(d=>!d.hasCompleted)),s.activeFilters.search){const d=s.activeFilters.search.toLowerCase();u=u.filter(h=>h.name.toLowerCase().includes(d)||h.group&&h.group.toLowerCase().includes(d))}return s.smartFilters&&s.smartFilters.length>0&&(u=u.filter(d=>s.smartFilters.every(h=>{var I;const b=(I=d.scores)==null?void 0:I[h.dimension];if(b==null)return!1;const _=parseFloat(b),$=parseFloat(h.value);switch(h.operator){case"gt":return _>$;case"gte":return _>=$;case"lt":return _<$;case"lte":return _<=$;case"eq":return Math.abs(_-$)<.01;default:return!0}}))),u}),P=Q(()=>{const u=[...Y.value];return u.sort((d,h)=>{var $,I;let b,_;return["vision","effort","systems","practice","attitude","overall"].includes(o.value)?(b=($=d.scores)==null?void 0:$[o.value],_=(I=h.scores)==null?void 0:I[o.value],b==null&&(b=-1),_==null&&(_=-1),b=parseFloat(b),_=parseFloat(_)):(b=d[o.value],_=h[o.value],b==null&&(b=""),_==null&&(_=""),typeof b=="string"&&(b=b.toLowerCase(),_=_.toLowerCase())),b<_?a.value==="asc"?-1:1:b>_?a.value==="asc"?1:-1:0}),u}),D=Q(()=>Math.ceil(Y.value.length/K.value)),le=Q(()=>{const u=(L.value-1)*K.value,d=u+K.value;return P.value.slice(u,d)}),Ce=Q(()=>{const u=Y.value.length;if(u===0)return"No students";const d=(L.value-1)*K.value+1,h=Math.min(L.value*K.value,u);return`Showing ${d}-${h} of ${u} students`}),ye=Q(()=>{const u=D.value,d=L.value,h=[];if(u<=7)for(let b=1;b<=u;b++)h.push(b);else{h.push(1),d>3&&h.push("...");const b=Math.max(2,d-1),_=Math.min(u-1,d+1);for(let $=b;$<=_;$++)h.push($);d<u-2&&h.push("..."),u>1&&h.push(u)}return h});et(()=>[s.activeFilters,Y.value.length],()=>{L.value=1});const W=u=>{if(u>=1&&u<=D.value){L.value=u;const d=document.querySelector(".student-table-container");d&&d.scrollIntoView({behavior:"smooth",block:"start"})}},ce=()=>{L.value=1},re=u=>{console.log("[Table] Sorting by:",u),o.value===u?a.value=a.value==="asc"?"desc":"asc":(o.value=u,a.value=u.includes("score")||["vision","effort","systems","practice","attitude","overall"].includes(u)?"desc":"asc")},U=u=>o.value!==u?"":a.value==="asc"?"":"",ae=(u,d)=>u?u.length<=d?u:u.substring(0,d)+"...":"-",be=u=>u==null?"-":Math.round(parseFloat(u)),qe=u=>{n("view-report",u)};function _e(u){const h=((u==null?void 0:u.yearGroup)??(u==null?void 0:u.year)??"").toString().match(/(\d{1,2})/),b=h?parseInt(h[1],10):NaN;return Number.isFinite(b)?b:null}function ee(u){const d=_e(u);return!!(u!=null&&u.email)&&d!==null&&d>=12}function J(u){ee(u)&&He(u)}const Oe=M(!1),Se=M(null),Te=Q(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.email)||"").toString().trim().toLowerCase()}catch{return""}}),Ee=Q(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.name)||(u==null?void 0:u.full_name)||"").toString().trim()}catch{return""}});function He(u){ee(u)&&(Se.value={name:(u==null?void 0:u.name)||"",email:(u==null?void 0:u.email)||"",group:(u==null?void 0:u.group)||"",yearGroup:(u==null?void 0:u.yearGroup)||(u==null?void 0:u.year)||""},Oe.value=!0)}function tt(){Oe.value=!1,Se.value=null}const Ut=(u,d,h)=>{!h||h.trim()===""||h==="-"||(c.value=`${u} - ${d}`,f.value=h,l.value=!0)},ut=()=>{l.value=!1,c.value="",f.value=""},st=u=>{C.value=u,v.value=`${u.name} - Edit Action Plan`,y.value=u.goals||"",m.value=!0},dt=()=>{m.value=!1,v.value="",y.value="",C.value=null},xt=async u=>{if(!C.value)return;const d=C.value.email,h=C.value.id,b=C.value.targetCycle;try{console.log("[StudentTable] Saving goals for:",d,"Knack ID:",h);const _=s.students.find($=>$.id===h);if(_){const $=_.goals,I=_.hasGoals;_.goals=u,_.hasGoals=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const O=await at.saveStudentGoals(d,b,{goalText:u,knackRecordId:h});if(O.knackWritten)console.log("[StudentTable]  Goals saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Goals saved to Supabase ONLY. Knack error:",O.knackError),_.goals=$,_.hasGoals=I,new Error("Failed to save to Knack: "+O.knackError);console.log("[StudentTable] Goals saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(_){throw console.error("[StudentTable] Error saving goals:",_),_}},Pe=u=>{Z.value=u,F.value=`${u.name} - Staff Coaching Comments`,N.value=u.coachingComments||"",E.value=!0},Et=()=>{E.value=!1,F.value="",N.value="",Z.value=null},p=async u=>{if(!Z.value)return;const d=Z.value.email,h=Z.value.id,b=Z.value.targetCycle;try{console.log("[StudentTable] Saving coaching comments for:",d,"Knack ID:",h);const _=s.students.find($=>$.id===h);if(_){const $=_.coachingComments,I=_.hasCoaching;_.coachingComments=u,_.hasCoaching=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const O=await at.saveCoachingComments(d,b,{coachingText:u,knackRecordId:h});if(O.knackWritten)console.log("[StudentTable]  Coaching saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Coaching saved to Supabase ONLY. Knack error:",O.knackError),_.coachingComments=$,_.hasCoaching=I,new Error("Failed to save to Knack: "+O.knackError);console.log("[StudentTable] Coaching comments saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(_){throw console.error("[StudentTable] Error saving coaching comments:",_),_}};return(u,d)=>(w(),k("div",hm,[r("div",mm,[d[15]||(d[15]=r("h3",null,"Student Overview",-1)),r("div",gm,[r("p",ym,x(Ce.value),1),r("div",bm,[d[14]||(d[14]=r("label",{for:"page-size"},"Show:",-1)),Ie(r("select",{id:"page-size","onUpdate:modelValue":d[0]||(d[0]=h=>K.value=h),onChange:ce},[...d[13]||(d[13]=[r("option",{value:10},"10",-1),r("option",{value:50},"50",-1),r("option",{value:100},"100",-1),r("option",{value:500},"500",-1)])],544),[[kt,K.value]])])])]),Y.value.length>0?(w(),k("div",_m,[r("button",{onClick:d[1]||(d[1]=h=>W(L.value-1)),disabled:L.value===1,class:"pagination-button"}," Previous ",8,wm),r("div",km,[(w(!0),k(oe,null,Ae(ye.value,h=>(w(),k(oe,{key:h},[h!=="..."?(w(),k("button",{key:0,onClick:b=>W(h),class:se(["page-button",{active:h===L.value}])},x(h),11,Cm)):(w(),k("span",Sm,"..."))],64))),128))]),r("button",{onClick:d[2]||(d[2]=h=>W(L.value+1)),disabled:L.value===D.value,class:"pagination-button"}," Next ",8,xm)])):V("",!0),r("div",Em,[r("table",Am,[r("thead",null,[r("tr",null,[r("th",{onClick:d[3]||(d[3]=h=>re("name")),class:"sortable"},[d[16]||(d[16]=X(" Student Name ",-1)),r("span",$m,x(U("name")),1)]),r("th",{onClick:d[4]||(d[4]=h=>re("group")),class:"sortable"},[d[17]||(d[17]=X(" Group ",-1)),r("span",Tm,x(U("group")),1)]),d[24]||(d[24]=r("th",{class:"report-col"},"Report",-1)),d[25]||(d[25]=r("th",{class:"ucas-col",title:"UCAS Application (Year 12+)"},"UCAS",-1)),r("th",{onClick:d[5]||(d[5]=h=>re("vision")),class:"score-cell sortable",title:"Vision"},[d[18]||(d[18]=X(" V ",-1)),r("span",Im,x(U("vision")),1)]),r("th",{onClick:d[6]||(d[6]=h=>re("effort")),class:"score-cell sortable",title:"Effort"},[d[19]||(d[19]=X(" E ",-1)),r("span",Om,x(U("effort")),1)]),r("th",{onClick:d[7]||(d[7]=h=>re("systems")),class:"score-cell sortable",title:"Systems"},[d[20]||(d[20]=X(" S ",-1)),r("span",Pm,x(U("systems")),1)]),r("th",{onClick:d[8]||(d[8]=h=>re("practice")),class:"score-cell sortable",title:"Practice"},[d[21]||(d[21]=X(" P ",-1)),r("span",Mm,x(U("practice")),1)]),r("th",{onClick:d[9]||(d[9]=h=>re("attitude")),class:"score-cell sortable",title:"Attitude"},[d[22]||(d[22]=X(" A ",-1)),r("span",Fm,x(U("attitude")),1)]),r("th",{onClick:d[10]||(d[10]=h=>re("overall")),class:"score-cell sortable",title:"Overall"},[d[23]||(d[23]=X(" O ",-1)),r("span",Rm,x(U("overall")),1)]),d[26]||(d[26]=r("th",null,"Response",-1)),d[27]||(d[27]=r("th",null,"Action Plan",-1)),d[28]||(d[28]=r("th",null,"Staff Comments",-1))])]),r("tbody",null,[(w(!0),k(oe,null,Ae(le.value,h=>{var b,_,$,I,O,T,H,j,q,B,te,ue;return w(),k("tr",{key:h.id},[r("td",Um,x(h.name),1),r("td",null,x(h.group||"-"),1),r("td",jm,[r("button",{onClick:ie=>qe(h),class:"report-button",title:"View Full Report"},"  ",8,Nm)]),r("td",Lm,[r("button",{class:"ucas-button",type:"button",onClick:ie=>J(h),disabled:!ee(h),title:ee(h)?"Open UCAS Application":"UCAS available for Year 12+ only"},"  ",8,qm)]),r("td",{class:"score-cell",style:bt({background:Xt(ls)((b=h.scores)==null?void 0:b.vision)})},x(((_=h.scores)==null?void 0:_.vision)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)(($=h.scores)==null?void 0:$.effort)})},x(((I=h.scores)==null?void 0:I.effort)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((O=h.scores)==null?void 0:O.systems)})},x(((T=h.scores)==null?void 0:T.systems)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((H=h.scores)==null?void 0:H.practice)})},x(((j=h.scores)==null?void 0:j.practice)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((q=h.scores)==null?void 0:q.attitude)})},x(((B=h.scores)==null?void 0:B.attitude)||"-"),5),r("td",{class:"score-cell overall-cell",style:bt({background:Xt(ls)((te=h.scores)==null?void 0:te.overall)})},x(be((ue=h.scores)==null?void 0:ue.overall)),5),r("td",{class:se(["text-preview clickable view-only",{"has-content":h.hasResponse,"no-content":!h.hasResponse}]),onClick:ie=>Ut(h.name,"Response",h.response),title:h.hasResponse?"Click to view full response":"No response yet"},[h.hasResponse?(w(),k("span",Vm,x(ae(h.response,40)),1)):(w(),k("span",Dm,"Incomplete"))],10,Hm),r("td",{class:se(["text-preview clickable editable",{"has-content":h.hasGoals,"no-content":!h.hasGoals}]),onClick:ie=>st(h),title:h.hasGoals?"Click to edit action plan":"No action plan yet - Click to add"},[h.hasGoals?(w(),k("span",Gm,x(ae(h.goals,40)),1)):(w(),k("span",Km,"Incomplete"))],10,Bm),r("td",{class:se(["text-preview clickable editable",{"has-content":h.hasCoaching,"no-content-blank":!h.hasCoaching}]),onClick:ie=>Pe(h),title:h.hasCoaching?"Click to edit coaching comments":"No coaching comments - Click to add"},x(ae(h.coachingComments,40)),11,Ym)])}),128))])])]),Y.value.length>0?(w(),k("div",Wm,[r("button",{onClick:d[11]||(d[11]=h=>W(L.value-1)),disabled:L.value===1,class:"pagination-button"}," Previous ",8,zm),r("div",Jm,[(w(!0),k(oe,null,Ae(ye.value,h=>(w(),k(oe,{key:h},[h!=="..."?(w(),k("button",{key:0,onClick:b=>W(h),class:se(["page-button",{active:h===L.value}])},x(h),11,Xm)):(w(),k("span",Qm,"..."))],64))),128))]),r("button",{onClick:d[12]||(d[12]=h=>W(L.value+1)),disabled:L.value===D.value,class:"pagination-button"}," Next ",8,Zm)])):V("",!0),Y.value.length===0?(w(),k("div",e1,[...d[29]||(d[29]=[r("p",null,"No students match the current filters.",-1)])])):V("",!0),ke(lu,{isOpen:l.value,title:c.value,text:f.value,onClose:ut},null,8,["isOpen","title","text"]),ke(dr,{isOpen:m.value,title:v.value,text:y.value,placeholder:"Enter action plan / study goals here...",onClose:dt,onSave:xt},null,8,["isOpen","title","text"]),ke(dr,{isOpen:E.value,title:F.value,text:N.value,placeholder:"Enter coaching comments and observations here...",onClose:Et,onSave:p},null,8,["isOpen","title","text"]),ke(pm,{isOpen:Oe.value,student:Se.value,staffEmail:Te.value,staffName:Ee.value,academicYear:"current",onClose:tt},null,8,["isOpen","student","staffEmail","staffName"])]))}},s1=ct(t1,[["__scopeId","data-v-d9bf6065"]]),n1={class:"report-modal-container"},o1={class:"report-modal-header"},r1={class:"report-modal-body"},a1=["src"],i1={class:"iframe-loading"},l1={__name:"StudentReportModal",props:{isOpen:{type:Boolean,required:!0},studentEmail:{type:String,default:null},studentName:{type:String,default:"Student"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=M(null),a=M(!0),l=M(null);et(()=>[s.isOpen,s.studentEmail],([v,y])=>{v&&y?(o.value=`https://vespaacademy.knack.com/vespa-academy#vespa-coaching-report?email=${encodeURIComponent(y)}`,a.value=!0,console.log("[Report Modal] Opening report for:",y)):o.value=null},{immediate:!0});const c=()=>{try{const v=l.value;if(v&&v.contentDocument){const y=v.contentDocument.createElement("style");y.textContent=`
        /* Hide Knack default headers and navigation */
        .knHeader,
        .kn-menu,
        .kn-info,
        .kn-current_user,
        #kn-app-menu,
        .kn-back,
        .breadcrumb-back,
        .header-breadcrumb {
          display: none !important;
        }
        
        /* Adjust body padding to account for hidden header */
        body {
          padding-top: 0 !important;
        }
        
        /* Ensure content starts at top */
        .kn-scene,
        #kn-app-container {
          padding-top: 0 !important;
          margin-top: 0 !important;
        }
      `,v.contentDocument.head.appendChild(y),console.log("[Report Modal] Hid Knack headers in iframe")}}catch(v){console.log("[Report Modal] Could not hide headers (cross-origin):",v.message)}setTimeout(()=>{a.value=!1,console.log("[Report Modal] Report loaded")},500)},f=()=>{a.value=!0,n("close")},m=v=>{v.key==="Escape"&&s.isOpen&&f()};return et(()=>s.isOpen,v=>{v?(document.addEventListener("keydown",m),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",m),document.body.style.overflow="")}),(v,y)=>e.isOpen?(w(),k("div",{key:0,class:"report-modal-overlay",onClick:wt(f,["self"])},[r("div",n1,[r("div",o1,[r("h2",null,x(e.studentName)+" - VESPA Report",1),r("button",{class:"close-button",onClick:f},[...y[0]||(y[0]=[r("span",{class:"close-icon"},"",-1)])])]),r("div",r1,[o.value?(w(),k("iframe",{key:0,ref_key:"reportIframe",ref:l,src:o.value,class:"report-iframe",onLoad:c,frameborder:"0",allowfullscreen:""},null,40,a1)):V("",!0),Ie(r("div",i1,[...y[1]||(y[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading report...",-1)])],512),[[Sa,a.value]])])])])):V("",!0)}},c1=ct(l1,[["__scopeId","data-v-9df7cb70"]]),u1={getUser(){try{if(typeof Knack>"u"||!Knack.getUserAttributes)return console.warn("[Knack Auth] Knack not available"),null;const e=Knack.getUserAttributes(),t=Knack.getUserRoles?Knack.getUserRoles():[];if(!e||!e.email)return console.warn("[Knack Auth] No user logged in"),null;const s=["object_5","object_7","object_18","object_78"],n=t.some(o=>s.includes(o));return{email:e.email,name:e.name||e.full_name||"",roles:t,isStaff:n,attributes:e}}catch(e){return console.error("[Knack Auth] Error getting user:",e),null}},isStaff(){const e=this.getUser();return e?e.isStaff:!1},getUserEmail(){const e=this.getUser();return e?e.email:null}},d1={id:"staff-overview-app"},f1={key:2,class:"overview-container"},v1={__name:"App",setup(e){const t=M(null),s=M({}),n=M(!0),o=M(null),a=M(null),l=M(!1),c=M(null),f=M(null),m=M({cycle:!1,group:!1,year:!1,status:!1,search:!1}),v=M({}),y=M(null),C=M(!1),E=M([]),F=async(P=1)=>{y.value=P,n.value=!0,o.value=null;try{if(a.value=u1.getUser(),!a.value||!a.value.email)throw new Error("Please log in to view the staff overview");if(!a.value.isStaff)throw new Error("This page is only accessible to staff members");console.log("[Staff Overview] Loading data for:",a.value.email,"cycle filter:",P);const D=await at.getStaffOverview(a.value.email,P);if(!D.success)throw new Error(D.error||"Failed to load staff overview");t.value=D,console.log("[Staff Overview] Data loaded successfully:",D),C.value=!0}catch(D){console.error("[Staff Overview] Error loading data:",D),o.value=D.message||"Failed to load overview. Please try again."}finally{n.value=!1}},N=P=>{s.value=P,v.value.cycle=P.cycle||"",P.group&&(v.value.group=P.group),P.year&&(v.value.year=P.year),P.status&&(v.value.status=P.status),P.search&&(v.value.search=P.search),m.value.group&&P.group&&(v.value.group=P.group),m.value.year&&P.year&&(v.value.year=P.year),m.value.status&&P.status&&(v.value.status=P.status),m.value.search&&P.search&&(v.value.search=P.search);const D=P.cycle&&P.cycle!==""?parseInt(P.cycle):null,le=D!==y.value;le&&C.value?(console.log("[Staff Overview] Cycle filter changed, re-fetching data for cycle:",D),y.value=D,F(D)):le&&!C.value?(console.log("[Staff Overview] Initial filter sync, skipping reload"),y.value=D):console.log("[Staff Overview] Filter changed (non-cycle), updating local state only")},Z=P=>{m.value=P,P.group&&s.value.group&&(v.value.group=s.value.group),P.year&&s.value.year&&(v.value.year=s.value.year),P.status&&s.value.status&&(v.value.status=s.value.status),P.search&&s.value.search&&(v.value.search=s.value.search),P.group||delete v.value.group,P.year||delete v.value.year,P.status||delete v.value.status,P.search||delete v.value.search},L=P=>{console.log("[Staff Overview] Opening report modal for:",P.name,P.email),c.value=P.email,f.value=P.name,l.value=!0},K=()=>{l.value=!1,c.value=null,f.value=null,console.log("[Staff Overview] Refreshing data after report modal closed"),F(y.value)},Y=()=>{console.log("[Staff Overview] Data updated, refreshing from Knack"),F(y.value)};return Cn(()=>{F(1)}),(P,D)=>(w(),k("div",d1,[n.value?(w(),an(gc,{key:0,message:"Loading student data..."})):o.value?(w(),an(_c,{key:1,message:o.value,onRetry:F},null,8,["message"])):t.value?(w(),k("div",f1,[ke(Ac,{staffMember:t.value.staffMember,totalStudents:t.value.students.length},null,8,["staffMember","totalStudents"]),ke(Vc,{filters:t.value.filters,lockedFilters:m.value,preservedValues:v.value,onFilterChanged:N,onLockChanged:Z},null,8,["filters","lockedFilters","preservedValues"]),ke(su,{modelValue:E.value,"onUpdate:modelValue":D[0]||(D[0]=le=>E.value=le)},null,8,["modelValue"]),ke(s1,{students:t.value.students,activeFilters:s.value,smartFilters:E.value,onViewReport:L,onDataUpdated:Y},null,8,["students","activeFilters","smartFilters"])])):V("",!0),ke(c1,{isOpen:l.value,studentEmail:c.value,studentName:f.value,onClose:K},null,8,["isOpen","studentEmail","studentName"])]))}},p1=ct(v1,[["__scopeId","data-v-245d25d6"]]);function h1(){console.log("[Staff Overview V2] Initializing...");try{const e=window.STAFF_OVERVIEW_V2_CONFIG||{},t=document.querySelector(e.elementSelector||"#view_3258");if(!t){console.error("[Staff Overview V2] Mount element not found:",e.elementSelector);return}fc(p1).mount(t),console.log("[Staff Overview V2] Successfully initialized!")}catch(e){console.error("[Staff Overview V2] Initialization error:",e)}}typeof window<"u"&&(window.initializeStaffOverviewV2=h1);
