(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function uo(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ge={},us=[],Ct=()=>{},_r=()=>!1,mn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),fo=e=>e.startsWith("onUpdate:"),Ue=Object.assign,vo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Xa=Object.prototype.hasOwnProperty,ve=(e,t)=>Xa.call(e,t),W=Array.isArray,ds=e=>Ls(e)==="[object Map]",gn=e=>Ls(e)==="[object Set]",Fo=e=>Ls(e)==="[object Date]",oe=e=>typeof e=="function",Ee=e=>typeof e=="string",St=e=>typeof e=="symbol",me=e=>e!==null&&typeof e=="object",wr=e=>(me(e)||oe(e))&&oe(e.then)&&oe(e.catch),kr=Object.prototype.toString,Ls=e=>kr.call(e),Qa=e=>Ls(e).slice(8,-1),Cr=e=>Ls(e)==="[object Object]",po=e=>Ee(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ks=uo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Za=/-\w/g,Bt=yn(e=>e.replace(Za,t=>t.slice(1).toUpperCase())),ei=/\B([A-Z])/g,ss=yn(e=>e.replace(ei,"-$1").toLowerCase()),Sr=yn(e=>e.charAt(0).toUpperCase()+e.slice(1)),qn=yn(e=>e?`on${Sr(e)}`:""),Vt=(e,t)=>!Object.is(e,t),Xs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},xr=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},bn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ti=e=>{const t=Ee(e)?Number(e):NaN;return isNaN(t)?e:t};let Po;const _n=()=>Po||(Po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bt(e){if(W(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ee(n)?ri(n):bt(n);if(o)for(const a in o)t[a]=o[a]}return t}else if(Ee(e)||me(e))return e}const si=/;(?![^(]*\))/g,ni=/:([^]+)/,oi=/\/\*[^]*?\*\//g;function ri(e){const t={};return e.replace(oi,"").split(si).forEach(s=>{if(s){const n=s.split(ni);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ne(e){let t="";if(Ee(e))t=e;else if(W(e))for(let s=0;s<e.length;s++){const n=ne(e[s]);n&&(t+=n+" ")}else if(me(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ai="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ii=uo(ai);function Er(e){return!!e||e===""}function li(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=wn(e[n],t[n]);return s}function wn(e,t){if(e===t)return!0;let s=Fo(e),n=Fo(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=St(e),n=St(t),s||n)return e===t;if(s=W(e),n=W(t),s||n)return s&&n?li(e,t):!1;if(s=me(e),n=me(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const l in e){const c=e.hasOwnProperty(l),d=t.hasOwnProperty(l);if(c&&!d||!c&&d||!wn(e[l],t[l]))return!1}}return String(e)===String(t)}function ci(e,t){return e.findIndex(s=>wn(s,t))}const Ar=e=>!!(e&&e.__v_isRef===!0),E=e=>Ee(e)?e:e==null?"":W(e)||me(e)&&(e.toString===kr||!oe(e.toString))?Ar(e)?E(e.value):JSON.stringify(e,Tr,2):String(e),Tr=(e,t)=>Ar(t)?Tr(e,t.value):ds(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],a)=>(s[Hn(n,a)+" =>"]=o,s),{})}:gn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Hn(s))}:St(t)?Hn(t):me(t)&&!W(t)&&!Cr(t)?String(t):t,Hn=(e,t="")=>{var s;return St(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Je;class ui{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Je;try{return Je=this,t()}finally{Je=s}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function di(){return Je}let be;const Dn=new WeakSet;class $r{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Dn.has(this)&&(Dn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Or(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ro(this),Mr(this);const t=be,s=vt;be=this,vt=!0;try{return this.fn()}finally{Fr(this),be=t,vt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)go(t);this.deps=this.depsTail=void 0,Ro(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Dn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xn(this)&&this.run()}get dirty(){return Xn(this)}}let Ir=0,Cs,Ss;function Or(e,t=!1){if(e.flags|=8,t){e.next=Ss,Ss=e;return}e.next=Cs,Cs=e}function ho(){Ir++}function mo(){if(--Ir>0)return;if(Ss){let t=Ss;for(Ss=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Cs;){let t=Cs;for(Cs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Mr(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Fr(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),go(n),fi(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Xn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pr(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Pr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Is)||(e.globalVersion=Is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Xn(e))))return;e.flags|=2;const t=e.dep,s=be,n=vt;be=e,vt=!0;try{Mr(e);const o=e.fn(e._value);(t.version===0||Vt(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{be=s,vt=n,Fr(e),e.flags&=-3}}function go(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)go(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function fi(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let vt=!0;const Rr=[];function Ft(){Rr.push(vt),vt=!1}function Pt(){const e=Rr.pop();vt=e===void 0?!0:e}function Ro(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=be;be=void 0;try{t()}finally{be=s}}}let Is=0;class vi{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!be||!vt||be===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==be)s=this.activeLink=new vi(be,this),be.deps?(s.prevDep=be.depsTail,be.depsTail.nextDep=s,be.depsTail=s):be.deps=be.depsTail=s,Ur(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=be.depsTail,s.nextDep=void 0,be.depsTail.nextDep=s,be.depsTail=s,be.deps===s&&(be.deps=n)}return s}trigger(t){this.version++,Is++,this.notify(t)}notify(t){ho();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{mo()}}}function Ur(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ur(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Qn=new WeakMap,ts=Symbol(""),Zn=Symbol(""),Os=Symbol("");function Ne(e,t,s){if(vt&&be){let n=Qn.get(e);n||Qn.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new yo),o.map=n,o.key=s),o.track()}}function Ot(e,t,s,n,o,a){const l=Qn.get(e);if(!l){Is++;return}const c=d=>{d&&d.trigger()};if(ho(),t==="clear")l.forEach(c);else{const d=W(e),m=d&&po(s);if(d&&s==="length"){const v=Number(n);l.forEach((g,b)=>{(b==="length"||b===Os||!St(b)&&b>=v)&&c(g)})}else switch((s!==void 0||l.has(void 0))&&c(l.get(s)),m&&c(l.get(Os)),t){case"add":d?m&&c(l.get("length")):(c(l.get(ts)),ds(e)&&c(l.get(Zn)));break;case"delete":d||(c(l.get(ts)),ds(e)&&c(l.get(Zn)));break;case"set":ds(e)&&c(l.get(ts));break}}mo()}function is(e){const t=fe(e);return t===e?t:(Ne(t,"iterate",Os),lt(e)?t:t.map(Re))}function kn(e){return Ne(e=fe(e),"iterate",Os),e}const pi={__proto__:null,[Symbol.iterator](){return Vn(this,Symbol.iterator,Re)},concat(...e){return is(this).concat(...e.map(t=>W(t)?is(t):t))},entries(){return Vn(this,"entries",e=>(e[1]=Re(e[1]),e))},every(e,t){return At(this,"every",e,t,void 0,arguments)},filter(e,t){return At(this,"filter",e,t,s=>s.map(Re),arguments)},find(e,t){return At(this,"find",e,t,Re,arguments)},findIndex(e,t){return At(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return At(this,"findLast",e,t,Re,arguments)},findLastIndex(e,t){return At(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return At(this,"forEach",e,t,void 0,arguments)},includes(...e){return Bn(this,"includes",e)},indexOf(...e){return Bn(this,"indexOf",e)},join(e){return is(this).join(e)},lastIndexOf(...e){return Bn(this,"lastIndexOf",e)},map(e,t){return At(this,"map",e,t,void 0,arguments)},pop(){return ys(this,"pop")},push(...e){return ys(this,"push",e)},reduce(e,...t){return Uo(this,"reduce",e,t)},reduceRight(e,...t){return Uo(this,"reduceRight",e,t)},shift(){return ys(this,"shift")},some(e,t){return At(this,"some",e,t,void 0,arguments)},splice(...e){return ys(this,"splice",e)},toReversed(){return is(this).toReversed()},toSorted(e){return is(this).toSorted(e)},toSpliced(...e){return is(this).toSpliced(...e)},unshift(...e){return ys(this,"unshift",e)},values(){return Vn(this,"values",Re)}};function Vn(e,t,s){const n=kn(e),o=n[t]();return n!==e&&!lt(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=s(a.value)),a}),o}const hi=Array.prototype;function At(e,t,s,n,o,a){const l=kn(e),c=l!==e&&!lt(e),d=l[t];if(d!==hi[t]){const g=d.apply(e,a);return c?Re(g):g}let m=s;l!==e&&(c?m=function(g,b){return s.call(this,Re(g),b,e)}:s.length>2&&(m=function(g,b){return s.call(this,g,b,e)}));const v=d.call(l,m,n);return c&&o?o(v):v}function Uo(e,t,s,n){const o=kn(e);let a=s;return o!==e&&(lt(e)?s.length>3&&(a=function(l,c,d){return s.call(this,l,c,d,e)}):a=function(l,c,d){return s.call(this,l,Re(c),d,e)}),o[t](a,...n)}function Bn(e,t,s){const n=fe(e);Ne(n,"iterate",Os);const o=n[t](...s);return(o===-1||o===!1)&&wo(s[0])?(s[0]=fe(s[0]),n[t](...s)):o}function ys(e,t,s=[]){Ft(),ho();const n=fe(e)[t].apply(e,s);return mo(),Pt(),n}const mi=uo("__proto__,__v_isRef,__isVue"),jr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function gi(e){St(e)||(e=String(e));const t=fe(this);return Ne(t,"has",e),t.hasOwnProperty(e)}class Nr{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return a;if(s==="__v_raw")return n===(o?a?Ai:Dr:a?Hr:qr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=W(t);if(!o){let d;if(l&&(d=pi[s]))return d;if(s==="hasOwnProperty")return gi}const c=Reflect.get(t,s,Le(t)?t:n);if((St(s)?jr.has(s):mi(s))||(o||Ne(t,"get",s),a))return c;if(Le(c)){const d=l&&po(s)?c:c.value;return o&&me(d)?to(d):d}return me(c)?o?to(c):Ms(c):c}}class Lr extends Nr{constructor(t=!1){super(!1,t)}set(t,s,n,o){let a=t[s];if(!this._isShallow){const d=Kt(a);if(!lt(n)&&!Kt(n)&&(a=fe(a),n=fe(n)),!W(t)&&Le(a)&&!Le(n))return d||(a.value=n),!0}const l=W(t)&&po(s)?Number(s)<t.length:ve(t,s),c=Reflect.set(t,s,n,Le(t)?t:o);return t===fe(o)&&(l?Vt(n,a)&&Ot(t,"set",s,n):Ot(t,"add",s,n)),c}deleteProperty(t,s){const n=ve(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Ot(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!St(s)||!jr.has(s))&&Ne(t,"has",s),n}ownKeys(t){return Ne(t,"iterate",W(t)?"length":ts),Reflect.ownKeys(t)}}class yi extends Nr{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const bi=new Lr,_i=new yi,wi=new Lr(!0);const eo=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function ki(e,t,s){return function(...n){const o=this.__v_raw,a=fe(o),l=ds(a),c=e==="entries"||e===Symbol.iterator&&l,d=e==="keys"&&l,m=o[e](...n),v=s?eo:t?nn:Re;return!t&&Ne(a,"iterate",d?Zn:ts),{next(){const{value:g,done:b}=m.next();return b?{value:g,done:b}:{value:c?[v(g[0]),v(g[1])]:v(g),done:b}},[Symbol.iterator](){return this}}}}function Gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ci(e,t){const s={get(o){const a=this.__v_raw,l=fe(a),c=fe(o);e||(Vt(o,c)&&Ne(l,"get",o),Ne(l,"get",c));const{has:d}=Ks(l),m=t?eo:e?nn:Re;if(d.call(l,o))return m(a.get(o));if(d.call(l,c))return m(a.get(c));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Ne(fe(o),"iterate",ts),o.size},has(o){const a=this.__v_raw,l=fe(a),c=fe(o);return e||(Vt(o,c)&&Ne(l,"has",o),Ne(l,"has",c)),o===c?a.has(o):a.has(o)||a.has(c)},forEach(o,a){const l=this,c=l.__v_raw,d=fe(c),m=t?eo:e?nn:Re;return!e&&Ne(d,"iterate",ts),c.forEach((v,g)=>o.call(a,m(v),m(g),l))}};return Ue(s,e?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(o){!t&&!lt(o)&&!Kt(o)&&(o=fe(o));const a=fe(this);return Ks(a).has.call(a,o)||(a.add(o),Ot(a,"add",o,o)),this},set(o,a){!t&&!lt(a)&&!Kt(a)&&(a=fe(a));const l=fe(this),{has:c,get:d}=Ks(l);let m=c.call(l,o);m||(o=fe(o),m=c.call(l,o));const v=d.call(l,o);return l.set(o,a),m?Vt(a,v)&&Ot(l,"set",o,a):Ot(l,"add",o,a),this},delete(o){const a=fe(this),{has:l,get:c}=Ks(a);let d=l.call(a,o);d||(o=fe(o),d=l.call(a,o)),c&&c.call(a,o);const m=a.delete(o);return d&&Ot(a,"delete",o,void 0),m},clear(){const o=fe(this),a=o.size!==0,l=o.clear();return a&&Ot(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=ki(o,e,t)}),s}function bo(e,t){const s=Ci(e,t);return(n,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(ve(s,o)&&o in n?s:n,o,a)}const Si={get:bo(!1,!1)},xi={get:bo(!1,!0)},Ei={get:bo(!0,!1)};const qr=new WeakMap,Hr=new WeakMap,Dr=new WeakMap,Ai=new WeakMap;function Ti(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $i(e){return e.__v_skip||!Object.isExtensible(e)?0:Ti(Qa(e))}function Ms(e){return Kt(e)?e:_o(e,!1,bi,Si,qr)}function Ii(e){return _o(e,!1,wi,xi,Hr)}function to(e){return _o(e,!0,_i,Ei,Dr)}function _o(e,t,s,n,o){if(!me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=$i(e);if(a===0)return e;const l=o.get(e);if(l)return l;const c=new Proxy(e,a===2?n:s);return o.set(e,c),c}function fs(e){return Kt(e)?fs(e.__v_raw):!!(e&&e.__v_isReactive)}function Kt(e){return!!(e&&e.__v_isReadonly)}function lt(e){return!!(e&&e.__v_isShallow)}function wo(e){return e?!!e.__v_raw:!1}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function Oi(e){return!ve(e,"__v_skip")&&Object.isExtensible(e)&&xr(e,"__v_skip",!0),e}const Re=e=>me(e)?Ms(e):e,nn=e=>me(e)?to(e):e;function Le(e){return e?e.__v_isRef===!0:!1}function P(e){return Mi(e,!1)}function Mi(e,t){return Le(e)?e:new Fi(e,t)}class Fi{constructor(t,s){this.dep=new yo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:fe(t),this._value=s?t:Re(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||lt(t)||Kt(t);t=n?t:fe(t),Vt(t,s)&&(this._rawValue=t,this._value=n?t:Re(t),this.dep.trigger())}}function Xt(e){return Le(e)?e.value:e}const Pi={get:(e,t,s)=>t==="__v_raw"?e:Xt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return Le(o)&&!Le(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Vr(e){return fs(e)?e:new Proxy(e,Pi)}class Ri{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new yo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&be!==this)return Or(this,!0),!0}get value(){const t=this.dep.track();return Pr(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ui(e,t,s=!1){let n,o;return oe(e)?n=e:(n=e.get,o=e.set),new Ri(n,o,s)}const Ys={},on=new WeakMap;let Qt;function ji(e,t=!1,s=Qt){if(s){let n=on.get(s);n||on.set(s,n=[]),n.push(e)}}function Ni(e,t,s=ge){const{immediate:n,deep:o,once:a,scheduler:l,augmentJob:c,call:d}=s,m=F=>o?F:lt(F)||o===!1||o===0?Mt(F,1):Mt(F);let v,g,b,S,M=!1,R=!1;if(Le(e)?(g=()=>e.value,M=lt(e)):fs(e)?(g=()=>m(e),M=!0):W(e)?(R=!0,M=e.some(F=>fs(F)||lt(F)),g=()=>e.map(F=>{if(Le(F))return F.value;if(fs(F))return m(F);if(oe(F))return d?d(F,2):F()})):oe(e)?t?g=d?()=>d(e,2):e:g=()=>{if(b){Ft();try{b()}finally{Pt()}}const F=Qt;Qt=v;try{return d?d(e,3,[S]):e(S)}finally{Qt=F}}:g=Ct,t&&o){const F=g,H=o===!0?1/0:o;g=()=>Mt(F(),H)}const B=di(),L=()=>{v.stop(),B&&B.active&&vo(B.effects,v)};if(a&&t){const F=t;t=(...H)=>{F(...H),L()}}let G=R?new Array(e.length).fill(Ys):Ys;const z=F=>{if(!(!(v.flags&1)||!v.dirty&&!F))if(t){const H=v.run();if(o||M||(R?H.some((ee,pe)=>Vt(ee,G[pe])):Vt(H,G))){b&&b();const ee=Qt;Qt=v;try{const pe=[H,G===Ys?void 0:R&&G[0]===Ys?[]:G,S];G=H,d?d(t,3,pe):t(...pe)}finally{Qt=ee}}}else v.run()};return c&&c(z),v=new $r(g),v.scheduler=l?()=>l(z,!1):z,S=F=>ji(F,!1,v),b=v.onStop=()=>{const F=on.get(v);if(F){if(d)d(F,4);else for(const H of F)H();on.delete(v)}},t?n?z(!0):G=v.run():l?l(z.bind(null,!0),!0):v.run(),L.pause=v.pause.bind(v),L.resume=v.resume.bind(v),L.stop=L,L}function Mt(e,t=1/0,s){if(t<=0||!me(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Le(e))Mt(e.value,t,s);else if(W(e))for(let n=0;n<e.length;n++)Mt(e[n],t,s);else if(gn(e)||ds(e))e.forEach(n=>{Mt(n,t,s)});else if(Cr(e)){for(const n in e)Mt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Mt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(e,t,s,n){try{return n?e(...n):e()}catch(o){Cn(o,t,s)}}function pt(e,t,s,n){if(oe(e)){const o=qs(e,t,s,n);return o&&wr(o)&&o.catch(a=>{Cn(a,t,s)}),o}if(W(e)){const o=[];for(let a=0;a<e.length;a++)o.push(pt(e[a],t,s,n));return o}}function Cn(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||ge;if(t){let c=t.parent;const d=t.proxy,m=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const v=c.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](e,d,m)===!1)return}c=c.parent}if(a){Ft(),qs(a,null,10,[e,d,m]),Pt();return}}Li(e,s,o,n,l)}function Li(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const Be=[];let yt=-1;const vs=[];let qt=null,cs=0;const Br=Promise.resolve();let rn=null;function Kr(e){const t=rn||Br;return e?t.then(this?e.bind(this):e):t}function qi(e){let t=yt+1,s=Be.length;for(;t<s;){const n=t+s>>>1,o=Be[n],a=Fs(o);a<e||a===e&&o.flags&2?t=n+1:s=n}return t}function ko(e){if(!(e.flags&1)){const t=Fs(e),s=Be[Be.length-1];!s||!(e.flags&2)&&t>=Fs(s)?Be.push(e):Be.splice(qi(t),0,e),e.flags|=1,Gr()}}function Gr(){rn||(rn=Br.then(Wr))}function Hi(e){W(e)?vs.push(...e):qt&&e.id===-1?qt.splice(cs+1,0,e):e.flags&1||(vs.push(e),e.flags|=1),Gr()}function jo(e,t,s=yt+1){for(;s<Be.length;s++){const n=Be[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Be.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Yr(e){if(vs.length){const t=[...new Set(vs)].sort((s,n)=>Fs(s)-Fs(n));if(vs.length=0,qt){qt.push(...t);return}for(qt=t,cs=0;cs<qt.length;cs++){const s=qt[cs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}qt=null,cs=0}}const Fs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Wr(e){try{for(yt=0;yt<Be.length;yt++){const t=Be[yt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),qs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;yt<Be.length;yt++){const t=Be[yt];t&&(t.flags&=-2)}yt=-1,Be.length=0,Yr(),rn=null,(Be.length||vs.length)&&Wr()}}let it=null,zr=null;function an(e){const t=it;return it=e,zr=e&&e.type.__scopeId||null,t}function Jr(e,t=it,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&un(-1);const a=an(t);let l;try{l=e(...o)}finally{an(a),n._d&&un(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Ie(e,t){if(it===null)return e;const s=$n(it),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,l,c,d=ge]=t[o];a&&(oe(a)&&(a={mounted:a,updated:a}),a.deep&&Mt(l),n.push({dir:a,instance:s,value:l,oldValue:void 0,arg:c,modifiers:d}))}return e}function Yt(e,t,s,n){const o=e.dirs,a=t&&t.dirs;for(let l=0;l<o.length;l++){const c=o[l];a&&(c.oldValue=a[l].value);let d=c.dir[n];d&&(Ft(),pt(d,s,8,[e.el,c,e,t]),Pt())}}const Xr=Symbol("_vte"),Qr=e=>e.__isTeleport,xs=e=>e&&(e.disabled||e.disabled===""),No=e=>e&&(e.defer||e.defer===""),Lo=e=>typeof SVGElement<"u"&&e instanceof SVGElement,qo=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,so=(e,t)=>{const s=e&&e.to;return Ee(s)?t?t(s):null:s},Zr={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,a,l,c,d,m){const{mc:v,pc:g,pbc:b,o:{insert:S,querySelector:M,createText:R,createComment:B}}=m,L=xs(t.props);let{shapeFlag:G,children:z,dynamicChildren:F}=t;if(e==null){const H=t.el=R(""),ee=t.anchor=R("");S(H,s,n),S(ee,s,n);const pe=(V,ae)=>{G&16&&v(z,V,ae,o,a,l,c,d)},ue=()=>{const V=t.target=so(t.props,M),ae=ea(V,t,R,S);V&&(l!=="svg"&&Lo(V)?l="svg":l!=="mathml"&&qo(V)&&(l="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(V),L||(pe(V,ae),Qs(t,!1)))};L&&(pe(s,ee),Qs(t,!0)),No(t.props)?(t.el.__isMounted=!1,Ve(()=>{ue(),delete t.el.__isMounted},a)):ue()}else{if(No(t.props)&&e.el.__isMounted===!1){Ve(()=>{Zr.process(e,t,s,n,o,a,l,c,d,m)},a);return}t.el=e.el,t.targetStart=e.targetStart;const H=t.anchor=e.anchor,ee=t.target=e.target,pe=t.targetAnchor=e.targetAnchor,ue=xs(e.props),V=ue?s:ee,ae=ue?H:pe;if(l==="svg"||Lo(ee)?l="svg":(l==="mathml"||qo(ee))&&(l="mathml"),F?(b(e.dynamicChildren,F,V,o,a,l,c),xo(e,t,!0)):d||g(e,t,V,ae,o,a,l,c,!1),L)ue?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ws(t,s,H,m,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ie=t.target=so(t.props,M);ie&&Ws(t,ie,null,m,0)}else ue&&Ws(t,ee,pe,m,1);Qs(t,L)}},remove(e,t,s,{um:n,o:{remove:o}},a){const{shapeFlag:l,children:c,anchor:d,targetStart:m,targetAnchor:v,target:g,props:b}=e;if(g&&(o(m),o(v)),a&&o(d),l&16){const S=a||!xs(b);for(let M=0;M<c.length;M++){const R=c[M];n(R,t,s,S,!!R.dynamicChildren)}}},move:Ws,hydrate:Di};function Ws(e,t,s,{o:{insert:n},m:o},a=2){a===0&&n(e.targetAnchor,t,s);const{el:l,anchor:c,shapeFlag:d,children:m,props:v}=e,g=a===2;if(g&&n(l,t,s),(!g||xs(v))&&d&16)for(let b=0;b<m.length;b++)o(m[b],t,s,2);g&&n(c,t,s)}function Di(e,t,s,n,o,a,{o:{nextSibling:l,parentNode:c,querySelector:d,insert:m,createText:v}},g){function b(R,B,L,G){B.anchor=g(l(R),B,c(R),s,n,o,a),B.targetStart=L,B.targetAnchor=G}const S=t.target=so(t.props,d),M=xs(t.props);if(S){const R=S._lpa||S.firstChild;if(t.shapeFlag&16)if(M)b(e,t,R,R&&l(R));else{t.anchor=l(e);let B=R;for(;B;){if(B&&B.nodeType===8){if(B.data==="teleport start anchor")t.targetStart=B;else if(B.data==="teleport anchor"){t.targetAnchor=B,S._lpa=t.targetAnchor&&l(t.targetAnchor);break}}B=l(B)}t.targetAnchor||ea(S,t,v,m),g(R&&l(R),t,S,s,n,o,a)}Qs(t,M)}else M&&t.shapeFlag&16&&b(e,t,e,l(e));return t.anchor&&l(t.anchor)}const Vi=Zr;function Qs(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function ea(e,t,s,n){const o=t.targetStart=s(""),a=t.targetAnchor=s("");return o[Xr]=a,e&&(n(o,e),n(a,e)),a}const It=Symbol("_leaveCb"),zs=Symbol("_enterCb");function Bi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return En(()=>{e.isMounted=!0}),la(()=>{e.isUnmounting=!0}),e}const rt=[Function,Array],ta={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rt,onEnter:rt,onAfterEnter:rt,onEnterCancelled:rt,onBeforeLeave:rt,onLeave:rt,onAfterLeave:rt,onLeaveCancelled:rt,onBeforeAppear:rt,onAppear:rt,onAfterAppear:rt,onAppearCancelled:rt},sa=e=>{const t=e.subTree;return t.component?sa(t.component):t},Ki={name:"BaseTransition",props:ta,setup(e,{slots:t}){const s=Ta(),n=Bi();return()=>{const o=t.default&&ra(t.default(),!0);if(!o||!o.length)return;const a=na(o),l=fe(e),{mode:c}=l;if(n.isLeaving)return Kn(a);const d=Ho(a);if(!d)return Kn(a);let m=no(d,l,n,s,g=>m=g);d.type!==Ke&&Ps(d,m);let v=s.subTree&&Ho(s.subTree);if(v&&v.type!==Ke&&!Zt(v,d)&&sa(s).type!==Ke){let g=no(v,l,n,s);if(Ps(v,g),c==="out-in"&&d.type!==Ke)return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete g.afterLeave,v=void 0},Kn(a);c==="in-out"&&d.type!==Ke?g.delayLeave=(b,S,M)=>{const R=oa(n,v);R[String(v.key)]=v,b[It]=()=>{S(),b[It]=void 0,delete m.delayedLeave,v=void 0},m.delayedLeave=()=>{M(),delete m.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return a}}};function na(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Ke){t=s;break}}return t}const Gi=Ki;function oa(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function no(e,t,s,n,o){const{appear:a,mode:l,persisted:c=!1,onBeforeEnter:d,onEnter:m,onAfterEnter:v,onEnterCancelled:g,onBeforeLeave:b,onLeave:S,onAfterLeave:M,onLeaveCancelled:R,onBeforeAppear:B,onAppear:L,onAfterAppear:G,onAppearCancelled:z}=t,F=String(e.key),H=oa(s,e),ee=(V,ae)=>{V&&pt(V,n,9,ae)},pe=(V,ae)=>{const ie=ae[1];ee(V,ae),W(V)?V.every(j=>j.length<=1)&&ie():V.length<=1&&ie()},ue={mode:l,persisted:c,beforeEnter(V){let ae=d;if(!s.isMounted)if(a)ae=B||d;else return;V[It]&&V[It](!0);const ie=H[F];ie&&Zt(e,ie)&&ie.el[It]&&ie.el[It](),ee(ae,[V])},enter(V){let ae=m,ie=v,j=g;if(!s.isMounted)if(a)ae=L||m,ie=G||v,j=z||g;else return;let le=!1;const _e=V[zs]=qe=>{le||(le=!0,qe?ee(j,[V]):ee(ie,[V]),ue.delayedLeave&&ue.delayedLeave(),V[zs]=void 0)};ae?pe(ae,[V,_e]):_e()},leave(V,ae){const ie=String(e.key);if(V[zs]&&V[zs](!0),s.isUnmounting)return ae();ee(b,[V]);let j=!1;const le=V[It]=_e=>{j||(j=!0,ae(),_e?ee(R,[V]):ee(M,[V]),V[It]=void 0,H[ie]===e&&delete H[ie])};H[ie]=e,S?pe(S,[V,le]):le()},clone(V){const ae=no(V,t,s,n,o);return o&&o(ae),ae}};return ue}function Kn(e){if(Sn(e))return e=Gt(e),e.children=null,e}function Ho(e){if(!Sn(e))return Qr(e.type)&&e.children?na(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&oe(s.default))return s.default()}}function Ps(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ps(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ra(e,t=!1,s){let n=[],o=0;for(let a=0;a<e.length;a++){let l=e[a];const c=s==null?l.key:String(s)+String(l.key!=null?l.key:a);l.type===re?(l.patchFlag&128&&o++,n=n.concat(ra(l.children,t,c))):(t||l.type!==Ke)&&n.push(c!=null?Gt(l,{key:c}):l)}if(o>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function aa(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ln=new WeakMap;function Es(e,t,s,n,o=!1){if(W(e)){e.forEach((M,R)=>Es(M,t&&(W(t)?t[R]:t),s,n,o));return}if(As(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Es(e,t,s,n.component.subTree);return}const a=n.shapeFlag&4?$n(n.component):n.el,l=o?null:a,{i:c,r:d}=e,m=t&&t.r,v=c.refs===ge?c.refs={}:c.refs,g=c.setupState,b=fe(g),S=g===ge?_r:M=>ve(b,M);if(m!=null&&m!==d){if(Do(t),Ee(m))v[m]=null,S(m)&&(g[m]=null);else if(Le(m)){m.value=null;const M=t;M.k&&(v[M.k]=null)}}if(oe(d))qs(d,c,12,[l,v]);else{const M=Ee(d),R=Le(d);if(M||R){const B=()=>{if(e.f){const L=M?S(d)?g[d]:v[d]:d.value;if(o)W(L)&&vo(L,a);else if(W(L))L.includes(a)||L.push(a);else if(M)v[d]=[a],S(d)&&(g[d]=v[d]);else{const G=[a];d.value=G,e.k&&(v[e.k]=G)}}else M?(v[d]=l,S(d)&&(g[d]=l)):R&&(d.value=l,e.k&&(v[e.k]=l))};if(l){const L=()=>{B(),ln.delete(e)};L.id=-1,ln.set(e,L),Ve(L,s)}else Do(e),B()}}}function Do(e){const t=ln.get(e);t&&(t.flags|=8,ln.delete(e))}_n().requestIdleCallback;_n().cancelIdleCallback;const As=e=>!!e.type.__asyncLoader,Sn=e=>e.type.__isKeepAlive;function Yi(e,t){ia(e,"a",t)}function Wi(e,t){ia(e,"da",t)}function ia(e,t,s=Ge){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(xn(t,n,s),s){let o=s.parent;for(;o&&o.parent;)Sn(o.parent.vnode)&&zi(n,t,s,o),o=o.parent}}function zi(e,t,s,n){const o=xn(t,e,n,!0);ca(()=>{vo(n[t],o)},s)}function xn(e,t,s=Ge,n=!1){if(s){const o=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{Ft();const c=Hs(s),d=pt(t,s,e,l);return c(),Pt(),d});return n?o.unshift(a):o.push(a),a}}const Rt=e=>(t,s=Ge)=>{(!js||e==="sp")&&xn(e,(...n)=>t(...n),s)},Ji=Rt("bm"),En=Rt("m"),Xi=Rt("bu"),Qi=Rt("u"),la=Rt("bum"),ca=Rt("um"),Zi=Rt("sp"),el=Rt("rtg"),tl=Rt("rtc");function sl(e,t=Ge){xn("ec",e,t)}const nl=Symbol.for("v-ndc");function Te(e,t,s,n){let o;const a=s,l=W(e);if(l||Ee(e)){const c=l&&fs(e);let d=!1,m=!1;c&&(d=!lt(e),m=Kt(e),e=kn(e)),o=new Array(e.length);for(let v=0,g=e.length;v<g;v++)o[v]=t(d?m?nn(Re(e[v])):Re(e[v]):e[v],v,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,a)}else if(me(e))if(e[Symbol.iterator])o=Array.from(e,(c,d)=>t(c,d,void 0,a));else{const c=Object.keys(e);o=new Array(c.length);for(let d=0,m=c.length;d<m;d++){const v=c[d];o[d]=t(e[v],v,d,a)}}else o=[];return o}const oo=e=>e?$a(e)?$n(e):oo(e.parent):null,Ts=Ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>oo(e.parent),$root:e=>oo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>da(e),$forceUpdate:e=>e.f||(e.f=()=>{ko(e.update)}),$nextTick:e=>e.n||(e.n=Kr.bind(e.proxy)),$watch:e=>xl.bind(e)}),Gn=(e,t)=>e!==ge&&!e.__isScriptSetup&&ve(e,t),ol={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:a,accessCache:l,type:c,appContext:d}=e;let m;if(t[0]!=="$"){const S=l[t];if(S!==void 0)switch(S){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return a[t]}else{if(Gn(n,t))return l[t]=1,n[t];if(o!==ge&&ve(o,t))return l[t]=2,o[t];if((m=e.propsOptions[0])&&ve(m,t))return l[t]=3,a[t];if(s!==ge&&ve(s,t))return l[t]=4,s[t];ro&&(l[t]=0)}}const v=Ts[t];let g,b;if(v)return t==="$attrs"&&Ne(e.attrs,"get",""),v(e);if((g=c.__cssModules)&&(g=g[t]))return g;if(s!==ge&&ve(s,t))return l[t]=4,s[t];if(b=d.config.globalProperties,ve(b,t))return b[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:a}=e;return Gn(o,t)?(o[t]=s,!0):n!==ge&&ve(n,t)?(n[t]=s,!0):ve(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,propsOptions:a,type:l}},c){let d,m;return!!(s[c]||e!==ge&&c[0]!=="$"&&ve(e,c)||Gn(t,c)||(d=a[0])&&ve(d,c)||ve(n,c)||ve(Ts,c)||ve(o.config.globalProperties,c)||(m=l.__cssModules)&&m[c])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:ve(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Vo(e){return W(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let ro=!0;function rl(e){const t=da(e),s=e.proxy,n=e.ctx;ro=!1,t.beforeCreate&&Bo(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:c,provide:d,inject:m,created:v,beforeMount:g,mounted:b,beforeUpdate:S,updated:M,activated:R,deactivated:B,beforeDestroy:L,beforeUnmount:G,destroyed:z,unmounted:F,render:H,renderTracked:ee,renderTriggered:pe,errorCaptured:ue,serverPrefetch:V,expose:ae,inheritAttrs:ie,components:j,directives:le,filters:_e}=t;if(m&&al(m,n,null),l)for(const te in l){const X=l[te];oe(X)&&(n[te]=X.bind(s))}if(o){const te=o.call(s,s);me(te)&&(e.data=Ms(te))}if(ro=!0,a)for(const te in a){const X=a[te],Oe=oe(X)?X.bind(s,s):oe(X.get)?X.get.bind(s,s):Ct,Se=!oe(X)&&oe(X.set)?X.set.bind(s):Ct,$e=Z({get:Oe,set:Se});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>$e.value,set:Ae=>$e.value=Ae})}if(c)for(const te in c)ua(c[te],n,s,te);if(d){const te=oe(d)?d.call(s):d;Reflect.ownKeys(te).forEach(X=>{fl(X,te[X])})}v&&Bo(v,e,"c");function we(te,X){W(X)?X.forEach(Oe=>te(Oe.bind(s))):X&&te(X.bind(s))}if(we(Ji,g),we(En,b),we(Xi,S),we(Qi,M),we(Yi,R),we(Wi,B),we(sl,ue),we(tl,ee),we(el,pe),we(la,G),we(ca,F),we(Zi,V),W(ae))if(ae.length){const te=e.exposed||(e.exposed={});ae.forEach(X=>{Object.defineProperty(te,X,{get:()=>s[X],set:Oe=>s[X]=Oe,enumerable:!0})})}else e.exposed||(e.exposed={});H&&e.render===Ct&&(e.render=H),ie!=null&&(e.inheritAttrs=ie),j&&(e.components=j),le&&(e.directives=le),V&&aa(e)}function al(e,t,s=Ct){W(e)&&(e=ao(e));for(const n in e){const o=e[n];let a;me(o)?"default"in o?a=Zs(o.from||n,o.default,!0):a=Zs(o.from||n):a=Zs(o),Le(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[n]=a}}function Bo(e,t,s){pt(W(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function ua(e,t,s,n){let o=n.includes(".")?Ca(s,n):()=>s[n];if(Ee(e)){const a=t[e];oe(a)&&et(o,a)}else if(oe(e))et(o,e.bind(s));else if(me(e))if(W(e))e.forEach(a=>ua(a,t,s,n));else{const a=oe(e.handler)?e.handler.bind(s):t[e.handler];oe(a)&&et(o,a,e)}}function da(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,c=a.get(t);let d;return c?d=c:!o.length&&!s&&!n?d=t:(d={},o.length&&o.forEach(m=>cn(d,m,l,!0)),cn(d,t,l)),me(t)&&a.set(t,d),d}function cn(e,t,s,n=!1){const{mixins:o,extends:a}=t;a&&cn(e,a,s,!0),o&&o.forEach(l=>cn(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const c=il[l]||s&&s[l];e[l]=c?c(e[l],t[l]):t[l]}return e}const il={data:Ko,props:Go,emits:Go,methods:ws,computed:ws,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:ws,directives:ws,watch:cl,provide:Ko,inject:ll};function Ko(e,t){return t?e?function(){return Ue(oe(e)?e.call(this,this):e,oe(t)?t.call(this,this):t)}:t:e}function ll(e,t){return ws(ao(e),ao(t))}function ao(e){if(W(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function De(e,t){return e?[...new Set([].concat(e,t))]:t}function ws(e,t){return e?Ue(Object.create(null),e,t):t}function Go(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:Ue(Object.create(null),Vo(e),Vo(t??{})):t}function cl(e,t){if(!e)return t;if(!t)return e;const s=Ue(Object.create(null),e);for(const n in t)s[n]=De(e[n],t[n]);return s}function fa(){return{app:null,config:{isNativeTag:_r,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ul=0;function dl(e,t){return function(n,o=null){oe(n)||(n=Ue({},n)),o!=null&&!me(o)&&(o=null);const a=fa(),l=new WeakSet,c=[];let d=!1;const m=a.app={_uid:ul++,_component:n,_props:o,_container:null,_context:a,_instance:null,version:Yl,get config(){return a.config},set config(v){},use(v,...g){return l.has(v)||(v&&oe(v.install)?(l.add(v),v.install(m,...g)):oe(v)&&(l.add(v),v(m,...g))),m},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),m},component(v,g){return g?(a.components[v]=g,m):a.components[v]},directive(v,g){return g?(a.directives[v]=g,m):a.directives[v]},mount(v,g,b){if(!d){const S=m._ceVNode||Ce(n,o);return S.appContext=a,b===!0?b="svg":b===!1&&(b=void 0),e(S,v,b),d=!0,m._container=v,v.__vue_app__=m,$n(S.component)}},onUnmount(v){c.push(v)},unmount(){d&&(pt(c,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(v,g){return a.provides[v]=g,m},runWithContext(v){const g=ps;ps=m;try{return v()}finally{ps=g}}};return m}}let ps=null;function fl(e,t){if(Ge){let s=Ge.provides;const n=Ge.parent&&Ge.parent.provides;n===s&&(s=Ge.provides=Object.create(n)),s[e]=t}}function Zs(e,t,s=!1){const n=Ta();if(n||ps){let o=ps?ps._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&oe(t)?t.call(n&&n.proxy):t}}const va={},pa=()=>Object.create(va),ha=e=>Object.getPrototypeOf(e)===va;function vl(e,t,s,n=!1){const o={},a=pa();e.propsDefaults=Object.create(null),ma(e,t,o,a);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:Ii(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function pl(e,t,s,n){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,c=fe(o),[d]=e.propsOptions;let m=!1;if((n||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let g=0;g<v.length;g++){let b=v[g];if(An(e.emitsOptions,b))continue;const S=t[b];if(d)if(ve(a,b))S!==a[b]&&(a[b]=S,m=!0);else{const M=Bt(b);o[M]=io(d,c,M,S,e,!1)}else S!==a[b]&&(a[b]=S,m=!0)}}}else{ma(e,t,o,a)&&(m=!0);let v;for(const g in c)(!t||!ve(t,g)&&((v=ss(g))===g||!ve(t,v)))&&(d?s&&(s[g]!==void 0||s[v]!==void 0)&&(o[g]=io(d,c,g,void 0,e,!0)):delete o[g]);if(a!==c)for(const g in a)(!t||!ve(t,g))&&(delete a[g],m=!0)}m&&Ot(e.attrs,"set","")}function ma(e,t,s,n){const[o,a]=e.propsOptions;let l=!1,c;if(t)for(let d in t){if(ks(d))continue;const m=t[d];let v;o&&ve(o,v=Bt(d))?!a||!a.includes(v)?s[v]=m:(c||(c={}))[v]=m:An(e.emitsOptions,d)||(!(d in n)||m!==n[d])&&(n[d]=m,l=!0)}if(a){const d=fe(s),m=c||ge;for(let v=0;v<a.length;v++){const g=a[v];s[g]=io(o,d,g,m[g],e,!ve(m,g))}}return l}function io(e,t,s,n,o,a){const l=e[s];if(l!=null){const c=ve(l,"default");if(c&&n===void 0){const d=l.default;if(l.type!==Function&&!l.skipFactory&&oe(d)){const{propsDefaults:m}=o;if(s in m)n=m[s];else{const v=Hs(o);n=m[s]=d.call(null,t),v()}}else n=d;o.ce&&o.ce._setProp(s,n)}l[0]&&(a&&!c?n=!1:l[1]&&(n===""||n===ss(s))&&(n=!0))}return n}const hl=new WeakMap;function ga(e,t,s=!1){const n=s?hl:t.propsCache,o=n.get(e);if(o)return o;const a=e.props,l={},c=[];let d=!1;if(!oe(e)){const v=g=>{d=!0;const[b,S]=ga(g,t,!0);Ue(l,b),S&&c.push(...S)};!s&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!d)return me(e)&&n.set(e,us),us;if(W(a))for(let v=0;v<a.length;v++){const g=Bt(a[v]);Yo(g)&&(l[g]=ge)}else if(a)for(const v in a){const g=Bt(v);if(Yo(g)){const b=a[v],S=l[g]=W(b)||oe(b)?{type:b}:Ue({},b),M=S.type;let R=!1,B=!0;if(W(M))for(let L=0;L<M.length;++L){const G=M[L],z=oe(G)&&G.name;if(z==="Boolean"){R=!0;break}else z==="String"&&(B=!1)}else R=oe(M)&&M.name==="Boolean";S[0]=R,S[1]=B,(R||ve(S,"default"))&&c.push(g)}}const m=[l,c];return me(e)&&n.set(e,m),m}function Yo(e){return e[0]!=="$"&&!ks(e)}const Co=e=>e==="_"||e==="_ctx"||e==="$stable",So=e=>W(e)?e.map(_t):[_t(e)],ml=(e,t,s)=>{if(t._n)return t;const n=Jr((...o)=>So(t(...o)),s);return n._c=!1,n},ya=(e,t,s)=>{const n=e._ctx;for(const o in e){if(Co(o))continue;const a=e[o];if(oe(a))t[o]=ml(o,a,n);else if(a!=null){const l=So(a);t[o]=()=>l}}},ba=(e,t)=>{const s=So(t);e.slots.default=()=>s},_a=(e,t,s)=>{for(const n in t)(s||!Co(n))&&(e[n]=t[n])},gl=(e,t,s)=>{const n=e.slots=pa();if(e.vnode.shapeFlag&32){const o=t._;o?(_a(n,t,s),s&&xr(n,"_",o,!0)):ya(t,n)}else t&&ba(e,t)},yl=(e,t,s)=>{const{vnode:n,slots:o}=e;let a=!0,l=ge;if(n.shapeFlag&32){const c=t._;c?s&&c===1?a=!1:_a(o,t,s):(a=!t.$stable,ya(t,o)),l=t}else t&&(ba(e,t),l={default:1});if(a)for(const c in o)!Co(c)&&l[c]==null&&delete o[c]},Ve=Fl;function bl(e){return _l(e)}function _l(e,t){const s=_n();s.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:l,createText:c,createComment:d,setText:m,setElementText:v,parentNode:g,nextSibling:b,setScopeId:S=Ct,insertStaticContent:M}=e,R=(p,u,f,h=null,_=null,w=null,T=void 0,I=null,O=!!u.dynamicChildren)=>{if(p===u)return;p&&!Zt(p,u)&&(h=st(p),Ae(p,_,w,!0),p=null),u.patchFlag===-2&&(O=!1,u.dynamicChildren=null);const{type:$,ref:D,shapeFlag:N}=u;switch($){case Tn:B(p,u,f,h);break;case Ke:L(p,u,f,h);break;case en:p==null&&G(u,f,h,T);break;case re:j(p,u,f,h,_,w,T,I,O);break;default:N&1?H(p,u,f,h,_,w,T,I,O):N&6?le(p,u,f,h,_,w,T,I,O):(N&64||N&128)&&$.process(p,u,f,h,_,w,T,I,O,Me)}D!=null&&_?Es(D,p&&p.ref,w,u||p,!u):D==null&&p&&p.ref!=null&&Es(p.ref,null,w,p,!0)},B=(p,u,f,h)=>{if(p==null)n(u.el=c(u.children),f,h);else{const _=u.el=p.el;u.children!==p.children&&m(_,u.children)}},L=(p,u,f,h)=>{p==null?n(u.el=d(u.children||""),f,h):u.el=p.el},G=(p,u,f,h)=>{[p.el,p.anchor]=M(p.children,u,f,h,p.el,p.anchor)},z=({el:p,anchor:u},f,h)=>{let _;for(;p&&p!==u;)_=b(p),n(p,f,h),p=_;n(u,f,h)},F=({el:p,anchor:u})=>{let f;for(;p&&p!==u;)f=b(p),o(p),p=f;o(u)},H=(p,u,f,h,_,w,T,I,O)=>{if(u.type==="svg"?T="svg":u.type==="math"&&(T="mathml"),p==null)ee(u,f,h,_,w,T,I,O);else{const $=p.el&&p.el._isVueCE?p.el:null;try{$&&$._beginPatch(),V(p,u,_,w,T,I,O)}finally{$&&$._endPatch()}}},ee=(p,u,f,h,_,w,T,I)=>{let O,$;const{props:D,shapeFlag:N,transition:q,dirs:Y}=p;if(O=p.el=l(p.type,w,D&&D.is,D),N&8?v(O,p.children):N&16&&ue(p.children,O,null,h,_,Yn(p,w),T,I),Y&&Yt(p,null,h,"created"),pe(O,p,p.scopeId,T,h),D){for(const de in D)de!=="value"&&!ks(de)&&a(O,de,null,D[de],w,h);"value"in D&&a(O,"value",null,D.value,w),($=D.onVnodeBeforeMount)&&ht($,h,p)}Y&&Yt(p,null,h,"beforeMount");const se=wl(_,q);se&&q.beforeEnter(O),n(O,u,f),(($=D&&D.onVnodeMounted)||se||Y)&&Ve(()=>{$&&ht($,h,p),se&&q.enter(O),Y&&Yt(p,null,h,"mounted")},_)},pe=(p,u,f,h,_)=>{if(f&&S(p,f),h)for(let w=0;w<h.length;w++)S(p,h[w]);if(_){let w=_.subTree;if(u===w||xa(w.type)&&(w.ssContent===u||w.ssFallback===u)){const T=_.vnode;pe(p,T,T.scopeId,T.slotScopeIds,_.parent)}}},ue=(p,u,f,h,_,w,T,I,O=0)=>{for(let $=O;$<p.length;$++){const D=p[$]=I?Ht(p[$]):_t(p[$]);R(null,D,u,f,h,_,w,T,I)}},V=(p,u,f,h,_,w,T)=>{const I=u.el=p.el;let{patchFlag:O,dynamicChildren:$,dirs:D}=u;O|=p.patchFlag&16;const N=p.props||ge,q=u.props||ge;let Y;if(f&&Wt(f,!1),(Y=q.onVnodeBeforeUpdate)&&ht(Y,f,u,p),D&&Yt(u,p,f,"beforeUpdate"),f&&Wt(f,!0),(N.innerHTML&&q.innerHTML==null||N.textContent&&q.textContent==null)&&v(I,""),$?ae(p.dynamicChildren,$,I,f,h,Yn(u,_),w):T||X(p,u,I,null,f,h,Yn(u,_),w,!1),O>0){if(O&16)ie(I,N,q,f,_);else if(O&2&&N.class!==q.class&&a(I,"class",null,q.class,_),O&4&&a(I,"style",N.style,q.style,_),O&8){const se=u.dynamicProps;for(let de=0;de<se.length;de++){const ce=se[de],Pe=N[ce],Fe=q[ce];(Fe!==Pe||ce==="value")&&a(I,ce,Pe,Fe,_,f)}}O&1&&p.children!==u.children&&v(I,u.children)}else!T&&$==null&&ie(I,N,q,f,_);((Y=q.onVnodeUpdated)||D)&&Ve(()=>{Y&&ht(Y,f,u,p),D&&Yt(u,p,f,"updated")},h)},ae=(p,u,f,h,_,w,T)=>{for(let I=0;I<u.length;I++){const O=p[I],$=u[I],D=O.el&&(O.type===re||!Zt(O,$)||O.shapeFlag&198)?g(O.el):f;R(O,$,D,null,h,_,w,T,!0)}},ie=(p,u,f,h,_)=>{if(u!==f){if(u!==ge)for(const w in u)!ks(w)&&!(w in f)&&a(p,w,u[w],null,_,h);for(const w in f){if(ks(w))continue;const T=f[w],I=u[w];T!==I&&w!=="value"&&a(p,w,I,T,_,h)}"value"in f&&a(p,"value",u.value,f.value,_)}},j=(p,u,f,h,_,w,T,I,O)=>{const $=u.el=p?p.el:c(""),D=u.anchor=p?p.anchor:c("");let{patchFlag:N,dynamicChildren:q,slotScopeIds:Y}=u;Y&&(I=I?I.concat(Y):Y),p==null?(n($,f,h),n(D,f,h),ue(u.children||[],f,D,_,w,T,I,O)):N>0&&N&64&&q&&p.dynamicChildren?(ae(p.dynamicChildren,q,f,_,w,T,I),(u.key!=null||_&&u===_.subTree)&&xo(p,u,!0)):X(p,u,f,D,_,w,T,I,O)},le=(p,u,f,h,_,w,T,I,O)=>{u.slotScopeIds=I,p==null?u.shapeFlag&512?_.ctx.activate(u,f,h,T,O):_e(u,f,h,_,w,T,O):qe(p,u,O)},_e=(p,u,f,h,_,w,T)=>{const I=p.component=ql(p,h,_);if(Sn(p)&&(I.ctx.renderer=Me),Hl(I,!1,T),I.asyncDep){if(_&&_.registerDep(I,we,T),!p.el){const O=I.subTree=Ce(Ke);L(null,O,u,f),p.placeholder=O.el}}else we(I,p,u,f,_,w,T)},qe=(p,u,f)=>{const h=u.component=p.component;if(Ol(p,u,f))if(h.asyncDep&&!h.asyncResolved){te(h,u,f);return}else h.next=u,h.update();else u.el=p.el,h.vnode=u},we=(p,u,f,h,_,w,T)=>{const I=()=>{if(p.isMounted){let{next:N,bu:q,u:Y,parent:se,vnode:de}=p;{const Xe=wa(p);if(Xe){N&&(N.el=de.el,te(p,N,T)),Xe.asyncDep.then(()=>{p.isUnmounted||I()});return}}let ce=N,Pe;Wt(p,!1),N?(N.el=de.el,te(p,N,T)):N=de,q&&Xs(q),(Pe=N.props&&N.props.onVnodeBeforeUpdate)&&ht(Pe,se,N,de),Wt(p,!0);const Fe=zo(p),Ye=p.subTree;p.subTree=Fe,R(Ye,Fe,g(Ye.el),st(Ye),p,_,w),N.el=Fe.el,ce===null&&Ml(p,Fe.el),Y&&Ve(Y,_),(Pe=N.props&&N.props.onVnodeUpdated)&&Ve(()=>ht(Pe,se,N,de),_)}else{let N;const{el:q,props:Y}=u,{bm:se,m:de,parent:ce,root:Pe,type:Fe}=p,Ye=As(u);Wt(p,!1),se&&Xs(se),!Ye&&(N=Y&&Y.onVnodeBeforeMount)&&ht(N,ce,u),Wt(p,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle(Fe);const Xe=p.subTree=zo(p);R(null,Xe,f,h,p,_,w),u.el=Xe.el}if(de&&Ve(de,_),!Ye&&(N=Y&&Y.onVnodeMounted)){const Xe=u;Ve(()=>ht(N,ce,Xe),_)}(u.shapeFlag&256||ce&&As(ce.vnode)&&ce.vnode.shapeFlag&256)&&p.a&&Ve(p.a,_),p.isMounted=!0,u=f=h=null}};p.scope.on();const O=p.effect=new $r(I);p.scope.off();const $=p.update=O.run.bind(O),D=p.job=O.runIfDirty.bind(O);D.i=p,D.id=p.uid,O.scheduler=()=>ko(D),Wt(p,!0),$()},te=(p,u,f)=>{u.component=p;const h=p.vnode.props;p.vnode=u,p.next=null,pl(p,u.props,h,f),yl(p,u.children,f),Ft(),jo(p),Pt()},X=(p,u,f,h,_,w,T,I,O=!1)=>{const $=p&&p.children,D=p?p.shapeFlag:0,N=u.children,{patchFlag:q,shapeFlag:Y}=u;if(q>0){if(q&128){Se($,N,f,h,_,w,T,I,O);return}else if(q&256){Oe($,N,f,h,_,w,T,I,O);return}}Y&8?(D&16&&ut($,_,w),N!==$&&v(f,N)):D&16?Y&16?Se($,N,f,h,_,w,T,I,O):ut($,_,w,!0):(D&8&&v(f,""),Y&16&&ue(N,f,h,_,w,T,I,O))},Oe=(p,u,f,h,_,w,T,I,O)=>{p=p||us,u=u||us;const $=p.length,D=u.length,N=Math.min($,D);let q;for(q=0;q<N;q++){const Y=u[q]=O?Ht(u[q]):_t(u[q]);R(p[q],Y,f,null,_,w,T,I,O)}$>D?ut(p,_,w,!0,!1,N):ue(u,f,h,_,w,T,I,O,N)},Se=(p,u,f,h,_,w,T,I,O)=>{let $=0;const D=u.length;let N=p.length-1,q=D-1;for(;$<=N&&$<=q;){const Y=p[$],se=u[$]=O?Ht(u[$]):_t(u[$]);if(Zt(Y,se))R(Y,se,f,null,_,w,T,I,O);else break;$++}for(;$<=N&&$<=q;){const Y=p[N],se=u[q]=O?Ht(u[q]):_t(u[q]);if(Zt(Y,se))R(Y,se,f,null,_,w,T,I,O);else break;N--,q--}if($>N){if($<=q){const Y=q+1,se=Y<D?u[Y].el:h;for(;$<=q;)R(null,u[$]=O?Ht(u[$]):_t(u[$]),f,se,_,w,T,I,O),$++}}else if($>q)for(;$<=N;)Ae(p[$],_,w,!0),$++;else{const Y=$,se=$,de=new Map;for($=se;$<=q;$++){const je=u[$]=O?Ht(u[$]):_t(u[$]);je.key!=null&&de.set(je.key,$)}let ce,Pe=0;const Fe=q-se+1;let Ye=!1,Xe=0;const ft=new Array(Fe);for($=0;$<Fe;$++)ft[$]=0;for($=Y;$<=N;$++){const je=p[$];if(Pe>=Fe){Ae(je,_,w,!0);continue}let nt;if(je.key!=null)nt=de.get(je.key);else for(ce=se;ce<=q;ce++)if(ft[ce-se]===0&&Zt(je,u[ce])){nt=ce;break}nt===void 0?Ae(je,_,w,!0):(ft[nt-se]=$+1,nt>=Xe?Xe=nt:Ye=!0,R(je,u[nt],f,null,_,w,T,I,O),Pe++)}const ms=Ye?kl(ft):us;for(ce=ms.length-1,$=Fe-1;$>=0;$--){const je=se+$,nt=u[je],ns=u[je+1],ot=je+1<D?ns.el||ns.placeholder:h;ft[$]===0?R(null,nt,f,ot,_,w,T,I,O):Ye&&(ce<0||$!==ms[ce]?$e(nt,f,ot,2):ce--)}}},$e=(p,u,f,h,_=null)=>{const{el:w,type:T,transition:I,children:O,shapeFlag:$}=p;if($&6){$e(p.component.subTree,u,f,h);return}if($&128){p.suspense.move(u,f,h);return}if($&64){T.move(p,u,f,Me);return}if(T===re){n(w,u,f);for(let N=0;N<O.length;N++)$e(O[N],u,f,h);n(p.anchor,u,f);return}if(T===en){z(p,u,f);return}if(h!==2&&$&1&&I)if(h===0)I.beforeEnter(w),n(w,u,f),Ve(()=>I.enter(w),_);else{const{leave:N,delayLeave:q,afterLeave:Y}=I,se=()=>{p.ctx.isUnmounted?o(w):n(w,u,f)},de=()=>{w._isLeaving&&w[It](!0),N(w,()=>{se(),Y&&Y()})};q?q(w,se,de):de()}else n(w,u,f)},Ae=(p,u,f,h=!1,_=!1)=>{const{type:w,props:T,ref:I,children:O,dynamicChildren:$,shapeFlag:D,patchFlag:N,dirs:q,cacheIndex:Y}=p;if(N===-2&&(_=!1),I!=null&&(Ft(),Es(I,null,f,p,!0),Pt()),Y!=null&&(u.renderCache[Y]=void 0),D&256){u.ctx.deactivate(p);return}const se=D&1&&q,de=!As(p);let ce;if(de&&(ce=T&&T.onVnodeBeforeUnmount)&&ht(ce,u,p),D&6)Ut(p.component,f,h);else{if(D&128){p.suspense.unmount(f,h);return}se&&Yt(p,null,u,"beforeUnmount"),D&64?p.type.remove(p,u,f,Me,h):$&&!$.hasOnce&&(w!==re||N>0&&N&64)?ut($,u,f,!1,!0):(w===re&&N&384||!_&&D&16)&&ut(O,u,f),h&&He(p)}(de&&(ce=T&&T.onVnodeUnmounted)||se)&&Ve(()=>{ce&&ht(ce,u,p),se&&Yt(p,null,u,"unmounted")},f)},He=p=>{const{type:u,el:f,anchor:h,transition:_}=p;if(u===re){tt(f,h);return}if(u===en){F(p);return}const w=()=>{o(f),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(p.shapeFlag&1&&_&&!_.persisted){const{leave:T,delayLeave:I}=_,O=()=>T(f,w);I?I(p.el,w,O):O()}else w()},tt=(p,u)=>{let f;for(;p!==u;)f=b(p),o(p),p=f;o(u)},Ut=(p,u,f)=>{const{bum:h,scope:_,job:w,subTree:T,um:I,m:O,a:$}=p;Wo(O),Wo($),h&&Xs(h),_.stop(),w&&(w.flags|=8,Ae(T,p,u,f)),I&&Ve(I,u),Ve(()=>{p.isUnmounted=!0},u)},ut=(p,u,f,h=!1,_=!1,w=0)=>{for(let T=w;T<p.length;T++)Ae(p[T],u,f,h,_)},st=p=>{if(p.shapeFlag&6)return st(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const u=b(p.anchor||p.el),f=u&&u[Xr];return f?b(f):u};let dt=!1;const xt=(p,u,f)=>{p==null?u._vnode&&Ae(u._vnode,null,null,!0):R(u._vnode||null,p,u,null,null,null,f),u._vnode=p,dt||(dt=!0,jo(),Yr(),dt=!1)},Me={p:R,um:Ae,m:$e,r:He,mt:_e,mc:ue,pc:X,pbc:ae,n:st,o:e};return{render:xt,hydrate:void 0,createApp:dl(xt)}}function Yn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Wt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function xo(e,t,s=!1){const n=e.children,o=t.children;if(W(n)&&W(o))for(let a=0;a<n.length;a++){const l=n[a];let c=o[a];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[a]=Ht(o[a]),c.el=l.el),!s&&c.patchFlag!==-2&&xo(l,c)),c.type===Tn&&c.patchFlag!==-1&&(c.el=l.el),c.type===Ke&&!c.el&&(c.el=l.el)}}function kl(e){const t=e.slice(),s=[0];let n,o,a,l,c;const d=e.length;for(n=0;n<d;n++){const m=e[n];if(m!==0){if(o=s[s.length-1],e[o]<m){t[n]=o,s.push(n);continue}for(a=0,l=s.length-1;a<l;)c=a+l>>1,e[s[c]]<m?a=c+1:l=c;m<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function wa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:wa(t)}function Wo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Cl=Symbol.for("v-scx"),Sl=()=>Zs(Cl);function et(e,t,s){return ka(e,t,s)}function ka(e,t,s=ge){const{immediate:n,deep:o,flush:a,once:l}=s,c=Ue({},s),d=t&&n||!t&&a!=="post";let m;if(js){if(a==="sync"){const S=Sl();m=S.__watcherHandles||(S.__watcherHandles=[])}else if(!d){const S=()=>{};return S.stop=Ct,S.resume=Ct,S.pause=Ct,S}}const v=Ge;c.call=(S,M,R)=>pt(S,v,M,R);let g=!1;a==="post"?c.scheduler=S=>{Ve(S,v&&v.suspense)}:a!=="sync"&&(g=!0,c.scheduler=(S,M)=>{M?S():ko(S)}),c.augmentJob=S=>{t&&(S.flags|=4),g&&(S.flags|=2,v&&(S.id=v.uid,S.i=v))};const b=Ni(e,t,c);return js&&(m?m.push(b):d&&b()),b}function xl(e,t,s){const n=this.proxy,o=Ee(e)?e.includes(".")?Ca(n,e):()=>n[e]:e.bind(n,n);let a;oe(t)?a=t:(a=t.handler,s=t);const l=Hs(this),c=ka(o,a.bind(n),s);return l(),c}function Ca(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const El=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Bt(t)}Modifiers`]||e[`${ss(t)}Modifiers`];function Al(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ge;let o=s;const a=t.startsWith("update:"),l=a&&El(n,t.slice(7));l&&(l.trim&&(o=s.map(v=>Ee(v)?v.trim():v)),l.number&&(o=s.map(bn)));let c,d=n[c=qn(t)]||n[c=qn(Bt(t))];!d&&a&&(d=n[c=qn(ss(t))]),d&&pt(d,e,6,o);const m=n[c+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,pt(m,e,6,o)}}const Tl=new WeakMap;function Sa(e,t,s=!1){const n=s?Tl:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const a=e.emits;let l={},c=!1;if(!oe(e)){const d=m=>{const v=Sa(m,t,!0);v&&(c=!0,Ue(l,v))};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!a&&!c?(me(e)&&n.set(e,null),null):(W(a)?a.forEach(d=>l[d]=null):Ue(l,a),me(e)&&n.set(e,l),l)}function An(e,t){return!e||!mn(t)?!1:(t=t.slice(2).replace(/Once$/,""),ve(e,t[0].toLowerCase()+t.slice(1))||ve(e,ss(t))||ve(e,t))}function zo(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[a],slots:l,attrs:c,emit:d,render:m,renderCache:v,props:g,data:b,setupState:S,ctx:M,inheritAttrs:R}=e,B=an(e);let L,G;try{if(s.shapeFlag&4){const F=o||n,H=F;L=_t(m.call(H,F,v,g,S,b,M)),G=c}else{const F=t;L=_t(F.length>1?F(g,{attrs:c,slots:l,emit:d}):F(g,null)),G=t.props?c:$l(c)}}catch(F){$s.length=0,Cn(F,e,1),L=Ce(Ke)}let z=L;if(G&&R!==!1){const F=Object.keys(G),{shapeFlag:H}=z;F.length&&H&7&&(a&&F.some(fo)&&(G=Il(G,a)),z=Gt(z,G,!1,!0))}return s.dirs&&(z=Gt(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(s.dirs):s.dirs),s.transition&&Ps(z,s.transition),L=z,an(B),L}const $l=e=>{let t;for(const s in e)(s==="class"||s==="style"||mn(s))&&((t||(t={}))[s]=e[s]);return t},Il=(e,t)=>{const s={};for(const n in e)(!fo(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Ol(e,t,s){const{props:n,children:o,component:a}=e,{props:l,children:c,patchFlag:d}=t,m=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&d>=0){if(d&1024)return!0;if(d&16)return n?Jo(n,l,m):!!l;if(d&8){const v=t.dynamicProps;for(let g=0;g<v.length;g++){const b=v[g];if(l[b]!==n[b]&&!An(m,b))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?Jo(n,l,m):!0:!!l;return!1}function Jo(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(t[a]!==e[a]&&!An(s,a))return!0}return!1}function Ml({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const xa=e=>e.__isSuspense;function Fl(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):Hi(e)}const re=Symbol.for("v-fgt"),Tn=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),en=Symbol.for("v-stc"),$s=[];let Ze=null;function k(e=!1){$s.push(Ze=e?null:[])}function Pl(){$s.pop(),Ze=$s[$s.length-1]||null}let Rs=1;function un(e,t=!1){Rs+=e,e<0&&Ze&&t&&(Ze.hasOnce=!0)}function Ea(e){return e.dynamicChildren=Rs>0?Ze||us:null,Pl(),Rs>0&&Ze&&Ze.push(e),e}function C(e,t,s,n,o,a){return Ea(r(e,t,s,n,o,a,!0))}function Us(e,t,s,n,o){return Ea(Ce(e,t,s,n,o,!0))}function dn(e){return e?e.__v_isVNode===!0:!1}function Zt(e,t){return e.type===t.type&&e.key===t.key}const Aa=({key:e})=>e??null,tn=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ee(e)||Le(e)||oe(e)?{i:it,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,n=0,o=null,a=e===re?0:1,l=!1,c=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Aa(t),ref:t&&tn(t),scopeId:zr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:it};return c?(Eo(d,s),a&128&&e.normalize(d)):s&&(d.shapeFlag|=Ee(s)?8:16),Rs>0&&!l&&Ze&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&Ze.push(d),d}const Ce=Rl;function Rl(e,t=null,s=null,n=0,o=null,a=!1){if((!e||e===nl)&&(e=Ke),dn(e)){const c=Gt(e,t,!0);return s&&Eo(c,s),Rs>0&&!a&&Ze&&(c.shapeFlag&6?Ze[Ze.indexOf(e)]=c:Ze.push(c)),c.patchFlag=-2,c}if(Kl(e)&&(e=e.__vccOpts),t){t=Ul(t);let{class:c,style:d}=t;c&&!Ee(c)&&(t.class=ne(c)),me(d)&&(wo(d)&&!W(d)&&(d=Ue({},d)),t.style=bt(d))}const l=Ee(e)?1:xa(e)?128:Qr(e)?64:me(e)?4:oe(e)?2:0;return r(e,t,s,n,o,l,a,!0)}function Ul(e){return e?wo(e)||ha(e)?Ue({},e):e:null}function Gt(e,t,s=!1,n=!1){const{props:o,ref:a,patchFlag:l,children:c,transition:d}=e,m=t?jl(o||{},t):o,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&Aa(m),ref:t&&t.ref?s&&a?W(a)?a.concat(tn(t)):[a,tn(t)]:tn(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==re?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gt(e.ssContent),ssFallback:e.ssFallback&&Gt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&n&&Ps(v,d.clone(v)),v}function Q(e=" ",t=0){return Ce(Tn,null,e,t)}function Qe(e,t){const s=Ce(en,null,e);return s.staticCount=t,s}function K(e="",t=!1){return t?(k(),Us(Ke,null,e)):Ce(Ke,null,e)}function _t(e){return e==null||typeof e=="boolean"?Ce(Ke):W(e)?Ce(re,null,e.slice()):dn(e)?Ht(e):Ce(Tn,null,String(e))}function Ht(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gt(e)}function Eo(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(W(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Eo(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!ha(t)?t._ctx=it:o===3&&it&&(it.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else oe(t)?(t={default:t,_ctx:it},s=32):(t=String(t),n&64?(s=16,t=[Q(t)]):s=8);e.children=t,e.shapeFlag|=s}function jl(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=ne([t.class,n.class]));else if(o==="style")t.style=bt([t.style,n.style]);else if(mn(o)){const a=t[o],l=n[o];l&&a!==l&&!(W(a)&&a.includes(l))&&(t[o]=a?[].concat(a,l):l)}else o!==""&&(t[o]=n[o])}return t}function ht(e,t,s,n=null){pt(e,t,7,[s,n])}const Nl=fa();let Ll=0;function ql(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Nl,a={uid:Ll++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ui(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ga(n,o),emitsOptions:Sa(n,o),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:n.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Al.bind(null,a),e.ce&&e.ce(a),a}let Ge=null;const Ta=()=>Ge||it;let fn,lo;{const e=_n(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};fn=t("__VUE_INSTANCE_SETTERS__",s=>Ge=s),lo=t("__VUE_SSR_SETTERS__",s=>js=s)}const Hs=e=>{const t=Ge;return fn(e),e.scope.on(),()=>{e.scope.off(),fn(t)}},Xo=()=>{Ge&&Ge.scope.off(),fn(null)};function $a(e){return e.vnode.shapeFlag&4}let js=!1;function Hl(e,t=!1,s=!1){t&&lo(t);const{props:n,children:o}=e.vnode,a=$a(e);vl(e,n,a,t),gl(e,o,s||t);const l=a?Dl(e,t):void 0;return t&&lo(!1),l}function Dl(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ol);const{setup:n}=s;if(n){Ft();const o=e.setupContext=n.length>1?Bl(e):null,a=Hs(e),l=qs(n,e,0,[e.props,o]),c=wr(l);if(Pt(),a(),(c||e.sp)&&!As(e)&&aa(e),c){if(l.then(Xo,Xo),t)return l.then(d=>{Qo(e,d)}).catch(d=>{Cn(d,e,0)});e.asyncDep=l}else Qo(e,l)}else Ia(e)}function Qo(e,t,s){oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:me(t)&&(e.setupState=Vr(t)),Ia(e)}function Ia(e,t,s){const n=e.type;e.render||(e.render=n.render||Ct);{const o=Hs(e);Ft();try{rl(e)}finally{Pt(),o()}}}const Vl={get(e,t){return Ne(e,"get",""),e[t]}};function Bl(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Vl),slots:e.slots,emit:e.emit,expose:t}}function $n(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Vr(Oi(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ts)return Ts[s](e)},has(t,s){return s in t||s in Ts}})):e.proxy}function Kl(e){return oe(e)&&"__vccOpts"in e}const Z=(e,t)=>Ui(e,t,js);function Gl(e,t,s){try{un(-1);const n=arguments.length;return n===2?me(t)&&!W(t)?dn(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&dn(s)&&(s=[s]),Ce(e,t,s))}finally{un(1)}}const Yl="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let co;const Zo=typeof window<"u"&&window.trustedTypes;if(Zo)try{co=Zo.createPolicy("vue",{createHTML:e=>e})}catch{}const Oa=co?e=>co.createHTML(e):e=>e,Wl="http://www.w3.org/2000/svg",zl="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,er=$t&&$t.createElement("template"),Jl={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?$t.createElementNS(Wl,e):t==="mathml"?$t.createElementNS(zl,e):s?$t.createElement(e,{is:s}):$t.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,a){const l=s?s.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===a||!(o=o.nextSibling)););else{er.innerHTML=Oa(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const c=er.content;if(n==="svg"||n==="mathml"){const d=c.firstChild;for(;d.firstChild;)c.appendChild(d.firstChild);c.removeChild(d)}t.insertBefore(c,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Lt="transition",bs="animation",Ns=Symbol("_vtc"),Ma={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Xl=Ue({},ta,Ma),Ql=e=>(e.displayName="Transition",e.props=Xl,e),Zl=Ql((e,{slots:t})=>Gl(Gi,ec(e),t)),zt=(e,t=[])=>{W(e)?e.forEach(s=>s(...t)):e&&e(...t)},tr=e=>e?W(e)?e.some(t=>t.length>1):e.length>1:!1;function ec(e){const t={};for(const j in e)j in Ma||(t[j]=e[j]);if(e.css===!1)return t;const{name:s="v",type:n,duration:o,enterFromClass:a=`${s}-enter-from`,enterActiveClass:l=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:d=a,appearActiveClass:m=l,appearToClass:v=c,leaveFromClass:g=`${s}-leave-from`,leaveActiveClass:b=`${s}-leave-active`,leaveToClass:S=`${s}-leave-to`}=e,M=tc(o),R=M&&M[0],B=M&&M[1],{onBeforeEnter:L,onEnter:G,onEnterCancelled:z,onLeave:F,onLeaveCancelled:H,onBeforeAppear:ee=L,onAppear:pe=G,onAppearCancelled:ue=z}=t,V=(j,le,_e,qe)=>{j._enterCancelled=qe,Jt(j,le?v:c),Jt(j,le?m:l),_e&&_e()},ae=(j,le)=>{j._isLeaving=!1,Jt(j,g),Jt(j,S),Jt(j,b),le&&le()},ie=j=>(le,_e)=>{const qe=j?pe:G,we=()=>V(le,j,_e);zt(qe,[le,we]),sr(()=>{Jt(le,j?d:a),Tt(le,j?v:c),tr(qe)||nr(le,n,R,we)})};return Ue(t,{onBeforeEnter(j){zt(L,[j]),Tt(j,a),Tt(j,l)},onBeforeAppear(j){zt(ee,[j]),Tt(j,d),Tt(j,m)},onEnter:ie(!1),onAppear:ie(!0),onLeave(j,le){j._isLeaving=!0;const _e=()=>ae(j,le);Tt(j,g),j._enterCancelled?(Tt(j,b),ar(j)):(ar(j),Tt(j,b)),sr(()=>{j._isLeaving&&(Jt(j,g),Tt(j,S),tr(F)||nr(j,n,B,_e))}),zt(F,[j,_e])},onEnterCancelled(j){V(j,!1,void 0,!0),zt(z,[j])},onAppearCancelled(j){V(j,!0,void 0,!0),zt(ue,[j])},onLeaveCancelled(j){ae(j),zt(H,[j])}})}function tc(e){if(e==null)return null;if(me(e))return[Wn(e.enter),Wn(e.leave)];{const t=Wn(e);return[t,t]}}function Wn(e){return ti(e)}function Tt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Ns]||(e[Ns]=new Set)).add(t)}function Jt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[Ns];s&&(s.delete(t),s.size||(e[Ns]=void 0))}function sr(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let sc=0;function nr(e,t,s,n){const o=e._endId=++sc,a=()=>{o===e._endId&&n()};if(s!=null)return setTimeout(a,s);const{type:l,timeout:c,propCount:d}=nc(e,t);if(!l)return n();const m=l+"end";let v=0;const g=()=>{e.removeEventListener(m,b),a()},b=S=>{S.target===e&&++v>=d&&g()};setTimeout(()=>{v<d&&g()},c+1),e.addEventListener(m,b)}function nc(e,t){const s=window.getComputedStyle(e),n=M=>(s[M]||"").split(", "),o=n(`${Lt}Delay`),a=n(`${Lt}Duration`),l=or(o,a),c=n(`${bs}Delay`),d=n(`${bs}Duration`),m=or(c,d);let v=null,g=0,b=0;t===Lt?l>0&&(v=Lt,g=l,b=a.length):t===bs?m>0&&(v=bs,g=m,b=d.length):(g=Math.max(l,m),v=g>0?l>m?Lt:bs:null,b=v?v===Lt?a.length:d.length:0);const S=v===Lt&&/\b(?:transform|all)(?:,|$)/.test(n(`${Lt}Property`).toString());return{type:v,timeout:g,propCount:b,hasTransform:S}}function or(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>rr(s)+rr(e[n])))}function rr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ar(e){return(e?e.ownerDocument:document).body.offsetHeight}function oc(e,t,s){const n=e[Ns];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const vn=Symbol("_vod"),Fa=Symbol("_vsh"),Pa={name:"show",beforeMount(e,{value:t},{transition:s}){e[vn]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):_s(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),_s(e,!0),n.enter(e)):n.leave(e,()=>{_s(e,!1)}):_s(e,t))},beforeUnmount(e,{value:t}){_s(e,t)}};function _s(e,t){e.style.display=t?e[vn]:"none",e[Fa]=!t}const rc=Symbol(""),ac=/(?:^|;)\s*display\s*:/;function ic(e,t,s){const n=e.style,o=Ee(s);let a=!1;if(s&&!o){if(t)if(Ee(t))for(const l of t.split(";")){const c=l.slice(0,l.indexOf(":")).trim();s[c]==null&&sn(n,c,"")}else for(const l in t)s[l]==null&&sn(n,l,"");for(const l in s)l==="display"&&(a=!0),sn(n,l,s[l])}else if(o){if(t!==s){const l=n[rc];l&&(s+=";"+l),n.cssText=s,a=ac.test(s)}}else t&&e.removeAttribute("style");vn in e&&(e[vn]=a?n.display:"",e[Fa]&&(n.display="none"))}const ir=/\s*!important$/;function sn(e,t,s){if(W(s))s.forEach(n=>sn(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=lc(e,t);ir.test(s)?e.setProperty(ss(n),s.replace(ir,""),"important"):e[n]=s}}const lr=["Webkit","Moz","ms"],zn={};function lc(e,t){const s=zn[t];if(s)return s;let n=Bt(t);if(n!=="filter"&&n in e)return zn[t]=n;n=Sr(n);for(let o=0;o<lr.length;o++){const a=lr[o]+n;if(a in e)return zn[t]=a}return t}const cr="http://www.w3.org/1999/xlink";function ur(e,t,s,n,o,a=ii(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(cr,t.slice(6,t.length)):e.setAttributeNS(cr,t,s):s==null||a&&!Er(s)?e.removeAttribute(t):e.setAttribute(t,a?"":St(s)?String(s):s)}function dr(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Oa(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?e.getAttribute("value")||"":e.value,d=s==null?e.type==="checkbox"?"on":"":String(s);(c!==d||!("_value"in e))&&(e.value=d),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const c=typeof e[t];c==="boolean"?s=Er(s):s==null&&c==="string"?(s="",l=!0):c==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function es(e,t,s,n){e.addEventListener(t,s,n)}function cc(e,t,s,n){e.removeEventListener(t,s,n)}const fr=Symbol("_vei");function uc(e,t,s,n,o=null){const a=e[fr]||(e[fr]={}),l=a[t];if(n&&l)l.value=n;else{const[c,d]=dc(t);if(n){const m=a[t]=pc(n,o);es(e,c,m,d)}else l&&(cc(e,c,l,d),a[t]=void 0)}}const vr=/(?:Once|Passive|Capture)$/;function dc(e){let t;if(vr.test(e)){t={};let n;for(;n=e.match(vr);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ss(e.slice(2)),t]}let Jn=0;const fc=Promise.resolve(),vc=()=>Jn||(fc.then(()=>Jn=0),Jn=Date.now());function pc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;pt(hc(n,s.value),t,5,[n])};return s.value=e,s.attached=vc(),s}function hc(e,t){if(W(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const pr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,mc=(e,t,s,n,o,a)=>{const l=o==="svg";t==="class"?oc(e,n,l):t==="style"?ic(e,s,n):mn(t)?fo(t)||uc(e,t,s,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gc(e,t,n,l))?(dr(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ur(e,t,n,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ee(n))?dr(e,Bt(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),ur(e,t,n,l))};function gc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&pr(t)&&oe(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return pr(t)&&Ee(s)?!1:t in e}const pn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return W(t)?s=>Xs(t,s):t};function yc(e){e.target.composing=!0}function hr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const hs=Symbol("_assign");function mr(e,t,s){return t&&(e=e.trim()),s&&(e=bn(e)),e}const Dt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[hs]=pn(o);const a=n||o.props&&o.props.type==="number";es(e,t?"change":"input",l=>{l.target.composing||e[hs](mr(e.value,s,a))}),(s||a)&&es(e,"change",()=>{e.value=mr(e.value,s,a)}),t||(es(e,"compositionstart",yc),es(e,"compositionend",hr),es(e,"change",hr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:a}},l){if(e[hs]=pn(l),e.composing)return;const c=(a||e.type==="number")&&!/^0\d/.test(e.value)?bn(e.value):e.value,d=t??"";c!==d&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===d)||(e.value=d))}},kt={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=gn(t);es(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?bn(hn(l)):hn(l));e[hs](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,Kr(()=>{e._assigning=!1})}),e[hs]=pn(n)},mounted(e,{value:t}){gr(e,t)},beforeUpdate(e,t,s){e[hs]=pn(s)},updated(e,{value:t}){e._assigning||gr(e,t)}};function gr(e,t){const s=e.multiple,n=W(t);if(!(s&&!n&&!gn(t))){for(let o=0,a=e.options.length;o<a;o++){const l=e.options[o],c=hn(l);if(s)if(n){const d=typeof c;d==="string"||d==="number"?l.selected=t.some(m=>String(m)===String(c)):l.selected=ci(t,c)>-1}else l.selected=t.has(c);else if(wn(hn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function hn(e){return"_value"in e?e._value:e.value}const bc=["ctrl","shift","alt","meta"],_c={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bc.some(s=>e[`${s}Key`]&&!t.includes(s))},wt=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...a)=>{for(let l=0;l<t.length;l++){const c=_c[t[l]];if(c&&c(o,t))return}return e(o,...a)})},wc=Ue({patchProp:mc},Jl);let yr;function kc(){return yr||(yr=bl(wc))}const Cc=(...e)=>{const t=kc().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=xc(n);if(!o)return;const a=t._component;!oe(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,Sc(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function Sc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function xc(e){return Ee(e)?document.querySelector(e):e}const ct=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Ec={class:"loading-container"},Ac={__name:"LoadingState",props:{message:{type:String,default:"Loading student data..."}},setup(e){return(t,s)=>(k(),C("div",Ec,[s[0]||(s[0]=r("div",{class:"spinner"},null,-1)),r("p",null,E(e.message),1)]))}},Tc=ct(Ac,[["__scopeId","data-v-5a5ef9a8"]]),$c={class:"error-container"},Ic={__name:"ErrorState",props:{title:{type:String,default:"Something went wrong"},message:{type:String,required:!0},showRetry:{type:Boolean,default:!0}},emits:["retry"],setup(e,{emit:t}){return(s,n)=>(k(),C("div",$c,[n[1]||(n[1]=r("div",{class:"error-icon"},"",-1)),r("h3",null,E(e.title),1),r("p",null,E(e.message),1),e.showRetry?(k(),C("button",{key:0,onClick:n[0]||(n[0]=o=>s.$emit("retry")),class:"retry-button"}," Try Again ")):K("",!0)]))}},Oc=ct(Ic,[["__scopeId","data-v-fed208d7"]]),Mc={class:"staff-overview-header"},Fc={class:"header-content"},Pc={class:"header-meta"},Rc={class:"staff-name"},Uc={class:"student-count"},jc={__name:"StaffOverviewHeader",props:{staffMember:{type:Object,required:!0},totalStudents:{type:Number,default:0}},setup(e){const t=e,s={staff_admin:"Staff Admin",tutor:"Tutor",head_of_year:"Head of Year",subject_teacher:"Subject Teacher"},n=Z(()=>{var o;return((o=t.staffMember.roles)==null?void 0:o.map(a=>s[a]||a))||[]});return(o,a)=>(k(),C("div",Mc,[r("div",Fc,[a[0]||(a[0]=r("h1",null,"Staff Overview",-1)),r("div",Pc,[r("span",Rc,E(e.staffMember.name),1),(k(!0),C(re,null,Te(n.value,l=>(k(),C("span",{class:"role-badge",key:l},E(l),1))),128)),r("span",Uc,E(e.totalStudents)+" students",1)])])]))}},Nc=ct(jc,[["__scopeId","data-v-af34e02e"]]),Lc={class:"filter-bar"},qc={class:"filter-label-row"},Hc=["title"],Dc=["value"],Vc={class:"filter-label-row"},Bc=["title"],Kc=["value"],Gc={class:"filter-label-row"},Yc=["title"],Wc=["value"],zc={class:"filter-label-row"},Jc=["title"],Xc={class:"filter-label-row"},Qc=["title"],Zc={__name:"FilterBar",props:{filters:{type:Object,required:!0},lockedFilters:{type:Object,default:()=>({cycle:!1,group:!1,year:!1,status:!1,search:!1})},preservedValues:{type:Object,default:()=>({})}},emits:["filter-changed","lock-changed"],setup(e,{emit:t}){const s=e,n=t,o=P(String(s.preservedValues.cycle||"1")),a=P(String(s.preservedValues.group||"")),l=P(String(s.preservedValues.year||"")),c=P(String(s.preservedValues.status||"")),d=P(String(s.preservedValues.search||""));et(()=>s.preservedValues,b=>{b.cycle!==void 0&&o.value!==String(b.cycle||"")&&(o.value=String(b.cycle||"")),b.group!==void 0&&a.value!==(b.group||"")&&(a.value=b.group||""),b.year!==void 0&&l.value!==(b.year||"")&&(l.value=b.year||""),b.status!==void 0&&c.value!==(b.status||"")&&(c.value=b.status||""),b.search!==void 0&&d.value!==(b.search||"")&&(d.value=b.search||"")},{deep:!0,immediate:!1});const m=b=>{const S={...s.lockedFilters};S[b]=!S[b],n("lock-changed",S)},v=()=>{n("filter-changed",{cycle:o.value||"",group:a.value||"",year:l.value||"",status:c.value||"",search:d.value||""})},g=()=>{s.lockedFilters.cycle||(o.value="1"),s.lockedFilters.group||(a.value=""),s.lockedFilters.year||(l.value=""),s.lockedFilters.status||(c.value=""),s.lockedFilters.search||(d.value=""),v()};return(b,S)=>(k(),C("div",Lc,[r("div",{class:ne(["filter-group",{locked:e.lockedFilters.cycle}])},[r("div",qc,[S[10]||(S[10]=r("label",{for:"cycle-filter"},"Cycle:",-1)),r("button",{onClick:S[0]||(S[0]=M=>m("cycle")),class:"lock-button",title:e.lockedFilters.cycle?"Unlock filter":"Lock filter"},E(e.lockedFilters.cycle?"":""),9,Hc)]),Ie(r("select",{id:"cycle-filter","onUpdate:modelValue":S[1]||(S[1]=M=>o.value=M),onChange:v},[(k(!0),C(re,null,Te(e.filters.cycles,M=>(k(),C("option",{key:M,value:M}," Cycle "+E(M),9,Dc))),128))],544),[[kt,o.value]])],2),r("div",{class:ne(["filter-group",{locked:e.lockedFilters.group}])},[r("div",Vc,[S[11]||(S[11]=r("label",{for:"group-filter"},"Group:",-1)),r("button",{onClick:S[2]||(S[2]=M=>m("group")),class:"lock-button",title:e.lockedFilters.group?"Unlock filter":"Lock filter"},E(e.lockedFilters.group?"":""),9,Bc)]),Ie(r("select",{id:"group-filter","onUpdate:modelValue":S[3]||(S[3]=M=>a.value=M),onChange:v},[S[12]||(S[12]=r("option",{value:""},"All Groups",-1)),(k(!0),C(re,null,Te(e.filters.groups,M=>(k(),C("option",{key:M,value:M},E(M),9,Kc))),128))],544),[[kt,a.value]])],2),r("div",{class:ne(["filter-group",{locked:e.lockedFilters.year}])},[r("div",Gc,[S[13]||(S[13]=r("label",{for:"year-filter"},"Year:",-1)),r("button",{onClick:S[4]||(S[4]=M=>m("year")),class:"lock-button",title:e.lockedFilters.year?"Unlock filter":"Lock filter"},E(e.lockedFilters.year?"":""),9,Yc)]),Ie(r("select",{id:"year-filter","onUpdate:modelValue":S[5]||(S[5]=M=>l.value=M),onChange:v},[S[14]||(S[14]=r("option",{value:""},"All Years",-1)),(k(!0),C(re,null,Te(e.filters.yearGroups,M=>(k(),C("option",{key:M,value:M}," Year "+E(M),9,Wc))),128))],544),[[kt,l.value]])],2),r("div",{class:ne(["filter-group",{locked:e.lockedFilters.status}])},[r("div",zc,[S[15]||(S[15]=r("label",{for:"status-filter"},"Status:",-1)),r("button",{onClick:S[6]||(S[6]=M=>m("status")),class:"lock-button",title:e.lockedFilters.status?"Unlock filter":"Lock filter"},E(e.lockedFilters.status?"":""),9,Jc)]),Ie(r("select",{id:"status-filter","onUpdate:modelValue":S[7]||(S[7]=M=>c.value=M),onChange:v},[...S[16]||(S[16]=[r("option",{value:""},"All Students",-1),r("option",{value:"completed"},"Completed",-1),r("option",{value:"not_completed"},"Not Completed",-1)])],544),[[kt,c.value]])],2),r("div",{class:ne(["filter-group",{locked:e.lockedFilters.search}])},[r("div",Xc,[S[17]||(S[17]=r("label",{for:"search-input"},"Search:",-1)),r("button",{onClick:S[8]||(S[8]=M=>m("search")),class:"lock-button",title:e.lockedFilters.search?"Unlock filter":"Lock filter"},E(e.lockedFilters.search?"":""),9,Qc)]),Ie(r("input",{id:"search-input",type:"text","onUpdate:modelValue":S[9]||(S[9]=M=>d.value=M),onInput:v,placeholder:"Search by name...",class:"search-input"},null,544),[[Dt,d.value]])],2),r("button",{onClick:g,class:"clear-button"},"Clear Filters")]))}},eu=ct(Zc,[["__scopeId","data-v-36a3b4fc"]]),tu={class:"smart-filters-section"},su={class:"header-left"},nu={class:"expand-icon"},ou={key:0,class:"filter-count-badge"},ru={class:"smart-filters-content"},au={key:0,class:"no-filters-message"},iu={key:1,class:"smart-filters-list"},lu=["onUpdate:modelValue"],cu=["onUpdate:modelValue"],uu=["onUpdate:modelValue"],du=["onClick"],fu={__name:"SmartFilters",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=P(!1),n=e,o=t,a=P([...n.modelValue]);let l=0;const c=()=>{s.value=!s.value},d=()=>{a.value.push({id:`filter-${Date.now()}-${l++}`,dimension:"vision",operator:"gte",value:5}),s.value=!0,v()},m=g=>{a.value.splice(g,1),v()},v=()=>{o("update:modelValue",a.value)};return(g,b)=>(k(),C("div",tu,[r("div",{class:"smart-filters-header",onClick:c},[r("div",su,[r("span",nu,E(s.value?"":""),1),b[0]||(b[0]=r("h3",null,"Smart Filters",-1)),a.value.length>0?(k(),C("span",ou,E(a.value.length),1)):K("",!0)]),r("button",{onClick:wt(d,["stop"]),class:ne(["add-filter-button",{compact:!s.value}])}," + ",2)]),Ie(r("div",ru,[a.value.length===0?(k(),C("div",au,[...b[1]||(b[1]=[r("p",null,'Click "+ Add Filter" to filter by VESPA scores (e.g., Vision  7)',-1)])])):(k(),C("div",iu,[(k(!0),C(re,null,Te(a.value,(S,M)=>(k(),C("div",{key:S.id,class:"smart-filter-row"},[Ie(r("select",{"onUpdate:modelValue":R=>S.dimension=R,onChange:v,class:"filter-select dimension-select"},[...b[2]||(b[2]=[Qe('<option value="vision" data-v-1f780447>Vision</option><option value="effort" data-v-1f780447>Effort</option><option value="systems" data-v-1f780447>Systems</option><option value="practice" data-v-1f780447>Practice</option><option value="attitude" data-v-1f780447>Attitude</option><option value="overall" data-v-1f780447>Overall</option>',6)])],40,lu),[[kt,S.dimension]]),Ie(r("select",{"onUpdate:modelValue":R=>S.operator=R,onChange:v,class:"filter-select operator-select"},[...b[3]||(b[3]=[Qe('<option value="gt" data-v-1f780447>Greater than</option><option value="gte" data-v-1f780447>Greater or equal to</option><option value="lt" data-v-1f780447>Less than</option><option value="lte" data-v-1f780447>Less than or equal to</option><option value="eq" data-v-1f780447>Equal to</option>',5)])],40,cu),[[kt,S.operator]]),Ie(r("input",{type:"number","onUpdate:modelValue":R=>S.value=R,onInput:v,min:"0",max:"10",step:"0.1",class:"filter-input value-input",placeholder:"0-10"},null,40,uu),[[Dt,S.value,void 0,{number:!0}]]),r("button",{onClick:R=>m(M),class:"remove-filter-button",title:"Remove filter"},"  ",8,du)]))),128))]))],512),[[Pa,s.value]])]))}},vu=ct(fu,[["__scopeId","data-v-1f780447"]]),ls=e=>{if(e==null)return"#f5f5f5";const t=parseFloat(e);return t>=9?"#86efac":t>=7?"#bbf7d0":t>=5?"#fed7aa":t>=3?"#fee2e2":"#ffb5bb"},pu={class:"modal-container"},hu={class:"modal-header"},mu={class:"modal-body"},gu={class:"text-content"},yu={__name:"TextViewModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"View Text"},text:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=t,n=()=>{s("close")};return(o,a)=>e.isOpen?(k(),C("div",{key:0,class:"modal-overlay",onClick:wt(n,["self"])},[r("div",pu,[r("div",hu,[r("h3",null,E(e.title),1),r("button",{class:"close-button",onClick:n},"")]),r("div",mu,[r("div",gu,E(e.text),1)])])])):K("",!0)}},bu=ct(yu,[["__scopeId","data-v-5ffca5e6"]]),_u={class:"modal-container"},wu={class:"modal-header"},ku={class:"modal-body"},Cu=["placeholder","disabled"],Su={class:"modal-footer"},xu={key:0,class:"error-text"},Eu={class:"button-group"},Au=["disabled"],Tu=["disabled"],$u={__name:"EditableTextModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"Edit Text"},text:{type:String,default:""},placeholder:{type:String,default:"Enter text here..."}},emits:["close","save"],setup(e,{emit:t}){const s=e,n=t,o=P(""),a=P(""),l=P(!1),c=P(null);et(()=>[s.isOpen,s.text],([g,b])=>{g&&(o.value=b||"",a.value=b||"",c.value=null)},{immediate:!0});const d=Z(()=>o.value.trim()!==a.value.trim()),m=async()=>{if(d.value){l.value=!0,c.value=null;try{await n("save",o.value),n("close")}catch(g){c.value=g.message||"Failed to save"}finally{l.value=!1}}},v=()=>{d.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")};return(g,b)=>e.isOpen?(k(),C("div",{key:0,class:"modal-overlay",onClick:wt(v,["self"])},[r("div",_u,[r("div",wu,[r("h3",null,E(e.title),1),r("button",{class:"close-button",onClick:v},"")]),r("div",ku,[Ie(r("textarea",{"onUpdate:modelValue":b[0]||(b[0]=S=>o.value=S),class:"edit-textarea",placeholder:e.placeholder,rows:"12",disabled:l.value},null,8,Cu),[[Dt,o.value]])]),r("div",Su,[c.value?(k(),C("span",xu,E(c.value),1)):K("",!0),r("div",Eu,[r("button",{onClick:v,class:"cancel-button",disabled:l.value}," Cancel ",8,Au),r("button",{onClick:m,class:"save-button",disabled:l.value||!d.value},E(l.value?"Saving...":"Save Changes"),9,Tu)])])])])):K("",!0)}},br=ct($u,[["__scopeId","data-v-e2fc5fac"]]),mt="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",at={async getStaffOverview(e,t=null){try{let s=`${mt}/api/vespa/staff-overview?email=${encodeURIComponent(e)}`;t!=null&&t!==""&&(s+=`&cycle=${t}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(s){throw console.error("[Staff API] Error fetching overview:",s),s}},async saveStudentGoals(e,t,s){try{console.log("[Staff API] Saving student goals:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});const n=await fetch(`${mt}/api/vespa/report/save-goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,cycle:t,goalText:s.goalText||"",goalSetDate:s.goalSetDate||null,goalDueDate:s.goalDueDate||null,knackRecordId:s.knackRecordId||null})});if(!n.ok){const a=await n.json();throw new Error(a.error||`HTTP error! status: ${n.status}`)}const o=await n.json();return console.log("[Staff API] Goals saved successfully:",o),o}catch(n){throw console.error("[Staff API] Error saving goals:",n),n}},async saveCoachingComments(e,t,s){try{console.log("[Staff API] Saving coaching comments:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});let n=null;if(typeof Knack<"u"&&Knack.getUserAttributes){const l=Knack.getUserAttributes();n=l==null?void 0:l.email}if(!n)throw new Error("Staff email not available");const o=await fetch(`${mt}/api/vespa/report/save-coaching`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,staffEmail:n,cycle:t,coachingText:s.coachingText||"",coachingDate:s.coachingDate||null,knackRecordId:s.knackRecordId||null})});if(!o.ok){const l=await o.json();throw new Error(l.error||`HTTP error! status: ${o.status}`)}const a=await o.json();return console.log("[Staff API] Coaching comments saved successfully:",a),a}catch(n){throw console.error("[Staff API] Error saving coaching comments:",n),n}},async getUcasApplication(e,t="current"){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching UCAS application:",s),s}},async getReferenceFull(e,t="current"){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/full?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching reference full:",s),s}},async saveTutorCompiled(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error saving tutor compiled narrative:",s),s}},async markTutorCompiledComplete(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/mark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error marking tutor compiled complete:",s),s}},async unmarkTutorCompiledComplete(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/unmark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error unmarking tutor compiled complete:",s),s}},async requestUcasStatementEdits(e,t){try{const s=`${mt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/request-edits`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error requesting UCAS statement edits:",s),s}},async getAcademicProfile(e,t="current",s={}){try{const n=new URLSearchParams,o=t==null?"":String(t).trim();o&&o.toLowerCase()!=="current"&&n.append("academic_year",o);const a=`${mt}/api/academic-profile/${encodeURIComponent(e)}${n.toString()?`?${n.toString()}`:""}`,l={};s!=null&&s.roleHint&&(l["X-User-Role"]=String(s.roleHint)),s!=null&&s.staffEmail&&(l["X-User-Email"]=String(s.staffEmail));const c=await fetch(a,{headers:l});if(!c.ok){const d=await c.json().catch(()=>null);throw new Error((d==null?void 0:d.error)||`HTTP error! status: ${c.status}`)}return await c.json()}catch(n){throw console.error("[Staff API] Error fetching academic profile:",n),n}}};async function Iu(e,t,s=null){try{const n=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`,o=new URLSearchParams;s&&o.append("academic_year",s);const a=await fetch(o.toString()?`${n}?${o.toString()}`:n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){if(a.status===404)return{success:!0,data:null};let l=`API error: ${a.status}`;try{const c=await a.json();c&&(c.error||c.message)&&(l=c.error||c.message)}catch{}throw new Error(l)}return await a.json()}catch(n){return console.error("[Academic Profile API] fetchUcasApplication error:",n),{success:!1,error:n.message||"Failed to fetch UCAS Application"}}}async function Ou(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t})});if(!d.ok){let m=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await d.json()}catch(a){return console.error("[Academic Profile API] saveUcasApplication error:",a),{success:!1,error:a.message||"Failed to save UCAS Application"}}}async function Mu(e,t,s,n=null){try{const o=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/comment`;let a=null;const l=t&&typeof t=="object"?t.__roleHint:null;l&&(a=String(l).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const m=(Knack.getUserRoles()||[]).some(v=>v&&v.name==="Student"||typeof v=="string"&&v.toLowerCase().includes("student"));a||(a=m?"student":"staff")}}catch{}const c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",...a?{"X-User-Role":a}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!c.ok){let d=`API error: ${c.status}`;try{const m=await c.json();m&&(m.error||m.message)&&(d=m.error||m.message)}catch{}throw new Error(d)}return await c.json()}catch(o){return console.error("[Academic Profile API] addUcasApplicationComment error:",o),{success:!1,error:o.message||"Failed to add comment"}}}async function Fu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/feedback`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!d.ok){let m=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await d.json()}catch(a){return console.error("[Academic Profile API] generateUcasFeedback error:",a),{success:!1,error:a.message||"Failed to generate feedback"}}}async function Pu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/virtual-tutor-comment`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!d.ok){let m=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(m=v.error||v.message)}catch{}throw new Error(m)}return await d.json()}catch(a){return console.error("[Academic Profile API] addVirtualTutorComment error:",a),{success:!1,error:a.message||"Failed to add comment"}}}async function Ru(e,t,s=null){try{const n=s?`?academic_year=${encodeURIComponent(s)}`:"",o=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/status${n}`,a=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}),l=await a.json().catch(()=>({}));if(!a.ok)throw new Error((l==null?void 0:l.error)||(l==null?void 0:l.message)||`API error: ${a.status}`);return l}catch(n){return console.error("[Academic Profile API] fetchReferenceStatus error:",n),{success:!1,error:n.message||"Failed to fetch reference status"}}}async function Uu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/invite`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"student",c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(a){return console.error("[Academic Profile API] createReferenceInvite error:",a),{success:!1,error:a.message||"Failed to invite teacher"}}}async function ju(e,t,s=null,n=null){try{const o=s?`?academic_year=${encodeURIComponent(s)}`:"",a=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/full${o}`,l=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"staff",c=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json","X-User-Role":l}}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(o){return console.error("[Academic Profile API] fetchReferenceFull error:",o),{success:!1,error:o.message||"Failed to fetch reference"}}}async function Nu(e,t,s,n=null,o=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/contribution`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"staff",c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(a){return console.error("[Academic Profile API] saveReferenceContribution error:",a),{success:!1,error:a.message||"Failed to save contribution"}}}async function Lu(e,t,s=null,n=null){try{const o=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/mark-complete`,a=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"student",l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":a},body:JSON.stringify({academicYear:s})}),c=await l.json().catch(()=>({}));if(!l.ok)throw new Error((c==null?void 0:c.error)||(c==null?void 0:c.message)||`API error: ${l.status}`);return c}catch(o){return console.error("[Academic Profile API] markUcasStatementComplete error:",o),{success:!1,error:o.message||"Failed to mark complete"}}}const qu={class:"ucas-modal"},Hu={class:"ucas-header"},Du={class:"ucas-header-left"},Vu={class:"ucas-course-row"},Bu=["disabled"],Ku={key:0,value:""},Gu=["value"],Yu=["href"],Wu={key:1,class:"ucas-course-meta"},zu=["title"],Ju={class:"ucas-meta-value"},Xu=["title"],Qu={class:"ucas-meta-value"},Zu={class:"ucas-header-right"},ed={key:0,class:"ucas-refbar"},td=["disabled"],sd={key:0,class:"ucas-refbar-count"},nd={key:1,class:"ucas-refbar"},od=["disabled"],rd=["disabled","title"],ad=["disabled"],id=["disabled","title"],ld=["disabled","title"],cd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ud={key:1,class:"ucas-spinner"},dd={class:"ucas-body"},fd={class:"ucas-top-grid"},vd={class:"ucas-card"},pd={key:0,class:"ucas-empty"},hd={key:1,class:"ucas-subjects-grid"},md=["title"],gd=["disabled","value","onInput"],yd={key:2,class:"ucas-tariff"},bd={class:"ucas-tariff-grid"},_d=["title"],wd={class:"ucas-tariff-value"},kd=["title"],Cd={class:"ucas-tariff-value"},Sd=["title"],xd={class:"ucas-tariff-value"},Ed={key:0,class:"ucas-tariff-note"},Ad={class:"ucas-card"},Td={class:"ucas-metrics"},$d={class:"ucas-metric-value"},Id={class:"ucas-metric-max"},Od={class:"ucas-progress-bar"},Md={class:"ucas-metric-status"},Fd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Pd={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Rd={class:"ucas-preview"},Ud={class:"ucas-preview-header"},jd={class:"ucas-preview-box"},Nd={class:"ucas-questions"},Ld={class:"ucas-q"},qd={class:"ucas-q-header"},Hd={class:"ucas-q-actions"},Dd=["title"],Vd=["disabled","value"],Bd={class:"ucas-q"},Kd={class:"ucas-q-header"},Gd={class:"ucas-q-actions"},Yd=["title"],Wd=["disabled","value"],zd={class:"ucas-q"},Jd={class:"ucas-q-header"},Xd={class:"ucas-q-actions"},Qd=["title"],Zd=["disabled","value"],ef={key:0,class:"ucas-comments"},tf={class:"ucas-comments-shell"},sf={class:"ucas-comments-header"},nf=["title"],of={class:"ucas-comments-count-num"},rf={key:0,class:"ucas-comments-compose"},af={class:"ucas-comments-compose-row"},lf={class:"ucas-comments-avatar ucas-comments-avatar--compose"},cf={class:"ucas-comments-compose-main"},uf=["disabled"],df={class:"ucas-comments-compose-footer"},ff={class:"ucas-comments-compose-actions"},vf=["disabled"],pf=["disabled"],hf={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mf={class:"ucas-comments-quick"},gf={class:"ucas-comments-quick-chips"},yf=["onClick","disabled"],bf={key:1,class:"ucas-comments-empty"},_f={key:2,class:"ucas-comments-list"},wf=["aria-label"],kf={class:"ucas-comments-divider-text"},Cf={class:"ucas-comments-item-main"},Sf={class:"ucas-comments-item-content"},xf={class:"ucas-comments-item-header"},Ef={class:"ucas-comments-item-author"},Af={class:"ucas-comments-author"},Tf={key:0,class:"ucas-comments-role"},$f={class:"ucas-comments-date"},If=["onClick"],Of={class:"ucas-footer"},Mf={class:"ucas-footer-left"},Ff={class:"ucas-footer-stats"},Pf={class:"ucas-footer-total"},Rf={class:"ucas-footer-max"},Uf={class:"ucas-footer-remaining"},jf={key:0,class:"ucas-footer-warning"},Nf={key:1,class:"ucas-footer-error"},Lf={key:2,class:"ucas-footer-error"},qf={class:"ucas-footer-right"},Hf={key:0,class:"ucas-toast"},Df={class:"ucas-feedback-modal",role:"dialog","aria-modal":"true","aria-label":"Feedback"},Vf={class:"ucas-feedback-header"},Bf={class:"ucas-feedback-body"},Kf={key:0,class:"ucas-feedback-loading"},Gf={key:1,class:"ucas-feedback-error"},Yf={key:2,class:"ucas-feedback-text"},Wf={class:"ucas-feedback-footer"},zf=["disabled"],Jf=["disabled","title"],Xf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded writing"},Qf={class:"ucas-expand-header"},Zf={class:"ucas-expand-title"},ev={class:"ucas-expand-meta"},tv={class:"ucas-expand-pill"},sv={class:"ucas-expand-pill"},nv={class:"ucas-expand-body"},ov={key:0,class:"ucas-preview-box ucas-preview-box--expanded"},rv=["disabled","value"],av={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded reference writing"},iv={class:"ucas-expand-header"},lv={class:"ucas-expand-title"},cv={class:"ucas-expand-meta"},uv={class:"ucas-expand-pill"},dv={class:"ucas-expand-body"},fv=["disabled","value"],vv={class:"ucas-feedback-modal ucas-ref-modal",role:"dialog","aria-modal":"true","aria-label":"Teacher reference"},pv={class:"ucas-ref-header"},hv={class:"ucas-ref-header-left"},mv={class:"ucas-ref-icon","aria-hidden":"true"},gv={width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},yv={key:0,d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},bv={key:1,cx:"9",cy:"7",r:"4"},_v={key:2,d:"M22 21v-2a4 4 0 0 0-3-3.87"},wv={key:3,d:"M16 3.13a4 4 0 0 1 0 7.75"},kv={key:4,d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},Cv={key:5,points:"14 2 14 8 20 8"},Sv={key:6,x1:"16",y1:"13",x2:"8",y2:"13"},xv={key:7,x1:"16",y1:"17",x2:"8",y2:"17"},Ev={key:8,x1:"10",y1:"9",x2:"8",y2:"9"},Av={class:"ucas-ref-title-group"},Tv={class:"ucas-ref-subtitle"},$v={key:0},Iv={key:1},Ov={class:"ucas-ref-statusbar"},Mv={class:"ucas-ref-statusbar-left"},Fv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Pv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Rv={key:0,class:"ucas-ref-status-count"},Uv={key:1,class:"ucas-ref-status-count"},jv=["disabled"],Nv={class:"ucas-ref-body"},Lv={key:0,class:"ucas-ref-student"},qv={class:"ucas-ref-steps"},Hv={class:"ucas-ref-step"},Dv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Vv={key:1},Bv={class:"ucas-ref-step"},Kv={class:"ucas-ref-step"},Gv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Yv={key:1},Wv={class:"ucas-ref-section"},zv={class:"ucas-ref-section-head"},Jv={class:"ucas-ref-section-pill"},Xv={key:0,class:"ucas-ref-empty"},Qv={key:1,class:"ucas-ref-invite-list"},Zv={class:"ucas-ref-invite-left"},ep={class:"ucas-ref-invite-meta"},tp={class:"ucas-ref-invite-name"},sp={class:"ucas-ref-invite-sub"},np={class:"ucas-ref-invite-actions"},op=["onClick","disabled"],rp=["onClick"],ap={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ip={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},lp={key:2,class:"ucas-ref-hidden-row"},cp={class:"hint"},up={class:"ucas-ref-section ucas-ref-section--form"},dp={class:"ucas-ref-form-grid"},fp=["value"],vp={class:"ucas-ref-form-actions"},pp=["disabled"],hp=["disabled"],mp={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},gp={key:0,class:"ucas-ref-linkcopy"},yp={class:"ucas-ref-linkcopy-row"},bp=["value"],_p={key:1,class:"ucas-ref-staff"},wp={class:"ucas-ref-staff-head"},kp={key:0,class:"ucas-ref-staff-meta"},Cp={key:0,class:"ucas-empty ucas-empty--small"},Sp={key:1,class:"ucas-empty ucas-empty--small"},xp={key:2,class:"ucas-ref-staff-body"},Ep={class:"ucas-ref-contrib"},Ap={class:"ucas-ref-contrib-head"},Tp={class:"ucas-ref-badge has-content"},$p={class:"ucas-ref-editor"},Ip={class:"ucas-ref-editor-select"},Op=["value"],Mp={class:"ucas-ref-editor-footer"},Fp={class:"ucas-ref-char"},Pp=["disabled"],Rp=["disabled"],Up={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},jp={key:0,class:"hint"},Np={key:0,class:"ucas-ref-existing"},Lp={class:"ucas-ref-existing-list"},qp={class:"ucas-ref-existing-meta"},Hp={class:"ucas-ref-existing-author"},Dp={class:"ucas-ref-existing-avatar"},Vp={class:"ucas-ref-existing-name"},Bp={class:"ucas-ref-existing-subject"},Kp={class:"ucas-ref-existing-text"},Gp={class:"ucas-ref-contrib ucas-ref-contrib--accordion"},Yp={class:"ucas-ref-accordion-right"},Wp={class:"ucas-ref-accordion-chevron"},zp={key:0,class:"ucas-ref-accordion-body"},Jp={class:"ucas-ref-editor"},Xp={class:"ucas-ref-editor-footer"},Qp={class:"ucas-ref-char"},Zp=["disabled"],eh=["disabled"],th={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},sh={key:0,class:"hint"},nh={class:"ucas-ref-section"},oh={class:"ucas-ref-section-body"},rh={class:"ucas-ref-section"},ah={class:"ucas-ref-section-head"},ih={class:"ucas-ref-section-pill"},lh={key:0,class:"ucas-empty ucas-empty--small"},ch={key:1,class:"ucas-ref-contrib-list"},uh={class:"ucas-ref-contrib-meta"},dh={key:0},fh={class:"ucas-ref-contrib-text"},vh={class:"ucas-ref-section"},ph={class:"ucas-ref-section-head"},hh={class:"ucas-ref-section-pill"},mh={key:0,class:"ucas-empty ucas-empty--small"},gh={key:1,class:"ucas-ref-invite-list"},yh={class:"ucas-ref-invite-left"},bh={class:"ucas-ref-invite-meta"},_h={class:"ucas-ref-invite-name"},wh={class:"ucas-ref-invite-sub"},kh={class:"ucas-ref-invite-actions"},Ch=["onClick","disabled"],Sh=["onClick"],xh={key:2,class:"ucas-ref-hidden-row"},Eh={class:"hint"},Ah={class:"ucas-ref-footer"},ze=4e3,gt=350,Js=450,Th={__name:"UcasApplicationModal",props:{studentEmail:{type:String,default:""},academicYear:{type:String,default:""},subjects:{type:Array,default:()=>[]},offers:{type:Array,default:()=>[]},topOffer:{type:Object,default:null},apiUrl:{type:String,default:""},canEdit:{type:Boolean,default:!1},commentsEnabled:{type:Boolean,default:!0},canAddComment:{type:Boolean,default:!1},staffEmail:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=P("");let a=null;function l(x){o.value=x,a&&clearTimeout(a),a=setTimeout(()=>o.value="",2200)}function c(x){return x==null?"":String(x)}function d(x){const i=c(x==null?void 0:x.universityName).trim().toLowerCase(),A=c(x==null?void 0:x.courseTitle).trim().toLowerCase(),y=c(x==null?void 0:x.courseLink).trim().toLowerCase();return`${i}|${A}|${y}`.replace(/\s+/g," ").trim()}const m=Z(()=>(Array.isArray(s.offers)?s.offers:[]).map(A=>({key:d(A),ranking:(A==null?void 0:A.ranking)??1,universityName:c(A==null?void 0:A.universityName).trim()||"University",courseTitle:c(A==null?void 0:A.courseTitle).trim(),courseLink:c(A==null?void 0:A.courseLink).trim(),offer:c(A==null?void 0:A.offer).trim(),ucasPoints:(A==null?void 0:A.ucasPoints)===null||(A==null?void 0:A.ucasPoints)===void 0||String(A==null?void 0:A.ucasPoints).trim()===""?null:Number(A==null?void 0:A.ucasPoints)})).filter(A=>A.key).sort((A,y)=>(Number(A.ranking)||999)-(Number(y.ranking)||999))),v=P(""),g=Z(()=>m.value.find(x=>x.key===v.value)||null),b=Ms({q1:"",q2:"",q3:""}),S=Ms({}),M=P([]),R=P(""),B=P(!1),L=P(!1),G=P(!1),z=P(!1),F=P(""),H=P(""),ee=P(new Set),pe=[" Add more specific examples",' Strengthen your "why this course"'," Trim repetition"," Show reflection, not just description"," Link skills to the course"];function ue(x){return ee.value.has(String(x||""))}function V(x){const i=String(x||""),A=new Set(ee.value);A.has(i)?A.delete(i):A.add(i),ee.value=A}function ae(x){const i=c(x);return i.length<=Js?i:i.slice(0,Js).trimEnd()+""}function ie(x){const i=c(x).trim();if(!i)return;const A=c(R.value),y=A?A.trimEnd()+`
`+i:i;R.value=y}function j(x){const i=c(x).trim();if(!i)return"ST";const y=(i.includes("@")?i.split("@")[0]:i).replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean),U=(y[0]||"").slice(0,1),J=(y[1]||y[0]||"").slice(1,2);return(U+J).toUpperCase()||"ST"}function le(x){const i=c(x).trim().toLowerCase();if(!i)return"ucas-comments-avatar--blue";let A=0;for(let U=0;U<i.length;U++)A=A*31+i.charCodeAt(U)>>>0;const y=A%4;return y===0?"ucas-comments-avatar--green":y===1?"ucas-comments-avatar--blue":y===2?"ucas-comments-avatar--purple":"ucas-comments-avatar--orange"}function _e(x){try{const i=new Date(x);if(Number.isNaN(i.getTime()))return null;const A=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),U=String(i.getDate()).padStart(2,"0");return`${A}-${y}-${U}`}catch{return null}}function qe(x){try{const i=new Date,A=i.getFullYear(),y=String(i.getMonth()+1).padStart(2,"0"),U=String(i.getDate()).padStart(2,"0"),J=`${A}-${y}-${U}`,ye=new Date(J+"T00:00:00"),ke=new Date(x+"T00:00:00"),he=Math.round((ye.getTime()-ke.getTime())/(1e3*60*60*24));return he===0?"Today":he===1?"Yesterday":ke.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return x}}const we=Z(()=>{const x=Array.isArray(M.value)?M.value:[],i=[];let A=null;for(const y of x){const U=_e(y==null?void 0:y.createdAt)||"unknown";(!A||A.key!==U)&&(A={key:U,label:U==="unknown"?"Earlier":qe(U),items:[]},i.push(A)),A.items.push(y)}return i}),te=P(!1),X=P("not_started"),Oe=P([]),Se=P(new Set),$e=P(""),Ae=P(""),He=P(!1),tt=P(""),Ut=Z(()=>{const x=c(s.studentEmail).trim().toLowerCase(),i=c(s.academicYear).trim().toLowerCase();return`ucas_ref_hidden_invites:${x||"unknown"}:${i||"unknown"}`});function ut(){try{const x=localStorage.getItem(Ut.value);if(!x){Se.value=new Set;return}const i=JSON.parse(x);Se.value=new Set(Array.isArray(i)?i.map(A=>String(A)):[])}catch{Se.value=new Set}}function st(){try{localStorage.setItem(Ut.value,JSON.stringify(Array.from(Se.value)))}catch{}}function dt(x){try{const i=String((x==null?void 0:x.id)||"");if(!i)return;const A=new Set(Se.value);A.add(i),Se.value=A,st(),l("Invite removed from list")}catch{}}function xt(){Se.value=new Set,st(),l("Restored hidden invites")}const Me=Z(()=>{const x=Array.isArray(Oe.value)?Oe.value:[],i=Se.value,A=x.filter(U=>U&&!i.has(String(U.id||""))),y=new Map;for(const U of A){const J=c((U==null?void 0:U.teacherEmail)||(U==null?void 0:U.email)).trim().toLowerCase(),ye=c(U==null?void 0:U.subjectKey).trim().toLowerCase(),ke=`${J}__${ye}`,he=y.get(ke);if(!he){y.set(ke,U);continue}const Nn=Date.parse((he==null?void 0:he.createdAt)||(he==null?void 0:he.expiresAt)||"")||0;(Date.parse((U==null?void 0:U.createdAt)||(U==null?void 0:U.expiresAt)||"")||0)>Nn&&y.set(ke,U)}return Array.from(y.values())}),Et=Z(()=>{const x=X.value;return x==="finalised"?"Finalised":x==="completed"?"Completed":x==="in_progress"?"In progress":"Not started"}),p=Z(()=>{const x=Array.isArray(Me.value)?Me.value:[],i=x.length,A=x.filter(y=>y&&y.status==="submitted").length;return{total:i,submitted:A}}),u=P(!1),f=P(!1),h=P(null),_=Z(()=>!s.canEdit&&!!c(s.staffEmail).trim()&&!!c(s.apiUrl).trim()&&!!c(s.studentEmail).trim()),w=P(""),T=P(""),I=P(""),O=P(!1),$=P(!1),D=P(!1),N=P(!1),q=P("staff3"),Y=P(null),se=Z(()=>q.value==="staff2"?"Section 2: Extenuating circumstances":"Section 3: Subject teacher contribution"),de=Z(()=>q.value==="staff2"?c(w.value):c(I.value)),ce=Z(()=>c(de.value).length);function Pe(x){_.value&&(q.value=x==="staff2"?"staff2":"staff3",N.value=!0,setTimeout(()=>{try{Y.value&&Y.value.focus&&Y.value.focus()}catch{}},0))}function Fe(){N.value=!1}function Ye(x,i){const A=c(s.staffEmail).trim().toLowerCase();if(!A)return null;const y=h.value;if(!y)return null;const U=x===2?y.section2||[]:y.section3||[],J=c(i||"").trim().toLowerCase();for(const ye of Array.isArray(U)?U:[]){if(!ye||c(ye.authorEmail).trim().toLowerCase()!==A)continue;const he=c(ye.subjectKey||"").trim().toLowerCase();if(x===3){if(he===J)return ye}else return ye}return null}async function Xe(x){if(!_.value)return;const i=Number(x);if(i!==2&&i!==3)return;const y=c(i===2?w.value:I.value).trim();if(y){i===2?O.value=!0:$.value=!0;try{const U={section:i,text:y,subjectKey:i===3&&c(T.value).trim()||null,authorName:null,staffEmail:c(s.staffEmail).trim()},J=await Nu(s.studentEmail,U,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(J!=null&&J.success))throw new Error((J==null?void 0:J.error)||"Save failed");l("Saved"),await ft()}catch(U){l((U==null?void 0:U.message)||"Save failed")}finally{i===2?O.value=!1:$.value=!1}}}async function ft(){var x,i,A,y,U;if(!(!s.apiUrl||!s.studentEmail)){te.value=!0;try{if(ut(),s.canEdit){const he=await Ru(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(he!=null&&he.success))throw new Error((he==null?void 0:he.error)||"Failed to load reference status");X.value=c(((x=he==null?void 0:he.data)==null?void 0:x.status)||"not_started"),Oe.value=Array.isArray((i=he==null?void 0:he.data)==null?void 0:i.invites)?he.data.invites:[];return}f.value=!0;const J=await ju(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(J!=null&&J.success))throw new Error((J==null?void 0:J.error)||"Failed to load reference");h.value=(J==null?void 0:J.data)||null,X.value=c(((A=J==null?void 0:J.data)==null?void 0:A.status)||"not_started"),Oe.value=Array.isArray((y=J==null?void 0:J.data)==null?void 0:y.invites)?J.data.invites:[];const ye=Ye(2,null);w.value=c((ye==null?void 0:ye.text)||""),!c(T.value).trim()&&Nt.value.length&&(T.value=c(((U=Nt.value[0])==null?void 0:U.label)||""));const ke=Ye(3,T.value);I.value=c((ke==null?void 0:ke.text)||"")}catch(J){l((J==null?void 0:J.message)||"Failed to load reference")}finally{te.value=!1,f.value=!1}}}et(()=>T.value,()=>{const x=Ye(3,T.value);I.value=c((x==null?void 0:x.text)||"")}),et(()=>u.value,async x=>{x&&await ft()});async function ms(){var i,A;if(!s.canEdit||!s.apiUrl||!s.studentEmail)return;const x=$e.value.trim();if(x){He.value=!0,tt.value="";try{const y=await Uu(s.studentEmail,{teacherEmail:x,subjectKey:Ae.value||null,allowedSections:[3]},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(y!=null&&y.success))throw new Error((y==null?void 0:y.error)||"Invite failed");const U=c(((i=y==null?void 0:y.data)==null?void 0:i.inboxUrl)||((A=y==null?void 0:y.data)==null?void 0:A.inviteUrl)||"");U.includes("/reference-contribution")&&U.includes("token=")?tt.value=U.replace("/reference-contribution","/reference-inbox"):tt.value=U,l("Invite created"),$e.value="",Ae.value="",await ft()}catch(y){l((y==null?void 0:y.message)||"Invite failed")}finally{He.value=!1}}}async function je(x){s.canEdit&&($e.value=c((x==null?void 0:x.teacherEmail)||(x==null?void 0:x.email)||"").trim(),Ae.value=c((x==null?void 0:x.subjectKey)||"").trim(),$e.value&&await ms())}function nt(x){try{navigator.clipboard.writeText(String(x||"")),l("Copied")}catch{l("Copy failed")}}const ns=P(!1),ot=P("q1"),Ds=P(null),Ra=Z(()=>ot.value==="preview"?"Preview: Combined statement":ot.value==="q2"?"Q2: How studies prepared you":ot.value==="q3"?"Q3: Outside education":"Q1: Why this course?"),In=Z(()=>ot.value==="preview"?gs.value||"":b[ot.value]||""),Ua=Z(()=>In.value.length),Ao=P(0);function jt(){if(s.canEdit)return;const x=Date.now();x-Ao.value<1500||(Ao.value=x,l("Only students can edit their UCAS statement."))}function Vs(x){ot.value=x,ns.value=!0,setTimeout(()=>{try{ot.value!=="preview"&&s.canEdit&&Ds.value&&Ds.value.focus&&Ds.value.focus()}catch{}},0)}function On(){ns.value=!1}const Nt=Z(()=>(Array.isArray(s.subjects)?s.subjects:[]).slice(0,5).map((i,A)=>{const y=c((i==null?void 0:i.id)||(i==null?void 0:i.originalRecordId)||(i==null?void 0:i.position)||(i==null?void 0:i.subjectName)||`idx_${A}`),U=c(i==null?void 0:i.subjectName).trim()||"Subject",J=U.replace(/^\s*(?:[a-z]{1,2}\d?\s*-\s*)+/i,"").trim()||U;return{key:y,label:J}})),To=Z(()=>{const x=v.value||"";return x?S[x]||{}:{}});function ja(x,i){if(!s.canEdit)return;const A=v.value||"";A&&(S[A]||(S[A]={}),S[A][x]=c(i).slice(0,24))}const xe=Z(()=>b.q1.length+b.q2.length+b.q3.length),Mn=Z(()=>Math.max(0,ze-xe.value)),os=Z(()=>Math.max(0,xe.value-ze)),gs=Z(()=>{const x=c(b.q1).trim(),i=c(b.q2).trim(),A=c(b.q3).trim();return[x,i,A].filter(Boolean).join(`

`)});function Bs(x,i){s.canEdit&&(b[x]=c(i))}function Na(){try{if(!gs.value)return;navigator.clipboard.writeText(gs.value),l("Copied to clipboard")}catch{l("Copy failed (browser blocked)")}}function La(x){try{const i=new Date(x);return Number.isNaN(i.getTime())?"":i.toLocaleString()}catch{return""}}const Fn=Z(()=>`vespa:ucas_application:v1:${(s.studentEmail||"").toLowerCase()}:${s.academicYear||"current"}`);function qa(){try{const x=localStorage.getItem(Fn.value);if(!x)return;const i=JSON.parse(x);if(i!=null&&i.answers&&(b.q1=c(i.answers.q1),b.q2=c(i.answers.q2),b.q3=c(i.answers.q3)),i!=null&&i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,y]of Object.entries(i.requirementsByCourse))S[A]=y&&typeof y=="object"?y:{};i!=null&&i.selectedCourseKey&&(v.value=c(i.selectedCourseKey))}catch{}}function Ha(){try{localStorage.setItem(Fn.value,JSON.stringify({updatedAt:new Date().toISOString(),selectedCourseKey:v.value,answers:{...b},requirementsByCourse:{...S}}))}catch{}}let Pn=null;et(()=>[b.q1,b.q2,b.q3,v.value,JSON.stringify(S),Fn.value],()=>{Pn&&clearTimeout(Pn),Pn=setTimeout(()=>Ha(),450)});const rs=P(!1),as=P(""),Rn=P(!1);async function Da(){if(!s.apiUrl||!s.studentEmail)return;const x=await Iu(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(x!=null&&x.success))return;const i=x.data||{};if(i.answers&&(b.q1=c(i.answers.q1),b.q2=c(i.answers.q2),b.q3=c(i.answers.q3)),i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,y]of Object.entries(i.requirementsByCourse))S[A]=y&&typeof y=="object"?y:{};M.value=Array.isArray(i.staffComments)?i.staffComments:[],i.selectedCourseKey&&(v.value=c(i.selectedCourseKey)),as.value=c(i.statementCompletedAt||"")}async function Va(){var x;if(!(!s.canEdit||!s.apiUrl||!s.studentEmail)&&!as.value){if(xe.value>ze){l(`Over the ${ze} character limit  please shorten before marking complete`);return}if(xe.value<gt){l(`Need at least ${gt} characters before marking complete`);return}Rn.value=!0;try{const i=await Lu(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to mark statement complete");as.value=c(((x=i==null?void 0:i.data)==null?void 0:x.statementCompletedAt)||new Date().toISOString()),l("Statement marked complete (staff notified)")}catch(i){l((i==null?void 0:i.message)||"Failed to mark statement complete")}finally{Rn.value=!1}}}async function Ba(){if(!s.canEdit){l("Read-only for staff  students can save");return}if(!(!s.apiUrl||!s.studentEmail)){rs.value=!0;try{const x={selectedCourseKey:v.value||null,answers:{q1:b.q1,q2:b.q2,q3:b.q3},requirementsByCourse:{...S}},i=await Ou(s.studentEmail,x,s.apiUrl,s.academicYear||null,{roleHint:s.canEdit?"student":"staff"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Save failed");l("Saved")}catch(x){l((x==null?void 0:x.message)||"Save failed")}finally{rs.value=!1}}}async function $o(x=!1){if(!s.canEdit){l("Available for students");return}L.value=!0,!(!x&&F.value)&&await Ka()}async function Ka(){var x;if(!(!s.apiUrl||!s.studentEmail)){G.value=!0,H.value="",F.value="";try{const i={answers:{q1:b.q1,q2:b.q2,q3:b.q3},course:g.value?{...g.value}:null,totals:{totalChars:xe.value,remainingChars:Mn.value}},A=await Fu(s.studentEmail,i,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Failed to generate feedback");const y=c(((x=A==null?void 0:A.data)==null?void 0:x.feedback)||(A==null?void 0:A.data)||"");F.value=y.trim(),F.value||(H.value="No feedback returned.")}catch(i){H.value=(i==null?void 0:i.message)||"Failed to generate feedback"}finally{G.value=!1}}}async function Ga(){var x;if(!(!F.value||!s.apiUrl||!s.studentEmail)){z.value=!0;try{const i=await Pu(s.studentEmail,{comment:F.value},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to add comment");M.value=Array.isArray((x=i.data)==null?void 0:x.staffComments)?i.data.staffComments:M.value,l("Added to Tutor comments"),L.value=!1}catch(i){l((i==null?void 0:i.message)||"Failed to add comment")}finally{z.value=!1}}}const Ya={"A-Level":{grades:{"A*":56,A:48,B:40,C:32,D:24,E:16}},"AS-Level":{grades:{A:20,B:16,C:12,D:10,E:6}},"BTEC Extended Certificate (1 A-Level)":{grades:{"D*":56,D:48,M:32,P:16}},"EPQ (Extended Project)":{grades:{"A*":28,A:24,B:20,C:16,D:12,E:8}}};function Wa(x){const i=c(x).trim();if(!i)return"";const A=i.toUpperCase();return A==="DISTINCTION*"||A==="DISTINCTION *"?"D*":A==="DISTINCTION"?"D":A==="MERIT"?"M":A==="PASS"?"P":A.replace(/\s+/g,"")}function za(x){const i=c(x==null?void 0:x.examType).toLowerCase();return i.includes("epq")||i.includes("extended project")?"EPQ (Extended Project)":i.includes("as")&&i.includes("level")?"AS-Level":i.includes("a level")||i.includes("a-level")?"A-Level":i.includes("btec")?"BTEC Extended Certificate (1 A-Level)":"A-Level"}function Un(x,i){var ye;const A=Wa(i);if(!A)return{points:0,unknown:0};const y=za(x),J=(((ye=Ya[y])==null?void 0:ye.grades)||{})[A];return typeof J=="number"?{points:J,unknown:0}:{points:0,unknown:1}}const We=Z(()=>{var J;const x=Array.isArray(s.subjects)?s.subjects.slice(0,5):[];let i=0,A=0,y=0,U=0;for(let ye=0;ye<x.length;ye++){const ke=x[ye],he=(J=Nt.value[ye])==null?void 0:J.key,Nn=he&&To.value[he]||"",Ln=Un(ke,ke==null?void 0:ke.currentGrade),Oo=Un(ke,ke==null?void 0:ke.targetGrade),Mo=Un(ke,Nn);i+=Ln.points,A+=Oo.points,y+=Mo.points,U+=Ln.unknown+Oo.unknown+Mo.unknown}return{current:i,target:A,required:y,unknownCount:U}});function Io(x,i){const A=Number(x)||0,y=Number(i)||0;return!y||!A?"":A>=y?"ucas-tariff-box--good":A>=Math.ceil(y*.9)?"ucas-tariff-box--warn":"ucas-tariff-box--bad"}function jn(x,i,A,y){const U=Number(A)||0,J=Number(y)||0,ye=[`${x} UCAS points`,i,`Total: ${U}`];if(x!=="Required"&&J){ye.push(`Required: ${J}`);const ke=U-J;ye.push(ke>=0?`Above by: ${ke}`:`Below by: ${Math.abs(ke)}`)}return ye.join(`
`)}async function Ja(){var i;if(!s.canAddComment)return;const x=R.value.trim();if(x){B.value=!0;try{const A=await Mu(s.studentEmail,{comment:x,staffEmail:s.staffEmail||null,__roleHint:s.canAddComment?"staff":"student"},s.apiUrl,s.academicYear||null);if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Comment failed");M.value=Array.isArray((i=A.data)==null?void 0:i.staffComments)?A.data.staffComments:M.value,R.value="",l("Comment posted")}catch(A){l((A==null?void 0:A.message)||"Comment failed")}finally{B.value=!1}}}return En(async()=>{const x=s.topOffer||(s.offers&&s.offers.length?s.offers[0]:null);x&&(v.value=d(x)),qa(),await Da(),s.canEdit&&await ft(),!v.value&&x&&(v.value=d(x))}),(x,i)=>{var A;return k(),C("div",{class:"ucas-overlay",role:"dialog","aria-modal":"true","aria-label":"UCAS Application",onClick:i[33]||(i[33]=wt(y=>n("close"),["self"]))},[r("div",qu,[r("button",{class:"ucas-btn-close ucas-btn-close--corner",type:"button",onClick:i[0]||(i[0]=y=>n("close")),"aria-label":"Close UCAS application"},[...i[34]||(i[34]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])]),r("header",Hu,[r("div",Du,[i[39]||(i[39]=r("div",{class:"ucas-title"},"UCAS Application",-1)),r("div",Vu,[i[38]||(i[38]=r("label",{class:"ucas-course-label",for:"course-select"},"Course",-1)),Ie(r("select",{id:"course-select","onUpdate:modelValue":i[1]||(i[1]=y=>v.value=y),class:"ucas-select",disabled:m.value.length===0},[m.value.length===0?(k(),C("option",Ku,"No offers yet")):K("",!0),(k(!0),C(re,null,Te(m.value,y=>(k(),C("option",{key:y.key,value:y.key}," #"+E(y.ranking)+" "+E(y.universityName)+"  "+E(y.courseTitle||"Course"),9,Gu))),128))],8,Bu),[[kt,v.value]]),(A=g.value)!=null&&A.courseLink?(k(),C("a",{key:0,class:"ucas-btn ucas-btn-outline",href:g.value.courseLink,target:"_blank",rel:"noopener noreferrer",title:"Open course link in a new tab"},[...i[35]||(i[35]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),r("polyline",{points:"15 3 21 3 21 9"}),r("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),Q(" Course link ",-1)])],8,Yu)):K("",!0),g.value?(k(),C("div",Wu,[g.value.offer?(k(),C("div",{key:0,class:"ucas-meta-pill",title:`Course offer requirement (grade): ${g.value.offer}`},[i[36]||(i[36]=r("span",{class:"ucas-meta-label"},"Required grade",-1)),r("span",Ju,E(g.value.offer),1)],8,zu)):K("",!0),g.value.ucasPoints!==null&&g.value.ucasPoints!==void 0&&g.value.ucasPoints!==""?(k(),C("div",{key:1,class:"ucas-meta-pill",title:`Course offer requirement (UCAS points): ${g.value.ucasPoints}`},[i[37]||(i[37]=r("span",{class:"ucas-meta-label"},"Required UCAS",-1)),r("span",Qu,E(g.value.ucasPoints),1)],8,Xu)):K("",!0)])):K("",!0)])]),r("div",Zu,[e.canEdit?(k(),C("div",ed,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[2]||(i[2]=y=>u.value=!0),disabled:te.value||!e.studentEmail||!e.apiUrl,title:"Invite a teacher and track reference progress"},[...i[40]||(i[40]=[Qe('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z" data-v-9e3c962d></path><path d="M4 21a8 8 0 0 1 16 0" data-v-9e3c962d></path><path d="M19 8h2" data-v-9e3c962d></path><path d="M20 7v2" data-v-9e3c962d></path></svg> Teacher reference ',2)])],8,td),r("span",{class:ne(["ucas-refbar-pill",`ucas-refbar--${X.value}`])},[Q(E(Et.value)+" ",1),p.value.total?(k(),C("span",sd," ("+E(p.value.submitted)+"/"+E(p.value.total)+") ",1)):K("",!0)],2)])):(k(),C("div",nd,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[3]||(i[3]=y=>u.value=!0),disabled:te.value||!e.studentEmail||!e.apiUrl,title:"View teacher reference"},[...i[41]||(i[41]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z"}),r("path",{d:"M4 21a8 8 0 0 1 16 0"})],-1),Q(" Teacher reference ",-1)])],8,od),r("span",{class:ne(["ucas-refbar-pill",`ucas-refbar--${X.value}`])},E(Et.value),3)])),i[46]||(i[46]=r("a",{class:"ucas-btn ucas-btn-outline",href:"https://www.ucas.com/",target:"_blank",rel:"noopener noreferrer",title:"Open UCAS in a new tab"},[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"})]),Q(" UCAS ")],-1)),r("button",{class:"ucas-btn ucas-btn-feedback",type:"button",onClick:$o,disabled:!e.canEdit||G.value||!e.studentEmail||!e.apiUrl,title:e.canEdit?"Get feedback to improve your statement":"Available for students"},[...i[42]||(i[42]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"}),r("path",{d:"M8 11h8"}),r("path",{d:"M8 15h5"})],-1),Q(" Get Feedback ",-1)])],8,rd),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:Na,disabled:!gs.value},[...i[43]||(i[43]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),r("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1),Q(" Copy ",-1)])],8,ad),e.canEdit?(k(),C("button",{key:2,class:"ucas-btn ucas-btn-outline",type:"button",onClick:Va,disabled:Rn.value||!!as.value||xe.value>ze||xe.value<gt||!e.studentEmail,title:as.value?"Already marked complete":"Mark your personal statement complete and notify staff"},[i[44]||(i[44]=r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M20 6 9 17l-5-5"})],-1)),Q(" "+E(as.value?"Statement complete":"Mark statement complete"),1)],8,id)):K("",!0),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ba,disabled:!e.canEdit||rs.value||!e.studentEmail,title:e.canEdit?"Save UCAS application":"Read-only for staff  students can save"},[rs.value?K("",!0):(k(),C("svg",cd,[...i[45]||(i[45]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),rs.value?(k(),C("span",ud)):K("",!0),Q(" "+E(rs.value?"Saving":"Save"),1)],8,ld)])]),r("main",dd,[r("section",fd,[r("div",vd,[i[54]||(i[54]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Subjects + offer requirements"),r("p",{class:"ucas-card-hint"},"Enter the grades required by the university for this course (max 5 subjects).")],-1)),Nt.value.length===0?(k(),C("div",pd,[...i[47]||(i[47]=[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[r("path",{d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),r("span",null,"No subjects found in the academic profile.",-1)])])):(k(),C("div",hd,[i[48]||(i[48]=r("div",{class:"ucas-subjects-head"},"Subject",-1)),i[49]||(i[49]=r("div",{class:"ucas-subjects-head"},"Offer grade",-1)),(k(!0),C(re,null,Te(Nt.value,y=>(k(),C(re,{key:y.key},[r("div",{class:"ucas-subject-name",title:y.label},E(y.label),9,md),r("div",null,[r("input",{class:"ucas-input",type:"text",disabled:!e.canEdit,value:To.value[y.key]||"",onClick:jt,onFocus:jt,onInput:U=>ja(y.key,U.target.value),placeholder:"e.g. AAA"},null,40,gd)])],64))),128))])),Nt.value.length?(k(),C("div",yd,[i[53]||(i[53]=r("div",{class:"ucas-preview-header"},[r("h3",{class:"ucas-preview-title"},"UCAS points (estimated)"),r("span",{class:"ucas-preview-hint"},"Based on the subjects shown (max 5)")],-1)),r("div",bd,[r("div",{class:ne(["ucas-tariff-box",Io(We.value.current,We.value.required)]),title:jn("Current","Calculated from Current grades shown in your Academic Profile.",We.value.current,We.value.required)},[i[50]||(i[50]=r("div",{class:"ucas-tariff-label"},"Current",-1)),r("div",wd,E(We.value.current.toLocaleString()),1)],10,_d),r("div",{class:ne(["ucas-tariff-box",Io(We.value.target,We.value.required)]),title:jn("Target","Calculated from Target grades shown in your Academic Profile.",We.value.target,We.value.required)},[i[51]||(i[51]=r("div",{class:"ucas-tariff-label"},"Target",-1)),r("div",Cd,E(We.value.target.toLocaleString()),1)],10,kd),r("div",{class:"ucas-tariff-box ucas-tariff-box--required",title:jn("Required","Calculated from the Offer grade inputs on this page (per subject).",We.value.required,We.value.required)},[i[52]||(i[52]=r("div",{class:"ucas-tariff-label"},"Required",-1)),r("div",xd,E(We.value.required.toLocaleString()),1)],8,Sd)]),We.value.unknownCount>0?(k(),C("div",Ed," Some grades couldnt be converted to points (format/qualification not recognised). ")):K("",!0)])):K("",!0)]),r("div",Ad,[i[63]||(i[63]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Character budget")],-1)),r("div",Td,[r("div",{class:ne(["ucas-metric",{"ucas-metric--danger":xe.value>=ze}])},[i[55]||(i[55]=r("div",{class:"ucas-metric-label"},"Total characters",-1)),r("div",$d,[Q(E(xe.value.toLocaleString())+" ",1),r("span",Id,"/ "+E(ze.toLocaleString()),1)]),r("div",Od,[r("div",{class:ne(["ucas-progress-fill",{"ucas-progress--warning":xe.value>ze*.85,"ucas-progress--danger":xe.value>=ze}]),style:bt({width:Math.min(100,xe.value/ze*100)+"%"})},null,6)]),r("div",{class:ne(["ucas-metric-sub",{"ucas-metric-sub--danger":os.value>0}])},[os.value>0?(k(),C(re,{key:0},[Q(E(os.value.toLocaleString())+" over limit",1)],64)):(k(),C(re,{key:1},[Q(E(Mn.value.toLocaleString())+" remaining",1)],64))],2)],2),r("div",{class:ne(["ucas-metric",{"ucas-metric--success":xe.value>=gt}])},[i[59]||(i[59]=r("div",{class:"ucas-metric-label"},"Minimum required",-1)),r("div",{class:"ucas-metric-value"},[Q(E(gt)+" "),i[56]||(i[56]=r("span",{class:"ucas-metric-max"},"characters",-1))]),r("div",Md,[xe.value>=gt?(k(),C("svg",Fd,[...i[57]||(i[57]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(k(),C("svg",Pd,[...i[58]||(i[58]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),r("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),r("span",null,E(xe.value>=gt?"Minimum met":`Need ${gt-xe.value} more`),1)])],2)]),r("div",Rd,[r("div",Ud,[i[61]||(i[61]=r("h3",{class:"ucas-preview-title"},"Preview",-1)),i[62]||(i[62]=r("span",{class:"ucas-preview-hint"},"Combined statement as it will appear",-1)),r("button",{class:"ucas-q-expand",type:"button",onClick:i[4]||(i[4]=y=>Vs("preview")),title:"Expand preview to read comfortably"},[...i[60]||(i[60]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])])]),r("div",jd,E(gs.value||"Your combined statement will appear here as you type"),1)])])]),r("section",Nd,[r("div",Ld,[r("div",qd,[i[65]||(i[65]=r("label",{class:"ucas-q-label",for:"q1"},[r("span",{class:"ucas-q-number"},"1"),r("span",{class:"ucas-q-title"},"Why do you want to study this course or subject?")],-1)),r("div",Hd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[5]||(i[5]=y=>Vs("q1")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[64]||(i[64]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Dd),r("span",{class:ne(["ucas-q-count",{"ucas-q-count--active":b.q1.length>0}])},E(b.q1.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q1",class:"ucas-textarea",disabled:!e.canEdit,value:b.q1,onClick:jt,onFocus:jt,onInput:i[6]||(i[6]=y=>Bs("q1",y.target.value)),placeholder:"Be specific. What sparked your interest, and why this course?"},null,40,Vd)]),r("div",Bd,[r("div",Kd,[i[67]||(i[67]=r("label",{class:"ucas-q-label",for:"q2"},[r("span",{class:"ucas-q-number"},"2"),r("span",{class:"ucas-q-title"},"How have your qualifications and studies prepared you?")],-1)),r("div",Gd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[7]||(i[7]=y=>Vs("q2")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[66]||(i[66]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Yd),r("span",{class:ne(["ucas-q-count",{"ucas-q-count--active":b.q2.length>0}])},E(b.q2.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q2",class:"ucas-textarea",disabled:!e.canEdit,value:b.q2,onClick:jt,onFocus:jt,onInput:i[8]||(i[8]=y=>Bs("q2",y.target.value)),placeholder:"Use evidence: topics, projects, what you learned, and how it links."},null,40,Wd)]),r("div",zd,[r("div",Jd,[i[69]||(i[69]=r("label",{class:"ucas-q-label",for:"q3"},[r("span",{class:"ucas-q-number"},"3"),r("span",{class:"ucas-q-title"},"What have you done outside education to prepare, and why is it useful?")],-1)),r("div",Xd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[9]||(i[9]=y=>Vs("q3")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[68]||(i[68]=[Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Qd),r("span",{class:ne(["ucas-q-count",{"ucas-q-count--active":b.q3.length>0}])},E(b.q3.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q3",class:"ucas-textarea",disabled:!e.canEdit,value:b.q3,onClick:jt,onFocus:jt,onInput:i[10]||(i[10]=y=>Bs("q3",y.target.value)),placeholder:"Super-curricular, work experience, reading, volunteering, clubs what did it develop?"},null,40,Zd)])]),e.commentsEnabled?(k(),C("section",ef,[r("div",tf,[r("div",sf,[i[71]||(i[71]=Qe('<div class="ucas-comments-header-left" data-v-9e3c962d><div class="ucas-comments-icon" aria-hidden="true" data-v-9e3c962d><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-title-group" data-v-9e3c962d><h2 class="ucas-comments-title" data-v-9e3c962d>Tutor feedback</h2><p class="ucas-comments-subtitle" data-v-9e3c962d>Comments from staff to help improve your statement</p></div></div>',1)),r("div",{class:"ucas-comments-count",title:`${(M.value||[]).length} comment(s)`},[r("span",of,E((M.value||[]).length),1),i[70]||(i[70]=r("span",null,"Comments",-1))],8,nf)]),e.canAddComment?(k(),C("div",rf,[r("div",af,[r("div",lf,E(j(e.staffEmail||"Staff")),1),r("div",cf,[Ie(r("textarea",{"onUpdate:modelValue":i[11]||(i[11]=y=>R.value=y),class:"ucas-comments-textarea",placeholder:"Write feedback for this student's personal statement",disabled:B.value},null,8,uf),[[Dt,R.value]]),r("div",df,[i[73]||(i[73]=Qe('<div class="ucas-comments-compose-hint" data-v-9e3c962d><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><circle cx="12" cy="12" r="10" data-v-9e3c962d></circle><path d="M12 16v-4" data-v-9e3c962d></path><path d="M12 8h.01" data-v-9e3c962d></path></svg><span data-v-9e3c962d>Visible to the student immediately</span></div>',1)),r("div",ff,[r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:i[12]||(i[12]=y=>R.value=""),disabled:B.value||!R.value}," Cancel ",8,vf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ja,disabled:B.value||!R.value.trim()},[B.value?K("",!0):(k(),C("svg",hf,[...i[72]||(i[72]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),Q(" "+E(B.value?"Posting":"Post feedback"),1)],8,pf)])])])]),r("div",mf,[i[74]||(i[74]=r("div",{class:"ucas-comments-quick-label"},"Quick feedback",-1)),r("div",gf,[(k(),C(re,null,Te(pe,y=>r("button",{key:y,class:"ucas-comments-chip",type:"button",onClick:U=>ie(y),disabled:B.value},E(y),9,yf)),64))])])])):K("",!0),we.value.length===0?(k(),C("div",bf,[...i[75]||(i[75]=[Qe('<div class="ucas-comments-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-empty-title" data-v-9e3c962d>No feedback yet</div><div class="ucas-comments-empty-text" data-v-9e3c962d>Staff comments will appear here to help improve your personal statement.</div>',3)])])):(k(),C("div",_f,[(k(!0),C(re,null,Te(we.value,y=>(k(),C(re,{key:y.key},[r("div",{class:"ucas-comments-divider","aria-label":y.label},[i[76]||(i[76]=r("div",{class:"ucas-comments-divider-line"},null,-1)),r("span",kf,E(y.label),1),i[77]||(i[77]=r("div",{class:"ucas-comments-divider-line"},null,-1))],8,wf),(k(!0),C(re,null,Te(y.items,U=>(k(),C("div",{key:U.id,class:"ucas-comments-item"},[r("div",Cf,[r("div",{class:ne(["ucas-comments-avatar",le(U.staffEmail)])},E(j(U.staffEmail||"Staff")),3),r("div",Sf,[r("div",xf,[r("div",Ef,[r("span",Af,E(U.staffEmail||"Staff"),1),c(U.staffEmail).trim().toLowerCase()==="virtual tutor"?(k(),C("span",Tf," Virtual Tutor ")):K("",!0)]),r("span",$f,E(La(U.createdAt)),1)]),r("div",{class:ne(["ucas-comments-body",{"ucas-comments-body--collapsed":!ue(U.id)&&c(U.comment).length>Js}])},[ue(U.id)?(k(),C(re,{key:0},[Q(E(U.comment),1)],64)):(k(),C(re,{key:1},[Q(E(ae(U.comment)),1)],64))],2),c(U.comment).length>Js?(k(),C("button",{key:0,class:"ucas-comments-more",type:"button",onClick:J=>V(U.id)},E(ue(U.id)?"Show less":"Show more"),9,If)):K("",!0)])])]))),128))],64))),128))]))])])):K("",!0)]),r("footer",Of,[r("div",Mf,[r("div",Ff,[r("span",Pf,E(xe.value.toLocaleString()),1),i[80]||(i[80]=r("span",{class:"ucas-footer-divider"},"/",-1)),r("span",Rf,E(ze.toLocaleString()),1),r("span",Uf,[i[78]||(i[78]=Q(" ( ",-1)),os.value>0?(k(),C(re,{key:0},[Q(E(os.value.toLocaleString())+" over",1)],64)):(k(),C(re,{key:1},[Q(E(Mn.value.toLocaleString())+" remaining",1)],64)),i[79]||(i[79]=Q(" ) ",-1))])]),xe.value>0&&xe.value<gt?(k(),C("div",jf,[i[81]||(i[81]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),r("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),r("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),Q(" Add "+E(gt-xe.value)+" more characters to reach the minimum. ",1)])):K("",!0),xe.value>ze?(k(),C("div",Nf,[i[82]||(i[82]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),Q(" Over the limit by "+E(os.value)+" characters. Shorten your statement before saving or marking complete. ",1)])):xe.value>=ze?(k(),C("div",Lf,[...i[83]||(i[83]=[r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),Q(" Maximum character limit reached. ",-1)])])):K("",!0)]),r("div",qf,[Ce(Zl,{name:"toast-fade"},{default:Jr(()=>[o.value?(k(),C("span",Hf,[i[84]||(i[84]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),Q(" "+E(o.value),1)])):K("",!0)]),_:1})])]),L.value?(k(),C("div",{key:0,class:"ucas-feedback-overlay",onClick:i[15]||(i[15]=wt(y=>L.value=!1,["self"]))},[r("div",Df,[r("div",Vf,[i[86]||(i[86]=r("div",{class:"ucas-feedback-title"},"Feedback",-1)),r("button",{class:"ucas-btn-close",type:"button",onClick:i[13]||(i[13]=y=>L.value=!1),"aria-label":"Close feedback"},[...i[85]||(i[85]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Bf,[G.value?(k(),C("div",Kf,[...i[87]||(i[87]=[r("span",{class:"ucas-spinner"},null,-1),Q(" Generating feedback ",-1)])])):H.value?(k(),C("div",Gf,E(H.value),1)):(k(),C("div",Yf,E(F.value||"No feedback available yet."),1))]),r("div",Wf,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[14]||(i[14]=y=>$o(!0)),disabled:G.value}," Regenerate ",8,zf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ga,disabled:G.value||z.value||!F.value,title:F.value?"Add this feedback into Tutor comments as Virtual Tutor":"Generate feedback first"},E(z.value?"Adding":"Add as a comment"),9,Jf)])])])):K("",!0),ns.value?(k(),C("div",{key:1,class:"ucas-expand-overlay",onClick:wt(On,["self"])},[r("div",Xf,[r("div",Qf,[r("div",Zf,E(Ra.value),1),r("div",ev,[r("span",tv,E(Ua.value.toLocaleString())+" in this section",1),r("span",sv,E(xe.value.toLocaleString())+"/"+E(ze.toLocaleString())+" total",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:On,"aria-label":"Close expanded writing"},[...i[88]||(i[88]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",nv,[ot.value==="preview"?(k(),C("div",ov,E(In.value||"Your combined statement will appear here as you type"),1)):(k(),C("textarea",{key:1,ref_key:"expandedTextareaEl",ref:Ds,class:"ucas-textarea ucas-textarea-expanded",disabled:!e.canEdit,value:In.value,onInput:i[16]||(i[16]=y=>Bs(ot.value,y.target.value))},null,40,rv))]),r("div",{class:"ucas-expand-footer"},[i[89]||(i[89]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to see the full page again. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:On},"Done")])])])):K("",!0),N.value?(k(),C("div",{key:2,class:"ucas-expand-overlay",onClick:wt(Fe,["self"])},[r("div",av,[r("div",iv,[r("div",lv,E(se.value),1),r("div",cv,[r("span",uv,E(ce.value.toLocaleString())+" characters",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:Fe,"aria-label":"Close expanded writing"},[...i[90]||(i[90]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",dv,[r("textarea",{ref_key:"refExpandedTextareaEl",ref:Y,class:"ucas-textarea ucas-textarea-expanded",disabled:!_.value,value:de.value,onInput:i[17]||(i[17]=y=>{q.value==="staff2"?w.value=y.target.value:I.value=y.target.value})},null,40,fv)]),r("div",{class:"ucas-expand-footer"},[i[91]||(i[91]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to return to the reference panel. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Fe},"Done")])])])):K("",!0),u.value?(k(),C("div",{key:3,class:"ucas-feedback-overlay",onClick:i[32]||(i[32]=wt(y=>u.value=!1,["self"]))},[r("div",vv,[r("div",pv,[r("div",hv,[r("div",mv,[(k(),C("svg",gv,[e.canEdit?(k(),C("path",yv)):K("",!0),e.canEdit?(k(),C("circle",bv)):K("",!0),e.canEdit?(k(),C("path",_v)):K("",!0),e.canEdit?(k(),C("path",wv)):(k(),C("path",kv)),e.canEdit?K("",!0):(k(),C("polyline",Cv)),e.canEdit?K("",!0):(k(),C("line",Sv)),e.canEdit?K("",!0):(k(),C("line",xv)),e.canEdit?K("",!0):(k(),C("line",Ev))]))]),r("div",Av,[i[92]||(i[92]=r("div",{class:"ucas-ref-title"},"Teacher reference",-1)),r("div",Tv,[e.canEdit?(k(),C("span",$v,"Invite teachers to contribute to your UCAS reference")):(k(),C("span",Iv,"View and add contributions (Sections 2 & 3)"))])])]),r("button",{class:"ucas-ref-close",type:"button",onClick:i[18]||(i[18]=y=>u.value=!1),"aria-label":"Close"},[...i[93]||(i[93]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Ov,[r("div",Mv,[i[96]||(i[96]=r("span",{class:"ucas-ref-status-label"},"Reference status",-1)),r("span",{class:ne(["ucas-ref-status-pill",`ucas-ref-status--${X.value}`])},[X.value==="completed"||X.value==="finalised"?(k(),C("svg",Fv,[...i[94]||(i[94]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(k(),C("svg",Pv,[...i[95]||(i[95]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),Q(" "+E(Et.value),1)],2),p.value.total?(k(),C("span",Rv,E(p.value.submitted)+"/"+E(p.value.total)+" submitted",1)):(k(),C("span",Uv,"No invites yet"))]),r("button",{class:"ucas-ref-refresh",type:"button",onClick:ft,disabled:te.value},[i[97]||(i[97]=Qe('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-9e3c962d></path><path d="M21 3v5h-5" data-v-9e3c962d></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-9e3c962d></path><path d="M3 21v-5h5" data-v-9e3c962d></path></svg>',1)),Q(" "+E(te.value?"Refreshing":"Refresh"),1)],8,jv)]),r("div",Nv,[e.canEdit?(k(),C("div",Lv,[r("div",qv,[r("div",Hv,[r("div",{class:ne(["ucas-ref-step-circle",{complete:p.value.total>0}])},[p.value.total>0?(k(),C("svg",Dv,[...i[98]||(i[98]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(k(),C("span",Vv,"1"))],2),i[99]||(i[99]=r("div",{class:"ucas-ref-step-label"},"Invite teachers",-1))]),r("div",Bv,[r("div",{class:ne(["ucas-ref-step-circle",{active:p.value.total>0&&p.value.submitted<p.value.total,complete:p.value.total>0&&p.value.submitted===p.value.total}])},[...i[100]||(i[100]=[r("span",null,"2",-1)])],2),r("div",{class:ne(["ucas-ref-step-label",{active:p.value.total>0&&p.value.submitted<p.value.total}])},"Awaiting responses",2)]),r("div",Kv,[r("div",{class:ne(["ucas-ref-step-circle",{complete:X.value==="completed"||X.value==="finalised"}])},[X.value==="completed"||X.value==="finalised"?(k(),C("svg",Gv,[...i[101]||(i[101]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(k(),C("span",Yv,"3"))],2),i[102]||(i[102]=r("div",{class:"ucas-ref-step-label"},"Reference complete",-1))])]),r("div",Wv,[r("div",zv,[i[103]||(i[103]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Track who has been asked to contribute")],-1)),r("div",Jv,E((Me.value||[]).length)+" invited",1)]),Me.value.length===0?(k(),C("div",Xv,[...i[104]||(i[104]=[Qe('<div class="ucas-ref-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div data-v-9e3c962d><div class="ucas-ref-empty-title" data-v-9e3c962d>No invitations yet</div><div class="ucas-ref-empty-text" data-v-9e3c962d>Invite a teacher below to get started.</div></div>',2)])])):(k(),C("div",Qv,[(k(!0),C(re,null,Te(Me.value,y=>(k(),C("div",{key:y.id,class:ne(["ucas-ref-invite",{submitted:y.status==="submitted"}])},[r("div",Zv,[r("div",{class:ne(["ucas-ref-invite-avatar",le(y.teacherEmail)])},E(j(y.teacherName||y.teacherEmail)),3),r("div",ep,[r("div",tp,E(y.teacherName||y.teacherEmail),1),r("div",sp,E(y.subjectKey||"No subject"),1)])]),r("div",np,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:U=>je(y),disabled:He.value}," Reinvite ",8,op),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:U=>dt(y)}," Remove ",8,rp)]),r("div",{class:ne(["ucas-ref-invite-status",y.status==="submitted"?"ok":"wait"])},[y.status==="submitted"?(k(),C("svg",ap,[...i[105]||(i[105]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(k(),C("svg",ip,[...i[106]||(i[106]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),Q(" "+E(y.status==="submitted"?"Submitted":"Pending"),1)],2)],2))),128))])),Se.value.size?(k(),C("div",lp,[r("span",cp,E(Se.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:xt},"Restore")])):K("",!0)]),r("div",up,[i[113]||(i[113]=Qe('<div class="ucas-ref-form-title" data-v-9e3c962d><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-9e3c962d></path><circle cx="9" cy="7" r="4" data-v-9e3c962d></circle><line x1="19" y1="8" x2="19" y2="14" data-v-9e3c962d></line><line x1="22" y1="11" x2="16" y2="11" data-v-9e3c962d></line></svg> Invite another teacher </div>',1)),r("div",dp,[r("div",null,[i[107]||(i[107]=r("div",{class:"ucas-ref-label"},"Teacher email",-1)),Ie(r("input",{class:"ucas-ref-input",type:"email","onUpdate:modelValue":i[19]||(i[19]=y=>$e.value=y),placeholder:"teacher@school.org"},null,512),[[Dt,$e.value]])]),r("div",null,[i[109]||(i[109]=r("div",{class:"ucas-ref-label"},"Subject (optional)",-1)),Ie(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[20]||(i[20]=y=>Ae.value=y)},[i[108]||(i[108]=r("option",{value:""},"No subject",-1)),(k(!0),C(re,null,Te(Nt.value,y=>(k(),C("option",{key:y.key,value:y.label},E(y.label),9,fp))),128))],512),[[kt,Ae.value]])])]),r("div",vp,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[21]||(i[21]=y=>{$e.value="",Ae.value=""}),disabled:He.value}," Clear ",8,pp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:ms,disabled:He.value||!$e.value.trim()},[He.value?K("",!0):(k(),C("svg",mp,[...i[110]||(i[110]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),Q(" "+E(He.value?"Sending":"Send invitation"),1)],8,hp)]),tt.value?(k(),C("div",gp,[i[111]||(i[111]=r("div",{class:"ucas-ref-linkcopy-label"},"Or copy invite link",-1)),r("div",yp,[r("input",{class:"ucas-ref-linkcopy-input",type:"text",value:tt.value,readonly:""},null,8,bp),r("button",{class:"ucas-ref-linkcopy-btn",type:"button",onClick:i[22]||(i[22]=y=>nt(tt.value))},"Copy")]),i[112]||(i[112]=r("div",{class:"ucas-ref-linkcopy-hint"},"Share this link directly with your teacher if email doesn't arrive.",-1))])):K("",!0)])])):(k(),C("div",_p,[r("div",wp,[i[114]||(i[114]=r("div",{class:"ucas-ref-staff-title"},"Reference (staff view)",-1)),h.value&&h.value.updatedAt?(k(),C("div",kp,"Updated "+E(new Date(h.value.updatedAt).toLocaleString()),1)):K("",!0)]),f.value?(k(),C("div",Cp,[...i[115]||(i[115]=[r("span",null,"Loading reference",-1)])])):h.value?(k(),C("div",xp,[r("div",Ep,[r("div",Ap,[i[117]||(i[117]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"3"),Q(" Subject teacher contributions ")],-1)),r("span",Tp,E((h.value.section3||[]).length)+" contributions",1)]),i[121]||(i[121]=r("div",{class:"ucas-ref-contrib-sub"},"Add specific evidence of academic potential and engagement relevant to the course.",-1)),r("div",$p,[r("div",Ip,[Ie(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[23]||(i[23]=y=>T.value=y)},[i[118]||(i[118]=r("option",{value:""},"No subject",-1)),(k(!0),C(re,null,Te(Nt.value,y=>(k(),C("option",{key:y.key,value:y.label},E(y.label),9,Op))),128))],512),[[kt,T.value]])]),Ie(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[24]||(i[24]=y=>I.value=y),placeholder:"Describe the student's ability, achievements, and potential in your subject"},null,512),[[Dt,I.value]]),r("div",Mp,[r("span",Fp,E((I.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[25]||(i[25]=y=>Pe("staff3")),disabled:!_.value}," Expand ",8,Pp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[26]||(i[26]=y=>Xe(3)),disabled:$.value||!_.value||!I.value.trim()},[$.value?K("",!0):(k(),C("svg",Up,[...i[119]||(i[119]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),Q(" "+E($.value?"Saving":"Save Section 3"),1)],8,Rp)]),_.value?K("",!0):(k(),C("div",jp,"Saving is unavailable because your staff email is missing in this embedded context."))]),(h.value.section3||[]).length?(k(),C("div",Np,[i[120]||(i[120]=r("div",{class:"ucas-ref-existing-title"},"Existing contributions",-1)),r("div",Lp,[(k(!0),C(re,null,Te(h.value.section3,y=>(k(),C("div",{key:y.id,class:"ucas-ref-existing-item"},[r("div",qp,[r("div",Hp,[r("div",Dp,E(j(y.authorName||y.authorEmail)),1),r("span",Vp,E(y.authorName||y.authorEmail),1)]),r("span",Bp,E(y.subjectKey||""),1)]),r("div",Kp,E(y.text),1)]))),128))])])):K("",!0)]),r("div",Gp,[r("button",{class:"ucas-ref-accordion-head",type:"button",onClick:i[27]||(i[27]=y=>D.value=!D.value)},[i[123]||(i[123]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"2"),Q(" Extenuating circumstances ")],-1)),r("div",Yp,[i[122]||(i[122]=r("span",{class:"ucas-ref-badge"},"Optional",-1)),r("span",Wp,E(D.value?"":""),1)])]),D.value?(k(),C("div",zp,[i[125]||(i[125]=r("div",{class:"ucas-ref-contrib-sub"},"Add factual, course-relevant context (with student permission).",-1)),r("div",Jp,[Ie(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[28]||(i[28]=y=>w.value=y),placeholder:"Add any relevant extenuating circumstances here"},null,512),[[Dt,w.value]]),r("div",Xp,[r("span",Qp,E((w.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[29]||(i[29]=y=>Pe("staff2")),disabled:!_.value}," Expand ",8,Zp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[30]||(i[30]=y=>Xe(2)),disabled:O.value||!_.value||!w.value.trim()},[O.value?K("",!0):(k(),C("svg",th,[...i[124]||(i[124]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),Q(" "+E(O.value?"Saving":"Save Section 2"),1)],8,eh)]),_.value?K("",!0):(k(),C("div",sh,"Saving is unavailable because your staff email is missing in this embedded context."))])])):K("",!0)]),r("div",nh,[i[126]||(i[126]=r("div",{class:"ucas-ref-section-head"},[r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 1  Centre statement"),r("div",{class:"ucas-ref-section-subtitle"},"Standard centre template (usually written once)")])],-1)),r("div",oh,E(c(h.value.section1Text)||"No centre template yet."),1)]),r("div",rh,[r("div",ah,[i[127]||(i[127]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 2  Extenuating circumstances"),r("div",{class:"ucas-ref-section-subtitle"},"Existing contributions")],-1)),r("div",ih,E((h.value.section2||[]).length),1)]),(h.value.section2||[]).length===0?(k(),C("div",lh,[...i[128]||(i[128]=[r("span",null,"No contributions yet.",-1)])])):(k(),C("div",ch,[(k(!0),C(re,null,Te(h.value.section2,y=>(k(),C("div",{key:y.id,class:"ucas-ref-contrib-item"},[r("div",uh,[Q(E(y.authorName||y.authorEmail)+" ",1),y.subjectKey?(k(),C("span",dh," "+E(y.subjectKey),1)):K("",!0)]),r("div",fh,E(y.text),1)]))),128))]))]),r("div",vh,[r("div",ph,[i[129]||(i[129]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Status of external invites")],-1)),r("div",hh,E((Me.value||[]).length),1)]),Me.value.length===0?(k(),C("div",mh,[...i[130]||(i[130]=[r("span",null,"No invitations yet.",-1)])])):(k(),C("div",gh,[(k(!0),C(re,null,Te(Me.value,y=>(k(),C("div",{key:y.id,class:ne(["ucas-ref-invite",{submitted:y.status==="submitted"}])},[r("div",yh,[r("div",{class:ne(["ucas-ref-invite-avatar",le(y.teacherEmail)])},E(j(y.teacherName||y.teacherEmail)),3),r("div",bh,[r("div",_h,E(y.teacherName||y.teacherEmail),1),r("div",wh,E(y.subjectKey||"No subject"),1)])]),r("div",kh,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:U=>je(y),disabled:He.value}," Reinvite ",8,Ch),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:U=>dt(y)}," Remove ",8,Sh)]),r("div",{class:ne(["ucas-ref-invite-status",y.status==="submitted"?"ok":"wait"])},E(y.status==="submitted"?"Submitted":"Pending"),3)],2))),128))])),Se.value.size?(k(),C("div",xh,[r("span",Eh,E(Se.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:xt},"Restore")])):K("",!0)])])):(k(),C("div",Sp,[...i[116]||(i[116]=[r("span",null,"No reference data found.",-1)])]))]))]),r("div",Ah,[r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[31]||(i[31]=y=>u.value=!1)},"Done")])])])):K("",!0)])])}}},$h=ct(Th,[["__scopeId","data-v-9e3c962d"]]),Ih={class:"tutor-ucas-modal"},Oh={class:"tutor-ucas-header"},Mh={class:"tutor-ucas-title"},Fh={class:"tutor-ucas-sub"},Ph={class:"tutor-ucas-body"},Rh={key:0},Uh={key:0,class:"tutor-ucas-iframe-loading",style:{position:"fixed",inset:"0","z-index":"10100"}},jh={key:1,class:"tutor-ucas-error",style:{position:"fixed",inset:"24px","z-index":"10100","max-width":"820px",margin:"auto"}},Nh={class:"tutor-ucas-error-msg"},Lh={key:1,class:"tutor-ucas-loading"},qh={key:2,class:"tutor-ucas-error"},Hh={class:"tutor-ucas-error-msg"},Dh={key:3,class:"tutor-ucas-content"},Vh={class:"tutor-ucas-status-row"},Bh={class:"tutor-ucas-status-card"},Kh={class:"detail"},Gh={class:"tutor-ucas-status-card"},Yh={class:"detail"},Wh={key:0},zh={class:"tutor-ucas-status-card"},Jh={class:"detail"},Xh={key:0},Qh={class:"tutor-ucas-actions"},Zh=["disabled"],em={class:"tutor-ucas-section"},tm={class:"tutor-ucas-section-head"},sm={class:"muted"},nm={key:0,class:"tutor-ucas-empty"},om={key:1,class:"tutor-ucas-contribs"},rm={class:"tutor-ucas-contrib-group-title"},am={class:"tutor-ucas-contrib-meta"},im={class:"name"},lm={class:"muted"},cm={class:"tutor-ucas-contrib-text"},um={class:"tutor-ucas-contrib-actions"},dm=["onClick"],fm=["onClick"],vm={class:"tutor-ucas-section-head"},pm={style:{display:"flex","align-items":"center",gap:"10px"}},hm={class:"muted"},mm=["disabled"],gm={class:"tutor-ucas-editor-footer"},ym={key:0,class:"tutor-ucas-inline-error"},bm={class:"tutor-ucas-editor-actions"},_m=["disabled"],wm=["disabled"],km=["disabled"],Cm="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",Sm={__name:"TutorUcasModal",props:{isOpen:{type:Boolean,required:!0},student:{type:Object,default:null},staffEmail:{type:String,default:""},staffName:{type:String,default:""},academicYear:{type:String,default:"current"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=P(!1),a=P(""),l=P(null),c=P(null),d=P("current"),m=P(""),v=P(""),g=P(!1),b=P(""),S=P(!1),M=P(!1),R=P(!1),B=P(!1),L=P(!1),G=P(""),z=P(null),F=P(null),H=P(null),ee=P(null),pe=Z(()=>{var w,T;const u=((T=(w=l.value)==null?void 0:w.data)==null?void 0:T.answers)||{},f=(u.q1||"").length,h=(u.q2||"").length,_=(u.q3||"").length;return f+h+_}),ue=Z(()=>{var _;const u=((_=l.value)==null?void 0:_.data)||{},f=!!u.selectedCourseKey,h=!!(u.requirementsByCourse&&Object.keys(u.requirementsByCourse).length>0);return f||h}),V=Z(()=>ee.value?"Completed":pe.value>=350?"In progress":"Not started"),ae=Z(()=>ee.value?"pill--ok":pe.value>=350?"pill--warn":"pill--muted"),ie=Z(()=>(m.value||"").trim()),j=Z(()=>ie.value.length>0),le=Z(()=>m.value.trim()!==(v.value||"").trim());function _e(u){const f=String(u||"").trim();return!f||f.toLowerCase()==="current"?"current":f}async function qe(){var f;const u=_e(s.academicYear);if(u&&u!=="current")return d.value=u,u;try{const h=await at.getAcademicProfile(s.student.email,null,{roleHint:"staff",staffEmail:s.staffEmail||""}),_=_e((h==null?void 0:h.academicYear)||((f=h==null?void 0:h.data)==null?void 0:f.academicYear));if(_&&_!=="current")return d.value=_,_}catch{}return d.value="current","current"}const we=Z(()=>{var _,w;const u=((w=(_=c.value)==null?void 0:_.data)==null?void 0:w.section3)||[],f=new Map;for(const T of u){const I=(T.subjectKey||"General").trim()||"General",O=f.get(I)||[];O.push(T),f.set(I,O)}const h=[];for(const[T,I]of f.entries())h.push({subjectKey:T,items:[...I].sort((O,$)=>String($.updatedAt||$.createdAt||"").localeCompare(String(O.updatedAt||O.createdAt||"")))});return h.sort((T,I)=>T.subjectKey.localeCompare(I.subjectKey)),h});async function te(){var u,f,h,_,w,T,I,O,$,D,N;if((u=s.student)!=null&&u.email){o.value=!0,a.value="",b.value="";try{await qe();const[q,Y]=await Promise.all([at.getUcasApplication(s.student.email,d.value),at.getReferenceFull(s.student.email,d.value)]);l.value=q,c.value=Y,ee.value=((h=(f=l.value)==null?void 0:f.data)==null?void 0:h.statement_completed_at)||((w=(_=l.value)==null?void 0:_.data)==null?void 0:w.statementCompletedAt)||null;const se=((I=(T=c.value)==null?void 0:T.data)==null?void 0:I.tutorCompiledSection3)||"";m.value=se,v.value=se,F.value=(($=(O=c.value)==null?void 0:O.data)==null?void 0:$.tutorCompiledUpdatedAt)||null,H.value=((N=(D=c.value)==null?void 0:D.data)==null?void 0:N.tutorCompiledCompletedAt)||null}catch(q){a.value=(q==null?void 0:q.message)||"Failed to load"}finally{o.value=!1}}}et(()=>{var u;return[s.isOpen,(u=s.student)==null?void 0:u.email,s.academicYear]},([u])=>{u&&te()}),et(()=>s.isOpen,u=>{if(u)try{document.body.style.overflow="hidden"}catch{}else{try{document.body.style.overflow=""}catch{}R.value=!1,B.value=!1}},{immediate:!0});function X(){le.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")}async function Oe(){var u;if((u=s.student)!=null&&u.email){b.value="",g.value=!0;try{await at.saveTutorCompiled(s.student.email,{academicYear:d.value,staffEmail:s.staffEmail,staffName:s.staffName,text:m.value}),await te()}catch(f){b.value=(f==null?void 0:f.message)||"Failed to save"}finally{g.value=!1}}}async function Se(){var u;if((u=s.student)!=null&&u.email&&j.value&&confirm("Mark this tutor reference as READY for UCAS?")){S.value=!0,b.value="";try{le.value&&await at.saveTutorCompiled(s.student.email,{academicYear:d.value,staffEmail:s.staffEmail,staffName:s.staffName,text:m.value}),await at.markTutorCompiledComplete(s.student.email,{academicYear:d.value,staffEmail:s.staffEmail,staffName:s.staffName}),await te()}catch(f){b.value=(f==null?void 0:f.message)||"Failed to mark complete"}finally{S.value=!1}}}async function $e(){var u;if((u=s.student)!=null&&u.email&&confirm("Send back to tutor (unmark complete)?")){S.value=!0,b.value="";try{await at.unmarkTutorCompiledComplete(s.student.email,{academicYear:d.value,staffEmail:s.staffEmail,staffName:s.staffName}),await te()}catch(f){b.value=(f==null?void 0:f.message)||"Failed to unmark complete"}finally{S.value=!1}}}function Ae(u){const f=((u==null?void 0:u.text)||"").trim();if(!f)return;const h=m.value||"",_=h.trim().length?`

`:"";m.value=`${h}${_}${f}`.trimStart()}async function He(u){try{await navigator.clipboard.writeText(u||"")}catch{}}const tt=Z(()=>{var f,h,_;return(((f=z.value)==null?void 0:f.academicYear)||((_=(h=z.value)==null?void 0:h.data)==null?void 0:_.academicYear)||""||d.value||s.academicYear||"current").toString()}),Ut=Z(()=>{var f;const u=z.value;return Array.isArray(u==null?void 0:u.subjects)?u.subjects:Array.isArray((f=u==null?void 0:u.data)==null?void 0:f.subjects)?u.data.subjects:[]}),ut=Z(()=>{var _;const u=z.value,f=(u==null?void 0:u.student)||((_=u==null?void 0:u.data)==null?void 0:_.student)||null;return f&&Array.isArray(f.universityOffers)?f.universityOffers:[]});async function st(){var f,h;const u=String(((f=s.student)==null?void 0:f.email)||"").trim();if(u){B.value=!0,L.value=!0,G.value="";try{const _=_e(d.value)==="current"?null:d.value,w=await at.getAcademicProfile(u,_,{roleHint:"staff",staffEmail:s.staffEmail||""});if(!w||w.success===!1)throw new Error((w==null?void 0:w.error)||"Failed to load academic profile");z.value=w;const T=_e((w==null?void 0:w.academicYear)||((h=w==null?void 0:w.data)==null?void 0:h.academicYear));T&&(d.value=T)}catch(_){G.value=(_==null?void 0:_.message)||"Failed to open UCAS"}finally{L.value=!1}}}function dt(){B.value=!1,L.value=!1,G.value=""}function xt(){R.value=!R.value}async function Me(){var u;if((u=s.student)!=null&&u.email&&confirm("Request further edits to the students personal statement?")){M.value=!0;try{await at.requestUcasStatementEdits(s.student.email,{academicYear:d.value,staffEmail:s.staffEmail,staffName:s.staffName}),await te()}catch(f){a.value=(f==null?void 0:f.message)||"Failed to request edits"}finally{M.value=!1}}}function Et(){te()}function p(u){if(!u)return"";try{const f=new Date(u);return Number.isNaN(f.getTime())?String(u):f.toLocaleString()}catch{return String(u)}}return(u,f)=>{var h,_,w,T,I;return k(),Us(Vi,{to:"body"},[e.isOpen?(k(),C("div",{key:0,class:"tutor-ucas-overlay",onClick:wt(X,["self"])},[r("div",Ih,[r("div",Oh,[r("div",Mh,[r("h3",null,E(((h=e.student)==null?void 0:h.name)||"Student")+"  UCAS",1),r("div",Fh,E(((_=e.student)==null?void 0:_.email)||""),1)]),r("button",{class:"tutor-ucas-close",onClick:X},"")]),r("div",Ph,[B.value?(k(),C("div",Rh,[L.value?(k(),C("div",Uh,[...f[1]||(f[1]=[r("div",{class:"spinner"},null,-1),r("div",null,"Loading UCAS application",-1)])])):G.value?(k(),C("div",jh,[f[2]||(f[2]=r("div",{class:"tutor-ucas-error-title"},"Could not open UCAS application",-1)),r("div",Nh,E(G.value),1),r("div",{style:{display:"flex",gap:"10px","flex-wrap":"wrap"}},[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:st},"Try again"),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:dt},"Back to reference")])])):(k(),Us($h,{key:2,studentEmail:((w=e.student)==null?void 0:w.email)||"",academicYear:tt.value,subjects:Ut.value,offers:ut.value,apiUrl:Cm,canEdit:!1,staffEmail:e.staffEmail||"",onClose:dt},null,8,["studentEmail","academicYear","subjects","offers","staffEmail"]))])):K("",!0),o.value?(k(),C("div",Lh,[...f[3]||(f[3]=[r("div",{class:"spinner"},null,-1),r("div",null,"Loading UCAS data",-1)])])):a.value?(k(),C("div",qh,[f[4]||(f[4]=r("div",{class:"tutor-ucas-error-title"},"Could not load UCAS data",-1)),r("div",Hh,E(a.value),1),r("button",{class:"tutor-ucas-btn",onClick:Et},"Try again")])):(k(),C("div",Dh,[r("div",Vh,[r("div",Bh,[f[5]||(f[5]=r("div",{class:"label"},"Application",-1)),r("div",{class:ne(["pill",ue.value?"pill--ok":"pill--muted"])},E(ue.value?"Started":"Not started"),3),r("div",Kh,E(ue.value?"Course / offers started":"No course/offers yet"),1)]),r("div",Gh,[f[6]||(f[6]=r("div",{class:"label"},"Personal statement",-1)),r("div",{class:ne(["pill",ae.value])},E(V.value),3),r("div",Yh,[Q(E(pe.value)+" chars ",1),ee.value?(k(),C("span",Wh,"  completed")):K("",!0)])]),r("div",zh,[f[7]||(f[7]=r("div",{class:"label"},"Tutor reference",-1)),r("div",{class:ne(["pill",H.value?"pill--ok":j.value?"pill--warn":"pill--muted"])},E(H.value?"Complete":j.value?"In progress":"Not started"),3),r("div",Jh,[Q(E(ie.value.length)+" chars ",1),H.value?(k(),C("span",Xh,"  marked complete")):K("",!0)])])]),r("div",Qh,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:st}," Open UCAS application "),r("button",{class:"tutor-ucas-btn",disabled:M.value,onClick:Me},E(M.value?"Requesting":"Request edits (statement)"),9,Zh),f[8]||(f[8]=r("div",{class:"tutor-ucas-actions-spacer"},null,-1)),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:Et}," Reload ")]),r("div",em,[r("div",tm,[f[9]||(f[9]=r("h4",null,"Incoming subject teacher references",-1)),r("div",sm,E((((T=c.value)==null?void 0:T.section3)||[]).length)+" contributions",1)]),(((I=c.value)==null?void 0:I.section3)||[]).length===0?(k(),C("div",nm," No subject teacher contributions yet. ")):(k(),C("div",om,[(k(!0),C(re,null,Te(we.value,O=>(k(),C("div",{key:O.subjectKey,class:"tutor-ucas-contrib-group"},[r("div",rm,E(O.subjectKey),1),(k(!0),C(re,null,Te(O.items,$=>(k(),C("div",{key:$.id,class:"tutor-ucas-contrib"},[r("div",am,[r("div",im,E($.authorName||$.authorEmail||"Teacher"),1),r("div",lm,E(p($.updatedAt||$.createdAt)),1)]),r("div",cm,E($.text),1),r("div",um,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm",onClick:D=>Ae($)}," Add to compiled ",8,dm),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm tutor-ucas-btn--ghost",onClick:D=>He($.text)}," Copy ",8,fm)])]))),128))]))),128))]))]),r("div",{class:ne(["tutor-ucas-section",{"tutor-ucas-section--expanded":R.value}])},[r("div",vm,[f[10]||(f[10]=r("h4",null,"Tutor compiled reference (final narrative)",-1)),r("div",pm,[r("div",hm," Saved: "+E(F.value?p(F.value):""),1),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost tutor-ucas-btn--sm",type:"button",onClick:xt},E(R.value?"Collapse":"Expand"),1)])]),Ie(r("textarea",{"onUpdate:modelValue":f[0]||(f[0]=O=>m.value=O),class:"tutor-ucas-textarea",placeholder:"Build the final tutor narrative here",disabled:g.value||S.value,rows:"10",spellcheck:"true",autocorrect:"on",autocapitalize:"sentences"},null,8,mm),[[Dt,m.value]]),r("div",gm,[b.value?(k(),C("div",ym,E(b.value),1)):K("",!0),r("div",bm,[r("button",{class:"tutor-ucas-btn",disabled:g.value||!le.value,onClick:Oe},E(g.value?"Saving":"Save draft"),9,_m),H.value?(k(),C("button",{key:1,class:"tutor-ucas-btn tutor-ucas-btn--danger",disabled:S.value,onClick:$e},E(S.value?"Updating":"Send back (unmark complete)"),9,km)):(k(),C("button",{key:0,class:"tutor-ucas-btn tutor-ucas-btn--primary",disabled:S.value||!j.value,onClick:Se},E(S.value?"Marking":"Mark ready for UCAS"),9,wm))])])],2),f[11]||(f[11]=r("div",{class:"tutor-ucas-footnote"}," Students can see status, not the reference content. Subject teachers submit into Incoming above; tutors collate into the final narrative. ",-1))]))])])])):K("",!0)])}}},xm=ct(Sm,[["__scopeId","data-v-31d2406f"]]),Em={class:"student-table-container"},Am={class:"table-header"},Tm={class:"header-controls"},$m={class:"student-count"},Im={class:"page-size-selector"},Om={key:0,class:"pagination-controls pagination-top"},Mm=["disabled"],Fm={class:"page-numbers"},Pm=["onClick"],Rm={key:1,class:"page-ellipsis"},Um=["disabled"],jm={class:"table-wrapper"},Nm={class:"student-table"},Lm={class:"sort-indicator"},qm={class:"sort-indicator"},Hm={class:"sort-indicator"},Dm={class:"sort-indicator"},Vm={class:"sort-indicator"},Bm={class:"sort-indicator"},Km={class:"sort-indicator"},Gm={class:"sort-indicator"},Ym={class:"student-name"},Wm={class:"report-cell"},zm=["onClick"],Jm={class:"report-cell"},Xm=["onClick","disabled","title"],Qm=["onClick","title"],Zm={key:0,class:"incomplete"},e1={key:1},t1=["onClick","title"],s1={key:0,class:"incomplete"},n1={key:1},o1=["onClick","title"],r1={key:1,class:"pagination-controls"},a1=["disabled"],i1={class:"page-numbers"},l1=["onClick"],c1={key:1,class:"page-ellipsis"},u1=["disabled"],d1={key:2,class:"no-results"},f1={__name:"StudentTable",props:{students:{type:Array,required:!0},activeFilters:{type:Object,default:()=>({})},smartFilters:{type:Array,default:()=>[]}},emits:["view-report","data-updated"],setup(e,{emit:t}){const s=e,n=t,o=P("name"),a=P("asc"),l=P(!1),c=P(""),d=P(""),m=P(!1),v=P(""),g=P(""),b=P(null),S=P(!1),M=P(""),R=P(""),B=P(null),L=P(1),G=P(50),z=Z(()=>{let u=[...s.students];if(s.activeFilters.group&&(u=u.filter(f=>f.group===s.activeFilters.group)),s.activeFilters.year&&(u=u.filter(f=>f.yearGroup===s.activeFilters.year)),s.activeFilters.status==="completed"?u=u.filter(f=>f.hasCompleted):s.activeFilters.status==="not_completed"&&(u=u.filter(f=>!f.hasCompleted)),s.activeFilters.search){const f=s.activeFilters.search.toLowerCase();u=u.filter(h=>h.name.toLowerCase().includes(f)||h.group&&h.group.toLowerCase().includes(f))}return s.smartFilters&&s.smartFilters.length>0&&(u=u.filter(f=>s.smartFilters.every(h=>{var I;const _=(I=f.scores)==null?void 0:I[h.dimension];if(_==null)return!1;const w=parseFloat(_),T=parseFloat(h.value);switch(h.operator){case"gt":return w>T;case"gte":return w>=T;case"lt":return w<T;case"lte":return w<=T;case"eq":return Math.abs(w-T)<.01;default:return!0}}))),u}),F=Z(()=>{const u=[...z.value];return u.sort((f,h)=>{var T,I;let _,w;return["vision","effort","systems","practice","attitude","overall"].includes(o.value)?(_=(T=f.scores)==null?void 0:T[o.value],w=(I=h.scores)==null?void 0:I[o.value],_==null&&(_=-1),w==null&&(w=-1),_=parseFloat(_),w=parseFloat(w)):(_=f[o.value],w=h[o.value],_==null&&(_=""),w==null&&(w=""),typeof _=="string"&&(_=_.toLowerCase(),w=w.toLowerCase())),_<w?a.value==="asc"?-1:1:_>w?a.value==="asc"?1:-1:0}),u}),H=Z(()=>Math.ceil(z.value.length/G.value)),ee=Z(()=>{const u=(L.value-1)*G.value,f=u+G.value;return F.value.slice(u,f)}),pe=Z(()=>{const u=z.value.length;if(u===0)return"No students";const f=(L.value-1)*G.value+1,h=Math.min(L.value*G.value,u);return`Showing ${f}-${h} of ${u} students`}),ue=Z(()=>{const u=H.value,f=L.value,h=[];if(u<=7)for(let _=1;_<=u;_++)h.push(_);else{h.push(1),f>3&&h.push("...");const _=Math.max(2,f-1),w=Math.min(u-1,f+1);for(let T=_;T<=w;T++)h.push(T);f<u-2&&h.push("..."),u>1&&h.push(u)}return h});et(()=>[s.activeFilters,z.value.length],()=>{L.value=1});const V=u=>{if(u>=1&&u<=H.value){L.value=u;const f=document.querySelector(".student-table-container");f&&f.scrollIntoView({behavior:"smooth",block:"start"})}},ae=()=>{L.value=1},ie=u=>{console.log("[Table] Sorting by:",u),o.value===u?a.value=a.value==="asc"?"desc":"asc":(o.value=u,a.value=u.includes("score")||["vision","effort","systems","practice","attitude","overall"].includes(u)?"desc":"asc")},j=u=>o.value!==u?"":a.value==="asc"?"":"",le=(u,f)=>u?u.length<=f?u:u.substring(0,f)+"...":"-",_e=u=>u==null?"-":Math.round(parseFloat(u)),qe=u=>{n("view-report",u)};function we(u){const h=((u==null?void 0:u.yearGroup)??(u==null?void 0:u.year)??"").toString().match(/(\d{1,2})/),_=h?parseInt(h[1],10):NaN;return Number.isFinite(_)?_:null}function te(u){const f=we(u);return!!(u!=null&&u.email)&&f!==null&&f>=12}function X(u){te(u)&&He(u)}const Oe=P(!1),Se=P(null),$e=Z(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.email)||"").toString().trim().toLowerCase()}catch{return""}}),Ae=Z(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.name)||(u==null?void 0:u.full_name)||"").toString().trim()}catch{return""}});function He(u){te(u)&&(Se.value={name:(u==null?void 0:u.name)||"",email:(u==null?void 0:u.email)||"",group:(u==null?void 0:u.group)||"",yearGroup:(u==null?void 0:u.yearGroup)||(u==null?void 0:u.year)||""},Oe.value=!0)}function tt(){Oe.value=!1,Se.value=null}const Ut=(u,f,h)=>{!h||h.trim()===""||h==="-"||(c.value=`${u} - ${f}`,d.value=h,l.value=!0)},ut=()=>{l.value=!1,c.value="",d.value=""},st=u=>{b.value=u,v.value=`${u.name} - Edit Action Plan`,g.value=u.goals||"",m.value=!0},dt=()=>{m.value=!1,v.value="",g.value="",b.value=null},xt=async u=>{if(!b.value)return;const f=b.value.email,h=b.value.id,_=b.value.targetCycle;try{console.log("[StudentTable] Saving goals for:",f,"Knack ID:",h);const w=s.students.find(T=>T.id===h);if(w){const T=w.goals,I=w.hasGoals;w.goals=u,w.hasGoals=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const O=await at.saveStudentGoals(f,_,{goalText:u,knackRecordId:h});if(O.knackWritten)console.log("[StudentTable]  Goals saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Goals saved to Supabase ONLY. Knack error:",O.knackError),w.goals=T,w.hasGoals=I,new Error("Failed to save to Knack: "+O.knackError);console.log("[StudentTable] Goals saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(w){throw console.error("[StudentTable] Error saving goals:",w),w}},Me=u=>{B.value=u,M.value=`${u.name} - Staff Coaching Comments`,R.value=u.coachingComments||"",S.value=!0},Et=()=>{S.value=!1,M.value="",R.value="",B.value=null},p=async u=>{if(!B.value)return;const f=B.value.email,h=B.value.id,_=B.value.targetCycle;try{console.log("[StudentTable] Saving coaching comments for:",f,"Knack ID:",h);const w=s.students.find(T=>T.id===h);if(w){const T=w.coachingComments,I=w.hasCoaching;w.coachingComments=u,w.hasCoaching=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const O=await at.saveCoachingComments(f,_,{coachingText:u,knackRecordId:h});if(O.knackWritten)console.log("[StudentTable]  Coaching saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Coaching saved to Supabase ONLY. Knack error:",O.knackError),w.coachingComments=T,w.hasCoaching=I,new Error("Failed to save to Knack: "+O.knackError);console.log("[StudentTable] Coaching comments saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(w){throw console.error("[StudentTable] Error saving coaching comments:",w),w}};return(u,f)=>(k(),C("div",Em,[r("div",Am,[f[15]||(f[15]=r("h3",null,"Student Overview",-1)),r("div",Tm,[r("p",$m,E(pe.value),1),r("div",Im,[f[14]||(f[14]=r("label",{for:"page-size"},"Show:",-1)),Ie(r("select",{id:"page-size","onUpdate:modelValue":f[0]||(f[0]=h=>G.value=h),onChange:ae},[...f[13]||(f[13]=[r("option",{value:10},"10",-1),r("option",{value:50},"50",-1),r("option",{value:100},"100",-1),r("option",{value:500},"500",-1)])],544),[[kt,G.value]])])])]),z.value.length>0?(k(),C("div",Om,[r("button",{onClick:f[1]||(f[1]=h=>V(L.value-1)),disabled:L.value===1,class:"pagination-button"}," Previous ",8,Mm),r("div",Fm,[(k(!0),C(re,null,Te(ue.value,h=>(k(),C(re,{key:h},[h!=="..."?(k(),C("button",{key:0,onClick:_=>V(h),class:ne(["page-button",{active:h===L.value}])},E(h),11,Pm)):(k(),C("span",Rm,"..."))],64))),128))]),r("button",{onClick:f[2]||(f[2]=h=>V(L.value+1)),disabled:L.value===H.value,class:"pagination-button"}," Next ",8,Um)])):K("",!0),r("div",jm,[r("table",Nm,[r("thead",null,[r("tr",null,[r("th",{onClick:f[3]||(f[3]=h=>ie("name")),class:"sortable"},[f[16]||(f[16]=Q(" Student Name ",-1)),r("span",Lm,E(j("name")),1)]),r("th",{onClick:f[4]||(f[4]=h=>ie("group")),class:"sortable"},[f[17]||(f[17]=Q(" Group ",-1)),r("span",qm,E(j("group")),1)]),f[24]||(f[24]=r("th",{class:"report-col"},"Report",-1)),f[25]||(f[25]=r("th",{class:"ucas-col",title:"UCAS Application (Year 12+)"},"UCAS",-1)),r("th",{onClick:f[5]||(f[5]=h=>ie("vision")),class:"score-cell sortable",title:"Vision"},[f[18]||(f[18]=Q(" V ",-1)),r("span",Hm,E(j("vision")),1)]),r("th",{onClick:f[6]||(f[6]=h=>ie("effort")),class:"score-cell sortable",title:"Effort"},[f[19]||(f[19]=Q(" E ",-1)),r("span",Dm,E(j("effort")),1)]),r("th",{onClick:f[7]||(f[7]=h=>ie("systems")),class:"score-cell sortable",title:"Systems"},[f[20]||(f[20]=Q(" S ",-1)),r("span",Vm,E(j("systems")),1)]),r("th",{onClick:f[8]||(f[8]=h=>ie("practice")),class:"score-cell sortable",title:"Practice"},[f[21]||(f[21]=Q(" P ",-1)),r("span",Bm,E(j("practice")),1)]),r("th",{onClick:f[9]||(f[9]=h=>ie("attitude")),class:"score-cell sortable",title:"Attitude"},[f[22]||(f[22]=Q(" A ",-1)),r("span",Km,E(j("attitude")),1)]),r("th",{onClick:f[10]||(f[10]=h=>ie("overall")),class:"score-cell sortable",title:"Overall"},[f[23]||(f[23]=Q(" O ",-1)),r("span",Gm,E(j("overall")),1)]),f[26]||(f[26]=r("th",null,"Response",-1)),f[27]||(f[27]=r("th",null,"Action Plan",-1)),f[28]||(f[28]=r("th",null,"Staff Comments",-1))])]),r("tbody",null,[(k(!0),C(re,null,Te(ee.value,h=>{var _,w,T,I,O,$,D,N,q,Y,se,de;return k(),C("tr",{key:h.id},[r("td",Ym,E(h.name),1),r("td",null,E(h.group||"-"),1),r("td",Wm,[r("button",{onClick:ce=>qe(h),class:"report-button",title:"View Full Report"},"  ",8,zm)]),r("td",Jm,[r("button",{class:"ucas-button",type:"button",onClick:ce=>X(h),disabled:!te(h),title:te(h)?"Open UCAS Application":"UCAS available for Year 12+ only"},"  ",8,Xm)]),r("td",{class:"score-cell",style:bt({background:Xt(ls)((_=h.scores)==null?void 0:_.vision)})},E(((w=h.scores)==null?void 0:w.vision)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((T=h.scores)==null?void 0:T.effort)})},E(((I=h.scores)==null?void 0:I.effort)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((O=h.scores)==null?void 0:O.systems)})},E((($=h.scores)==null?void 0:$.systems)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((D=h.scores)==null?void 0:D.practice)})},E(((N=h.scores)==null?void 0:N.practice)||"-"),5),r("td",{class:"score-cell",style:bt({background:Xt(ls)((q=h.scores)==null?void 0:q.attitude)})},E(((Y=h.scores)==null?void 0:Y.attitude)||"-"),5),r("td",{class:"score-cell overall-cell",style:bt({background:Xt(ls)((se=h.scores)==null?void 0:se.overall)})},E(_e((de=h.scores)==null?void 0:de.overall)),5),r("td",{class:ne(["text-preview clickable view-only",{"has-content":h.hasResponse,"no-content":!h.hasResponse}]),onClick:ce=>Ut(h.name,"Response",h.response),title:h.hasResponse?"Click to view full response":"No response yet"},[h.hasResponse?(k(),C("span",e1,E(le(h.response,40)),1)):(k(),C("span",Zm,"Incomplete"))],10,Qm),r("td",{class:ne(["text-preview clickable editable",{"has-content":h.hasGoals,"no-content":!h.hasGoals}]),onClick:ce=>st(h),title:h.hasGoals?"Click to edit action plan":"No action plan yet - Click to add"},[h.hasGoals?(k(),C("span",n1,E(le(h.goals,40)),1)):(k(),C("span",s1,"Incomplete"))],10,t1),r("td",{class:ne(["text-preview clickable editable",{"has-content":h.hasCoaching,"no-content-blank":!h.hasCoaching}]),onClick:ce=>Me(h),title:h.hasCoaching?"Click to edit coaching comments":"No coaching comments - Click to add"},E(le(h.coachingComments,40)),11,o1)])}),128))])])]),z.value.length>0?(k(),C("div",r1,[r("button",{onClick:f[11]||(f[11]=h=>V(L.value-1)),disabled:L.value===1,class:"pagination-button"}," Previous ",8,a1),r("div",i1,[(k(!0),C(re,null,Te(ue.value,h=>(k(),C(re,{key:h},[h!=="..."?(k(),C("button",{key:0,onClick:_=>V(h),class:ne(["page-button",{active:h===L.value}])},E(h),11,l1)):(k(),C("span",c1,"..."))],64))),128))]),r("button",{onClick:f[12]||(f[12]=h=>V(L.value+1)),disabled:L.value===H.value,class:"pagination-button"}," Next ",8,u1)])):K("",!0),z.value.length===0?(k(),C("div",d1,[...f[29]||(f[29]=[r("p",null,"No students match the current filters.",-1)])])):K("",!0),Ce(bu,{isOpen:l.value,title:c.value,text:d.value,onClose:ut},null,8,["isOpen","title","text"]),Ce(br,{isOpen:m.value,title:v.value,text:g.value,placeholder:"Enter action plan / study goals here...",onClose:dt,onSave:xt},null,8,["isOpen","title","text"]),Ce(br,{isOpen:S.value,title:M.value,text:R.value,placeholder:"Enter coaching comments and observations here...",onClose:Et,onSave:p},null,8,["isOpen","title","text"]),Ce(xm,{isOpen:Oe.value,student:Se.value,staffEmail:$e.value,staffName:Ae.value,academicYear:"current",onClose:tt},null,8,["isOpen","student","staffEmail","staffName"])]))}},v1=ct(f1,[["__scopeId","data-v-d9bf6065"]]),p1={class:"report-modal-container"},h1={class:"report-modal-header"},m1={class:"report-modal-body"},g1=["src"],y1={class:"iframe-loading"},b1={__name:"StudentReportModal",props:{isOpen:{type:Boolean,required:!0},studentEmail:{type:String,default:null},studentName:{type:String,default:"Student"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=P(null),a=P(!0),l=P(null);et(()=>[s.isOpen,s.studentEmail],([v,g])=>{v&&g?(o.value=`https://vespaacademy.knack.com/vespa-academy#vespa-coaching-report?email=${encodeURIComponent(g)}`,a.value=!0,console.log("[Report Modal] Opening report for:",g)):o.value=null},{immediate:!0});const c=()=>{try{const v=l.value;if(v&&v.contentDocument){const g=v.contentDocument.createElement("style");g.textContent=`
        /* Hide Knack default headers and navigation */
        .knHeader,
        .kn-menu,
        .kn-info,
        .kn-current_user,
        #kn-app-menu,
        .kn-back,
        .breadcrumb-back,
        .header-breadcrumb {
          display: none !important;
        }
        
        /* Adjust body padding to account for hidden header */
        body {
          padding-top: 0 !important;
        }
        
        /* Ensure content starts at top */
        .kn-scene,
        #kn-app-container {
          padding-top: 0 !important;
          margin-top: 0 !important;
        }
      `,v.contentDocument.head.appendChild(g),console.log("[Report Modal] Hid Knack headers in iframe")}}catch(v){console.log("[Report Modal] Could not hide headers (cross-origin):",v.message)}setTimeout(()=>{a.value=!1,console.log("[Report Modal] Report loaded")},500)},d=()=>{a.value=!0,n("close")},m=v=>{v.key==="Escape"&&s.isOpen&&d()};return et(()=>s.isOpen,v=>{v?(document.addEventListener("keydown",m),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",m),document.body.style.overflow="")}),(v,g)=>e.isOpen?(k(),C("div",{key:0,class:"report-modal-overlay",onClick:wt(d,["self"])},[r("div",p1,[r("div",h1,[r("h2",null,E(e.studentName)+" - VESPA Report",1),r("button",{class:"close-button",onClick:d},[...g[0]||(g[0]=[r("span",{class:"close-icon"},"",-1)])])]),r("div",m1,[o.value?(k(),C("iframe",{key:0,ref_key:"reportIframe",ref:l,src:o.value,class:"report-iframe",onLoad:c,frameborder:"0",allowfullscreen:""},null,40,g1)):K("",!0),Ie(r("div",y1,[...g[1]||(g[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading report...",-1)])],512),[[Pa,a.value]])])])])):K("",!0)}},_1=ct(b1,[["__scopeId","data-v-9df7cb70"]]),w1={getUser(){try{if(typeof Knack>"u"||!Knack.getUserAttributes)return console.warn("[Knack Auth] Knack not available"),null;const e=Knack.getUserAttributes(),t=Knack.getUserRoles?Knack.getUserRoles():[];if(!e||!e.email)return console.warn("[Knack Auth] No user logged in"),null;const s=["object_5","object_7","object_18","object_78"],n=t.some(o=>s.includes(o));return{email:e.email,name:e.name||e.full_name||"",roles:t,isStaff:n,attributes:e}}catch(e){return console.error("[Knack Auth] Error getting user:",e),null}},isStaff(){const e=this.getUser();return e?e.isStaff:!1},getUserEmail(){const e=this.getUser();return e?e.email:null}},k1={id:"staff-overview-app"},C1={key:2,class:"overview-container"},S1={__name:"App",setup(e){const t=P(null),s=P({}),n=P(!0),o=P(null),a=P(null),l=P(!1),c=P(null),d=P(null),m=P({cycle:!1,group:!1,year:!1,status:!1,search:!1}),v=P({}),g=P(null),b=P(!1),S=P([]),M=async(F=1)=>{g.value=F,n.value=!0,o.value=null;try{if(a.value=w1.getUser(),!a.value||!a.value.email)throw new Error("Please log in to view the staff overview");if(!a.value.isStaff)throw new Error("This page is only accessible to staff members");console.log("[Staff Overview] Loading data for:",a.value.email,"cycle filter:",F);const H=await at.getStaffOverview(a.value.email,F);if(!H.success)throw new Error(H.error||"Failed to load staff overview");t.value=H,console.log("[Staff Overview] Data loaded successfully:",H),b.value=!0}catch(H){console.error("[Staff Overview] Error loading data:",H),o.value=H.message||"Failed to load overview. Please try again."}finally{n.value=!1}},R=F=>{s.value=F,v.value.cycle=F.cycle||"",F.group&&(v.value.group=F.group),F.year&&(v.value.year=F.year),F.status&&(v.value.status=F.status),F.search&&(v.value.search=F.search),m.value.group&&F.group&&(v.value.group=F.group),m.value.year&&F.year&&(v.value.year=F.year),m.value.status&&F.status&&(v.value.status=F.status),m.value.search&&F.search&&(v.value.search=F.search);const H=F.cycle&&F.cycle!==""?parseInt(F.cycle):null,ee=H!==g.value;ee&&b.value?(console.log("[Staff Overview] Cycle filter changed, re-fetching data for cycle:",H),g.value=H,M(H)):ee&&!b.value?(console.log("[Staff Overview] Initial filter sync, skipping reload"),g.value=H):console.log("[Staff Overview] Filter changed (non-cycle), updating local state only")},B=F=>{m.value=F,F.group&&s.value.group&&(v.value.group=s.value.group),F.year&&s.value.year&&(v.value.year=s.value.year),F.status&&s.value.status&&(v.value.status=s.value.status),F.search&&s.value.search&&(v.value.search=s.value.search),F.group||delete v.value.group,F.year||delete v.value.year,F.status||delete v.value.status,F.search||delete v.value.search},L=F=>{console.log("[Staff Overview] Opening report modal for:",F.name,F.email),c.value=F.email,d.value=F.name,l.value=!0},G=()=>{l.value=!1,c.value=null,d.value=null,console.log("[Staff Overview] Refreshing data after report modal closed"),M(g.value)},z=()=>{console.log("[Staff Overview] Data updated, refreshing from Knack"),M(g.value)};return En(()=>{M(1)}),(F,H)=>(k(),C("div",k1,[n.value?(k(),Us(Tc,{key:0,message:"Loading student data..."})):o.value?(k(),Us(Oc,{key:1,message:o.value,onRetry:M},null,8,["message"])):t.value?(k(),C("div",C1,[Ce(Nc,{staffMember:t.value.staffMember,totalStudents:t.value.students.length},null,8,["staffMember","totalStudents"]),Ce(eu,{filters:t.value.filters,lockedFilters:m.value,preservedValues:v.value,onFilterChanged:R,onLockChanged:B},null,8,["filters","lockedFilters","preservedValues"]),Ce(vu,{modelValue:S.value,"onUpdate:modelValue":H[0]||(H[0]=ee=>S.value=ee)},null,8,["modelValue"]),Ce(v1,{students:t.value.students,activeFilters:s.value,smartFilters:S.value,onViewReport:L,onDataUpdated:z},null,8,["students","activeFilters","smartFilters"])])):K("",!0),Ce(_1,{isOpen:l.value,studentEmail:c.value,studentName:d.value,onClose:G},null,8,["isOpen","studentEmail","studentName"])]))}},x1=ct(S1,[["__scopeId","data-v-245d25d6"]]);function E1(){console.log("[Staff Overview V2] Initializing...");try{const e=window.STAFF_OVERVIEW_V2_CONFIG||{},t=document.querySelector(e.elementSelector||"#view_3258");if(!t){console.error("[Staff Overview V2] Mount element not found:",e.elementSelector);return}Cc(x1).mount(t),console.log("[Staff Overview V2] Successfully initialized!")}catch(e){console.error("[Staff Overview V2] Initialization error:",e)}}typeof window<"u"&&(window.initializeStaffOverviewV2=E1);
