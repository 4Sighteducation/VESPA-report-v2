(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ro(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const ye={},us=[],xt=()=>{},fa=()=>!1,vn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),io=e=>e.startsWith("onUpdate:"),je=Object.assign,lo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Hr=Object.prototype.hasOwnProperty,pe=(e,t)=>Hr.call(e,t),W=Array.isArray,ds=e=>js(e)==="[object Map]",pn=e=>js(e)==="[object Set]",$o=e=>js(e)==="[object Date]",ne=e=>typeof e=="function",Ie=e=>typeof e=="string",Et=e=>typeof e=="symbol",me=e=>e!==null&&typeof e=="object",va=e=>(me(e)||ne(e))&&ne(e.then)&&ne(e.catch),pa=Object.prototype.toString,js=e=>pa.call(e),Dr=e=>js(e).slice(8,-1),ha=e=>js(e)==="[object Object]",co=e=>Ie(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ks=ro(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Vr=/-\w/g,Bt=hn(e=>e.replace(Vr,t=>t.slice(1).toUpperCase())),Br=/\B([A-Z])/g,ss=hn(e=>e.replace(Br,"-$1").toLowerCase()),ma=hn(e=>e.charAt(0).toUpperCase()+e.slice(1)),jn=hn(e=>e?`on${ma(e)}`:""),Vt=(e,t)=>!Object.is(e,t),Ws=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},ga=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},mn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Kr=e=>{const t=Ie(e)?Number(e):NaN;return isNaN(t)?e:t};let To;const gn=()=>To||(To=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wt(e){if(W(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=Ie(n)?zr(n):wt(n);if(o)for(const r in o)t[r]=o[r]}return t}else if(Ie(e)||me(e))return e}const Yr=/;(?![^(]*\))/g,Gr=/:([^]+)/,Wr=/\/\*[^]*?\*\//g;function zr(e){const t={};return e.replace(Wr,"").split(Yr).forEach(s=>{if(s){const n=s.split(Gr);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function se(e){let t="";if(Ie(e))t=e;else if(W(e))for(let s=0;s<e.length;s++){const n=se(e[s]);n&&(t+=n+" ")}else if(me(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Jr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xr=ro(Jr);function ya(e){return!!e||e===""}function Qr(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=yn(e[n],t[n]);return s}function yn(e,t){if(e===t)return!0;let s=$o(e),n=$o(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=Et(e),n=Et(t),s||n)return e===t;if(s=W(e),n=W(t),s||n)return s&&n?Qr(e,t):!1;if(s=me(e),n=me(t),s||n){if(!s||!n)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const l in e){const c=e.hasOwnProperty(l),d=t.hasOwnProperty(l);if(c&&!d||!c&&d||!yn(e[l],t[l]))return!1}}return String(e)===String(t)}function Zr(e,t){return e.findIndex(s=>yn(s,t))}const ba=e=>!!(e&&e.__v_isRef===!0),x=e=>Ie(e)?e:e==null?"":W(e)||me(e)&&(e.toString===pa||!ne(e.toString))?ba(e)?x(e.value):JSON.stringify(e,_a,2):String(e),_a=(e,t)=>ba(t)?_a(e,t.value):ds(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,o],r)=>(s[Nn(n,r)+" =>"]=o,s),{})}:pn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Nn(s))}:Et(t)?Nn(t):me(t)&&!W(t)&&!ha(t)?String(t):t,Nn=(e,t="")=>{var s;return Et(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Je;class ei{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Je;try{return Je=this,t()}finally{Je=s}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function ti(){return Je}let _e;const Ln=new WeakSet;class wa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ln.has(this)&&(Ln.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ca(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Io(this),Sa(this);const t=_e,s=pt;_e=this,pt=!0;try{return this.fn()}finally{xa(this),_e=t,pt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)vo(t);this.deps=this.depsTail=void 0,Io(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ln.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wn(this)&&this.run()}get dirty(){return Wn(this)}}let ka=0,Cs,Ss;function Ca(e,t=!1){if(e.flags|=8,t){e.next=Ss,Ss=e;return}e.next=Cs,Cs=e}function uo(){ka++}function fo(){if(--ka>0)return;if(Ss){let t=Ss;for(Ss=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Cs;){let t=Cs;for(Cs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Sa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xa(e){let t,s=e.depsTail,n=s;for(;n;){const o=n.prevDep;n.version===-1?(n===s&&(s=o),vo(n),si(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=s}function Wn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ea(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ea(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ts)||(e.globalVersion=Ts,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Wn(e))))return;e.flags|=2;const t=e.dep,s=_e,n=pt;_e=e,pt=!0;try{Sa(e);const o=e.fn(e._value);(t.version===0||Vt(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{_e=s,pt=n,xa(e),e.flags&=-3}}function vo(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)vo(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function si(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let pt=!0;const Aa=[];function Ft(){Aa.push(pt),pt=!1}function Rt(){const e=Aa.pop();pt=e===void 0?!0:e}function Io(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=_e;_e=void 0;try{t()}finally{_e=s}}}let Ts=0;class ni{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class po{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!_e||!pt||_e===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==_e)s=this.activeLink=new ni(_e,this),_e.deps?(s.prevDep=_e.depsTail,_e.depsTail.nextDep=s,_e.depsTail=s):_e.deps=_e.depsTail=s,$a(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=_e.depsTail,s.nextDep=void 0,_e.depsTail.nextDep=s,_e.depsTail=s,_e.deps===s&&(_e.deps=n)}return s}trigger(t){this.version++,Ts++,this.notify(t)}notify(t){uo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{fo()}}}function $a(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)$a(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const zn=new WeakMap,ts=Symbol(""),Jn=Symbol(""),Is=Symbol("");function qe(e,t,s){if(pt&&_e){let n=zn.get(e);n||zn.set(e,n=new Map);let o=n.get(s);o||(n.set(s,o=new po),o.map=n,o.key=s),o.track()}}function Pt(e,t,s,n,o,r){const l=zn.get(e);if(!l){Ts++;return}const c=d=>{d&&d.trigger()};if(uo(),t==="clear")l.forEach(c);else{const d=W(e),y=d&&co(s);if(d&&s==="length"){const f=Number(n);l.forEach((g,w)=>{(w==="length"||w===Is||!Et(w)&&w>=f)&&c(g)})}else switch((s!==void 0||l.has(void 0))&&c(l.get(s)),y&&c(l.get(Is)),t){case"add":d?y&&c(l.get("length")):(c(l.get(ts)),ds(e)&&c(l.get(Jn)));break;case"delete":d||(c(l.get(ts)),ds(e)&&c(l.get(Jn)));break;case"set":ds(e)&&c(l.get(ts));break}}fo()}function is(e){const t=ve(e);return t===e?t:(qe(t,"iterate",Is),it(e)?t:t.map(Ue))}function bn(e){return qe(e=ve(e),"iterate",Is),e}const oi={__proto__:null,[Symbol.iterator](){return qn(this,Symbol.iterator,Ue)},concat(...e){return is(this).concat(...e.map(t=>W(t)?is(t):t))},entries(){return qn(this,"entries",e=>(e[1]=Ue(e[1]),e))},every(e,t){return $t(this,"every",e,t,void 0,arguments)},filter(e,t){return $t(this,"filter",e,t,s=>s.map(Ue),arguments)},find(e,t){return $t(this,"find",e,t,Ue,arguments)},findIndex(e,t){return $t(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $t(this,"findLast",e,t,Ue,arguments)},findLastIndex(e,t){return $t(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $t(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hn(this,"includes",e)},indexOf(...e){return Hn(this,"indexOf",e)},join(e){return is(this).join(e)},lastIndexOf(...e){return Hn(this,"lastIndexOf",e)},map(e,t){return $t(this,"map",e,t,void 0,arguments)},pop(){return ys(this,"pop")},push(...e){return ys(this,"push",e)},reduce(e,...t){return Oo(this,"reduce",e,t)},reduceRight(e,...t){return Oo(this,"reduceRight",e,t)},shift(){return ys(this,"shift")},some(e,t){return $t(this,"some",e,t,void 0,arguments)},splice(...e){return ys(this,"splice",e)},toReversed(){return is(this).toReversed()},toSorted(e){return is(this).toSorted(e)},toSpliced(...e){return is(this).toSpliced(...e)},unshift(...e){return ys(this,"unshift",e)},values(){return qn(this,"values",Ue)}};function qn(e,t,s){const n=bn(e),o=n[t]();return n!==e&&!it(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=s(r.value)),r}),o}const ai=Array.prototype;function $t(e,t,s,n,o,r){const l=bn(e),c=l!==e&&!it(e),d=l[t];if(d!==ai[t]){const g=d.apply(e,r);return c?Ue(g):g}let y=s;l!==e&&(c?y=function(g,w){return s.call(this,Ue(g),w,e)}:s.length>2&&(y=function(g,w){return s.call(this,g,w,e)}));const f=d.call(l,y,n);return c&&o?o(f):f}function Oo(e,t,s,n){const o=bn(e);let r=s;return o!==e&&(it(e)?s.length>3&&(r=function(l,c,d){return s.call(this,l,c,d,e)}):r=function(l,c,d){return s.call(this,l,Ue(c),d,e)}),o[t](r,...n)}function Hn(e,t,s){const n=ve(e);qe(n,"iterate",Is);const o=n[t](...s);return(o===-1||o===!1)&&go(s[0])?(s[0]=ve(s[0]),n[t](...s)):o}function ys(e,t,s=[]){Ft(),uo();const n=ve(e)[t].apply(e,s);return fo(),Rt(),n}const ri=ro("__proto__,__v_isRef,__isVue"),Ta=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Et));function ii(e){Et(e)||(e=String(e));const t=ve(this);return qe(t,"has",e),t.hasOwnProperty(e)}class Ia{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!o;if(s==="__v_isReadonly")return o;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(o?r?gi:Fa:r?Ma:Pa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=W(t);if(!o){let d;if(l&&(d=oi[s]))return d;if(s==="hasOwnProperty")return ii}const c=Reflect.get(t,s,He(t)?t:n);if((Et(s)?Ta.has(s):ri(s))||(o||qe(t,"get",s),r))return c;if(He(c)){const d=l&&co(s)?c:c.value;return o&&me(d)?Qn(d):d}return me(c)?o?Qn(c):Os(c):c}}class Oa extends Ia{constructor(t=!1){super(!1,t)}set(t,s,n,o){let r=t[s];if(!this._isShallow){const d=Kt(r);if(!it(n)&&!Kt(n)&&(r=ve(r),n=ve(n)),!W(t)&&He(r)&&!He(n))return d||(r.value=n),!0}const l=W(t)&&co(s)?Number(s)<t.length:pe(t,s),c=Reflect.set(t,s,n,He(t)?t:o);return t===ve(o)&&(l?Vt(n,r)&&Pt(t,"set",s,n):Pt(t,"add",s,n)),c}deleteProperty(t,s){const n=pe(t,s);t[s];const o=Reflect.deleteProperty(t,s);return o&&n&&Pt(t,"delete",s,void 0),o}has(t,s){const n=Reflect.has(t,s);return(!Et(s)||!Ta.has(s))&&qe(t,"has",s),n}ownKeys(t){return qe(t,"iterate",W(t)?"length":ts),Reflect.ownKeys(t)}}class li extends Ia{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const ci=new Oa,ui=new li,di=new Oa(!0);const Xn=e=>e,Vs=e=>Reflect.getPrototypeOf(e);function fi(e,t,s){return function(...n){const o=this.__v_raw,r=ve(o),l=ds(r),c=e==="entries"||e===Symbol.iterator&&l,d=e==="keys"&&l,y=o[e](...n),f=s?Xn:t?Zs:Ue;return!t&&qe(r,"iterate",d?Jn:ts),{next(){const{value:g,done:w}=y.next();return w?{value:g,done:w}:{value:c?[f(g[0]),f(g[1])]:f(g),done:w}},[Symbol.iterator](){return this}}}}function Bs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vi(e,t){const s={get(o){const r=this.__v_raw,l=ve(r),c=ve(o);e||(Vt(o,c)&&qe(l,"get",o),qe(l,"get",c));const{has:d}=Vs(l),y=t?Xn:e?Zs:Ue;if(d.call(l,o))return y(r.get(o));if(d.call(l,c))return y(r.get(c));r!==l&&r.get(o)},get size(){const o=this.__v_raw;return!e&&qe(ve(o),"iterate",ts),o.size},has(o){const r=this.__v_raw,l=ve(r),c=ve(o);return e||(Vt(o,c)&&qe(l,"has",o),qe(l,"has",c)),o===c?r.has(o):r.has(o)||r.has(c)},forEach(o,r){const l=this,c=l.__v_raw,d=ve(c),y=t?Xn:e?Zs:Ue;return!e&&qe(d,"iterate",ts),c.forEach((f,g)=>o.call(r,y(f),y(g),l))}};return je(s,e?{add:Bs("add"),set:Bs("set"),delete:Bs("delete"),clear:Bs("clear")}:{add(o){!t&&!it(o)&&!Kt(o)&&(o=ve(o));const r=ve(this);return Vs(r).has.call(r,o)||(r.add(o),Pt(r,"add",o,o)),this},set(o,r){!t&&!it(r)&&!Kt(r)&&(r=ve(r));const l=ve(this),{has:c,get:d}=Vs(l);let y=c.call(l,o);y||(o=ve(o),y=c.call(l,o));const f=d.call(l,o);return l.set(o,r),y?Vt(r,f)&&Pt(l,"set",o,r):Pt(l,"add",o,r),this},delete(o){const r=ve(this),{has:l,get:c}=Vs(r);let d=l.call(r,o);d||(o=ve(o),d=l.call(r,o)),c&&c.call(r,o);const y=r.delete(o);return d&&Pt(r,"delete",o,void 0),y},clear(){const o=ve(this),r=o.size!==0,l=o.clear();return r&&Pt(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{s[o]=fi(o,e,t)}),s}function ho(e,t){const s=vi(e,t);return(n,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(pe(s,o)&&o in n?s:n,o,r)}const pi={get:ho(!1,!1)},hi={get:ho(!1,!0)},mi={get:ho(!0,!1)};const Pa=new WeakMap,Ma=new WeakMap,Fa=new WeakMap,gi=new WeakMap;function yi(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bi(e){return e.__v_skip||!Object.isExtensible(e)?0:yi(Dr(e))}function Os(e){return Kt(e)?e:mo(e,!1,ci,pi,Pa)}function _i(e){return mo(e,!1,di,hi,Ma)}function Qn(e){return mo(e,!0,ui,mi,Fa)}function mo(e,t,s,n,o){if(!me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=bi(e);if(r===0)return e;const l=o.get(e);if(l)return l;const c=new Proxy(e,r===2?n:s);return o.set(e,c),c}function fs(e){return Kt(e)?fs(e.__v_raw):!!(e&&e.__v_isReactive)}function Kt(e){return!!(e&&e.__v_isReadonly)}function it(e){return!!(e&&e.__v_isShallow)}function go(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function wi(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&ga(e,"__v_skip",!0),e}const Ue=e=>me(e)?Os(e):e,Zs=e=>me(e)?Qn(e):e;function He(e){return e?e.__v_isRef===!0:!1}function F(e){return ki(e,!1)}function ki(e,t){return He(e)?e:new Ci(e,t)}class Ci{constructor(t,s){this.dep=new po,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ve(t),this._value=s?t:Ue(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||it(t)||Kt(t);t=n?t:ve(t),Vt(t,s)&&(this._rawValue=t,this._value=n?t:Ue(t),this.dep.trigger())}}function Xt(e){return He(e)?e.value:e}const Si={get:(e,t,s)=>t==="__v_raw"?e:Xt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return He(o)&&!He(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function Ra(e){return fs(e)?e:new Proxy(e,Si)}class xi{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new po(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ts-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&_e!==this)return Ca(this,!0),!0}get value(){const t=this.dep.track();return Ea(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ei(e,t,s=!1){let n,o;return ne(e)?n=e:(n=e.get,o=e.set),new xi(n,o,s)}const Ks={},en=new WeakMap;let Qt;function Ai(e,t=!1,s=Qt){if(s){let n=en.get(s);n||en.set(s,n=[]),n.push(e)}}function $i(e,t,s=ye){const{immediate:n,deep:o,once:r,scheduler:l,augmentJob:c,call:d}=s,y=I=>o?I:it(I)||o===!1||o===0?Mt(I,1):Mt(I);let f,g,w,E,P=!1,H=!1;if(He(e)?(g=()=>e.value,P=it(e)):fs(e)?(g=()=>y(e),P=!0):W(e)?(H=!0,P=e.some(I=>fs(I)||it(I)),g=()=>e.map(I=>{if(He(I))return I.value;if(fs(I))return y(I);if(ne(I))return d?d(I,2):I()})):ne(e)?t?g=d?()=>d(e,2):e:g=()=>{if(w){Ft();try{w()}finally{Rt()}}const I=Qt;Qt=f;try{return d?d(e,3,[E]):e(E)}finally{Qt=I}}:g=xt,t&&o){const I=g,B=o===!0?1/0:o;g=()=>Mt(I(),B)}const te=ti(),q=()=>{f.stop(),te&&te.active&&lo(te.effects,f)};if(r&&t){const I=t;t=(...B)=>{I(...B),q()}}let Y=H?new Array(e.length).fill(Ks):Ks;const X=I=>{if(!(!(f.flags&1)||!f.dirty&&!I))if(t){const B=f.run();if(o||P||(H?B.some((de,Se)=>Vt(de,Y[Se])):Vt(B,Y))){w&&w();const de=Qt;Qt=f;try{const Se=[B,Y===Ks?void 0:H&&Y[0]===Ks?[]:Y,E];Y=B,d?d(t,3,Se):t(...Se)}finally{Qt=de}}}else f.run()};return c&&c(X),f=new wa(g),f.scheduler=l?()=>l(X,!1):X,E=I=>Ai(I,!1,f),w=f.onStop=()=>{const I=en.get(f);if(I){if(d)d(I,4);else for(const B of I)B();en.delete(f)}},t?n?X(!0):Y=f.run():l?l(X.bind(null,!0),!0):f.run(),q.pause=f.pause.bind(f),q.resume=f.resume.bind(f),q.stop=q,q}function Mt(e,t=1/0,s){if(t<=0||!me(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,He(e))Mt(e.value,t,s);else if(W(e))for(let n=0;n<e.length;n++)Mt(e[n],t,s);else if(pn(e)||ds(e))e.forEach(n=>{Mt(n,t,s)});else if(ha(e)){for(const n in e)Mt(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Mt(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ns(e,t,s,n){try{return n?e(...n):e()}catch(o){_n(o,t,s)}}function ht(e,t,s,n){if(ne(e)){const o=Ns(e,t,s,n);return o&&va(o)&&o.catch(r=>{_n(r,t,s)}),o}if(W(e)){const o=[];for(let r=0;r<e.length;r++)o.push(ht(e[r],t,s,n));return o}}function _n(e,t,s,n=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||ye;if(t){let c=t.parent;const d=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const f=c.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](e,d,y)===!1)return}c=c.parent}if(r){Ft(),Ns(r,null,10,[e,d,y]),Rt();return}}Ti(e,s,o,n,l)}function Ti(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}const Be=[];let _t=-1;const vs=[];let qt=null,cs=0;const Ua=Promise.resolve();let tn=null;function ja(e){const t=tn||Ua;return e?t.then(this?e.bind(this):e):t}function Ii(e){let t=_t+1,s=Be.length;for(;t<s;){const n=t+s>>>1,o=Be[n],r=Ps(o);r<e||r===e&&o.flags&2?t=n+1:s=n}return t}function yo(e){if(!(e.flags&1)){const t=Ps(e),s=Be[Be.length-1];!s||!(e.flags&2)&&t>=Ps(s)?Be.push(e):Be.splice(Ii(t),0,e),e.flags|=1,Na()}}function Na(){tn||(tn=Ua.then(qa))}function Oi(e){W(e)?vs.push(...e):qt&&e.id===-1?qt.splice(cs+1,0,e):e.flags&1||(vs.push(e),e.flags|=1),Na()}function Po(e,t,s=_t+1){for(;s<Be.length;s++){const n=Be[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Be.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function La(e){if(vs.length){const t=[...new Set(vs)].sort((s,n)=>Ps(s)-Ps(n));if(vs.length=0,qt){qt.push(...t);return}for(qt=t,cs=0;cs<qt.length;cs++){const s=qt[cs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}qt=null,cs=0}}const Ps=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qa(e){try{for(_t=0;_t<Be.length;_t++){const t=Be[_t];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ns(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;_t<Be.length;_t++){const t=Be[_t];t&&(t.flags&=-2)}_t=-1,Be.length=0,La(),tn=null,(Be.length||vs.length)&&qa()}}let rt=null,Ha=null;function sn(e){const t=rt;return rt=e,Ha=e&&e.type.__scopeId||null,t}function Da(e,t=rt,s){if(!t||e._n)return e;const n=(...o)=>{n._d&&an(-1);const r=sn(t);let l;try{l=e(...o)}finally{sn(r),n._d&&an(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function Pe(e,t){if(rt===null)return e;const s=En(rt),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,l,c,d=ye]=t[o];r&&(ne(r)&&(r={mounted:r,updated:r}),r.deep&&Mt(l),n.push({dir:r,instance:s,value:l,oldValue:void 0,arg:c,modifiers:d}))}return e}function Gt(e,t,s,n){const o=e.dirs,r=t&&t.dirs;for(let l=0;l<o.length;l++){const c=o[l];r&&(c.oldValue=r[l].value);let d=c.dir[n];d&&(Ft(),ht(d,s,8,[e.el,c,e,t]),Rt())}}const Pi=Symbol("_vte"),Va=e=>e.__isTeleport,Ot=Symbol("_leaveCb"),Ys=Symbol("_enterCb");function Mi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cn(()=>{e.isMounted=!0}),Xa(()=>{e.isUnmounting=!0}),e}const at=[Function,Array],Ba={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:at,onEnter:at,onAfterEnter:at,onEnterCancelled:at,onBeforeLeave:at,onLeave:at,onAfterLeave:at,onLeaveCancelled:at,onBeforeAppear:at,onAppear:at,onAfterAppear:at,onAppearCancelled:at},Ka=e=>{const t=e.subTree;return t.component?Ka(t.component):t},Fi={name:"BaseTransition",props:Ba,setup(e,{slots:t}){const s=yr(),n=Mi();return()=>{const o=t.default&&Wa(t.default(),!0);if(!o||!o.length)return;const r=Ya(o),l=ve(e),{mode:c}=l;if(n.isLeaving)return Dn(r);const d=Mo(r);if(!d)return Dn(r);let y=Zn(d,l,n,s,g=>y=g);d.type!==Ke&&Ms(d,y);let f=s.subTree&&Mo(s.subTree);if(f&&f.type!==Ke&&!Zt(f,d)&&Ka(s).type!==Ke){let g=Zn(f,l,n,s);if(Ms(f,g),c==="out-in"&&d.type!==Ke)return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete g.afterLeave,f=void 0},Dn(r);c==="in-out"&&d.type!==Ke?g.delayLeave=(w,E,P)=>{const H=Ga(n,f);H[String(f.key)]=f,w[Ot]=()=>{E(),w[Ot]=void 0,delete y.delayedLeave,f=void 0},y.delayedLeave=()=>{P(),delete y.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return r}}};function Ya(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Ke){t=s;break}}return t}const Ri=Fi;function Ga(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function Zn(e,t,s,n,o){const{appear:r,mode:l,persisted:c=!1,onBeforeEnter:d,onEnter:y,onAfterEnter:f,onEnterCancelled:g,onBeforeLeave:w,onLeave:E,onAfterLeave:P,onLeaveCancelled:H,onBeforeAppear:te,onAppear:q,onAfterAppear:Y,onAppearCancelled:X}=t,I=String(e.key),B=Ga(s,e),de=(z,ce)=>{z&&ht(z,n,9,ce)},Se=(z,ce)=>{const ae=ce[1];de(z,ce),W(z)?z.every(U=>U.length<=1)&&ae():z.length<=1&&ae()},xe={mode:l,persisted:c,beforeEnter(z){let ce=d;if(!s.isMounted)if(r)ce=te||d;else return;z[Ot]&&z[Ot](!0);const ae=B[I];ae&&Zt(e,ae)&&ae.el[Ot]&&ae.el[Ot](),de(ce,[z])},enter(z){let ce=y,ae=f,U=g;if(!s.isMounted)if(r)ce=q||y,ae=Y||f,U=X||g;else return;let ue=!1;const ge=z[Ys]=Ne=>{ue||(ue=!0,Ne?de(U,[z]):de(ae,[z]),xe.delayedLeave&&xe.delayedLeave(),z[Ys]=void 0)};ce?Se(ce,[z,ge]):ge()},leave(z,ce){const ae=String(e.key);if(z[Ys]&&z[Ys](!0),s.isUnmounting)return ce();de(w,[z]);let U=!1;const ue=z[Ot]=ge=>{U||(U=!0,ce(),ge?de(H,[z]):de(P,[z]),z[Ot]=void 0,B[ae]===e&&delete B[ae])};B[ae]=e,E?Se(E,[z,ue]):ue()},clone(z){const ce=Zn(z,t,s,n,o);return o&&o(ce),ce}};return xe}function Dn(e){if(wn(e))return e=Yt(e),e.children=null,e}function Mo(e){if(!wn(e))return Va(e.type)&&e.children?Ya(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&ne(s.default))return s.default()}}function Ms(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ms(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wa(e,t=!1,s){let n=[],o=0;for(let r=0;r<e.length;r++){let l=e[r];const c=s==null?l.key:String(s)+String(l.key!=null?l.key:r);l.type===oe?(l.patchFlag&128&&o++,n=n.concat(Wa(l.children,t,c))):(t||l.type!==Ke)&&n.push(c!=null?Yt(l,{key:c}):l)}if(o>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}function za(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const nn=new WeakMap;function xs(e,t,s,n,o=!1){if(W(e)){e.forEach((P,H)=>xs(P,t&&(W(t)?t[H]:t),s,n,o));return}if(Es(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&xs(e,t,s,n.component.subTree);return}const r=n.shapeFlag&4?En(n.component):n.el,l=o?null:r,{i:c,r:d}=e,y=t&&t.r,f=c.refs===ye?c.refs={}:c.refs,g=c.setupState,w=ve(g),E=g===ye?fa:P=>pe(w,P);if(y!=null&&y!==d){if(Fo(t),Ie(y))f[y]=null,E(y)&&(g[y]=null);else if(He(y)){y.value=null;const P=t;P.k&&(f[P.k]=null)}}if(ne(d))Ns(d,c,12,[l,f]);else{const P=Ie(d),H=He(d);if(P||H){const te=()=>{if(e.f){const q=P?E(d)?g[d]:f[d]:d.value;if(o)W(q)&&lo(q,r);else if(W(q))q.includes(r)||q.push(r);else if(P)f[d]=[r],E(d)&&(g[d]=f[d]);else{const Y=[r];d.value=Y,e.k&&(f[e.k]=Y)}}else P?(f[d]=l,E(d)&&(g[d]=l)):H&&(d.value=l,e.k&&(f[e.k]=l))};if(l){const q=()=>{te(),nn.delete(e)};q.id=-1,nn.set(e,q),Ze(q,s)}else Fo(e),te()}}}function Fo(e){const t=nn.get(e);t&&(t.flags|=8,nn.delete(e))}gn().requestIdleCallback;gn().cancelIdleCallback;const Es=e=>!!e.type.__asyncLoader,wn=e=>e.type.__isKeepAlive;function Ui(e,t){Ja(e,"a",t)}function ji(e,t){Ja(e,"da",t)}function Ja(e,t,s=Ye){const n=e.__wdc||(e.__wdc=()=>{let o=s;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(kn(t,n,s),s){let o=s.parent;for(;o&&o.parent;)wn(o.parent.vnode)&&Ni(n,t,s,o),o=o.parent}}function Ni(e,t,s,n){const o=kn(t,e,n,!0);Qa(()=>{lo(n[t],o)},s)}function kn(e,t,s=Ye,n=!1){if(s){const o=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...l)=>{Ft();const c=Ls(s),d=ht(t,s,e,l);return c(),Rt(),d});return n?o.unshift(r):o.push(r),r}}const Ut=e=>(t,s=Ye)=>{(!Rs||e==="sp")&&kn(e,(...n)=>t(...n),s)},Li=Ut("bm"),Cn=Ut("m"),qi=Ut("bu"),Hi=Ut("u"),Xa=Ut("bum"),Qa=Ut("um"),Di=Ut("sp"),Vi=Ut("rtg"),Bi=Ut("rtc");function Ki(e,t=Ye){kn("ec",e,t)}const Yi=Symbol.for("v-ndc");function Te(e,t,s,n){let o;const r=s,l=W(e);if(l||Ie(e)){const c=l&&fs(e);let d=!1,y=!1;c&&(d=!it(e),y=Kt(e),e=bn(e)),o=new Array(e.length);for(let f=0,g=e.length;f<g;f++)o[f]=t(d?y?Zs(Ue(e[f])):Ue(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let c=0;c<e;c++)o[c]=t(c+1,c,void 0,r)}else if(me(e))if(e[Symbol.iterator])o=Array.from(e,(c,d)=>t(c,d,void 0,r));else{const c=Object.keys(e);o=new Array(c.length);for(let d=0,y=c.length;d<y;d++){const f=c[d];o[d]=t(e[f],f,d,r)}}else o=[];return o}const eo=e=>e?br(e)?En(e):eo(e.parent):null,As=je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eo(e.parent),$root:e=>eo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>er(e),$forceUpdate:e=>e.f||(e.f=()=>{yo(e.update)}),$nextTick:e=>e.n||(e.n=ja.bind(e.proxy)),$watch:e=>pl.bind(e)}),Vn=(e,t)=>e!==ye&&!e.__isScriptSetup&&pe(e,t),Gi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:o,props:r,accessCache:l,type:c,appContext:d}=e;let y;if(t[0]!=="$"){const E=l[t];if(E!==void 0)switch(E){case 1:return n[t];case 2:return o[t];case 4:return s[t];case 3:return r[t]}else{if(Vn(n,t))return l[t]=1,n[t];if(o!==ye&&pe(o,t))return l[t]=2,o[t];if((y=e.propsOptions[0])&&pe(y,t))return l[t]=3,r[t];if(s!==ye&&pe(s,t))return l[t]=4,s[t];to&&(l[t]=0)}}const f=As[t];let g,w;if(f)return t==="$attrs"&&qe(e.attrs,"get",""),f(e);if((g=c.__cssModules)&&(g=g[t]))return g;if(s!==ye&&pe(s,t))return l[t]=4,s[t];if(w=d.config.globalProperties,pe(w,t))return w[t]},set({_:e},t,s){const{data:n,setupState:o,ctx:r}=e;return Vn(o,t)?(o[t]=s,!0):n!==ye&&pe(n,t)?(n[t]=s,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:o,propsOptions:r,type:l}},c){let d,y;return!!(s[c]||e!==ye&&c[0]!=="$"&&pe(e,c)||Vn(t,c)||(d=r[0])&&pe(d,c)||pe(n,c)||pe(As,c)||pe(o.config.globalProperties,c)||(y=l.__cssModules)&&y[c])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:pe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Ro(e){return W(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let to=!0;function Wi(e){const t=er(e),s=e.proxy,n=e.ctx;to=!1,t.beforeCreate&&Uo(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:l,watch:c,provide:d,inject:y,created:f,beforeMount:g,mounted:w,beforeUpdate:E,updated:P,activated:H,deactivated:te,beforeDestroy:q,beforeUnmount:Y,destroyed:X,unmounted:I,render:B,renderTracked:de,renderTriggered:Se,errorCaptured:xe,serverPrefetch:z,expose:ce,inheritAttrs:ae,components:U,directives:ue,filters:ge}=t;if(y&&zi(y,n,null),l)for(const ie in l){const ee=l[ie];ne(ee)&&(n[ie]=ee.bind(s))}if(o){const ie=o.call(s,s);me(ie)&&(e.data=Os(ie))}if(to=!0,r)for(const ie in r){const ee=r[ie],Me=ne(ee)?ee.bind(s,s):ne(ee.get)?ee.get.bind(s,s):xt,Ee=!ne(ee)&&ne(ee.set)?ee.set.bind(s):xt,Oe=Z({get:Me,set:Ee});Object.defineProperty(n,ie,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:$e=>Oe.value=$e})}if(c)for(const ie in c)Za(c[ie],n,s,ie);if(d){const ie=ne(d)?d.call(s):d;Reflect.ownKeys(ie).forEach(ee=>{tl(ee,ie[ee])})}f&&Uo(f,e,"c");function we(ie,ee){W(ee)?ee.forEach(Me=>ie(Me.bind(s))):ee&&ie(ee.bind(s))}if(we(Li,g),we(Cn,w),we(qi,E),we(Hi,P),we(Ui,H),we(ji,te),we(Ki,xe),we(Bi,de),we(Vi,Se),we(Xa,Y),we(Qa,I),we(Di,z),W(ce))if(ce.length){const ie=e.exposed||(e.exposed={});ce.forEach(ee=>{Object.defineProperty(ie,ee,{get:()=>s[ee],set:Me=>s[ee]=Me,enumerable:!0})})}else e.exposed||(e.exposed={});B&&e.render===xt&&(e.render=B),ae!=null&&(e.inheritAttrs=ae),U&&(e.components=U),ue&&(e.directives=ue),z&&za(e)}function zi(e,t,s=xt){W(e)&&(e=so(e));for(const n in e){const o=e[n];let r;me(o)?"default"in o?r=zs(o.from||n,o.default,!0):r=zs(o.from||n):r=zs(o),He(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[n]=r}}function Uo(e,t,s){ht(W(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function Za(e,t,s,n){let o=n.includes(".")?vr(s,n):()=>s[n];if(Ie(e)){const r=t[e];ne(r)&&st(o,r)}else if(ne(e))st(o,e.bind(s));else if(me(e))if(W(e))e.forEach(r=>Za(r,t,s,n));else{const r=ne(e.handler)?e.handler.bind(s):t[e.handler];ne(r)&&st(o,r,e)}}function er(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,c=r.get(t);let d;return c?d=c:!o.length&&!s&&!n?d=t:(d={},o.length&&o.forEach(y=>on(d,y,l,!0)),on(d,t,l)),me(t)&&r.set(t,d),d}function on(e,t,s,n=!1){const{mixins:o,extends:r}=t;r&&on(e,r,s,!0),o&&o.forEach(l=>on(e,l,s,!0));for(const l in t)if(!(n&&l==="expose")){const c=Ji[l]||s&&s[l];e[l]=c?c(e[l],t[l]):t[l]}return e}const Ji={data:jo,props:No,emits:No,methods:ws,computed:ws,beforeCreate:Ve,created:Ve,beforeMount:Ve,mounted:Ve,beforeUpdate:Ve,updated:Ve,beforeDestroy:Ve,beforeUnmount:Ve,destroyed:Ve,unmounted:Ve,activated:Ve,deactivated:Ve,errorCaptured:Ve,serverPrefetch:Ve,components:ws,directives:ws,watch:Qi,provide:jo,inject:Xi};function jo(e,t){return t?e?function(){return je(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function Xi(e,t){return ws(so(e),so(t))}function so(e){if(W(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ve(e,t){return e?[...new Set([].concat(e,t))]:t}function ws(e,t){return e?je(Object.create(null),e,t):t}function No(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:je(Object.create(null),Ro(e),Ro(t??{})):t}function Qi(e,t){if(!e)return t;if(!t)return e;const s=je(Object.create(null),e);for(const n in t)s[n]=Ve(e[n],t[n]);return s}function tr(){return{app:null,config:{isNativeTag:fa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zi=0;function el(e,t){return function(n,o=null){ne(n)||(n=je({},n)),o!=null&&!me(o)&&(o=null);const r=tr(),l=new WeakSet,c=[];let d=!1;const y=r.app={_uid:Zi++,_component:n,_props:o,_container:null,_context:r,_instance:null,version:Ul,get config(){return r.config},set config(f){},use(f,...g){return l.has(f)||(f&&ne(f.install)?(l.add(f),f.install(y,...g)):ne(f)&&(l.add(f),f(y,...g))),y},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),y},component(f,g){return g?(r.components[f]=g,y):r.components[f]},directive(f,g){return g?(r.directives[f]=g,y):r.directives[f]},mount(f,g,w){if(!d){const E=y._ceVNode||Ce(n,o);return E.appContext=r,w===!0?w="svg":w===!1&&(w=void 0),e(E,f,w),d=!0,y._container=f,f.__vue_app__=y,En(E.component)}},onUnmount(f){c.push(f)},unmount(){d&&(ht(c,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(f,g){return r.provides[f]=g,y},runWithContext(f){const g=ps;ps=y;try{return f()}finally{ps=g}}};return y}}let ps=null;function tl(e,t){if(Ye){let s=Ye.provides;const n=Ye.parent&&Ye.parent.provides;n===s&&(s=Ye.provides=Object.create(n)),s[e]=t}}function zs(e,t,s=!1){const n=yr();if(n||ps){let o=ps?ps._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&ne(t)?t.call(n&&n.proxy):t}}const sr={},nr=()=>Object.create(sr),or=e=>Object.getPrototypeOf(e)===sr;function sl(e,t,s,n=!1){const o={},r=nr();e.propsDefaults=Object.create(null),ar(e,t,o,r);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);s?e.props=n?o:_i(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function nl(e,t,s,n){const{props:o,attrs:r,vnode:{patchFlag:l}}=e,c=ve(o),[d]=e.propsOptions;let y=!1;if((n||l>0)&&!(l&16)){if(l&8){const f=e.vnode.dynamicProps;for(let g=0;g<f.length;g++){let w=f[g];if(Sn(e.emitsOptions,w))continue;const E=t[w];if(d)if(pe(r,w))E!==r[w]&&(r[w]=E,y=!0);else{const P=Bt(w);o[P]=no(d,c,P,E,e,!1)}else E!==r[w]&&(r[w]=E,y=!0)}}}else{ar(e,t,o,r)&&(y=!0);let f;for(const g in c)(!t||!pe(t,g)&&((f=ss(g))===g||!pe(t,f)))&&(d?s&&(s[g]!==void 0||s[f]!==void 0)&&(o[g]=no(d,c,g,void 0,e,!0)):delete o[g]);if(r!==c)for(const g in r)(!t||!pe(t,g))&&(delete r[g],y=!0)}y&&Pt(e.attrs,"set","")}function ar(e,t,s,n){const[o,r]=e.propsOptions;let l=!1,c;if(t)for(let d in t){if(ks(d))continue;const y=t[d];let f;o&&pe(o,f=Bt(d))?!r||!r.includes(f)?s[f]=y:(c||(c={}))[f]=y:Sn(e.emitsOptions,d)||(!(d in n)||y!==n[d])&&(n[d]=y,l=!0)}if(r){const d=ve(s),y=c||ye;for(let f=0;f<r.length;f++){const g=r[f];s[g]=no(o,d,g,y[g],e,!pe(y,g))}}return l}function no(e,t,s,n,o,r){const l=e[s];if(l!=null){const c=pe(l,"default");if(c&&n===void 0){const d=l.default;if(l.type!==Function&&!l.skipFactory&&ne(d)){const{propsDefaults:y}=o;if(s in y)n=y[s];else{const f=Ls(o);n=y[s]=d.call(null,t),f()}}else n=d;o.ce&&o.ce._setProp(s,n)}l[0]&&(r&&!c?n=!1:l[1]&&(n===""||n===ss(s))&&(n=!0))}return n}const ol=new WeakMap;function rr(e,t,s=!1){const n=s?ol:t.propsCache,o=n.get(e);if(o)return o;const r=e.props,l={},c=[];let d=!1;if(!ne(e)){const f=g=>{d=!0;const[w,E]=rr(g,t,!0);je(l,w),E&&c.push(...E)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!d)return me(e)&&n.set(e,us),us;if(W(r))for(let f=0;f<r.length;f++){const g=Bt(r[f]);Lo(g)&&(l[g]=ye)}else if(r)for(const f in r){const g=Bt(f);if(Lo(g)){const w=r[f],E=l[g]=W(w)||ne(w)?{type:w}:je({},w),P=E.type;let H=!1,te=!0;if(W(P))for(let q=0;q<P.length;++q){const Y=P[q],X=ne(Y)&&Y.name;if(X==="Boolean"){H=!0;break}else X==="String"&&(te=!1)}else H=ne(P)&&P.name==="Boolean";E[0]=H,E[1]=te,(H||pe(E,"default"))&&c.push(g)}}const y=[l,c];return me(e)&&n.set(e,y),y}function Lo(e){return e[0]!=="$"&&!ks(e)}const bo=e=>e==="_"||e==="_ctx"||e==="$stable",_o=e=>W(e)?e.map(kt):[kt(e)],al=(e,t,s)=>{if(t._n)return t;const n=Da((...o)=>_o(t(...o)),s);return n._c=!1,n},ir=(e,t,s)=>{const n=e._ctx;for(const o in e){if(bo(o))continue;const r=e[o];if(ne(r))t[o]=al(o,r,n);else if(r!=null){const l=_o(r);t[o]=()=>l}}},lr=(e,t)=>{const s=_o(t);e.slots.default=()=>s},cr=(e,t,s)=>{for(const n in t)(s||!bo(n))&&(e[n]=t[n])},rl=(e,t,s)=>{const n=e.slots=nr();if(e.vnode.shapeFlag&32){const o=t._;o?(cr(n,t,s),s&&ga(n,"_",o,!0)):ir(t,n)}else t&&lr(e,t)},il=(e,t,s)=>{const{vnode:n,slots:o}=e;let r=!0,l=ye;if(n.shapeFlag&32){const c=t._;c?s&&c===1?r=!1:cr(o,t,s):(r=!t.$stable,ir(t,o)),l=t}else t&&(lr(e,t),l={default:1});if(r)for(const c in o)!bo(c)&&l[c]==null&&delete o[c]},Ze=kl;function ll(e){return cl(e)}function cl(e,t){const s=gn();s.__VUE__=!0;const{insert:n,remove:o,patchProp:r,createElement:l,createText:c,createComment:d,setText:y,setElementText:f,parentNode:g,nextSibling:w,setScopeId:E=xt,insertStaticContent:P}=e,H=(v,u,p,h=null,C=null,k=null,$=void 0,O=null,M=!!u.dynamicChildren)=>{if(v===u)return;v&&!Zt(v,u)&&(h=ut(v),$e(v,C,k,!0),v=null),u.patchFlag===-2&&(M=!1,u.dynamicChildren=null);const{type:T,ref:D,shapeFlag:L}=u;switch(T){case xn:te(v,u,p,h);break;case Ke:q(v,u,p,h);break;case Js:v==null&&Y(u,p,h,$);break;case oe:U(v,u,p,h,C,k,$,O,M);break;default:L&1?B(v,u,p,h,C,k,$,O,M):L&6?ue(v,u,p,h,C,k,$,O,M):(L&64||L&128)&&T.process(v,u,p,h,C,k,$,O,M,j)}D!=null&&C?xs(D,v&&v.ref,k,u||v,!u):D==null&&v&&v.ref!=null&&xs(v.ref,null,k,v,!0)},te=(v,u,p,h)=>{if(v==null)n(u.el=c(u.children),p,h);else{const C=u.el=v.el;u.children!==v.children&&y(C,u.children)}},q=(v,u,p,h)=>{v==null?n(u.el=d(u.children||""),p,h):u.el=v.el},Y=(v,u,p,h)=>{[v.el,v.anchor]=P(v.children,u,p,h,v.el,v.anchor)},X=({el:v,anchor:u},p,h)=>{let C;for(;v&&v!==u;)C=w(v),n(v,p,h),v=C;n(u,p,h)},I=({el:v,anchor:u})=>{let p;for(;v&&v!==u;)p=w(v),o(v),v=p;o(u)},B=(v,u,p,h,C,k,$,O,M)=>{if(u.type==="svg"?$="svg":u.type==="math"&&($="mathml"),v==null)de(u,p,h,C,k,$,O,M);else{const T=v.el&&v.el._isVueCE?v.el:null;try{T&&T._beginPatch(),z(v,u,C,k,$,O,M)}finally{T&&T._endPatch()}}},de=(v,u,p,h,C,k,$,O)=>{let M,T;const{props:D,shapeFlag:L,transition:V,dirs:G}=v;if(M=v.el=l(v.type,k,D&&D.is,D),L&8?f(M,v.children):L&16&&xe(v.children,M,null,h,C,Bn(v,k),$,O),G&&Gt(v,null,h,"created"),Se(M,v,v.scopeId,$,h),D){for(const fe in D)fe!=="value"&&!ks(fe)&&r(M,fe,null,D[fe],k,h);"value"in D&&r(M,"value",null,D.value,k),(T=D.onVnodeBeforeMount)&&gt(T,h,v)}G&&Gt(v,null,h,"beforeMount");const re=ul(C,V);re&&V.beforeEnter(M),n(M,u,p),((T=D&&D.onVnodeMounted)||re||G)&&Ze(()=>{T&&gt(T,h,v),re&&V.enter(M),G&&Gt(v,null,h,"mounted")},C)},Se=(v,u,p,h,C)=>{if(p&&E(v,p),h)for(let k=0;k<h.length;k++)E(v,h[k]);if(C){let k=C.subTree;if(u===k||hr(k.type)&&(k.ssContent===u||k.ssFallback===u)){const $=C.vnode;Se(v,$,$.scopeId,$.slotScopeIds,C.parent)}}},xe=(v,u,p,h,C,k,$,O,M=0)=>{for(let T=M;T<v.length;T++){const D=v[T]=O?Ht(v[T]):kt(v[T]);H(null,D,u,p,h,C,k,$,O)}},z=(v,u,p,h,C,k,$)=>{const O=u.el=v.el;let{patchFlag:M,dynamicChildren:T,dirs:D}=u;M|=v.patchFlag&16;const L=v.props||ye,V=u.props||ye;let G;if(p&&Wt(p,!1),(G=V.onVnodeBeforeUpdate)&&gt(G,p,u,v),D&&Gt(u,v,p,"beforeUpdate"),p&&Wt(p,!0),(L.innerHTML&&V.innerHTML==null||L.textContent&&V.textContent==null)&&f(O,""),T?ce(v.dynamicChildren,T,O,p,h,Bn(u,C),k):$||ee(v,u,O,null,p,h,Bn(u,C),k,!1),M>0){if(M&16)ae(O,L,V,p,C);else if(M&2&&L.class!==V.class&&r(O,"class",null,V.class,C),M&4&&r(O,"style",L.style,V.style,C),M&8){const re=u.dynamicProps;for(let fe=0;fe<re.length;fe++){const le=re[fe],Re=L[le],Fe=V[le];(Fe!==Re||le==="value")&&r(O,le,Re,Fe,C,p)}}M&1&&v.children!==u.children&&f(O,u.children)}else!$&&T==null&&ae(O,L,V,p,C);((G=V.onVnodeUpdated)||D)&&Ze(()=>{G&&gt(G,p,u,v),D&&Gt(u,v,p,"updated")},h)},ce=(v,u,p,h,C,k,$)=>{for(let O=0;O<u.length;O++){const M=v[O],T=u[O],D=M.el&&(M.type===oe||!Zt(M,T)||M.shapeFlag&198)?g(M.el):p;H(M,T,D,null,h,C,k,$,!0)}},ae=(v,u,p,h,C)=>{if(u!==p){if(u!==ye)for(const k in u)!ks(k)&&!(k in p)&&r(v,k,u[k],null,C,h);for(const k in p){if(ks(k))continue;const $=p[k],O=u[k];$!==O&&k!=="value"&&r(v,k,O,$,C,h)}"value"in p&&r(v,"value",u.value,p.value,C)}},U=(v,u,p,h,C,k,$,O,M)=>{const T=u.el=v?v.el:c(""),D=u.anchor=v?v.anchor:c("");let{patchFlag:L,dynamicChildren:V,slotScopeIds:G}=u;G&&(O=O?O.concat(G):G),v==null?(n(T,p,h),n(D,p,h),xe(u.children||[],p,D,C,k,$,O,M)):L>0&&L&64&&V&&v.dynamicChildren?(ce(v.dynamicChildren,V,p,C,k,$,O),(u.key!=null||C&&u===C.subTree)&&ur(v,u,!0)):ee(v,u,p,D,C,k,$,O,M)},ue=(v,u,p,h,C,k,$,O,M)=>{u.slotScopeIds=O,v==null?u.shapeFlag&512?C.ctx.activate(u,p,h,$,M):ge(u,p,h,C,k,$,M):Ne(v,u,M)},ge=(v,u,p,h,C,k,$)=>{const O=v.component=Tl(v,h,C);if(wn(v)&&(O.ctx.renderer=j),Il(O,!1,$),O.asyncDep){if(C&&C.registerDep(O,we,$),!v.el){const M=O.subTree=Ce(Ke);q(null,M,u,p),v.placeholder=M.el}}else we(O,v,u,p,C,k,$)},Ne=(v,u,p)=>{const h=u.component=v.component;if(_l(v,u,p))if(h.asyncDep&&!h.asyncResolved){ie(h,u,p);return}else h.next=u,h.update();else u.el=v.el,h.vnode=u},we=(v,u,p,h,C,k,$)=>{const O=()=>{if(v.isMounted){let{next:L,bu:V,u:G,parent:re,vnode:fe}=v;{const Qe=dr(v);if(Qe){L&&(L.el=fe.el,ie(v,L,$)),Qe.asyncDep.then(()=>{v.isUnmounted||O()});return}}let le=L,Re;Wt(v,!1),L?(L.el=fe.el,ie(v,L,$)):L=fe,V&&Ws(V),(Re=L.props&&L.props.onVnodeBeforeUpdate)&&gt(Re,re,L,fe),Wt(v,!0);const Fe=Ho(v),Ge=v.subTree;v.subTree=Fe,H(Ge,Fe,g(Ge.el),ut(Ge),v,C,k),L.el=Fe.el,le===null&&wl(v,Fe.el),G&&Ze(G,C),(Re=L.props&&L.props.onVnodeUpdated)&&Ze(()=>gt(Re,re,L,fe),C)}else{let L;const{el:V,props:G}=u,{bm:re,m:fe,parent:le,root:Re,type:Fe}=v,Ge=Es(u);Wt(v,!1),re&&Ws(re),!Ge&&(L=G&&G.onVnodeBeforeMount)&&gt(L,le,u),Wt(v,!0);{Re.ce&&Re.ce._def.shadowRoot!==!1&&Re.ce._injectChildStyle(Fe);const Qe=v.subTree=Ho(v);H(null,Qe,p,h,v,C,k),u.el=Qe.el}if(fe&&Ze(fe,C),!Ge&&(L=G&&G.onVnodeMounted)){const Qe=u;Ze(()=>gt(L,le,Qe),C)}(u.shapeFlag&256||le&&Es(le.vnode)&&le.vnode.shapeFlag&256)&&v.a&&Ze(v.a,C),v.isMounted=!0,u=p=h=null}};v.scope.on();const M=v.effect=new wa(O);v.scope.off();const T=v.update=M.run.bind(M),D=v.job=M.runIfDirty.bind(M);D.i=v,D.id=v.uid,M.scheduler=()=>yo(D),Wt(v,!0),T()},ie=(v,u,p)=>{u.component=v;const h=v.vnode.props;v.vnode=u,v.next=null,nl(v,u.props,h,p),il(v,u.children,p),Ft(),Po(v),Rt()},ee=(v,u,p,h,C,k,$,O,M=!1)=>{const T=v&&v.children,D=v?v.shapeFlag:0,L=u.children,{patchFlag:V,shapeFlag:G}=u;if(V>0){if(V&128){Ee(T,L,p,h,C,k,$,O,M);return}else if(V&256){Me(T,L,p,h,C,k,$,O,M);return}}G&8?(D&16&&ct(T,C,k),L!==T&&f(p,L)):D&16?G&16?Ee(T,L,p,h,C,k,$,O,M):ct(T,C,k,!0):(D&8&&f(p,""),G&16&&xe(L,p,h,C,k,$,O,M))},Me=(v,u,p,h,C,k,$,O,M)=>{v=v||us,u=u||us;const T=v.length,D=u.length,L=Math.min(T,D);let V;for(V=0;V<L;V++){const G=u[V]=M?Ht(u[V]):kt(u[V]);H(v[V],G,p,null,C,k,$,O,M)}T>D?ct(v,C,k,!0,!1,L):xe(u,p,h,C,k,$,O,M,L)},Ee=(v,u,p,h,C,k,$,O,M)=>{let T=0;const D=u.length;let L=v.length-1,V=D-1;for(;T<=L&&T<=V;){const G=v[T],re=u[T]=M?Ht(u[T]):kt(u[T]);if(Zt(G,re))H(G,re,p,null,C,k,$,O,M);else break;T++}for(;T<=L&&T<=V;){const G=v[L],re=u[V]=M?Ht(u[V]):kt(u[V]);if(Zt(G,re))H(G,re,p,null,C,k,$,O,M);else break;L--,V--}if(T>L){if(T<=V){const G=V+1,re=G<D?u[G].el:h;for(;T<=V;)H(null,u[T]=M?Ht(u[T]):kt(u[T]),p,re,C,k,$,O,M),T++}}else if(T>V)for(;T<=L;)$e(v[T],C,k,!0),T++;else{const G=T,re=T,fe=new Map;for(T=re;T<=V;T++){const Le=u[T]=M?Ht(u[T]):kt(u[T]);Le.key!=null&&fe.set(Le.key,T)}let le,Re=0;const Fe=V-re+1;let Ge=!1,Qe=0;const ft=new Array(Fe);for(T=0;T<Fe;T++)ft[T]=0;for(T=G;T<=L;T++){const Le=v[T];if(Re>=Fe){$e(Le,C,k,!0);continue}let nt;if(Le.key!=null)nt=fe.get(Le.key);else for(le=re;le<=V;le++)if(ft[le-re]===0&&Zt(Le,u[le])){nt=le;break}nt===void 0?$e(Le,C,k,!0):(ft[nt-re]=T+1,nt>=Qe?Qe=nt:Ge=!0,H(Le,u[nt],p,null,C,k,$,O,M),Re++)}const ms=Ge?dl(ft):us;for(le=ms.length-1,T=Fe-1;T>=0;T--){const Le=re+T,nt=u[Le],ns=u[Le+1],ot=Le+1<D?ns.el||ns.placeholder:h;ft[T]===0?H(null,nt,p,ot,C,k,$,O,M):Ge&&(le<0||T!==ms[le]?Oe(nt,p,ot,2):le--)}}},Oe=(v,u,p,h,C=null)=>{const{el:k,type:$,transition:O,children:M,shapeFlag:T}=v;if(T&6){Oe(v.component.subTree,u,p,h);return}if(T&128){v.suspense.move(u,p,h);return}if(T&64){$.move(v,u,p,j);return}if($===oe){n(k,u,p);for(let L=0;L<M.length;L++)Oe(M[L],u,p,h);n(v.anchor,u,p);return}if($===Js){X(v,u,p);return}if(h!==2&&T&1&&O)if(h===0)O.beforeEnter(k),n(k,u,p),Ze(()=>O.enter(k),C);else{const{leave:L,delayLeave:V,afterLeave:G}=O,re=()=>{v.ctx.isUnmounted?o(k):n(k,u,p)},fe=()=>{k._isLeaving&&k[Ot](!0),L(k,()=>{re(),G&&G()})};V?V(k,re,fe):fe()}else n(k,u,p)},$e=(v,u,p,h=!1,C=!1)=>{const{type:k,props:$,ref:O,children:M,dynamicChildren:T,shapeFlag:D,patchFlag:L,dirs:V,cacheIndex:G}=v;if(L===-2&&(C=!1),O!=null&&(Ft(),xs(O,null,p,v,!0),Rt()),G!=null&&(u.renderCache[G]=void 0),D&256){u.ctx.deactivate(v);return}const re=D&1&&V,fe=!Es(v);let le;if(fe&&(le=$&&$.onVnodeBeforeUnmount)&&gt(le,u,v),D&6)At(v.component,p,h);else{if(D&128){v.suspense.unmount(p,h);return}re&&Gt(v,null,u,"beforeUnmount"),D&64?v.type.remove(v,u,p,j,h):T&&!T.hasOnce&&(k!==oe||L>0&&L&64)?ct(T,u,p,!1,!0):(k===oe&&L&384||!C&&D&16)&&ct(M,u,p),h&&De(v)}(fe&&(le=$&&$.onVnodeUnmounted)||re)&&Ze(()=>{le&&gt(le,u,v),re&&Gt(v,null,u,"unmounted")},p)},De=v=>{const{type:u,el:p,anchor:h,transition:C}=v;if(u===oe){Xe(p,h);return}if(u===Js){I(v);return}const k=()=>{o(p),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(v.shapeFlag&1&&C&&!C.persisted){const{leave:$,delayLeave:O}=C,M=()=>$(p,k);O?O(v.el,k,M):M()}else k()},Xe=(v,u)=>{let p;for(;v!==u;)p=w(v),o(v),v=p;o(u)},At=(v,u,p)=>{const{bum:h,scope:C,job:k,subTree:$,um:O,m:M,a:T}=v;qo(M),qo(T),h&&Ws(h),C.stop(),k&&(k.flags|=8,$e($,v,u,p)),O&&Ze(O,u),Ze(()=>{v.isUnmounted=!0},u)},ct=(v,u,p,h=!1,C=!1,k=0)=>{for(let $=k;$<v.length;$++)$e(v[$],u,p,h,C)},ut=v=>{if(v.shapeFlag&6)return ut(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const u=w(v.anchor||v.el),p=u&&u[Pi];return p?w(p):u};let dt=!1;const mt=(v,u,p)=>{v==null?u._vnode&&$e(u._vnode,null,null,!0):H(u._vnode||null,v,u,null,null,null,p),u._vnode=v,dt||(dt=!0,Po(),La(),dt=!1)},j={p:H,um:$e,m:Oe,r:De,mt:ge,mc:xe,pc:ee,pbc:ce,n:ut,o:e};return{render:mt,hydrate:void 0,createApp:el(mt)}}function Bn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Wt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ul(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ur(e,t,s=!1){const n=e.children,o=t.children;if(W(n)&&W(o))for(let r=0;r<n.length;r++){const l=n[r];let c=o[r];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=o[r]=Ht(o[r]),c.el=l.el),!s&&c.patchFlag!==-2&&ur(l,c)),c.type===xn&&c.patchFlag!==-1&&(c.el=l.el),c.type===Ke&&!c.el&&(c.el=l.el)}}function dl(e){const t=e.slice(),s=[0];let n,o,r,l,c;const d=e.length;for(n=0;n<d;n++){const y=e[n];if(y!==0){if(o=s[s.length-1],e[o]<y){t[n]=o,s.push(n);continue}for(r=0,l=s.length-1;r<l;)c=r+l>>1,e[s[c]]<y?r=c+1:l=c;y<e[s[r]]&&(r>0&&(t[n]=s[r-1]),s[r]=n)}}for(r=s.length,l=s[r-1];r-- >0;)s[r]=l,l=t[l];return s}function dr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:dr(t)}function qo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fl=Symbol.for("v-scx"),vl=()=>zs(fl);function st(e,t,s){return fr(e,t,s)}function fr(e,t,s=ye){const{immediate:n,deep:o,flush:r,once:l}=s,c=je({},s),d=t&&n||!t&&r!=="post";let y;if(Rs){if(r==="sync"){const E=vl();y=E.__watcherHandles||(E.__watcherHandles=[])}else if(!d){const E=()=>{};return E.stop=xt,E.resume=xt,E.pause=xt,E}}const f=Ye;c.call=(E,P,H)=>ht(E,f,P,H);let g=!1;r==="post"?c.scheduler=E=>{Ze(E,f&&f.suspense)}:r!=="sync"&&(g=!0,c.scheduler=(E,P)=>{P?E():yo(E)}),c.augmentJob=E=>{t&&(E.flags|=4),g&&(E.flags|=2,f&&(E.id=f.uid,E.i=f))};const w=$i(e,t,c);return Rs&&(y?y.push(w):d&&w()),w}function pl(e,t,s){const n=this.proxy,o=Ie(e)?e.includes(".")?vr(n,e):()=>n[e]:e.bind(n,n);let r;ne(t)?r=t:(r=t.handler,s=t);const l=Ls(this),c=fr(o,r.bind(n),s);return l(),c}function vr(e,t){const s=t.split(".");return()=>{let n=e;for(let o=0;o<s.length&&n;o++)n=n[s[o]];return n}}const hl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Bt(t)}Modifiers`]||e[`${ss(t)}Modifiers`];function ml(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||ye;let o=s;const r=t.startsWith("update:"),l=r&&hl(n,t.slice(7));l&&(l.trim&&(o=s.map(f=>Ie(f)?f.trim():f)),l.number&&(o=s.map(mn)));let c,d=n[c=jn(t)]||n[c=jn(Bt(t))];!d&&r&&(d=n[c=jn(ss(t))]),d&&ht(d,e,6,o);const y=n[c+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,ht(y,e,6,o)}}const gl=new WeakMap;function pr(e,t,s=!1){const n=s?gl:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const r=e.emits;let l={},c=!1;if(!ne(e)){const d=y=>{const f=pr(y,t,!0);f&&(c=!0,je(l,f))};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!r&&!c?(me(e)&&n.set(e,null),null):(W(r)?r.forEach(d=>l[d]=null):je(l,r),me(e)&&n.set(e,l),l)}function Sn(e,t){return!e||!vn(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,ss(t))||pe(e,t))}function Ho(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[r],slots:l,attrs:c,emit:d,render:y,renderCache:f,props:g,data:w,setupState:E,ctx:P,inheritAttrs:H}=e,te=sn(e);let q,Y;try{if(s.shapeFlag&4){const I=o||n,B=I;q=kt(y.call(B,I,f,g,E,w,P)),Y=c}else{const I=t;q=kt(I.length>1?I(g,{attrs:c,slots:l,emit:d}):I(g,null)),Y=t.props?c:yl(c)}}catch(I){$s.length=0,_n(I,e,1),q=Ce(Ke)}let X=q;if(Y&&H!==!1){const I=Object.keys(Y),{shapeFlag:B}=X;I.length&&B&7&&(r&&I.some(io)&&(Y=bl(Y,r)),X=Yt(X,Y,!1,!0))}return s.dirs&&(X=Yt(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(s.dirs):s.dirs),s.transition&&Ms(X,s.transition),q=X,sn(te),q}const yl=e=>{let t;for(const s in e)(s==="class"||s==="style"||vn(s))&&((t||(t={}))[s]=e[s]);return t},bl=(e,t)=>{const s={};for(const n in e)(!io(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function _l(e,t,s){const{props:n,children:o,component:r}=e,{props:l,children:c,patchFlag:d}=t,y=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&d>=0){if(d&1024)return!0;if(d&16)return n?Do(n,l,y):!!l;if(d&8){const f=t.dynamicProps;for(let g=0;g<f.length;g++){const w=f[g];if(l[w]!==n[w]&&!Sn(y,w))return!0}}}else return(o||c)&&(!c||!c.$stable)?!0:n===l?!1:n?l?Do(n,l,y):!0:!!l;return!1}function Do(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const r=n[o];if(t[r]!==e[r]&&!Sn(s,r))return!0}return!1}function wl({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const hr=e=>e.__isSuspense;function kl(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):Oi(e)}const oe=Symbol.for("v-fgt"),xn=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),Js=Symbol.for("v-stc"),$s=[];let tt=null;function b(e=!1){$s.push(tt=e?null:[])}function Cl(){$s.pop(),tt=$s[$s.length-1]||null}let Fs=1;function an(e,t=!1){Fs+=e,e<0&&tt&&t&&(tt.hasOnce=!0)}function mr(e){return e.dynamicChildren=Fs>0?tt||us:null,Cl(),Fs>0&&tt&&tt.push(e),e}function _(e,t,s,n,o,r){return mr(a(e,t,s,n,o,r,!0))}function rn(e,t,s,n,o){return mr(Ce(e,t,s,n,o,!0))}function ln(e){return e?e.__v_isVNode===!0:!1}function Zt(e,t){return e.type===t.type&&e.key===t.key}const gr=({key:e})=>e??null,Xs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ie(e)||He(e)||ne(e)?{i:rt,r:e,k:t,f:!!s}:e:null);function a(e,t=null,s=null,n=0,o=null,r=e===oe?0:1,l=!1,c=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&gr(t),ref:t&&Xs(t),scopeId:Ha,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:rt};return c?(wo(d,s),r&128&&e.normalize(d)):s&&(d.shapeFlag|=Ie(s)?8:16),Fs>0&&!l&&tt&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&tt.push(d),d}const Ce=Sl;function Sl(e,t=null,s=null,n=0,o=null,r=!1){if((!e||e===Yi)&&(e=Ke),ln(e)){const c=Yt(e,t,!0);return s&&wo(c,s),Fs>0&&!r&&tt&&(c.shapeFlag&6?tt[tt.indexOf(e)]=c:tt.push(c)),c.patchFlag=-2,c}if(Fl(e)&&(e=e.__vccOpts),t){t=xl(t);let{class:c,style:d}=t;c&&!Ie(c)&&(t.class=se(c)),me(d)&&(go(d)&&!W(d)&&(d=je({},d)),t.style=wt(d))}const l=Ie(e)?1:hr(e)?128:Va(e)?64:me(e)?4:ne(e)?2:0;return a(e,t,s,n,o,l,r,!0)}function xl(e){return e?go(e)||or(e)?je({},e):e:null}function Yt(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:l,children:c,transition:d}=e,y=t?El(o||{},t):o,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&gr(y),ref:t&&t.ref?s&&r?W(r)?r.concat(Xs(t)):[r,Xs(t)]:Xs(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yt(e.ssContent),ssFallback:e.ssFallback&&Yt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&n&&Ms(f,d.clone(f)),f}function Q(e=" ",t=0){return Ce(xn,null,e,t)}function et(e,t){const s=Ce(Js,null,e);return s.staticCount=t,s}function K(e="",t=!1){return t?(b(),rn(Ke,null,e)):Ce(Ke,null,e)}function kt(e){return e==null||typeof e=="boolean"?Ce(Ke):W(e)?Ce(oe,null,e.slice()):ln(e)?Ht(e):Ce(xn,null,String(e))}function Ht(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yt(e)}function wo(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(W(t))s=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),wo(e,o()),o._c&&(o._d=!0));return}else{s=32;const o=t._;!o&&!or(t)?t._ctx=rt:o===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:rt},s=32):(t=String(t),n&64?(s=16,t=[Q(t)]):s=8);e.children=t,e.shapeFlag|=s}function El(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=se([t.class,n.class]));else if(o==="style")t.style=wt([t.style,n.style]);else if(vn(o)){const r=t[o],l=n[o];l&&r!==l&&!(W(r)&&r.includes(l))&&(t[o]=r?[].concat(r,l):l)}else o!==""&&(t[o]=n[o])}return t}function gt(e,t,s,n=null){ht(e,t,7,[s,n])}const Al=tr();let $l=0;function Tl(e,t,s){const n=e.type,o=(t?t.appContext:e.appContext)||Al,r={uid:$l++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ei(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rr(n,o),emitsOptions:pr(n,o),emit:null,emitted:null,propsDefaults:ye,inheritAttrs:n.inheritAttrs,ctx:ye,data:ye,props:ye,attrs:ye,slots:ye,refs:ye,setupState:ye,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=ml.bind(null,r),e.ce&&e.ce(r),r}let Ye=null;const yr=()=>Ye||rt;let cn,oo;{const e=gn(),t=(s,n)=>{let o;return(o=e[s])||(o=e[s]=[]),o.push(n),r=>{o.length>1?o.forEach(l=>l(r)):o[0](r)}};cn=t("__VUE_INSTANCE_SETTERS__",s=>Ye=s),oo=t("__VUE_SSR_SETTERS__",s=>Rs=s)}const Ls=e=>{const t=Ye;return cn(e),e.scope.on(),()=>{e.scope.off(),cn(t)}},Vo=()=>{Ye&&Ye.scope.off(),cn(null)};function br(e){return e.vnode.shapeFlag&4}let Rs=!1;function Il(e,t=!1,s=!1){t&&oo(t);const{props:n,children:o}=e.vnode,r=br(e);sl(e,n,r,t),rl(e,o,s||t);const l=r?Ol(e,t):void 0;return t&&oo(!1),l}function Ol(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Gi);const{setup:n}=s;if(n){Ft();const o=e.setupContext=n.length>1?Ml(e):null,r=Ls(e),l=Ns(n,e,0,[e.props,o]),c=va(l);if(Rt(),r(),(c||e.sp)&&!Es(e)&&za(e),c){if(l.then(Vo,Vo),t)return l.then(d=>{Bo(e,d)}).catch(d=>{_n(d,e,0)});e.asyncDep=l}else Bo(e,l)}else _r(e)}function Bo(e,t,s){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:me(t)&&(e.setupState=Ra(t)),_r(e)}function _r(e,t,s){const n=e.type;e.render||(e.render=n.render||xt);{const o=Ls(e);Ft();try{Wi(e)}finally{Rt(),o()}}}const Pl={get(e,t){return qe(e,"get",""),e[t]}};function Ml(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Pl),slots:e.slots,emit:e.emit,expose:t}}function En(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ra(wi(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in As)return As[s](e)},has(t,s){return s in t||s in As}})):e.proxy}function Fl(e){return ne(e)&&"__vccOpts"in e}const Z=(e,t)=>Ei(e,t,Rs);function Rl(e,t,s){try{an(-1);const n=arguments.length;return n===2?me(t)&&!W(t)?ln(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&ln(s)&&(s=[s]),Ce(e,t,s))}finally{an(1)}}const Ul="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ao;const Ko=typeof window<"u"&&window.trustedTypes;if(Ko)try{ao=Ko.createPolicy("vue",{createHTML:e=>e})}catch{}const wr=ao?e=>ao.createHTML(e):e=>e,jl="http://www.w3.org/2000/svg",Nl="http://www.w3.org/1998/Math/MathML",It=typeof document<"u"?document:null,Yo=It&&It.createElement("template"),Ll={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o=t==="svg"?It.createElementNS(jl,e):t==="mathml"?It.createElementNS(Nl,e):s?It.createElement(e,{is:s}):It.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>It.createTextNode(e),createComment:e=>It.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>It.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,r){const l=s?s.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),!(o===r||!(o=o.nextSibling)););else{Yo.innerHTML=wr(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const c=Yo.content;if(n==="svg"||n==="mathml"){const d=c.firstChild;for(;d.firstChild;)c.appendChild(d.firstChild);c.removeChild(d)}t.insertBefore(c,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Lt="transition",bs="animation",Us=Symbol("_vtc"),kr={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ql=je({},Ba,kr),Hl=e=>(e.displayName="Transition",e.props=ql,e),Dl=Hl((e,{slots:t})=>Rl(Ri,Vl(e),t)),zt=(e,t=[])=>{W(e)?e.forEach(s=>s(...t)):e&&e(...t)},Go=e=>e?W(e)?e.some(t=>t.length>1):e.length>1:!1;function Vl(e){const t={};for(const U in e)U in kr||(t[U]=e[U]);if(e.css===!1)return t;const{name:s="v",type:n,duration:o,enterFromClass:r=`${s}-enter-from`,enterActiveClass:l=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:d=r,appearActiveClass:y=l,appearToClass:f=c,leaveFromClass:g=`${s}-leave-from`,leaveActiveClass:w=`${s}-leave-active`,leaveToClass:E=`${s}-leave-to`}=e,P=Bl(o),H=P&&P[0],te=P&&P[1],{onBeforeEnter:q,onEnter:Y,onEnterCancelled:X,onLeave:I,onLeaveCancelled:B,onBeforeAppear:de=q,onAppear:Se=Y,onAppearCancelled:xe=X}=t,z=(U,ue,ge,Ne)=>{U._enterCancelled=Ne,Jt(U,ue?f:c),Jt(U,ue?y:l),ge&&ge()},ce=(U,ue)=>{U._isLeaving=!1,Jt(U,g),Jt(U,E),Jt(U,w),ue&&ue()},ae=U=>(ue,ge)=>{const Ne=U?Se:Y,we=()=>z(ue,U,ge);zt(Ne,[ue,we]),Wo(()=>{Jt(ue,U?d:r),Tt(ue,U?f:c),Go(Ne)||zo(ue,n,H,we)})};return je(t,{onBeforeEnter(U){zt(q,[U]),Tt(U,r),Tt(U,l)},onBeforeAppear(U){zt(de,[U]),Tt(U,d),Tt(U,y)},onEnter:ae(!1),onAppear:ae(!0),onLeave(U,ue){U._isLeaving=!0;const ge=()=>ce(U,ue);Tt(U,g),U._enterCancelled?(Tt(U,w),Qo(U)):(Qo(U),Tt(U,w)),Wo(()=>{U._isLeaving&&(Jt(U,g),Tt(U,E),Go(I)||zo(U,n,te,ge))}),zt(I,[U,ge])},onEnterCancelled(U){z(U,!1,void 0,!0),zt(X,[U])},onAppearCancelled(U){z(U,!0,void 0,!0),zt(xe,[U])},onLeaveCancelled(U){ce(U),zt(B,[U])}})}function Bl(e){if(e==null)return null;if(me(e))return[Kn(e.enter),Kn(e.leave)];{const t=Kn(e);return[t,t]}}function Kn(e){return Kr(e)}function Tt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Us]||(e[Us]=new Set)).add(t)}function Jt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[Us];s&&(s.delete(t),s.size||(e[Us]=void 0))}function Wo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Kl=0;function zo(e,t,s,n){const o=e._endId=++Kl,r=()=>{o===e._endId&&n()};if(s!=null)return setTimeout(r,s);const{type:l,timeout:c,propCount:d}=Yl(e,t);if(!l)return n();const y=l+"end";let f=0;const g=()=>{e.removeEventListener(y,w),r()},w=E=>{E.target===e&&++f>=d&&g()};setTimeout(()=>{f<d&&g()},c+1),e.addEventListener(y,w)}function Yl(e,t){const s=window.getComputedStyle(e),n=P=>(s[P]||"").split(", "),o=n(`${Lt}Delay`),r=n(`${Lt}Duration`),l=Jo(o,r),c=n(`${bs}Delay`),d=n(`${bs}Duration`),y=Jo(c,d);let f=null,g=0,w=0;t===Lt?l>0&&(f=Lt,g=l,w=r.length):t===bs?y>0&&(f=bs,g=y,w=d.length):(g=Math.max(l,y),f=g>0?l>y?Lt:bs:null,w=f?f===Lt?r.length:d.length:0);const E=f===Lt&&/\b(?:transform|all)(?:,|$)/.test(n(`${Lt}Property`).toString());return{type:f,timeout:g,propCount:w,hasTransform:E}}function Jo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Xo(s)+Xo(e[n])))}function Xo(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Qo(e){return(e?e.ownerDocument:document).body.offsetHeight}function Gl(e,t,s){const n=e[Us];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const un=Symbol("_vod"),Cr=Symbol("_vsh"),Sr={name:"show",beforeMount(e,{value:t},{transition:s}){e[un]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):_s(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),_s(e,!0),n.enter(e)):n.leave(e,()=>{_s(e,!1)}):_s(e,t))},beforeUnmount(e,{value:t}){_s(e,t)}};function _s(e,t){e.style.display=t?e[un]:"none",e[Cr]=!t}const Wl=Symbol(""),zl=/(?:^|;)\s*display\s*:/;function Jl(e,t,s){const n=e.style,o=Ie(s);let r=!1;if(s&&!o){if(t)if(Ie(t))for(const l of t.split(";")){const c=l.slice(0,l.indexOf(":")).trim();s[c]==null&&Qs(n,c,"")}else for(const l in t)s[l]==null&&Qs(n,l,"");for(const l in s)l==="display"&&(r=!0),Qs(n,l,s[l])}else if(o){if(t!==s){const l=n[Wl];l&&(s+=";"+l),n.cssText=s,r=zl.test(s)}}else t&&e.removeAttribute("style");un in e&&(e[un]=r?n.display:"",e[Cr]&&(n.display="none"))}const Zo=/\s*!important$/;function Qs(e,t,s){if(W(s))s.forEach(n=>Qs(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Xl(e,t);Zo.test(s)?e.setProperty(ss(n),s.replace(Zo,""),"important"):e[n]=s}}const ea=["Webkit","Moz","ms"],Yn={};function Xl(e,t){const s=Yn[t];if(s)return s;let n=Bt(t);if(n!=="filter"&&n in e)return Yn[t]=n;n=ma(n);for(let o=0;o<ea.length;o++){const r=ea[o]+n;if(r in e)return Yn[t]=r}return t}const ta="http://www.w3.org/1999/xlink";function sa(e,t,s,n,o,r=Xr(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ta,t.slice(6,t.length)):e.setAttributeNS(ta,t,s):s==null||r&&!ya(s)?e.removeAttribute(t):e.setAttribute(t,r?"":Et(s)?String(s):s)}function na(e,t,s,n,o){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?wr(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const c=r==="OPTION"?e.getAttribute("value")||"":e.value,d=s==null?e.type==="checkbox"?"on":"":String(s);(c!==d||!("_value"in e))&&(e.value=d),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const c=typeof e[t];c==="boolean"?s=ya(s):s==null&&c==="string"?(s="",l=!0):c==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(o||t)}function es(e,t,s,n){e.addEventListener(t,s,n)}function Ql(e,t,s,n){e.removeEventListener(t,s,n)}const oa=Symbol("_vei");function Zl(e,t,s,n,o=null){const r=e[oa]||(e[oa]={}),l=r[t];if(n&&l)l.value=n;else{const[c,d]=ec(t);if(n){const y=r[t]=nc(n,o);es(e,c,y,d)}else l&&(Ql(e,c,l,d),r[t]=void 0)}}const aa=/(?:Once|Passive|Capture)$/;function ec(e){let t;if(aa.test(e)){t={};let n;for(;n=e.match(aa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ss(e.slice(2)),t]}let Gn=0;const tc=Promise.resolve(),sc=()=>Gn||(tc.then(()=>Gn=0),Gn=Date.now());function nc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ht(oc(n,s.value),t,5,[n])};return s.value=e,s.attached=sc(),s}function oc(e,t){if(W(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const ra=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ac=(e,t,s,n,o,r)=>{const l=o==="svg";t==="class"?Gl(e,n,l):t==="style"?Jl(e,s,n):vn(t)?io(t)||Zl(e,t,s,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rc(e,t,n,l))?(na(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sa(e,t,n,l,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ie(n))?na(e,Bt(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),sa(e,t,n,l))};function rc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ra(t)&&ne(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return ra(t)&&Ie(s)?!1:t in e}const dn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return W(t)?s=>Ws(t,s):t};function ic(e){e.target.composing=!0}function ia(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const hs=Symbol("_assign");function la(e,t,s){return t&&(e=e.trim()),s&&(e=mn(e)),e}const Dt={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[hs]=dn(o);const r=n||o.props&&o.props.type==="number";es(e,t?"change":"input",l=>{l.target.composing||e[hs](la(e.value,s,r))}),(s||r)&&es(e,"change",()=>{e.value=la(e.value,s,r)}),t||(es(e,"compositionstart",ic),es(e,"compositionend",ia),es(e,"change",ia))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:r}},l){if(e[hs]=dn(l),e.composing)return;const c=(r||e.type==="number")&&!/^0\d/.test(e.value)?mn(e.value):e.value,d=t??"";c!==d&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||o&&e.value.trim()===d)||(e.value=d))}},St={deep:!0,created(e,{value:t,modifiers:{number:s}},n){const o=pn(t);es(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?mn(fn(l)):fn(l));e[hs](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,ja(()=>{e._assigning=!1})}),e[hs]=dn(n)},mounted(e,{value:t}){ca(e,t)},beforeUpdate(e,t,s){e[hs]=dn(s)},updated(e,{value:t}){e._assigning||ca(e,t)}};function ca(e,t){const s=e.multiple,n=W(t);if(!(s&&!n&&!pn(t))){for(let o=0,r=e.options.length;o<r;o++){const l=e.options[o],c=fn(l);if(s)if(n){const d=typeof c;d==="string"||d==="number"?l.selected=t.some(y=>String(y)===String(c)):l.selected=Zr(t,c)>-1}else l.selected=t.has(c);else if(yn(fn(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function fn(e){return"_value"in e?e._value:e.value}const lc=["ctrl","shift","alt","meta"],cc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>lc.some(s=>e[`${s}Key`]&&!t.includes(s))},Ct=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(o,...r)=>{for(let l=0;l<t.length;l++){const c=cc[t[l]];if(c&&c(o,t))return}return e(o,...r)})},uc=je({patchProp:ac},Ll);let ua;function dc(){return ua||(ua=ll(uc))}const fc=(...e)=>{const t=dc().createApp(...e),{mount:s}=t;return t.mount=n=>{const o=pc(n);if(!o)return;const r=t._component;!ne(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=s(o,!1,vc(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function vc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function pc(e){return Ie(e)?document.querySelector(e):e}const lt=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},hc={class:"loading-container"},mc={__name:"LoadingState",props:{message:{type:String,default:"Loading student data..."}},setup(e){return(t,s)=>(b(),_("div",hc,[s[0]||(s[0]=a("div",{class:"spinner"},null,-1)),a("p",null,x(e.message),1)]))}},gc=lt(mc,[["__scopeId","data-v-5a5ef9a8"]]),yc={class:"error-container"},bc={__name:"ErrorState",props:{title:{type:String,default:"Something went wrong"},message:{type:String,required:!0},showRetry:{type:Boolean,default:!0}},emits:["retry"],setup(e,{emit:t}){return(s,n)=>(b(),_("div",yc,[n[1]||(n[1]=a("div",{class:"error-icon"},"",-1)),a("h3",null,x(e.title),1),a("p",null,x(e.message),1),e.showRetry?(b(),_("button",{key:0,onClick:n[0]||(n[0]=o=>s.$emit("retry")),class:"retry-button"}," Try Again ")):K("",!0)]))}},_c=lt(bc,[["__scopeId","data-v-fed208d7"]]),wc={class:"staff-overview-header"},kc={class:"header-content"},Cc={class:"header-meta"},Sc={class:"staff-name"},xc={class:"student-count"},Ec={__name:"StaffOverviewHeader",props:{staffMember:{type:Object,required:!0},totalStudents:{type:Number,default:0}},setup(e){const t=e,s={staff_admin:"Staff Admin",tutor:"Tutor",head_of_year:"Head of Year",subject_teacher:"Subject Teacher"},n=Z(()=>{var o;return((o=t.staffMember.roles)==null?void 0:o.map(r=>s[r]||r))||[]});return(o,r)=>(b(),_("div",wc,[a("div",kc,[r[0]||(r[0]=a("h1",null,"Staff Overview",-1)),a("div",Cc,[a("span",Sc,x(e.staffMember.name),1),(b(!0),_(oe,null,Te(n.value,l=>(b(),_("span",{class:"role-badge",key:l},x(l),1))),128)),a("span",xc,x(e.totalStudents)+" students",1)])])]))}},Ac=lt(Ec,[["__scopeId","data-v-af34e02e"]]),$c={class:"filter-bar"},Tc={class:"filter-label-row"},Ic=["title"],Oc=["value"],Pc={class:"filter-label-row"},Mc=["title"],Fc=["value"],Rc={class:"filter-label-row"},Uc=["title"],jc=["value"],Nc={class:"filter-label-row"},Lc=["title"],qc={class:"filter-label-row"},Hc=["title"],Dc={__name:"FilterBar",props:{filters:{type:Object,required:!0},lockedFilters:{type:Object,default:()=>({cycle:!1,group:!1,year:!1,status:!1,search:!1})},preservedValues:{type:Object,default:()=>({})}},emits:["filter-changed","lock-changed"],setup(e,{emit:t}){const s=e,n=t,o=F(String(s.preservedValues.cycle||"1")),r=F(String(s.preservedValues.group||"")),l=F(String(s.preservedValues.year||"")),c=F(String(s.preservedValues.status||"")),d=F(String(s.preservedValues.search||""));st(()=>s.preservedValues,w=>{w.cycle!==void 0&&o.value!==String(w.cycle||"")&&(o.value=String(w.cycle||"")),w.group!==void 0&&r.value!==(w.group||"")&&(r.value=w.group||""),w.year!==void 0&&l.value!==(w.year||"")&&(l.value=w.year||""),w.status!==void 0&&c.value!==(w.status||"")&&(c.value=w.status||""),w.search!==void 0&&d.value!==(w.search||"")&&(d.value=w.search||"")},{deep:!0,immediate:!1});const y=w=>{const E={...s.lockedFilters};E[w]=!E[w],n("lock-changed",E)},f=()=>{n("filter-changed",{cycle:o.value||"",group:r.value||"",year:l.value||"",status:c.value||"",search:d.value||""})},g=()=>{s.lockedFilters.cycle||(o.value="1"),s.lockedFilters.group||(r.value=""),s.lockedFilters.year||(l.value=""),s.lockedFilters.status||(c.value=""),s.lockedFilters.search||(d.value=""),f()};return(w,E)=>(b(),_("div",$c,[a("div",{class:se(["filter-group",{locked:e.lockedFilters.cycle}])},[a("div",Tc,[E[10]||(E[10]=a("label",{for:"cycle-filter"},"Cycle:",-1)),a("button",{onClick:E[0]||(E[0]=P=>y("cycle")),class:"lock-button",title:e.lockedFilters.cycle?"Unlock filter":"Lock filter"},x(e.lockedFilters.cycle?"":""),9,Ic)]),Pe(a("select",{id:"cycle-filter","onUpdate:modelValue":E[1]||(E[1]=P=>o.value=P),onChange:f},[(b(!0),_(oe,null,Te(e.filters.cycles,P=>(b(),_("option",{key:P,value:P}," Cycle "+x(P),9,Oc))),128))],544),[[St,o.value]])],2),a("div",{class:se(["filter-group",{locked:e.lockedFilters.group}])},[a("div",Pc,[E[11]||(E[11]=a("label",{for:"group-filter"},"Group:",-1)),a("button",{onClick:E[2]||(E[2]=P=>y("group")),class:"lock-button",title:e.lockedFilters.group?"Unlock filter":"Lock filter"},x(e.lockedFilters.group?"":""),9,Mc)]),Pe(a("select",{id:"group-filter","onUpdate:modelValue":E[3]||(E[3]=P=>r.value=P),onChange:f},[E[12]||(E[12]=a("option",{value:""},"All Groups",-1)),(b(!0),_(oe,null,Te(e.filters.groups,P=>(b(),_("option",{key:P,value:P},x(P),9,Fc))),128))],544),[[St,r.value]])],2),a("div",{class:se(["filter-group",{locked:e.lockedFilters.year}])},[a("div",Rc,[E[13]||(E[13]=a("label",{for:"year-filter"},"Year:",-1)),a("button",{onClick:E[4]||(E[4]=P=>y("year")),class:"lock-button",title:e.lockedFilters.year?"Unlock filter":"Lock filter"},x(e.lockedFilters.year?"":""),9,Uc)]),Pe(a("select",{id:"year-filter","onUpdate:modelValue":E[5]||(E[5]=P=>l.value=P),onChange:f},[E[14]||(E[14]=a("option",{value:""},"All Years",-1)),(b(!0),_(oe,null,Te(e.filters.yearGroups,P=>(b(),_("option",{key:P,value:P}," Year "+x(P),9,jc))),128))],544),[[St,l.value]])],2),a("div",{class:se(["filter-group",{locked:e.lockedFilters.status}])},[a("div",Nc,[E[15]||(E[15]=a("label",{for:"status-filter"},"Status:",-1)),a("button",{onClick:E[6]||(E[6]=P=>y("status")),class:"lock-button",title:e.lockedFilters.status?"Unlock filter":"Lock filter"},x(e.lockedFilters.status?"":""),9,Lc)]),Pe(a("select",{id:"status-filter","onUpdate:modelValue":E[7]||(E[7]=P=>c.value=P),onChange:f},[...E[16]||(E[16]=[a("option",{value:""},"All Students",-1),a("option",{value:"completed"},"Completed",-1),a("option",{value:"not_completed"},"Not Completed",-1)])],544),[[St,c.value]])],2),a("div",{class:se(["filter-group",{locked:e.lockedFilters.search}])},[a("div",qc,[E[17]||(E[17]=a("label",{for:"search-input"},"Search:",-1)),a("button",{onClick:E[8]||(E[8]=P=>y("search")),class:"lock-button",title:e.lockedFilters.search?"Unlock filter":"Lock filter"},x(e.lockedFilters.search?"":""),9,Hc)]),Pe(a("input",{id:"search-input",type:"text","onUpdate:modelValue":E[9]||(E[9]=P=>d.value=P),onInput:f,placeholder:"Search by name...",class:"search-input"},null,544),[[Dt,d.value]])],2),a("button",{onClick:g,class:"clear-button"},"Clear Filters")]))}},Vc=lt(Dc,[["__scopeId","data-v-36a3b4fc"]]),Bc={class:"smart-filters-section"},Kc={class:"header-left"},Yc={class:"expand-icon"},Gc={key:0,class:"filter-count-badge"},Wc={class:"smart-filters-content"},zc={key:0,class:"no-filters-message"},Jc={key:1,class:"smart-filters-list"},Xc=["onUpdate:modelValue"],Qc=["onUpdate:modelValue"],Zc=["onUpdate:modelValue"],eu=["onClick"],tu={__name:"SmartFilters",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=F(!1),n=e,o=t,r=F([...n.modelValue]);let l=0;const c=()=>{s.value=!s.value},d=()=>{r.value.push({id:`filter-${Date.now()}-${l++}`,dimension:"vision",operator:"gte",value:5}),s.value=!0,f()},y=g=>{r.value.splice(g,1),f()},f=()=>{o("update:modelValue",r.value)};return(g,w)=>(b(),_("div",Bc,[a("div",{class:"smart-filters-header",onClick:c},[a("div",Kc,[a("span",Yc,x(s.value?"":""),1),w[0]||(w[0]=a("h3",null,"Smart Filters",-1)),r.value.length>0?(b(),_("span",Gc,x(r.value.length),1)):K("",!0)]),a("button",{onClick:Ct(d,["stop"]),class:se(["add-filter-button",{compact:!s.value}])}," + ",2)]),Pe(a("div",Wc,[r.value.length===0?(b(),_("div",zc,[...w[1]||(w[1]=[a("p",null,'Click "+ Add Filter" to filter by VESPA scores (e.g., Vision  7)',-1)])])):(b(),_("div",Jc,[(b(!0),_(oe,null,Te(r.value,(E,P)=>(b(),_("div",{key:E.id,class:"smart-filter-row"},[Pe(a("select",{"onUpdate:modelValue":H=>E.dimension=H,onChange:f,class:"filter-select dimension-select"},[...w[2]||(w[2]=[et('<option value="vision" data-v-1f780447>Vision</option><option value="effort" data-v-1f780447>Effort</option><option value="systems" data-v-1f780447>Systems</option><option value="practice" data-v-1f780447>Practice</option><option value="attitude" data-v-1f780447>Attitude</option><option value="overall" data-v-1f780447>Overall</option>',6)])],40,Xc),[[St,E.dimension]]),Pe(a("select",{"onUpdate:modelValue":H=>E.operator=H,onChange:f,class:"filter-select operator-select"},[...w[3]||(w[3]=[et('<option value="gt" data-v-1f780447>Greater than</option><option value="gte" data-v-1f780447>Greater or equal to</option><option value="lt" data-v-1f780447>Less than</option><option value="lte" data-v-1f780447>Less than or equal to</option><option value="eq" data-v-1f780447>Equal to</option>',5)])],40,Qc),[[St,E.operator]]),Pe(a("input",{type:"number","onUpdate:modelValue":H=>E.value=H,onInput:f,min:"0",max:"10",step:"0.1",class:"filter-input value-input",placeholder:"0-10"},null,40,Zc),[[Dt,E.value,void 0,{number:!0}]]),a("button",{onClick:H=>y(P),class:"remove-filter-button",title:"Remove filter"},"  ",8,eu)]))),128))]))],512),[[Sr,s.value]])]))}},su=lt(tu,[["__scopeId","data-v-1f780447"]]),ls=e=>{if(e==null)return"#f5f5f5";const t=parseFloat(e);return t>=9?"#86efac":t>=7?"#bbf7d0":t>=5?"#fed7aa":t>=3?"#fee2e2":"#ffb5bb"},nu={class:"modal-container"},ou={class:"modal-header"},au={class:"modal-body"},ru={class:"text-content"},iu={__name:"TextViewModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"View Text"},text:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=t,n=()=>{s("close")};return(o,r)=>e.isOpen?(b(),_("div",{key:0,class:"modal-overlay",onClick:Ct(n,["self"])},[a("div",nu,[a("div",ou,[a("h3",null,x(e.title),1),a("button",{class:"close-button",onClick:n},"")]),a("div",au,[a("div",ru,x(e.text),1)])])])):K("",!0)}},lu=lt(iu,[["__scopeId","data-v-5ffca5e6"]]),cu={class:"modal-container"},uu={class:"modal-header"},du={class:"modal-body"},fu=["placeholder","disabled"],vu={class:"modal-footer"},pu={key:0,class:"error-text"},hu={class:"button-group"},mu=["disabled"],gu=["disabled"],yu={__name:"EditableTextModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"Edit Text"},text:{type:String,default:""},placeholder:{type:String,default:"Enter text here..."}},emits:["close","save"],setup(e,{emit:t}){const s=e,n=t,o=F(""),r=F(""),l=F(!1),c=F(null);st(()=>[s.isOpen,s.text],([g,w])=>{g&&(o.value=w||"",r.value=w||"",c.value=null)},{immediate:!0});const d=Z(()=>o.value.trim()!==r.value.trim()),y=async()=>{if(d.value){l.value=!0,c.value=null;try{await n("save",o.value),n("close")}catch(g){c.value=g.message||"Failed to save"}finally{l.value=!1}}},f=()=>{d.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")};return(g,w)=>e.isOpen?(b(),_("div",{key:0,class:"modal-overlay",onClick:Ct(f,["self"])},[a("div",cu,[a("div",uu,[a("h3",null,x(e.title),1),a("button",{class:"close-button",onClick:f},"")]),a("div",du,[Pe(a("textarea",{"onUpdate:modelValue":w[0]||(w[0]=E=>o.value=E),class:"edit-textarea",placeholder:e.placeholder,rows:"12",disabled:l.value},null,8,fu),[[Dt,o.value]])]),a("div",vu,[c.value?(b(),_("span",pu,x(c.value),1)):K("",!0),a("div",hu,[a("button",{onClick:f,class:"cancel-button",disabled:l.value}," Cancel ",8,mu),a("button",{onClick:y,class:"save-button",disabled:l.value||!d.value},x(l.value?"Saving...":"Save Changes"),9,gu)])])])])):K("",!0)}},da=lt(yu,[["__scopeId","data-v-e2fc5fac"]]),yt="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",vt={async getStaffOverview(e,t=null){try{let s=`${yt}/api/vespa/staff-overview?email=${encodeURIComponent(e)}`;t!=null&&t!==""&&(s+=`&cycle=${t}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(s){throw console.error("[Staff API] Error fetching overview:",s),s}},async saveStudentGoals(e,t,s){try{console.log("[Staff API] Saving student goals:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});const n=await fetch(`${yt}/api/vespa/report/save-goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,cycle:t,goalText:s.goalText||"",goalSetDate:s.goalSetDate||null,goalDueDate:s.goalDueDate||null,knackRecordId:s.knackRecordId||null})});if(!n.ok){const r=await n.json();throw new Error(r.error||`HTTP error! status: ${n.status}`)}const o=await n.json();return console.log("[Staff API] Goals saved successfully:",o),o}catch(n){throw console.error("[Staff API] Error saving goals:",n),n}},async saveCoachingComments(e,t,s){try{console.log("[Staff API] Saving coaching comments:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});let n=null;if(typeof Knack<"u"&&Knack.getUserAttributes){const l=Knack.getUserAttributes();n=l==null?void 0:l.email}if(!n)throw new Error("Staff email not available");const o=await fetch(`${yt}/api/vespa/report/save-coaching`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,staffEmail:n,cycle:t,coachingText:s.coachingText||"",coachingDate:s.coachingDate||null,knackRecordId:s.knackRecordId||null})});if(!o.ok){const l=await o.json();throw new Error(l.error||`HTTP error! status: ${o.status}`)}const r=await o.json();return console.log("[Staff API] Coaching comments saved successfully:",r),r}catch(n){throw console.error("[Staff API] Error saving coaching comments:",n),n}},async getUcasApplication(e,t="current"){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching UCAS application:",s),s}},async getReferenceFull(e,t="current"){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/reference/full?academicYear=${encodeURIComponent(t)}`,n=await fetch(s);if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching reference full:",s),s}},async saveTutorCompiled(e,t){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled`,n=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error saving tutor compiled narrative:",s),s}},async markTutorCompiledComplete(e,t){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/mark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error marking tutor compiled complete:",s),s}},async unmarkTutorCompiledComplete(e,t){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/unmark-complete`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error unmarking tutor compiled complete:",s),s}},async requestUcasStatementEdits(e,t){try{const s=`${yt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/request-edits`,n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!n.ok){const o=await n.json().catch(()=>null);throw new Error((o==null?void 0:o.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error requesting UCAS statement edits:",s),s}},async getAcademicProfile(e,t="current",s={}){try{const n=new URLSearchParams;t&&n.append("academic_year",t);const o=`${yt}/api/academic-profile/${encodeURIComponent(e)}${n.toString()?`?${n.toString()}`:""}`,r={};s!=null&&s.roleHint&&(r["X-User-Role"]=String(s.roleHint)),s!=null&&s.staffEmail&&(r["X-User-Email"]=String(s.staffEmail));const l=await fetch(o,{headers:r});if(!l.ok){const c=await l.json().catch(()=>null);throw new Error((c==null?void 0:c.error)||`HTTP error! status: ${l.status}`)}return await l.json()}catch(n){throw console.error("[Staff API] Error fetching academic profile:",n),n}}};async function bu(e,t,s=null){try{const n=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`,o=new URLSearchParams;s&&o.append("academic_year",s);const r=await fetch(o.toString()?`${n}?${o.toString()}`:n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){if(r.status===404)return{success:!0,data:null};let l=`API error: ${r.status}`;try{const c=await r.json();c&&(c.error||c.message)&&(l=c.error||c.message)}catch{}throw new Error(l)}return await r.json()}catch(n){return console.error("[Academic Profile API] fetchUcasApplication error:",n),{success:!1,error:n.message||"Failed to fetch UCAS Application"}}}async function _u(e,t,s,n=null,o=null){try{const r=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const f=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=f?"student":"staff")}}catch{}const d=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t})});if(!d.ok){let y=`API error: ${d.status}`;try{const f=await d.json();f&&(f.error||f.message)&&(y=f.error||f.message)}catch{}throw new Error(y)}return await d.json()}catch(r){return console.error("[Academic Profile API] saveUcasApplication error:",r),{success:!1,error:r.message||"Failed to save UCAS Application"}}}async function wu(e,t,s,n=null){try{const o=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/comment`;let r=null;const l=t&&typeof t=="object"?t.__roleHint:null;l&&(r=String(l).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const y=(Knack.getUserRoles()||[]).some(f=>f&&f.name==="Student"||typeof f=="string"&&f.toLowerCase().includes("student"));r||(r=y?"student":"staff")}}catch{}const c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",...r?{"X-User-Role":r}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!c.ok){let d=`API error: ${c.status}`;try{const y=await c.json();y&&(y.error||y.message)&&(d=y.error||y.message)}catch{}throw new Error(d)}return await c.json()}catch(o){return console.error("[Academic Profile API] addUcasApplicationComment error:",o),{success:!1,error:o.message||"Failed to add comment"}}}async function ku(e,t,s,n=null,o=null){try{const r=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/feedback`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const f=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=f?"student":"staff")}}catch{}const d=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!d.ok){let y=`API error: ${d.status}`;try{const f=await d.json();f&&(f.error||f.message)&&(y=f.error||f.message)}catch{}throw new Error(y)}return await d.json()}catch(r){return console.error("[Academic Profile API] generateUcasFeedback error:",r),{success:!1,error:r.message||"Failed to generate feedback"}}}async function Cu(e,t,s,n=null,o=null){try{const r=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/virtual-tutor-comment`;let l=null;const c=o&&typeof o=="object"?o.roleHint:null;c&&(l=String(c).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const f=(Knack.getUserRoles()||[]).some(g=>g&&g.name==="Student"||typeof g=="string"&&g.toLowerCase().includes("student"));l||(l=f?"student":"staff")}}catch{}const d=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:n,...t||{}})});if(!d.ok){let y=`API error: ${d.status}`;try{const f=await d.json();f&&(f.error||f.message)&&(y=f.error||f.message)}catch{}throw new Error(y)}return await d.json()}catch(r){return console.error("[Academic Profile API] addVirtualTutorComment error:",r),{success:!1,error:r.message||"Failed to add comment"}}}async function Su(e,t,s=null){try{const n=s?`?academic_year=${encodeURIComponent(s)}`:"",o=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/status${n}`,r=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}),l=await r.json().catch(()=>({}));if(!r.ok)throw new Error((l==null?void 0:l.error)||(l==null?void 0:l.message)||`API error: ${r.status}`);return l}catch(n){return console.error("[Academic Profile API] fetchReferenceStatus error:",n),{success:!1,error:n.message||"Failed to fetch reference status"}}}async function xu(e,t,s,n=null,o=null){try{const r=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/invite`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"student",c=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(r){return console.error("[Academic Profile API] createReferenceInvite error:",r),{success:!1,error:r.message||"Failed to invite teacher"}}}async function Eu(e,t,s=null,n=null){try{const o=s?`?academic_year=${encodeURIComponent(s)}`:"",r=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/full${o}`,l=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"staff",c=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json","X-User-Role":l}}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(o){return console.error("[Academic Profile API] fetchReferenceFull error:",o),{success:!1,error:o.message||"Failed to fetch reference"}}}async function Au(e,t,s,n=null,o=null){try{const r=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/contribution`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"staff",c=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:n,...t||{}})}),d=await c.json().catch(()=>({}));if(!c.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${c.status}`);return d}catch(r){return console.error("[Academic Profile API] saveReferenceContribution error:",r),{success:!1,error:r.message||"Failed to save contribution"}}}async function $u(e,t,s=null,n=null){try{const o=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/mark-complete`,r=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"student",l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":r},body:JSON.stringify({academicYear:s})}),c=await l.json().catch(()=>({}));if(!l.ok)throw new Error((c==null?void 0:c.error)||(c==null?void 0:c.message)||`API error: ${l.status}`);return c}catch(o){return console.error("[Academic Profile API] markUcasStatementComplete error:",o),{success:!1,error:o.message||"Failed to mark complete"}}}const Tu={class:"ucas-modal"},Iu={class:"ucas-header"},Ou={class:"ucas-header-left"},Pu={class:"ucas-course-row"},Mu=["disabled"],Fu={key:0,value:""},Ru=["value"],Uu=["href"],ju={key:1,class:"ucas-course-meta"},Nu=["title"],Lu={class:"ucas-meta-value"},qu=["title"],Hu={class:"ucas-meta-value"},Du={class:"ucas-header-right"},Vu={key:0,class:"ucas-refbar"},Bu=["disabled"],Ku={key:0,class:"ucas-refbar-count"},Yu={key:1,class:"ucas-refbar"},Gu=["disabled"],Wu=["disabled","title"],zu=["disabled"],Ju=["disabled","title"],Xu=["disabled","title"],Qu={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Zu={key:1,class:"ucas-spinner"},ed={class:"ucas-body"},td={class:"ucas-top-grid"},sd={class:"ucas-card"},nd={key:0,class:"ucas-empty"},od={key:1,class:"ucas-subjects-grid"},ad=["title"],rd=["disabled","value","onInput"],id={key:2,class:"ucas-tariff"},ld={class:"ucas-tariff-grid"},cd=["title"],ud={class:"ucas-tariff-value"},dd=["title"],fd={class:"ucas-tariff-value"},vd=["title"],pd={class:"ucas-tariff-value"},hd={key:0,class:"ucas-tariff-note"},md={class:"ucas-card"},gd={class:"ucas-metrics"},yd={class:"ucas-metric-value"},bd={class:"ucas-metric-max"},_d={class:"ucas-progress-bar"},wd={class:"ucas-metric-status"},kd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Cd={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sd={class:"ucas-preview"},xd={class:"ucas-preview-header"},Ed={class:"ucas-preview-box"},Ad={class:"ucas-questions"},$d={class:"ucas-q"},Td={class:"ucas-q-header"},Id={class:"ucas-q-actions"},Od=["title"],Pd=["disabled","value"],Md={class:"ucas-q"},Fd={class:"ucas-q-header"},Rd={class:"ucas-q-actions"},Ud=["title"],jd=["disabled","value"],Nd={class:"ucas-q"},Ld={class:"ucas-q-header"},qd={class:"ucas-q-actions"},Hd=["title"],Dd=["disabled","value"],Vd={key:0,class:"ucas-comments"},Bd={class:"ucas-comments-shell"},Kd={class:"ucas-comments-header"},Yd=["title"],Gd={class:"ucas-comments-count-num"},Wd={key:0,class:"ucas-comments-compose"},zd={class:"ucas-comments-compose-row"},Jd={class:"ucas-comments-avatar ucas-comments-avatar--compose"},Xd={class:"ucas-comments-compose-main"},Qd=["disabled"],Zd={class:"ucas-comments-compose-footer"},ef={class:"ucas-comments-compose-actions"},tf=["disabled"],sf=["disabled"],nf={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},of={class:"ucas-comments-quick"},af={class:"ucas-comments-quick-chips"},rf=["onClick","disabled"],lf={key:1,class:"ucas-comments-empty"},cf={key:2,class:"ucas-comments-list"},uf=["aria-label"],df={class:"ucas-comments-divider-text"},ff={class:"ucas-comments-item-main"},vf={class:"ucas-comments-item-content"},pf={class:"ucas-comments-item-header"},hf={class:"ucas-comments-item-author"},mf={class:"ucas-comments-author"},gf={key:0,class:"ucas-comments-role"},yf={class:"ucas-comments-date"},bf=["onClick"],_f={class:"ucas-footer"},wf={class:"ucas-footer-left"},kf={class:"ucas-footer-stats"},Cf={class:"ucas-footer-total"},Sf={class:"ucas-footer-max"},xf={class:"ucas-footer-remaining"},Ef={key:0,class:"ucas-footer-warning"},Af={key:1,class:"ucas-footer-error"},$f={key:2,class:"ucas-footer-error"},Tf={class:"ucas-footer-right"},If={key:0,class:"ucas-toast"},Of={class:"ucas-feedback-modal",role:"dialog","aria-modal":"true","aria-label":"Feedback"},Pf={class:"ucas-feedback-header"},Mf={class:"ucas-feedback-body"},Ff={key:0,class:"ucas-feedback-loading"},Rf={key:1,class:"ucas-feedback-error"},Uf={key:2,class:"ucas-feedback-text"},jf={class:"ucas-feedback-footer"},Nf=["disabled"],Lf=["disabled","title"],qf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded writing"},Hf={class:"ucas-expand-header"},Df={class:"ucas-expand-title"},Vf={class:"ucas-expand-meta"},Bf={class:"ucas-expand-pill"},Kf={class:"ucas-expand-pill"},Yf={class:"ucas-expand-body"},Gf={key:0,class:"ucas-preview-box ucas-preview-box--expanded"},Wf=["disabled","value"],zf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded reference writing"},Jf={class:"ucas-expand-header"},Xf={class:"ucas-expand-title"},Qf={class:"ucas-expand-meta"},Zf={class:"ucas-expand-pill"},ev={class:"ucas-expand-body"},tv=["disabled","value"],sv={class:"ucas-feedback-modal ucas-ref-modal",role:"dialog","aria-modal":"true","aria-label":"Teacher reference"},nv={class:"ucas-ref-header"},ov={class:"ucas-ref-header-left"},av={class:"ucas-ref-icon","aria-hidden":"true"},rv={width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},iv={key:0,d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},lv={key:1,cx:"9",cy:"7",r:"4"},cv={key:2,d:"M22 21v-2a4 4 0 0 0-3-3.87"},uv={key:3,d:"M16 3.13a4 4 0 0 1 0 7.75"},dv={key:4,d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},fv={key:5,points:"14 2 14 8 20 8"},vv={key:6,x1:"16",y1:"13",x2:"8",y2:"13"},pv={key:7,x1:"16",y1:"17",x2:"8",y2:"17"},hv={key:8,x1:"10",y1:"9",x2:"8",y2:"9"},mv={class:"ucas-ref-title-group"},gv={class:"ucas-ref-subtitle"},yv={key:0},bv={key:1},_v={class:"ucas-ref-statusbar"},wv={class:"ucas-ref-statusbar-left"},kv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Cv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Sv={key:0,class:"ucas-ref-status-count"},xv={key:1,class:"ucas-ref-status-count"},Ev=["disabled"],Av={class:"ucas-ref-body"},$v={key:0,class:"ucas-ref-student"},Tv={class:"ucas-ref-steps"},Iv={class:"ucas-ref-step"},Ov={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Pv={key:1},Mv={class:"ucas-ref-step"},Fv={class:"ucas-ref-step"},Rv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Uv={key:1},jv={class:"ucas-ref-section"},Nv={class:"ucas-ref-section-head"},Lv={class:"ucas-ref-section-pill"},qv={key:0,class:"ucas-ref-empty"},Hv={key:1,class:"ucas-ref-invite-list"},Dv={class:"ucas-ref-invite-left"},Vv={class:"ucas-ref-invite-meta"},Bv={class:"ucas-ref-invite-name"},Kv={class:"ucas-ref-invite-sub"},Yv={class:"ucas-ref-invite-actions"},Gv=["onClick","disabled"],Wv=["onClick"],zv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Jv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Xv={key:2,class:"ucas-ref-hidden-row"},Qv={class:"hint"},Zv={class:"ucas-ref-section ucas-ref-section--form"},ep={class:"ucas-ref-form-grid"},tp=["value"],sp={class:"ucas-ref-form-actions"},np=["disabled"],op=["disabled"],ap={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},rp={key:0,class:"ucas-ref-linkcopy"},ip={class:"ucas-ref-linkcopy-row"},lp=["value"],cp={key:1,class:"ucas-ref-staff"},up={class:"ucas-ref-staff-head"},dp={key:0,class:"ucas-ref-staff-meta"},fp={key:0,class:"ucas-empty ucas-empty--small"},vp={key:1,class:"ucas-empty ucas-empty--small"},pp={key:2,class:"ucas-ref-staff-body"},hp={class:"ucas-ref-contrib"},mp={class:"ucas-ref-contrib-head"},gp={class:"ucas-ref-badge has-content"},yp={class:"ucas-ref-editor"},bp={class:"ucas-ref-editor-select"},_p=["value"],wp={class:"ucas-ref-editor-footer"},kp={class:"ucas-ref-char"},Cp=["disabled"],Sp=["disabled"],xp={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ep={key:0,class:"hint"},Ap={key:0,class:"ucas-ref-existing"},$p={class:"ucas-ref-existing-list"},Tp={class:"ucas-ref-existing-meta"},Ip={class:"ucas-ref-existing-author"},Op={class:"ucas-ref-existing-avatar"},Pp={class:"ucas-ref-existing-name"},Mp={class:"ucas-ref-existing-subject"},Fp={class:"ucas-ref-existing-text"},Rp={class:"ucas-ref-contrib ucas-ref-contrib--accordion"},Up={class:"ucas-ref-accordion-right"},jp={class:"ucas-ref-accordion-chevron"},Np={key:0,class:"ucas-ref-accordion-body"},Lp={class:"ucas-ref-editor"},qp={class:"ucas-ref-editor-footer"},Hp={class:"ucas-ref-char"},Dp=["disabled"],Vp=["disabled"],Bp={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Kp={key:0,class:"hint"},Yp={class:"ucas-ref-section"},Gp={class:"ucas-ref-section-body"},Wp={class:"ucas-ref-section"},zp={class:"ucas-ref-section-head"},Jp={class:"ucas-ref-section-pill"},Xp={key:0,class:"ucas-empty ucas-empty--small"},Qp={key:1,class:"ucas-ref-contrib-list"},Zp={class:"ucas-ref-contrib-meta"},eh={key:0},th={class:"ucas-ref-contrib-text"},sh={class:"ucas-ref-section"},nh={class:"ucas-ref-section-head"},oh={class:"ucas-ref-section-pill"},ah={key:0,class:"ucas-empty ucas-empty--small"},rh={key:1,class:"ucas-ref-invite-list"},ih={class:"ucas-ref-invite-left"},lh={class:"ucas-ref-invite-meta"},ch={class:"ucas-ref-invite-name"},uh={class:"ucas-ref-invite-sub"},dh={class:"ucas-ref-invite-actions"},fh=["onClick","disabled"],vh=["onClick"],ph={key:2,class:"ucas-ref-hidden-row"},hh={class:"hint"},mh={class:"ucas-ref-footer"},ze=4e3,bt=350,Gs=450,gh={__name:"UcasApplicationModal",props:{studentEmail:{type:String,default:""},academicYear:{type:String,default:""},subjects:{type:Array,default:()=>[]},offers:{type:Array,default:()=>[]},topOffer:{type:Object,default:null},apiUrl:{type:String,default:""},canEdit:{type:Boolean,default:!1},commentsEnabled:{type:Boolean,default:!0},canAddComment:{type:Boolean,default:!1},staffEmail:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=F("");let r=null;function l(S){o.value=S,r&&clearTimeout(r),r=setTimeout(()=>o.value="",2200)}function c(S){return S==null?"":String(S)}function d(S){const i=c(S==null?void 0:S.universityName).trim().toLowerCase(),A=c(S==null?void 0:S.courseTitle).trim().toLowerCase(),m=c(S==null?void 0:S.courseLink).trim().toLowerCase();return`${i}|${A}|${m}`.replace(/\s+/g," ").trim()}const y=Z(()=>(Array.isArray(s.offers)?s.offers:[]).map(A=>({key:d(A),ranking:(A==null?void 0:A.ranking)??1,universityName:c(A==null?void 0:A.universityName).trim()||"University",courseTitle:c(A==null?void 0:A.courseTitle).trim(),courseLink:c(A==null?void 0:A.courseLink).trim(),offer:c(A==null?void 0:A.offer).trim(),ucasPoints:(A==null?void 0:A.ucasPoints)===null||(A==null?void 0:A.ucasPoints)===void 0||String(A==null?void 0:A.ucasPoints).trim()===""?null:Number(A==null?void 0:A.ucasPoints)})).filter(A=>A.key).sort((A,m)=>(Number(A.ranking)||999)-(Number(m.ranking)||999))),f=F(""),g=Z(()=>y.value.find(S=>S.key===f.value)||null),w=Os({q1:"",q2:"",q3:""}),E=Os({}),P=F([]),H=F(""),te=F(!1),q=F(!1),Y=F(!1),X=F(!1),I=F(""),B=F(""),de=F(new Set),Se=[" Add more specific examples",' Strengthen your "why this course"'," Trim repetition"," Show reflection, not just description"," Link skills to the course"];function xe(S){return de.value.has(String(S||""))}function z(S){const i=String(S||""),A=new Set(de.value);A.has(i)?A.delete(i):A.add(i),de.value=A}function ce(S){const i=c(S);return i.length<=Gs?i:i.slice(0,Gs).trimEnd()+""}function ae(S){const i=c(S).trim();if(!i)return;const A=c(H.value),m=A?A.trimEnd()+`
`+i:i;H.value=m}function U(S){const i=c(S).trim();if(!i)return"ST";const m=(i.includes("@")?i.split("@")[0]:i).replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean),R=(m[0]||"").slice(0,1),J=(m[1]||m[0]||"").slice(1,2);return(R+J).toUpperCase()||"ST"}function ue(S){const i=c(S).trim().toLowerCase();if(!i)return"ucas-comments-avatar--blue";let A=0;for(let R=0;R<i.length;R++)A=A*31+i.charCodeAt(R)>>>0;const m=A%4;return m===0?"ucas-comments-avatar--green":m===1?"ucas-comments-avatar--blue":m===2?"ucas-comments-avatar--purple":"ucas-comments-avatar--orange"}function ge(S){try{const i=new Date(S);if(Number.isNaN(i.getTime()))return null;const A=i.getFullYear(),m=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0");return`${A}-${m}-${R}`}catch{return null}}function Ne(S){try{const i=new Date,A=i.getFullYear(),m=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0"),J=`${A}-${m}-${R}`,be=new Date(J+"T00:00:00"),ke=new Date(S+"T00:00:00"),he=Math.round((be.getTime()-ke.getTime())/(1e3*60*60*24));return he===0?"Today":he===1?"Yesterday":ke.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return S}}const we=Z(()=>{const S=Array.isArray(P.value)?P.value:[],i=[];let A=null;for(const m of S){const R=ge(m==null?void 0:m.createdAt)||"unknown";(!A||A.key!==R)&&(A={key:R,label:R==="unknown"?"Earlier":Ne(R),items:[]},i.push(A)),A.items.push(m)}return i}),ie=F(!1),ee=F("not_started"),Me=F([]),Ee=F(new Set),Oe=F(""),$e=F(""),De=F(!1),Xe=F(""),At=Z(()=>{const S=c(s.studentEmail).trim().toLowerCase(),i=c(s.academicYear).trim().toLowerCase();return`ucas_ref_hidden_invites:${S||"unknown"}:${i||"unknown"}`});function ct(){try{const S=localStorage.getItem(At.value);if(!S){Ee.value=new Set;return}const i=JSON.parse(S);Ee.value=new Set(Array.isArray(i)?i.map(A=>String(A)):[])}catch{Ee.value=new Set}}function ut(){try{localStorage.setItem(At.value,JSON.stringify(Array.from(Ee.value)))}catch{}}function dt(S){try{const i=String((S==null?void 0:S.id)||"");if(!i)return;const A=new Set(Ee.value);A.add(i),Ee.value=A,ut(),l("Invite removed from list")}catch{}}function mt(){Ee.value=new Set,ut(),l("Restored hidden invites")}const j=Z(()=>{const S=Array.isArray(Me.value)?Me.value:[],i=Ee.value,A=S.filter(R=>R&&!i.has(String(R.id||""))),m=new Map;for(const R of A){const J=c((R==null?void 0:R.teacherEmail)||(R==null?void 0:R.email)).trim().toLowerCase(),be=c(R==null?void 0:R.subjectKey).trim().toLowerCase(),ke=`${J}__${be}`,he=m.get(ke);if(!he){m.set(ke,R);continue}const Rn=Date.parse((he==null?void 0:he.createdAt)||(he==null?void 0:he.expiresAt)||"")||0;(Date.parse((R==null?void 0:R.createdAt)||(R==null?void 0:R.expiresAt)||"")||0)>Rn&&m.set(ke,R)}return Array.from(m.values())}),N=Z(()=>{const S=ee.value;return S==="finalised"?"Finalised":S==="completed"?"Completed":S==="in_progress"?"In progress":"Not started"}),v=Z(()=>{const S=Array.isArray(j.value)?j.value:[],i=S.length,A=S.filter(m=>m&&m.status==="submitted").length;return{total:i,submitted:A}}),u=F(!1),p=F(!1),h=F(null),C=Z(()=>!s.canEdit&&!!c(s.staffEmail).trim()&&!!c(s.apiUrl).trim()&&!!c(s.studentEmail).trim()),k=F(""),$=F(""),O=F(""),M=F(!1),T=F(!1),D=F(!1),L=F(!1),V=F("staff3"),G=F(null),re=Z(()=>V.value==="staff2"?"Section 2: Extenuating circumstances":"Section 3: Subject teacher contribution"),fe=Z(()=>V.value==="staff2"?c(k.value):c(O.value)),le=Z(()=>c(fe.value).length);function Re(S){C.value&&(V.value=S==="staff2"?"staff2":"staff3",L.value=!0,setTimeout(()=>{try{G.value&&G.value.focus&&G.value.focus()}catch{}},0))}function Fe(){L.value=!1}function Ge(S,i){const A=c(s.staffEmail).trim().toLowerCase();if(!A)return null;const m=h.value;if(!m)return null;const R=S===2?m.section2||[]:m.section3||[],J=c(i||"").trim().toLowerCase();for(const be of Array.isArray(R)?R:[]){if(!be||c(be.authorEmail).trim().toLowerCase()!==A)continue;const he=c(be.subjectKey||"").trim().toLowerCase();if(S===3){if(he===J)return be}else return be}return null}async function Qe(S){if(!C.value)return;const i=Number(S);if(i!==2&&i!==3)return;const m=c(i===2?k.value:O.value).trim();if(m){i===2?M.value=!0:T.value=!0;try{const R={section:i,text:m,subjectKey:i===3&&c($.value).trim()||null,authorName:null,staffEmail:c(s.staffEmail).trim()},J=await Au(s.studentEmail,R,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(J!=null&&J.success))throw new Error((J==null?void 0:J.error)||"Save failed");l("Saved"),await ft()}catch(R){l((R==null?void 0:R.message)||"Save failed")}finally{i===2?M.value=!1:T.value=!1}}}async function ft(){var S,i,A,m,R;if(!(!s.apiUrl||!s.studentEmail)){ie.value=!0;try{if(ct(),s.canEdit){const he=await Su(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(he!=null&&he.success))throw new Error((he==null?void 0:he.error)||"Failed to load reference status");ee.value=c(((S=he==null?void 0:he.data)==null?void 0:S.status)||"not_started"),Me.value=Array.isArray((i=he==null?void 0:he.data)==null?void 0:i.invites)?he.data.invites:[];return}p.value=!0;const J=await Eu(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"staff"});if(!(J!=null&&J.success))throw new Error((J==null?void 0:J.error)||"Failed to load reference");h.value=(J==null?void 0:J.data)||null,ee.value=c(((A=J==null?void 0:J.data)==null?void 0:A.status)||"not_started"),Me.value=Array.isArray((m=J==null?void 0:J.data)==null?void 0:m.invites)?J.data.invites:[];const be=Ge(2,null);k.value=c((be==null?void 0:be.text)||""),!c($.value).trim()&&Nt.value.length&&($.value=c(((R=Nt.value[0])==null?void 0:R.label)||""));const ke=Ge(3,$.value);O.value=c((ke==null?void 0:ke.text)||"")}catch(J){l((J==null?void 0:J.message)||"Failed to load reference")}finally{ie.value=!1,p.value=!1}}}st(()=>$.value,()=>{const S=Ge(3,$.value);O.value=c((S==null?void 0:S.text)||"")}),st(()=>u.value,async S=>{S&&await ft()});async function ms(){var i,A;if(!s.canEdit||!s.apiUrl||!s.studentEmail)return;const S=Oe.value.trim();if(S){De.value=!0,Xe.value="";try{const m=await xu(s.studentEmail,{teacherEmail:S,subjectKey:$e.value||null,allowedSections:[3]},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(m!=null&&m.success))throw new Error((m==null?void 0:m.error)||"Invite failed");const R=c(((i=m==null?void 0:m.data)==null?void 0:i.inboxUrl)||((A=m==null?void 0:m.data)==null?void 0:A.inviteUrl)||"");R.includes("/reference-contribution")&&R.includes("token=")?Xe.value=R.replace("/reference-contribution","/reference-inbox"):Xe.value=R,l("Invite created"),Oe.value="",$e.value="",await ft()}catch(m){l((m==null?void 0:m.message)||"Invite failed")}finally{De.value=!1}}}async function Le(S){s.canEdit&&(Oe.value=c((S==null?void 0:S.teacherEmail)||(S==null?void 0:S.email)||"").trim(),$e.value=c((S==null?void 0:S.subjectKey)||"").trim(),Oe.value&&await ms())}function nt(S){try{navigator.clipboard.writeText(String(S||"")),l("Copied")}catch{l("Copy failed")}}const ns=F(!1),ot=F("q1"),qs=F(null),xr=Z(()=>ot.value==="preview"?"Preview: Combined statement":ot.value==="q2"?"Q2: How studies prepared you":ot.value==="q3"?"Q3: Outside education":"Q1: Why this course?"),An=Z(()=>ot.value==="preview"?gs.value||"":w[ot.value]||""),Er=Z(()=>An.value.length),ko=F(0);function jt(){if(s.canEdit)return;const S=Date.now();S-ko.value<1500||(ko.value=S,l("Only students can edit their UCAS statement."))}function Hs(S){ot.value=S,ns.value=!0,setTimeout(()=>{try{ot.value!=="preview"&&s.canEdit&&qs.value&&qs.value.focus&&qs.value.focus()}catch{}},0)}function $n(){ns.value=!1}const Nt=Z(()=>(Array.isArray(s.subjects)?s.subjects:[]).slice(0,5).map((i,A)=>{const m=c((i==null?void 0:i.id)||(i==null?void 0:i.originalRecordId)||(i==null?void 0:i.position)||(i==null?void 0:i.subjectName)||`idx_${A}`),R=c(i==null?void 0:i.subjectName).trim()||"Subject",J=R.replace(/^\s*(?:[a-z]{1,2}\d?\s*-\s*)+/i,"").trim()||R;return{key:m,label:J}})),Co=Z(()=>{const S=f.value||"";return S?E[S]||{}:{}});function Ar(S,i){if(!s.canEdit)return;const A=f.value||"";A&&(E[A]||(E[A]={}),E[A][S]=c(i).slice(0,24))}const Ae=Z(()=>w.q1.length+w.q2.length+w.q3.length),Tn=Z(()=>Math.max(0,ze-Ae.value)),os=Z(()=>Math.max(0,Ae.value-ze)),gs=Z(()=>{const S=c(w.q1).trim(),i=c(w.q2).trim(),A=c(w.q3).trim();return[S,i,A].filter(Boolean).join(`

`)});function Ds(S,i){s.canEdit&&(w[S]=c(i))}function $r(){try{if(!gs.value)return;navigator.clipboard.writeText(gs.value),l("Copied to clipboard")}catch{l("Copy failed (browser blocked)")}}function Tr(S){try{const i=new Date(S);return Number.isNaN(i.getTime())?"":i.toLocaleString()}catch{return""}}const In=Z(()=>`vespa:ucas_application:v1:${(s.studentEmail||"").toLowerCase()}:${s.academicYear||"current"}`);function Ir(){try{const S=localStorage.getItem(In.value);if(!S)return;const i=JSON.parse(S);if(i!=null&&i.answers&&(w.q1=c(i.answers.q1),w.q2=c(i.answers.q2),w.q3=c(i.answers.q3)),i!=null&&i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,m]of Object.entries(i.requirementsByCourse))E[A]=m&&typeof m=="object"?m:{};i!=null&&i.selectedCourseKey&&(f.value=c(i.selectedCourseKey))}catch{}}function Or(){try{localStorage.setItem(In.value,JSON.stringify({updatedAt:new Date().toISOString(),selectedCourseKey:f.value,answers:{...w},requirementsByCourse:{...E}}))}catch{}}let On=null;st(()=>[w.q1,w.q2,w.q3,f.value,JSON.stringify(E),In.value],()=>{On&&clearTimeout(On),On=setTimeout(()=>Or(),450)});const as=F(!1),rs=F(""),Pn=F(!1);async function Pr(){if(!s.apiUrl||!s.studentEmail)return;const S=await bu(s.studentEmail,s.apiUrl,s.academicYear||null);if(!(S!=null&&S.success))return;const i=S.data||{};if(i.answers&&(w.q1=c(i.answers.q1),w.q2=c(i.answers.q2),w.q3=c(i.answers.q3)),i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,m]of Object.entries(i.requirementsByCourse))E[A]=m&&typeof m=="object"?m:{};P.value=Array.isArray(i.staffComments)?i.staffComments:[],i.selectedCourseKey&&(f.value=c(i.selectedCourseKey)),rs.value=c(i.statementCompletedAt||"")}async function Mr(){var S;if(!(!s.canEdit||!s.apiUrl||!s.studentEmail)&&!rs.value){if(Ae.value>ze){l(`Over the ${ze} character limit  please shorten before marking complete`);return}if(Ae.value<bt){l(`Need at least ${bt} characters before marking complete`);return}Pn.value=!0;try{const i=await $u(s.studentEmail,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to mark statement complete");rs.value=c(((S=i==null?void 0:i.data)==null?void 0:S.statementCompletedAt)||new Date().toISOString()),l("Statement marked complete (staff notified)")}catch(i){l((i==null?void 0:i.message)||"Failed to mark statement complete")}finally{Pn.value=!1}}}async function Fr(){if(!s.canEdit){l("Read-only for staff  students can save");return}if(!(!s.apiUrl||!s.studentEmail)){as.value=!0;try{const S={selectedCourseKey:f.value||null,answers:{q1:w.q1,q2:w.q2,q3:w.q3},requirementsByCourse:{...E}},i=await _u(s.studentEmail,S,s.apiUrl,s.academicYear||null,{roleHint:s.canEdit?"student":"staff"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Save failed");l("Saved")}catch(S){l((S==null?void 0:S.message)||"Save failed")}finally{as.value=!1}}}async function So(S=!1){if(!s.canEdit){l("Available for students");return}q.value=!0,!(!S&&I.value)&&await Rr()}async function Rr(){var S;if(!(!s.apiUrl||!s.studentEmail)){Y.value=!0,B.value="",I.value="";try{const i={answers:{q1:w.q1,q2:w.q2,q3:w.q3},course:g.value?{...g.value}:null,totals:{totalChars:Ae.value,remainingChars:Tn.value}},A=await ku(s.studentEmail,i,s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Failed to generate feedback");const m=c(((S=A==null?void 0:A.data)==null?void 0:S.feedback)||(A==null?void 0:A.data)||"");I.value=m.trim(),I.value||(B.value="No feedback returned.")}catch(i){B.value=(i==null?void 0:i.message)||"Failed to generate feedback"}finally{Y.value=!1}}}async function Ur(){var S;if(!(!I.value||!s.apiUrl||!s.studentEmail)){X.value=!0;try{const i=await Cu(s.studentEmail,{comment:I.value},s.apiUrl,s.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to add comment");P.value=Array.isArray((S=i.data)==null?void 0:S.staffComments)?i.data.staffComments:P.value,l("Added to Tutor comments"),q.value=!1}catch(i){l((i==null?void 0:i.message)||"Failed to add comment")}finally{X.value=!1}}}const jr={"A-Level":{grades:{"A*":56,A:48,B:40,C:32,D:24,E:16}},"AS-Level":{grades:{A:20,B:16,C:12,D:10,E:6}},"BTEC Extended Certificate (1 A-Level)":{grades:{"D*":56,D:48,M:32,P:16}},"EPQ (Extended Project)":{grades:{"A*":28,A:24,B:20,C:16,D:12,E:8}}};function Nr(S){const i=c(S).trim();if(!i)return"";const A=i.toUpperCase();return A==="DISTINCTION*"||A==="DISTINCTION *"?"D*":A==="DISTINCTION"?"D":A==="MERIT"?"M":A==="PASS"?"P":A.replace(/\s+/g,"")}function Lr(S){const i=c(S==null?void 0:S.examType).toLowerCase();return i.includes("epq")||i.includes("extended project")?"EPQ (Extended Project)":i.includes("as")&&i.includes("level")?"AS-Level":i.includes("a level")||i.includes("a-level")?"A-Level":i.includes("btec")?"BTEC Extended Certificate (1 A-Level)":"A-Level"}function Mn(S,i){var be;const A=Nr(i);if(!A)return{points:0,unknown:0};const m=Lr(S),J=(((be=jr[m])==null?void 0:be.grades)||{})[A];return typeof J=="number"?{points:J,unknown:0}:{points:0,unknown:1}}const We=Z(()=>{var J;const S=Array.isArray(s.subjects)?s.subjects.slice(0,5):[];let i=0,A=0,m=0,R=0;for(let be=0;be<S.length;be++){const ke=S[be],he=(J=Nt.value[be])==null?void 0:J.key,Rn=he&&Co.value[he]||"",Un=Mn(ke,ke==null?void 0:ke.currentGrade),Eo=Mn(ke,ke==null?void 0:ke.targetGrade),Ao=Mn(ke,Rn);i+=Un.points,A+=Eo.points,m+=Ao.points,R+=Un.unknown+Eo.unknown+Ao.unknown}return{current:i,target:A,required:m,unknownCount:R}});function xo(S,i){const A=Number(S)||0,m=Number(i)||0;return!m||!A?"":A>=m?"ucas-tariff-box--good":A>=Math.ceil(m*.9)?"ucas-tariff-box--warn":"ucas-tariff-box--bad"}function Fn(S,i,A,m){const R=Number(A)||0,J=Number(m)||0,be=[`${S} UCAS points`,i,`Total: ${R}`];if(S!=="Required"&&J){be.push(`Required: ${J}`);const ke=R-J;be.push(ke>=0?`Above by: ${ke}`:`Below by: ${Math.abs(ke)}`)}return be.join(`
`)}async function qr(){var i;if(!s.canAddComment)return;const S=H.value.trim();if(S){te.value=!0;try{const A=await wu(s.studentEmail,{comment:S,staffEmail:s.staffEmail||null,__roleHint:s.canAddComment?"staff":"student"},s.apiUrl,s.academicYear||null);if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Comment failed");P.value=Array.isArray((i=A.data)==null?void 0:i.staffComments)?A.data.staffComments:P.value,H.value="",l("Comment posted")}catch(A){l((A==null?void 0:A.message)||"Comment failed")}finally{te.value=!1}}}return Cn(async()=>{const S=s.topOffer||(s.offers&&s.offers.length?s.offers[0]:null);S&&(f.value=d(S)),Ir(),await Pr(),s.canEdit&&await ft(),!f.value&&S&&(f.value=d(S))}),(S,i)=>{var A;return b(),_("div",{class:"ucas-overlay",role:"dialog","aria-modal":"true","aria-label":"UCAS Application",onClick:i[33]||(i[33]=Ct(m=>n("close"),["self"]))},[a("div",Tu,[a("button",{class:"ucas-btn-close ucas-btn-close--corner",type:"button",onClick:i[0]||(i[0]=m=>n("close")),"aria-label":"Close UCAS application"},[...i[34]||(i[34]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])]),a("header",Iu,[a("div",Ou,[i[39]||(i[39]=a("div",{class:"ucas-title"},"UCAS Application",-1)),a("div",Pu,[i[38]||(i[38]=a("label",{class:"ucas-course-label",for:"course-select"},"Course",-1)),Pe(a("select",{id:"course-select","onUpdate:modelValue":i[1]||(i[1]=m=>f.value=m),class:"ucas-select",disabled:y.value.length===0},[y.value.length===0?(b(),_("option",Fu,"No offers yet")):K("",!0),(b(!0),_(oe,null,Te(y.value,m=>(b(),_("option",{key:m.key,value:m.key}," #"+x(m.ranking)+" "+x(m.universityName)+"  "+x(m.courseTitle||"Course"),9,Ru))),128))],8,Mu),[[St,f.value]]),(A=g.value)!=null&&A.courseLink?(b(),_("a",{key:0,class:"ucas-btn ucas-btn-outline",href:g.value.courseLink,target:"_blank",rel:"noopener noreferrer",title:"Open course link in a new tab"},[...i[35]||(i[35]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a("polyline",{points:"15 3 21 3 21 9"}),a("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),Q(" Course link ",-1)])],8,Uu)):K("",!0),g.value?(b(),_("div",ju,[g.value.offer?(b(),_("div",{key:0,class:"ucas-meta-pill",title:`Course offer requirement (grade): ${g.value.offer}`},[i[36]||(i[36]=a("span",{class:"ucas-meta-label"},"Required grade",-1)),a("span",Lu,x(g.value.offer),1)],8,Nu)):K("",!0),g.value.ucasPoints!==null&&g.value.ucasPoints!==void 0&&g.value.ucasPoints!==""?(b(),_("div",{key:1,class:"ucas-meta-pill",title:`Course offer requirement (UCAS points): ${g.value.ucasPoints}`},[i[37]||(i[37]=a("span",{class:"ucas-meta-label"},"Required UCAS",-1)),a("span",Hu,x(g.value.ucasPoints),1)],8,qu)):K("",!0)])):K("",!0)])]),a("div",Du,[e.canEdit?(b(),_("div",Vu,[a("button",{class:"ucas-refbar-btn",type:"button",onClick:i[2]||(i[2]=m=>u.value=!0),disabled:ie.value||!e.studentEmail||!e.apiUrl,title:"Invite a teacher and track reference progress"},[...i[40]||(i[40]=[et('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z" data-v-9e3c962d></path><path d="M4 21a8 8 0 0 1 16 0" data-v-9e3c962d></path><path d="M19 8h2" data-v-9e3c962d></path><path d="M20 7v2" data-v-9e3c962d></path></svg> Teacher reference ',2)])],8,Bu),a("span",{class:se(["ucas-refbar-pill",`ucas-refbar--${ee.value}`])},[Q(x(N.value)+" ",1),v.value.total?(b(),_("span",Ku," ("+x(v.value.submitted)+"/"+x(v.value.total)+") ",1)):K("",!0)],2)])):(b(),_("div",Yu,[a("button",{class:"ucas-refbar-btn",type:"button",onClick:i[3]||(i[3]=m=>u.value=!0),disabled:ie.value||!e.studentEmail||!e.apiUrl,title:"View teacher reference"},[...i[41]||(i[41]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z"}),a("path",{d:"M4 21a8 8 0 0 1 16 0"})],-1),Q(" Teacher reference ",-1)])],8,Gu),a("span",{class:se(["ucas-refbar-pill",`ucas-refbar--${ee.value}`])},x(N.value),3)])),i[46]||(i[46]=a("a",{class:"ucas-btn ucas-btn-outline",href:"https://www.ucas.com/",target:"_blank",rel:"noopener noreferrer",title:"Open UCAS in a new tab"},[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.3-4.3"})]),Q(" UCAS ")],-1)),a("button",{class:"ucas-btn ucas-btn-feedback",type:"button",onClick:So,disabled:!e.canEdit||Y.value||!e.studentEmail||!e.apiUrl,title:e.canEdit?"Get feedback to improve your statement":"Available for students"},[...i[42]||(i[42]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"}),a("path",{d:"M8 11h8"}),a("path",{d:"M8 15h5"})],-1),Q(" Get Feedback ",-1)])],8,Wu),a("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:$r,disabled:!gs.value},[...i[43]||(i[43]=[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),a("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1),Q(" Copy ",-1)])],8,zu),e.canEdit?(b(),_("button",{key:2,class:"ucas-btn ucas-btn-outline",type:"button",onClick:Mr,disabled:Pn.value||!!rs.value||Ae.value>ze||Ae.value<bt||!e.studentEmail,title:rs.value?"Already marked complete":"Mark your personal statement complete and notify staff"},[i[44]||(i[44]=a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{d:"M20 6 9 17l-5-5"})],-1)),Q(" "+x(rs.value?"Statement complete":"Mark statement complete"),1)],8,Ju)):K("",!0),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Fr,disabled:!e.canEdit||as.value||!e.studentEmail,title:e.canEdit?"Save UCAS application":"Read-only for staff  students can save"},[as.value?K("",!0):(b(),_("svg",Qu,[...i[45]||(i[45]=[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),a("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),a("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),as.value?(b(),_("span",Zu)):K("",!0),Q(" "+x(as.value?"Saving":"Save"),1)],8,Xu)])]),a("main",ed,[a("section",td,[a("div",sd,[i[54]||(i[54]=a("div",{class:"ucas-card-header"},[a("h2",{class:"ucas-card-title"},"Subjects + offer requirements"),a("p",{class:"ucas-card-hint"},"Enter the grades required by the university for this course (max 5 subjects).")],-1)),Nt.value.length===0?(b(),_("div",nd,[...i[47]||(i[47]=[a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[a("path",{d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),a("span",null,"No subjects found in the academic profile.",-1)])])):(b(),_("div",od,[i[48]||(i[48]=a("div",{class:"ucas-subjects-head"},"Subject",-1)),i[49]||(i[49]=a("div",{class:"ucas-subjects-head"},"Offer grade",-1)),(b(!0),_(oe,null,Te(Nt.value,m=>(b(),_(oe,{key:m.key},[a("div",{class:"ucas-subject-name",title:m.label},x(m.label),9,ad),a("div",null,[a("input",{class:"ucas-input",type:"text",disabled:!e.canEdit,value:Co.value[m.key]||"",onClick:jt,onFocus:jt,onInput:R=>Ar(m.key,R.target.value),placeholder:"e.g. AAA"},null,40,rd)])],64))),128))])),Nt.value.length?(b(),_("div",id,[i[53]||(i[53]=a("div",{class:"ucas-preview-header"},[a("h3",{class:"ucas-preview-title"},"UCAS points (estimated)"),a("span",{class:"ucas-preview-hint"},"Based on the subjects shown (max 5)")],-1)),a("div",ld,[a("div",{class:se(["ucas-tariff-box",xo(We.value.current,We.value.required)]),title:Fn("Current","Calculated from Current grades shown in your Academic Profile.",We.value.current,We.value.required)},[i[50]||(i[50]=a("div",{class:"ucas-tariff-label"},"Current",-1)),a("div",ud,x(We.value.current.toLocaleString()),1)],10,cd),a("div",{class:se(["ucas-tariff-box",xo(We.value.target,We.value.required)]),title:Fn("Target","Calculated from Target grades shown in your Academic Profile.",We.value.target,We.value.required)},[i[51]||(i[51]=a("div",{class:"ucas-tariff-label"},"Target",-1)),a("div",fd,x(We.value.target.toLocaleString()),1)],10,dd),a("div",{class:"ucas-tariff-box ucas-tariff-box--required",title:Fn("Required","Calculated from the Offer grade inputs on this page (per subject).",We.value.required,We.value.required)},[i[52]||(i[52]=a("div",{class:"ucas-tariff-label"},"Required",-1)),a("div",pd,x(We.value.required.toLocaleString()),1)],8,vd)]),We.value.unknownCount>0?(b(),_("div",hd," Some grades couldnt be converted to points (format/qualification not recognised). ")):K("",!0)])):K("",!0)]),a("div",md,[i[63]||(i[63]=a("div",{class:"ucas-card-header"},[a("h2",{class:"ucas-card-title"},"Character budget")],-1)),a("div",gd,[a("div",{class:se(["ucas-metric",{"ucas-metric--danger":Ae.value>=ze}])},[i[55]||(i[55]=a("div",{class:"ucas-metric-label"},"Total characters",-1)),a("div",yd,[Q(x(Ae.value.toLocaleString())+" ",1),a("span",bd,"/ "+x(ze.toLocaleString()),1)]),a("div",_d,[a("div",{class:se(["ucas-progress-fill",{"ucas-progress--warning":Ae.value>ze*.85,"ucas-progress--danger":Ae.value>=ze}]),style:wt({width:Math.min(100,Ae.value/ze*100)+"%"})},null,6)]),a("div",{class:se(["ucas-metric-sub",{"ucas-metric-sub--danger":os.value>0}])},[os.value>0?(b(),_(oe,{key:0},[Q(x(os.value.toLocaleString())+" over limit",1)],64)):(b(),_(oe,{key:1},[Q(x(Tn.value.toLocaleString())+" remaining",1)],64))],2)],2),a("div",{class:se(["ucas-metric",{"ucas-metric--success":Ae.value>=bt}])},[i[59]||(i[59]=a("div",{class:"ucas-metric-label"},"Minimum required",-1)),a("div",{class:"ucas-metric-value"},[Q(x(bt)+" "),i[56]||(i[56]=a("span",{class:"ucas-metric-max"},"characters",-1))]),a("div",wd,[Ae.value>=bt?(b(),_("svg",kd,[...i[57]||(i[57]=[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),a("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(b(),_("svg",Cd,[...i[58]||(i[58]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),a("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),a("span",null,x(Ae.value>=bt?"Minimum met":`Need ${bt-Ae.value} more`),1)])],2)]),a("div",Sd,[a("div",xd,[i[61]||(i[61]=a("h3",{class:"ucas-preview-title"},"Preview",-1)),i[62]||(i[62]=a("span",{class:"ucas-preview-hint"},"Combined statement as it will appear",-1)),a("button",{class:"ucas-q-expand",type:"button",onClick:i[4]||(i[4]=m=>Hs("preview")),title:"Expand preview to read comfortably"},[...i[60]||(i[60]=[et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])])]),a("div",Ed,x(gs.value||"Your combined statement will appear here as you type"),1)])])]),a("section",Ad,[a("div",$d,[a("div",Td,[i[65]||(i[65]=a("label",{class:"ucas-q-label",for:"q1"},[a("span",{class:"ucas-q-number"},"1"),a("span",{class:"ucas-q-title"},"Why do you want to study this course or subject?")],-1)),a("div",Id,[a("button",{class:"ucas-q-expand",type:"button",onClick:i[5]||(i[5]=m=>Hs("q1")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[64]||(i[64]=[et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Od),a("span",{class:se(["ucas-q-count",{"ucas-q-count--active":w.q1.length>0}])},x(w.q1.length.toLocaleString())+" chars ",3)])]),a("textarea",{id:"q1",class:"ucas-textarea",disabled:!e.canEdit,value:w.q1,onClick:jt,onFocus:jt,onInput:i[6]||(i[6]=m=>Ds("q1",m.target.value)),placeholder:"Be specific. What sparked your interest, and why this course?"},null,40,Pd)]),a("div",Md,[a("div",Fd,[i[67]||(i[67]=a("label",{class:"ucas-q-label",for:"q2"},[a("span",{class:"ucas-q-number"},"2"),a("span",{class:"ucas-q-title"},"How have your qualifications and studies prepared you?")],-1)),a("div",Rd,[a("button",{class:"ucas-q-expand",type:"button",onClick:i[7]||(i[7]=m=>Hs("q2")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[66]||(i[66]=[et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Ud),a("span",{class:se(["ucas-q-count",{"ucas-q-count--active":w.q2.length>0}])},x(w.q2.length.toLocaleString())+" chars ",3)])]),a("textarea",{id:"q2",class:"ucas-textarea",disabled:!e.canEdit,value:w.q2,onClick:jt,onFocus:jt,onInput:i[8]||(i[8]=m=>Ds("q2",m.target.value)),placeholder:"Use evidence: topics, projects, what you learned, and how it links."},null,40,jd)]),a("div",Nd,[a("div",Ld,[i[69]||(i[69]=a("label",{class:"ucas-q-label",for:"q3"},[a("span",{class:"ucas-q-number"},"3"),a("span",{class:"ucas-q-title"},"What have you done outside education to prepare, and why is it useful?")],-1)),a("div",qd,[a("button",{class:"ucas-q-expand",type:"button",onClick:i[9]||(i[9]=m=>Hs("q3")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[68]||(i[68]=[et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M15 3h6v6" data-v-9e3c962d></path><path d="M9 21H3v-6" data-v-9e3c962d></path><path d="M21 3l-7 7" data-v-9e3c962d></path><path d="M3 21l7-7" data-v-9e3c962d></path></svg> Expand ',2)])],8,Hd),a("span",{class:se(["ucas-q-count",{"ucas-q-count--active":w.q3.length>0}])},x(w.q3.length.toLocaleString())+" chars ",3)])]),a("textarea",{id:"q3",class:"ucas-textarea",disabled:!e.canEdit,value:w.q3,onClick:jt,onFocus:jt,onInput:i[10]||(i[10]=m=>Ds("q3",m.target.value)),placeholder:"Super-curricular, work experience, reading, volunteering, clubs what did it develop?"},null,40,Dd)])]),e.commentsEnabled?(b(),_("section",Vd,[a("div",Bd,[a("div",Kd,[i[71]||(i[71]=et('<div class="ucas-comments-header-left" data-v-9e3c962d><div class="ucas-comments-icon" aria-hidden="true" data-v-9e3c962d><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-title-group" data-v-9e3c962d><h2 class="ucas-comments-title" data-v-9e3c962d>Tutor feedback</h2><p class="ucas-comments-subtitle" data-v-9e3c962d>Comments from staff to help improve your statement</p></div></div>',1)),a("div",{class:"ucas-comments-count",title:`${(P.value||[]).length} comment(s)`},[a("span",Gd,x((P.value||[]).length),1),i[70]||(i[70]=a("span",null,"Comments",-1))],8,Yd)]),e.canAddComment?(b(),_("div",Wd,[a("div",zd,[a("div",Jd,x(U(e.staffEmail||"Staff")),1),a("div",Xd,[Pe(a("textarea",{"onUpdate:modelValue":i[11]||(i[11]=m=>H.value=m),class:"ucas-comments-textarea",placeholder:"Write feedback for this student's personal statement",disabled:te.value},null,8,Qd),[[Dt,H.value]]),a("div",Zd,[i[73]||(i[73]=et('<div class="ucas-comments-compose-hint" data-v-9e3c962d><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><circle cx="12" cy="12" r="10" data-v-9e3c962d></circle><path d="M12 16v-4" data-v-9e3c962d></path><path d="M12 8h.01" data-v-9e3c962d></path></svg><span data-v-9e3c962d>Visible to the student immediately</span></div>',1)),a("div",ef,[a("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:i[12]||(i[12]=m=>H.value=""),disabled:te.value||!H.value}," Cancel ",8,tf),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:qr,disabled:te.value||!H.value.trim()},[te.value?K("",!0):(b(),_("svg",nf,[...i[72]||(i[72]=[a("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),a("path",{d:"M22 2 11 13"},null,-1)])])),Q(" "+x(te.value?"Posting":"Post feedback"),1)],8,sf)])])])]),a("div",of,[i[74]||(i[74]=a("div",{class:"ucas-comments-quick-label"},"Quick feedback",-1)),a("div",af,[(b(),_(oe,null,Te(Se,m=>a("button",{key:m,class:"ucas-comments-chip",type:"button",onClick:R=>ae(m),disabled:te.value},x(m),9,rf)),64))])])])):K("",!0),we.value.length===0?(b(),_("div",lf,[...i[75]||(i[75]=[et('<div class="ucas-comments-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div class="ucas-comments-empty-title" data-v-9e3c962d>No feedback yet</div><div class="ucas-comments-empty-text" data-v-9e3c962d>Staff comments will appear here to help improve your personal statement.</div>',3)])])):(b(),_("div",cf,[(b(!0),_(oe,null,Te(we.value,m=>(b(),_(oe,{key:m.key},[a("div",{class:"ucas-comments-divider","aria-label":m.label},[i[76]||(i[76]=a("div",{class:"ucas-comments-divider-line"},null,-1)),a("span",df,x(m.label),1),i[77]||(i[77]=a("div",{class:"ucas-comments-divider-line"},null,-1))],8,uf),(b(!0),_(oe,null,Te(m.items,R=>(b(),_("div",{key:R.id,class:"ucas-comments-item"},[a("div",ff,[a("div",{class:se(["ucas-comments-avatar",ue(R.staffEmail)])},x(U(R.staffEmail||"Staff")),3),a("div",vf,[a("div",pf,[a("div",hf,[a("span",mf,x(R.staffEmail||"Staff"),1),c(R.staffEmail).trim().toLowerCase()==="virtual tutor"?(b(),_("span",gf," Virtual Tutor ")):K("",!0)]),a("span",yf,x(Tr(R.createdAt)),1)]),a("div",{class:se(["ucas-comments-body",{"ucas-comments-body--collapsed":!xe(R.id)&&c(R.comment).length>Gs}])},[xe(R.id)?(b(),_(oe,{key:0},[Q(x(R.comment),1)],64)):(b(),_(oe,{key:1},[Q(x(ce(R.comment)),1)],64))],2),c(R.comment).length>Gs?(b(),_("button",{key:0,class:"ucas-comments-more",type:"button",onClick:J=>z(R.id)},x(xe(R.id)?"Show less":"Show more"),9,bf)):K("",!0)])])]))),128))],64))),128))]))])])):K("",!0)]),a("footer",_f,[a("div",wf,[a("div",kf,[a("span",Cf,x(Ae.value.toLocaleString()),1),i[80]||(i[80]=a("span",{class:"ucas-footer-divider"},"/",-1)),a("span",Sf,x(ze.toLocaleString()),1),a("span",xf,[i[78]||(i[78]=Q(" ( ",-1)),os.value>0?(b(),_(oe,{key:0},[Q(x(os.value.toLocaleString())+" over",1)],64)):(b(),_(oe,{key:1},[Q(x(Tn.value.toLocaleString())+" remaining",1)],64)),i[79]||(i[79]=Q(" ) ",-1))])]),Ae.value>0&&Ae.value<bt?(b(),_("div",Ef,[i[81]||(i[81]=a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),a("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),a("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),Q(" Add "+x(bt-Ae.value)+" more characters to reach the minimum. ",1)])):K("",!0),Ae.value>ze?(b(),_("div",Af,[i[82]||(i[82]=a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),Q(" Over the limit by "+x(os.value)+" characters. Shorten your statement before saving or marking complete. ",1)])):Ae.value>=ze?(b(),_("div",$f,[...i[83]||(i[83]=[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),a("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),Q(" Maximum character limit reached. ",-1)])])):K("",!0)]),a("div",Tf,[Ce(Dl,{name:"toast-fade"},{default:Da(()=>[o.value?(b(),_("span",If,[i[84]||(i[84]=a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),Q(" "+x(o.value),1)])):K("",!0)]),_:1})])]),q.value?(b(),_("div",{key:0,class:"ucas-feedback-overlay",onClick:i[15]||(i[15]=Ct(m=>q.value=!1,["self"]))},[a("div",Of,[a("div",Pf,[i[86]||(i[86]=a("div",{class:"ucas-feedback-title"},"Feedback",-1)),a("button",{class:"ucas-btn-close",type:"button",onClick:i[13]||(i[13]=m=>q.value=!1),"aria-label":"Close feedback"},[...i[85]||(i[85]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),a("div",Mf,[Y.value?(b(),_("div",Ff,[...i[87]||(i[87]=[a("span",{class:"ucas-spinner"},null,-1),Q(" Generating feedback ",-1)])])):B.value?(b(),_("div",Rf,x(B.value),1)):(b(),_("div",Uf,x(I.value||"No feedback available yet."),1))]),a("div",jf,[a("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[14]||(i[14]=m=>So(!0)),disabled:Y.value}," Regenerate ",8,Nf),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ur,disabled:Y.value||X.value||!I.value,title:I.value?"Add this feedback into Tutor comments as Virtual Tutor":"Generate feedback first"},x(X.value?"Adding":"Add as a comment"),9,Lf)])])])):K("",!0),ns.value?(b(),_("div",{key:1,class:"ucas-expand-overlay",onClick:Ct($n,["self"])},[a("div",qf,[a("div",Hf,[a("div",Df,x(xr.value),1),a("div",Vf,[a("span",Bf,x(Er.value.toLocaleString())+" in this section",1),a("span",Kf,x(Ae.value.toLocaleString())+"/"+x(ze.toLocaleString())+" total",1)]),a("button",{class:"ucas-btn-close",type:"button",onClick:$n,"aria-label":"Close expanded writing"},[...i[88]||(i[88]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),a("div",Yf,[ot.value==="preview"?(b(),_("div",Gf,x(An.value||"Your combined statement will appear here as you type"),1)):(b(),_("textarea",{key:1,ref_key:"expandedTextareaEl",ref:qs,class:"ucas-textarea ucas-textarea-expanded",disabled:!e.canEdit,value:An.value,onInput:i[16]||(i[16]=m=>Ds(ot.value,m.target.value))},null,40,Wf))]),a("div",{class:"ucas-expand-footer"},[i[89]||(i[89]=a("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to see the full page again. ",-1)),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:$n},"Done")])])])):K("",!0),L.value?(b(),_("div",{key:2,class:"ucas-expand-overlay",onClick:Ct(Fe,["self"])},[a("div",zf,[a("div",Jf,[a("div",Xf,x(re.value),1),a("div",Qf,[a("span",Zf,x(le.value.toLocaleString())+" characters",1)]),a("button",{class:"ucas-btn-close",type:"button",onClick:Fe,"aria-label":"Close expanded writing"},[...i[90]||(i[90]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),a("div",ev,[a("textarea",{ref_key:"refExpandedTextareaEl",ref:G,class:"ucas-textarea ucas-textarea-expanded",disabled:!C.value,value:fe.value,onInput:i[17]||(i[17]=m=>{V.value==="staff2"?k.value=m.target.value:O.value=m.target.value})},null,40,tv)]),a("div",{class:"ucas-expand-footer"},[i[91]||(i[91]=a("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to return to the reference panel. ",-1)),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Fe},"Done")])])])):K("",!0),u.value?(b(),_("div",{key:3,class:"ucas-feedback-overlay",onClick:i[32]||(i[32]=Ct(m=>u.value=!1,["self"]))},[a("div",sv,[a("div",nv,[a("div",ov,[a("div",av,[(b(),_("svg",rv,[e.canEdit?(b(),_("path",iv)):K("",!0),e.canEdit?(b(),_("circle",lv)):K("",!0),e.canEdit?(b(),_("path",cv)):K("",!0),e.canEdit?(b(),_("path",uv)):(b(),_("path",dv)),e.canEdit?K("",!0):(b(),_("polyline",fv)),e.canEdit?K("",!0):(b(),_("line",vv)),e.canEdit?K("",!0):(b(),_("line",pv)),e.canEdit?K("",!0):(b(),_("line",hv))]))]),a("div",mv,[i[92]||(i[92]=a("div",{class:"ucas-ref-title"},"Teacher reference",-1)),a("div",gv,[e.canEdit?(b(),_("span",yv,"Invite teachers to contribute to your UCAS reference")):(b(),_("span",bv,"View and add contributions (Sections 2 & 3)"))])])]),a("button",{class:"ucas-ref-close",type:"button",onClick:i[18]||(i[18]=m=>u.value=!1),"aria-label":"Close"},[...i[93]||(i[93]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),a("div",_v,[a("div",wv,[i[96]||(i[96]=a("span",{class:"ucas-ref-status-label"},"Reference status",-1)),a("span",{class:se(["ucas-ref-status-pill",`ucas-ref-status--${ee.value}`])},[ee.value==="completed"||ee.value==="finalised"?(b(),_("svg",kv,[...i[94]||(i[94]=[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),a("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(b(),_("svg",Cv,[...i[95]||(i[95]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),Q(" "+x(N.value),1)],2),v.value.total?(b(),_("span",Sv,x(v.value.submitted)+"/"+x(v.value.total)+" submitted",1)):(b(),_("span",xv,"No invites yet"))]),a("button",{class:"ucas-ref-refresh",type:"button",onClick:ft,disabled:ie.value},[i[97]||(i[97]=et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-9e3c962d></path><path d="M21 3v5h-5" data-v-9e3c962d></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-9e3c962d></path><path d="M3 21v-5h5" data-v-9e3c962d></path></svg>',1)),Q(" "+x(ie.value?"Refreshing":"Refresh"),1)],8,Ev)]),a("div",Av,[e.canEdit?(b(),_("div",$v,[a("div",Tv,[a("div",Iv,[a("div",{class:se(["ucas-ref-step-circle",{complete:v.value.total>0}])},[v.value.total>0?(b(),_("svg",Ov,[...i[98]||(i[98]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(b(),_("span",Pv,"1"))],2),i[99]||(i[99]=a("div",{class:"ucas-ref-step-label"},"Invite teachers",-1))]),a("div",Mv,[a("div",{class:se(["ucas-ref-step-circle",{active:v.value.total>0&&v.value.submitted<v.value.total,complete:v.value.total>0&&v.value.submitted===v.value.total}])},[...i[100]||(i[100]=[a("span",null,"2",-1)])],2),a("div",{class:se(["ucas-ref-step-label",{active:v.value.total>0&&v.value.submitted<v.value.total}])},"Awaiting responses",2)]),a("div",Fv,[a("div",{class:se(["ucas-ref-step-circle",{complete:ee.value==="completed"||ee.value==="finalised"}])},[ee.value==="completed"||ee.value==="finalised"?(b(),_("svg",Rv,[...i[101]||(i[101]=[a("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(b(),_("span",Uv,"3"))],2),i[102]||(i[102]=a("div",{class:"ucas-ref-step-label"},"Reference complete",-1))])]),a("div",jv,[a("div",Nv,[i[103]||(i[103]=a("div",null,[a("div",{class:"ucas-ref-section-title"},"Invited teachers"),a("div",{class:"ucas-ref-section-subtitle"},"Track who has been asked to contribute")],-1)),a("div",Lv,x((j.value||[]).length)+" invited",1)]),j.value.length===0?(b(),_("div",qv,[...i[104]||(i[104]=[et('<div class="ucas-ref-empty-icon" aria-hidden="true" data-v-9e3c962d><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" data-v-9e3c962d><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-9e3c962d></path></svg></div><div data-v-9e3c962d><div class="ucas-ref-empty-title" data-v-9e3c962d>No invitations yet</div><div class="ucas-ref-empty-text" data-v-9e3c962d>Invite a teacher below to get started.</div></div>',2)])])):(b(),_("div",Hv,[(b(!0),_(oe,null,Te(j.value,m=>(b(),_("div",{key:m.id,class:se(["ucas-ref-invite",{submitted:m.status==="submitted"}])},[a("div",Dv,[a("div",{class:se(["ucas-ref-invite-avatar",ue(m.teacherEmail)])},x(U(m.teacherName||m.teacherEmail)),3),a("div",Vv,[a("div",Bv,x(m.teacherName||m.teacherEmail),1),a("div",Kv,x(m.subjectKey||"No subject"),1)])]),a("div",Yv,[a("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>Le(m),disabled:De.value}," Reinvite ",8,Gv),a("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>dt(m)}," Remove ",8,Wv)]),a("div",{class:se(["ucas-ref-invite-status",m.status==="submitted"?"ok":"wait"])},[m.status==="submitted"?(b(),_("svg",zv,[...i[105]||(i[105]=[a("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),a("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(b(),_("svg",Jv,[...i[106]||(i[106]=[a("circle",{cx:"12",cy:"12",r:"10"},null,-1),a("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),Q(" "+x(m.status==="submitted"?"Submitted":"Pending"),1)],2)],2))),128))])),Ee.value.size?(b(),_("div",Xv,[a("span",Qv,x(Ee.value.size)+" removed from list",1),a("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:mt},"Restore")])):K("",!0)]),a("div",Zv,[i[113]||(i[113]=et('<div class="ucas-ref-form-title" data-v-9e3c962d><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-9e3c962d><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-9e3c962d></path><circle cx="9" cy="7" r="4" data-v-9e3c962d></circle><line x1="19" y1="8" x2="19" y2="14" data-v-9e3c962d></line><line x1="22" y1="11" x2="16" y2="11" data-v-9e3c962d></line></svg> Invite another teacher </div>',1)),a("div",ep,[a("div",null,[i[107]||(i[107]=a("div",{class:"ucas-ref-label"},"Teacher email",-1)),Pe(a("input",{class:"ucas-ref-input",type:"email","onUpdate:modelValue":i[19]||(i[19]=m=>Oe.value=m),placeholder:"teacher@school.org"},null,512),[[Dt,Oe.value]])]),a("div",null,[i[109]||(i[109]=a("div",{class:"ucas-ref-label"},"Subject (optional)",-1)),Pe(a("select",{class:"ucas-ref-select","onUpdate:modelValue":i[20]||(i[20]=m=>$e.value=m)},[i[108]||(i[108]=a("option",{value:""},"No subject",-1)),(b(!0),_(oe,null,Te(Nt.value,m=>(b(),_("option",{key:m.key,value:m.label},x(m.label),9,tp))),128))],512),[[St,$e.value]])])]),a("div",sp,[a("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[21]||(i[21]=m=>{Oe.value="",$e.value=""}),disabled:De.value}," Clear ",8,np),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:ms,disabled:De.value||!Oe.value.trim()},[De.value?K("",!0):(b(),_("svg",ap,[...i[110]||(i[110]=[a("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),a("path",{d:"M22 2 11 13"},null,-1)])])),Q(" "+x(De.value?"Sending":"Send invitation"),1)],8,op)]),Xe.value?(b(),_("div",rp,[i[111]||(i[111]=a("div",{class:"ucas-ref-linkcopy-label"},"Or copy invite link",-1)),a("div",ip,[a("input",{class:"ucas-ref-linkcopy-input",type:"text",value:Xe.value,readonly:""},null,8,lp),a("button",{class:"ucas-ref-linkcopy-btn",type:"button",onClick:i[22]||(i[22]=m=>nt(Xe.value))},"Copy")]),i[112]||(i[112]=a("div",{class:"ucas-ref-linkcopy-hint"},"Share this link directly with your teacher if email doesn't arrive.",-1))])):K("",!0)])])):(b(),_("div",cp,[a("div",up,[i[114]||(i[114]=a("div",{class:"ucas-ref-staff-title"},"Reference (staff view)",-1)),h.value&&h.value.updatedAt?(b(),_("div",dp,"Updated "+x(new Date(h.value.updatedAt).toLocaleString()),1)):K("",!0)]),p.value?(b(),_("div",fp,[...i[115]||(i[115]=[a("span",null,"Loading reference",-1)])])):h.value?(b(),_("div",pp,[a("div",hp,[a("div",mp,[i[117]||(i[117]=a("div",{class:"ucas-ref-contrib-title"},[a("span",{class:"ucas-ref-num"},"3"),Q(" Subject teacher contributions ")],-1)),a("span",gp,x((h.value.section3||[]).length)+" contributions",1)]),i[121]||(i[121]=a("div",{class:"ucas-ref-contrib-sub"},"Add specific evidence of academic potential and engagement relevant to the course.",-1)),a("div",yp,[a("div",bp,[Pe(a("select",{class:"ucas-ref-select","onUpdate:modelValue":i[23]||(i[23]=m=>$.value=m)},[i[118]||(i[118]=a("option",{value:""},"No subject",-1)),(b(!0),_(oe,null,Te(Nt.value,m=>(b(),_("option",{key:m.key,value:m.label},x(m.label),9,_p))),128))],512),[[St,$.value]])]),Pe(a("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[24]||(i[24]=m=>O.value=m),placeholder:"Describe the student's ability, achievements, and potential in your subject"},null,512),[[Dt,O.value]]),a("div",wp,[a("span",kp,x((O.value||"").length.toLocaleString())+" characters",1),a("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[25]||(i[25]=m=>Re("staff3")),disabled:!C.value}," Expand ",8,Cp),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[26]||(i[26]=m=>Qe(3)),disabled:T.value||!C.value||!O.value.trim()},[T.value?K("",!0):(b(),_("svg",xp,[...i[119]||(i[119]=[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),a("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),a("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),Q(" "+x(T.value?"Saving":"Save Section 3"),1)],8,Sp)]),C.value?K("",!0):(b(),_("div",Ep,"Saving is unavailable because your staff email is missing in this embedded context."))]),(h.value.section3||[]).length?(b(),_("div",Ap,[i[120]||(i[120]=a("div",{class:"ucas-ref-existing-title"},"Existing contributions",-1)),a("div",$p,[(b(!0),_(oe,null,Te(h.value.section3,m=>(b(),_("div",{key:m.id,class:"ucas-ref-existing-item"},[a("div",Tp,[a("div",Ip,[a("div",Op,x(U(m.authorName||m.authorEmail)),1),a("span",Pp,x(m.authorName||m.authorEmail),1)]),a("span",Mp,x(m.subjectKey||""),1)]),a("div",Fp,x(m.text),1)]))),128))])])):K("",!0)]),a("div",Rp,[a("button",{class:"ucas-ref-accordion-head",type:"button",onClick:i[27]||(i[27]=m=>D.value=!D.value)},[i[123]||(i[123]=a("div",{class:"ucas-ref-contrib-title"},[a("span",{class:"ucas-ref-num"},"2"),Q(" Extenuating circumstances ")],-1)),a("div",Up,[i[122]||(i[122]=a("span",{class:"ucas-ref-badge"},"Optional",-1)),a("span",jp,x(D.value?"":""),1)])]),D.value?(b(),_("div",Np,[i[125]||(i[125]=a("div",{class:"ucas-ref-contrib-sub"},"Add factual, course-relevant context (with student permission).",-1)),a("div",Lp,[Pe(a("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[28]||(i[28]=m=>k.value=m),placeholder:"Add any relevant extenuating circumstances here"},null,512),[[Dt,k.value]]),a("div",qp,[a("span",Hp,x((k.value||"").length.toLocaleString())+" characters",1),a("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[29]||(i[29]=m=>Re("staff2")),disabled:!C.value}," Expand ",8,Dp),a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[30]||(i[30]=m=>Qe(2)),disabled:M.value||!C.value||!k.value.trim()},[M.value?K("",!0):(b(),_("svg",Bp,[...i[124]||(i[124]=[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),a("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),a("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),Q(" "+x(M.value?"Saving":"Save Section 2"),1)],8,Vp)]),C.value?K("",!0):(b(),_("div",Kp,"Saving is unavailable because your staff email is missing in this embedded context."))])])):K("",!0)]),a("div",Yp,[i[126]||(i[126]=a("div",{class:"ucas-ref-section-head"},[a("div",null,[a("div",{class:"ucas-ref-section-title"},"Section 1  Centre statement"),a("div",{class:"ucas-ref-section-subtitle"},"Standard centre template (usually written once)")])],-1)),a("div",Gp,x(c(h.value.section1Text)||"No centre template yet."),1)]),a("div",Wp,[a("div",zp,[i[127]||(i[127]=a("div",null,[a("div",{class:"ucas-ref-section-title"},"Section 2  Extenuating circumstances"),a("div",{class:"ucas-ref-section-subtitle"},"Existing contributions")],-1)),a("div",Jp,x((h.value.section2||[]).length),1)]),(h.value.section2||[]).length===0?(b(),_("div",Xp,[...i[128]||(i[128]=[a("span",null,"No contributions yet.",-1)])])):(b(),_("div",Qp,[(b(!0),_(oe,null,Te(h.value.section2,m=>(b(),_("div",{key:m.id,class:"ucas-ref-contrib-item"},[a("div",Zp,[Q(x(m.authorName||m.authorEmail)+" ",1),m.subjectKey?(b(),_("span",eh," "+x(m.subjectKey),1)):K("",!0)]),a("div",th,x(m.text),1)]))),128))]))]),a("div",sh,[a("div",nh,[i[129]||(i[129]=a("div",null,[a("div",{class:"ucas-ref-section-title"},"Invited teachers"),a("div",{class:"ucas-ref-section-subtitle"},"Status of external invites")],-1)),a("div",oh,x((j.value||[]).length),1)]),j.value.length===0?(b(),_("div",ah,[...i[130]||(i[130]=[a("span",null,"No invitations yet.",-1)])])):(b(),_("div",rh,[(b(!0),_(oe,null,Te(j.value,m=>(b(),_("div",{key:m.id,class:se(["ucas-ref-invite",{submitted:m.status==="submitted"}])},[a("div",ih,[a("div",{class:se(["ucas-ref-invite-avatar",ue(m.teacherEmail)])},x(U(m.teacherName||m.teacherEmail)),3),a("div",lh,[a("div",ch,x(m.teacherName||m.teacherEmail),1),a("div",uh,x(m.subjectKey||"No subject"),1)])]),a("div",dh,[a("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>Le(m),disabled:De.value}," Reinvite ",8,fh),a("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>dt(m)}," Remove ",8,vh)]),a("div",{class:se(["ucas-ref-invite-status",m.status==="submitted"?"ok":"wait"])},x(m.status==="submitted"?"Submitted":"Pending"),3)],2))),128))])),Ee.value.size?(b(),_("div",ph,[a("span",hh,x(Ee.value.size)+" removed from list",1),a("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:mt},"Restore")])):K("",!0)])])):(b(),_("div",vp,[...i[116]||(i[116]=[a("span",null,"No reference data found.",-1)])]))]))]),a("div",mh,[a("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[31]||(i[31]=m=>u.value=!1)},"Done")])])])):K("",!0)])])}}},yh=lt(gh,[["__scopeId","data-v-9e3c962d"]]),bh={class:"tutor-ucas-modal"},_h={class:"tutor-ucas-header"},wh={class:"tutor-ucas-title"},kh={class:"tutor-ucas-sub"},Ch={class:"tutor-ucas-body"},Sh={key:0},xh={key:0,class:"tutor-ucas-iframe-loading",style:{position:"fixed",inset:"0","z-index":"10100"}},Eh={key:1,class:"tutor-ucas-error",style:{position:"fixed",inset:"24px","z-index":"10100","max-width":"820px",margin:"auto"}},Ah={class:"tutor-ucas-error-msg"},$h={key:1,class:"tutor-ucas-loading"},Th={key:2,class:"tutor-ucas-error"},Ih={class:"tutor-ucas-error-msg"},Oh={key:3,class:"tutor-ucas-content"},Ph={class:"tutor-ucas-status-row"},Mh={class:"tutor-ucas-status-card"},Fh={class:"detail"},Rh={class:"tutor-ucas-status-card"},Uh={class:"detail"},jh={key:0},Nh={class:"tutor-ucas-status-card"},Lh={class:"detail"},qh={key:0},Hh={class:"tutor-ucas-actions"},Dh=["disabled"],Vh={class:"tutor-ucas-section"},Bh={class:"tutor-ucas-section-head"},Kh={class:"muted"},Yh={key:0,class:"tutor-ucas-empty"},Gh={key:1,class:"tutor-ucas-contribs"},Wh={class:"tutor-ucas-contrib-group-title"},zh={class:"tutor-ucas-contrib-meta"},Jh={class:"name"},Xh={class:"muted"},Qh={class:"tutor-ucas-contrib-text"},Zh={class:"tutor-ucas-contrib-actions"},em=["onClick"],tm=["onClick"],sm={class:"tutor-ucas-section-head"},nm={style:{display:"flex","align-items":"center",gap:"10px"}},om={class:"muted"},am=["disabled"],rm={class:"tutor-ucas-editor-footer"},im={key:0,class:"tutor-ucas-inline-error"},lm={class:"tutor-ucas-editor-actions"},cm=["disabled"],um=["disabled"],dm=["disabled"],fm="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",vm={__name:"TutorUcasModal",props:{isOpen:{type:Boolean,required:!0},student:{type:Object,default:null},staffEmail:{type:String,default:""},staffName:{type:String,default:""},academicYear:{type:String,default:"current"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=F(!1),r=F(""),l=F(null),c=F(null),d=F(""),y=F(""),f=F(!1),g=F(""),w=F(!1),E=F(!1),P=F(!1),H=F(!1),te=F(!1),q=F(""),Y=F(null),X=F(null),I=F(null),B=F(null),de=Z(()=>{var p,h;const j=((h=(p=l.value)==null?void 0:p.data)==null?void 0:h.answers)||{},N=(j.q1||"").length,v=(j.q2||"").length,u=(j.q3||"").length;return N+v+u}),Se=Z(()=>{var u;const j=((u=l.value)==null?void 0:u.data)||{},N=!!j.selectedCourseKey,v=!!(j.requirementsByCourse&&Object.keys(j.requirementsByCourse).length>0);return N||v}),xe=Z(()=>B.value?"Completed":de.value>=350?"In progress":"Not started"),z=Z(()=>B.value?"pill--ok":de.value>=350?"pill--warn":"pill--muted"),ce=Z(()=>(d.value||"").trim()),ae=Z(()=>ce.value.length>0),U=Z(()=>d.value.trim()!==(y.value||"").trim()),ue=Z(()=>{var u,p;const j=((p=(u=c.value)==null?void 0:u.data)==null?void 0:p.section3)||[],N=new Map;for(const h of j){const C=(h.subjectKey||"General").trim()||"General",k=N.get(C)||[];k.push(h),N.set(C,k)}const v=[];for(const[h,C]of N.entries())v.push({subjectKey:h,items:[...C].sort((k,$)=>String($.updatedAt||$.createdAt||"").localeCompare(String(k.updatedAt||k.createdAt||"")))});return v.sort((h,C)=>h.subjectKey.localeCompare(C.subjectKey)),v});async function ge(){var j,N,v,u,p,h,C,k,$,O,M;if((j=s.student)!=null&&j.email){o.value=!0,r.value="",g.value="";try{const[T,D]=await Promise.all([vt.getUcasApplication(s.student.email,s.academicYear),vt.getReferenceFull(s.student.email,s.academicYear)]);l.value=T,c.value=D,B.value=((v=(N=l.value)==null?void 0:N.data)==null?void 0:v.statement_completed_at)||((p=(u=l.value)==null?void 0:u.data)==null?void 0:p.statementCompletedAt)||null;const L=((C=(h=c.value)==null?void 0:h.data)==null?void 0:C.tutorCompiledSection3)||"";d.value=L,y.value=L,X.value=(($=(k=c.value)==null?void 0:k.data)==null?void 0:$.tutorCompiledUpdatedAt)||null,I.value=((M=(O=c.value)==null?void 0:O.data)==null?void 0:M.tutorCompiledCompletedAt)||null}catch(T){r.value=(T==null?void 0:T.message)||"Failed to load"}finally{o.value=!1}}}st(()=>{var j;return[s.isOpen,(j=s.student)==null?void 0:j.email,s.academicYear]},([j])=>{j&&ge()}),st(()=>s.isOpen,j=>{if(j)try{document.body.style.overflow="hidden"}catch{}else{try{document.body.style.overflow=""}catch{}P.value=!1,H.value=!1}},{immediate:!0});function Ne(){U.value&&!confirm("You have unsaved changes. Close without saving?")||n("close")}async function we(){var j;if((j=s.student)!=null&&j.email){g.value="",f.value=!0;try{await vt.saveTutorCompiled(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName,text:d.value}),await ge()}catch(N){g.value=(N==null?void 0:N.message)||"Failed to save"}finally{f.value=!1}}}async function ie(){var j;if((j=s.student)!=null&&j.email&&ae.value&&confirm("Mark this tutor reference as READY for UCAS?")){w.value=!0,g.value="";try{U.value&&await vt.saveTutorCompiled(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName,text:d.value}),await vt.markTutorCompiledComplete(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ge()}catch(N){g.value=(N==null?void 0:N.message)||"Failed to mark complete"}finally{w.value=!1}}}async function ee(){var j;if((j=s.student)!=null&&j.email&&confirm("Send back to tutor (unmark complete)?")){w.value=!0,g.value="";try{await vt.unmarkTutorCompiledComplete(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ge()}catch(N){g.value=(N==null?void 0:N.message)||"Failed to unmark complete"}finally{w.value=!1}}}function Me(j){const N=((j==null?void 0:j.text)||"").trim();if(!N)return;const v=d.value||"",u=v.trim().length?`

`:"";d.value=`${v}${u}${N}`.trimStart()}async function Ee(j){try{await navigator.clipboard.writeText(j||"")}catch{}}const Oe=Z(()=>{var N,v,u;return(((N=Y.value)==null?void 0:N.academicYear)||((u=(v=Y.value)==null?void 0:v.data)==null?void 0:u.academicYear)||""||s.academicYear||"current").toString()}),$e=Z(()=>{var N;const j=Y.value;return Array.isArray(j==null?void 0:j.subjects)?j.subjects:Array.isArray((N=j==null?void 0:j.data)==null?void 0:N.subjects)?j.data.subjects:[]}),De=Z(()=>{var u;const j=Y.value,N=(j==null?void 0:j.student)||((u=j==null?void 0:j.data)==null?void 0:u.student)||null;return N&&Array.isArray(N.universityOffers)?N.universityOffers:[]});async function Xe(){var N;const j=String(((N=s.student)==null?void 0:N.email)||"").trim();if(j){H.value=!0,te.value=!0,q.value="";try{const v=await vt.getAcademicProfile(j,s.academicYear||"current",{roleHint:"staff",staffEmail:s.staffEmail||""});if(!v||v.success===!1)throw new Error((v==null?void 0:v.error)||"Failed to load academic profile");Y.value=v}catch(v){q.value=(v==null?void 0:v.message)||"Failed to open UCAS"}finally{te.value=!1}}}function At(){H.value=!1,te.value=!1,q.value=""}function ct(){P.value=!P.value}async function ut(){var j;if((j=s.student)!=null&&j.email&&confirm("Request further edits to the students personal statement?")){E.value=!0;try{await vt.requestUcasStatementEdits(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ge()}catch(N){r.value=(N==null?void 0:N.message)||"Failed to request edits"}finally{E.value=!1}}}function dt(){ge()}function mt(j){if(!j)return"";try{const N=new Date(j);return Number.isNaN(N.getTime())?String(j):N.toLocaleString()}catch{return String(j)}}return(j,N)=>{var v,u,p,h,C;return e.isOpen?(b(),_("div",{key:0,class:"tutor-ucas-overlay",onClick:Ct(Ne,["self"])},[a("div",bh,[a("div",_h,[a("div",wh,[a("h3",null,x(((v=e.student)==null?void 0:v.name)||"Student")+"  UCAS",1),a("div",kh,x(((u=e.student)==null?void 0:u.email)||""),1)]),a("button",{class:"tutor-ucas-close",onClick:Ne},"")]),a("div",Ch,[H.value?(b(),_("div",Sh,[te.value?(b(),_("div",xh,[...N[1]||(N[1]=[a("div",{class:"spinner"},null,-1),a("div",null,"Loading UCAS application",-1)])])):q.value?(b(),_("div",Eh,[N[2]||(N[2]=a("div",{class:"tutor-ucas-error-title"},"Could not open UCAS application",-1)),a("div",Ah,x(q.value),1),a("div",{style:{display:"flex",gap:"10px","flex-wrap":"wrap"}},[a("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:Xe},"Try again"),a("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:At},"Back to reference")])])):(b(),rn(yh,{key:2,studentEmail:((p=e.student)==null?void 0:p.email)||"",academicYear:Oe.value,subjects:$e.value,offers:De.value,apiUrl:fm,canEdit:!1,staffEmail:e.staffEmail||"",onClose:At},null,8,["studentEmail","academicYear","subjects","offers","staffEmail"]))])):K("",!0),o.value?(b(),_("div",$h,[...N[3]||(N[3]=[a("div",{class:"spinner"},null,-1),a("div",null,"Loading UCAS data",-1)])])):r.value?(b(),_("div",Th,[N[4]||(N[4]=a("div",{class:"tutor-ucas-error-title"},"Could not load UCAS data",-1)),a("div",Ih,x(r.value),1),a("button",{class:"tutor-ucas-btn",onClick:dt},"Try again")])):(b(),_("div",Oh,[a("div",Ph,[a("div",Mh,[N[5]||(N[5]=a("div",{class:"label"},"Application",-1)),a("div",{class:se(["pill",Se.value?"pill--ok":"pill--muted"])},x(Se.value?"Started":"Not started"),3),a("div",Fh,x(Se.value?"Course / offers started":"No course/offers yet"),1)]),a("div",Rh,[N[6]||(N[6]=a("div",{class:"label"},"Personal statement",-1)),a("div",{class:se(["pill",z.value])},x(xe.value),3),a("div",Uh,[Q(x(de.value)+" chars ",1),B.value?(b(),_("span",jh,"  completed")):K("",!0)])]),a("div",Nh,[N[7]||(N[7]=a("div",{class:"label"},"Tutor reference",-1)),a("div",{class:se(["pill",I.value?"pill--ok":ae.value?"pill--warn":"pill--muted"])},x(I.value?"Complete":ae.value?"In progress":"Not started"),3),a("div",Lh,[Q(x(ce.value.length)+" chars ",1),I.value?(b(),_("span",qh,"  marked complete")):K("",!0)])])]),a("div",Hh,[a("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",onClick:Xe}," Open UCAS application "),a("button",{class:"tutor-ucas-btn",disabled:E.value,onClick:ut},x(E.value?"Requesting":"Request edits (statement)"),9,Dh),N[8]||(N[8]=a("div",{class:"tutor-ucas-actions-spacer"},null,-1)),a("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:dt}," Reload ")]),a("div",Vh,[a("div",Bh,[N[9]||(N[9]=a("h4",null,"Incoming subject teacher references",-1)),a("div",Kh,x((((h=c.value)==null?void 0:h.section3)||[]).length)+" contributions",1)]),(((C=c.value)==null?void 0:C.section3)||[]).length===0?(b(),_("div",Yh," No subject teacher contributions yet. ")):(b(),_("div",Gh,[(b(!0),_(oe,null,Te(ue.value,k=>(b(),_("div",{key:k.subjectKey,class:"tutor-ucas-contrib-group"},[a("div",Wh,x(k.subjectKey),1),(b(!0),_(oe,null,Te(k.items,$=>(b(),_("div",{key:$.id,class:"tutor-ucas-contrib"},[a("div",zh,[a("div",Jh,x($.authorName||$.authorEmail||"Teacher"),1),a("div",Xh,x(mt($.updatedAt||$.createdAt)),1)]),a("div",Qh,x($.text),1),a("div",Zh,[a("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm",onClick:O=>Me($)}," Add to compiled ",8,em),a("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm tutor-ucas-btn--ghost",onClick:O=>Ee($.text)}," Copy ",8,tm)])]))),128))]))),128))]))]),a("div",{class:se(["tutor-ucas-section",{"tutor-ucas-section--expanded":P.value}])},[a("div",sm,[N[10]||(N[10]=a("h4",null,"Tutor compiled reference (final narrative)",-1)),a("div",nm,[a("div",om," Saved: "+x(X.value?mt(X.value):""),1),a("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost tutor-ucas-btn--sm",type:"button",onClick:ct},x(P.value?"Collapse":"Expand"),1)])]),Pe(a("textarea",{"onUpdate:modelValue":N[0]||(N[0]=k=>d.value=k),class:"tutor-ucas-textarea",placeholder:"Build the final tutor narrative here",disabled:f.value||w.value,rows:"10",spellcheck:"true",autocorrect:"on",autocapitalize:"sentences"},null,8,am),[[Dt,d.value]]),a("div",rm,[g.value?(b(),_("div",im,x(g.value),1)):K("",!0),a("div",lm,[a("button",{class:"tutor-ucas-btn",disabled:f.value||!U.value,onClick:we},x(f.value?"Saving":"Save draft"),9,cm),I.value?(b(),_("button",{key:1,class:"tutor-ucas-btn tutor-ucas-btn--danger",disabled:w.value,onClick:ee},x(w.value?"Updating":"Send back (unmark complete)"),9,dm)):(b(),_("button",{key:0,class:"tutor-ucas-btn tutor-ucas-btn--primary",disabled:w.value||!ae.value,onClick:ie},x(w.value?"Marking":"Mark ready for UCAS"),9,um))])])],2),N[11]||(N[11]=a("div",{class:"tutor-ucas-footnote"}," Students can see status, not the reference content. Subject teachers submit into Incoming above; tutors collate into the final narrative. ",-1))]))])])])):K("",!0)}}},pm=lt(vm,[["__scopeId","data-v-4a9d1780"]]),hm={class:"student-table-container"},mm={class:"table-header"},gm={class:"header-controls"},ym={class:"student-count"},bm={class:"page-size-selector"},_m={key:0,class:"pagination-controls pagination-top"},wm=["disabled"],km={class:"page-numbers"},Cm=["onClick"],Sm={key:1,class:"page-ellipsis"},xm=["disabled"],Em={class:"table-wrapper"},Am={class:"student-table"},$m={class:"sort-indicator"},Tm={class:"sort-indicator"},Im={class:"sort-indicator"},Om={class:"sort-indicator"},Pm={class:"sort-indicator"},Mm={class:"sort-indicator"},Fm={class:"sort-indicator"},Rm={class:"sort-indicator"},Um={class:"student-name"},jm={class:"report-cell"},Nm=["onClick"],Lm={class:"report-cell"},qm=["onClick","disabled","title"],Hm=["onClick","title"],Dm={key:0,class:"incomplete"},Vm={key:1},Bm=["onClick","title"],Km={key:0,class:"incomplete"},Ym={key:1},Gm=["onClick","title"],Wm={key:1,class:"pagination-controls"},zm=["disabled"],Jm={class:"page-numbers"},Xm=["onClick"],Qm={key:1,class:"page-ellipsis"},Zm=["disabled"],e1={key:2,class:"no-results"},t1={__name:"StudentTable",props:{students:{type:Array,required:!0},activeFilters:{type:Object,default:()=>({})},smartFilters:{type:Array,default:()=>[]}},emits:["view-report","data-updated"],setup(e,{emit:t}){const s=e,n=t,o=F("name"),r=F("asc"),l=F(!1),c=F(""),d=F(""),y=F(!1),f=F(""),g=F(""),w=F(null),E=F(!1),P=F(""),H=F(""),te=F(null),q=F(1),Y=F(50),X=Z(()=>{let u=[...s.students];if(s.activeFilters.group&&(u=u.filter(p=>p.group===s.activeFilters.group)),s.activeFilters.year&&(u=u.filter(p=>p.yearGroup===s.activeFilters.year)),s.activeFilters.status==="completed"?u=u.filter(p=>p.hasCompleted):s.activeFilters.status==="not_completed"&&(u=u.filter(p=>!p.hasCompleted)),s.activeFilters.search){const p=s.activeFilters.search.toLowerCase();u=u.filter(h=>h.name.toLowerCase().includes(p)||h.group&&h.group.toLowerCase().includes(p))}return s.smartFilters&&s.smartFilters.length>0&&(u=u.filter(p=>s.smartFilters.every(h=>{var O;const C=(O=p.scores)==null?void 0:O[h.dimension];if(C==null)return!1;const k=parseFloat(C),$=parseFloat(h.value);switch(h.operator){case"gt":return k>$;case"gte":return k>=$;case"lt":return k<$;case"lte":return k<=$;case"eq":return Math.abs(k-$)<.01;default:return!0}}))),u}),I=Z(()=>{const u=[...X.value];return u.sort((p,h)=>{var $,O;let C,k;return["vision","effort","systems","practice","attitude","overall"].includes(o.value)?(C=($=p.scores)==null?void 0:$[o.value],k=(O=h.scores)==null?void 0:O[o.value],C==null&&(C=-1),k==null&&(k=-1),C=parseFloat(C),k=parseFloat(k)):(C=p[o.value],k=h[o.value],C==null&&(C=""),k==null&&(k=""),typeof C=="string"&&(C=C.toLowerCase(),k=k.toLowerCase())),C<k?r.value==="asc"?-1:1:C>k?r.value==="asc"?1:-1:0}),u}),B=Z(()=>Math.ceil(X.value.length/Y.value)),de=Z(()=>{const u=(q.value-1)*Y.value,p=u+Y.value;return I.value.slice(u,p)}),Se=Z(()=>{const u=X.value.length;if(u===0)return"No students";const p=(q.value-1)*Y.value+1,h=Math.min(q.value*Y.value,u);return`Showing ${p}-${h} of ${u} students`}),xe=Z(()=>{const u=B.value,p=q.value,h=[];if(u<=7)for(let C=1;C<=u;C++)h.push(C);else{h.push(1),p>3&&h.push("...");const C=Math.max(2,p-1),k=Math.min(u-1,p+1);for(let $=C;$<=k;$++)h.push($);p<u-2&&h.push("..."),u>1&&h.push(u)}return h});st(()=>[s.activeFilters,X.value.length],()=>{q.value=1});const z=u=>{if(u>=1&&u<=B.value){q.value=u;const p=document.querySelector(".student-table-container");p&&p.scrollIntoView({behavior:"smooth",block:"start"})}},ce=()=>{q.value=1},ae=u=>{console.log("[Table] Sorting by:",u),o.value===u?r.value=r.value==="asc"?"desc":"asc":(o.value=u,r.value=u.includes("score")||["vision","effort","systems","practice","attitude","overall"].includes(u)?"desc":"asc")},U=u=>o.value!==u?"":r.value==="asc"?"":"",ue=(u,p)=>u?u.length<=p?u:u.substring(0,p)+"...":"-",ge=u=>u==null?"-":Math.round(parseFloat(u)),Ne=u=>{n("view-report",u)};function we(u){const h=((u==null?void 0:u.yearGroup)??(u==null?void 0:u.year)??"").toString().match(/(\d{1,2})/),C=h?parseInt(h[1],10):NaN;return Number.isFinite(C)?C:null}function ie(u){const p=we(u);return!!(u!=null&&u.email)&&p!==null&&p>=12}function ee(u){ie(u)&&De(u)}const Me=F(!1),Ee=F(null),Oe=Z(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.email)||"").toString().trim().toLowerCase()}catch{return""}}),$e=Z(()=>{try{const u=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((u==null?void 0:u.name)||(u==null?void 0:u.full_name)||"").toString().trim()}catch{return""}});function De(u){ie(u)&&(Ee.value={name:(u==null?void 0:u.name)||"",email:(u==null?void 0:u.email)||"",group:(u==null?void 0:u.group)||"",yearGroup:(u==null?void 0:u.yearGroup)||(u==null?void 0:u.year)||""},Me.value=!0)}function Xe(){Me.value=!1,Ee.value=null}const At=(u,p,h)=>{!h||h.trim()===""||h==="-"||(c.value=`${u} - ${p}`,d.value=h,l.value=!0)},ct=()=>{l.value=!1,c.value="",d.value=""},ut=u=>{w.value=u,f.value=`${u.name} - Edit Action Plan`,g.value=u.goals||"",y.value=!0},dt=()=>{y.value=!1,f.value="",g.value="",w.value=null},mt=async u=>{if(!w.value)return;const p=w.value.email,h=w.value.id,C=w.value.targetCycle;try{console.log("[StudentTable] Saving goals for:",p,"Knack ID:",h);const k=s.students.find($=>$.id===h);if(k){const $=k.goals,O=k.hasGoals;k.goals=u,k.hasGoals=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const M=await vt.saveStudentGoals(p,C,{goalText:u,knackRecordId:h});if(M.knackWritten)console.log("[StudentTable]  Goals saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Goals saved to Supabase ONLY. Knack error:",M.knackError),k.goals=$,k.hasGoals=O,new Error("Failed to save to Knack: "+M.knackError);console.log("[StudentTable] Goals saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(k){throw console.error("[StudentTable] Error saving goals:",k),k}},j=u=>{te.value=u,P.value=`${u.name} - Staff Coaching Comments`,H.value=u.coachingComments||"",E.value=!0},N=()=>{E.value=!1,P.value="",H.value="",te.value=null},v=async u=>{if(!te.value)return;const p=te.value.email,h=te.value.id,C=te.value.targetCycle;try{console.log("[StudentTable] Saving coaching comments for:",p,"Knack ID:",h);const k=s.students.find($=>$.id===h);if(k){const $=k.coachingComments,O=k.hasCoaching;k.coachingComments=u,k.hasCoaching=!!u.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const M=await vt.saveCoachingComments(p,C,{coachingText:u,knackRecordId:h});if(M.knackWritten)console.log("[StudentTable]  Coaching saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Coaching saved to Supabase ONLY. Knack error:",M.knackError),k.coachingComments=$,k.hasCoaching=O,new Error("Failed to save to Knack: "+M.knackError);console.log("[StudentTable] Coaching comments saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(k){throw console.error("[StudentTable] Error saving coaching comments:",k),k}};return(u,p)=>(b(),_("div",hm,[a("div",mm,[p[15]||(p[15]=a("h3",null,"Student Overview",-1)),a("div",gm,[a("p",ym,x(Se.value),1),a("div",bm,[p[14]||(p[14]=a("label",{for:"page-size"},"Show:",-1)),Pe(a("select",{id:"page-size","onUpdate:modelValue":p[0]||(p[0]=h=>Y.value=h),onChange:ce},[...p[13]||(p[13]=[a("option",{value:10},"10",-1),a("option",{value:50},"50",-1),a("option",{value:100},"100",-1),a("option",{value:500},"500",-1)])],544),[[St,Y.value]])])])]),X.value.length>0?(b(),_("div",_m,[a("button",{onClick:p[1]||(p[1]=h=>z(q.value-1)),disabled:q.value===1,class:"pagination-button"}," Previous ",8,wm),a("div",km,[(b(!0),_(oe,null,Te(xe.value,h=>(b(),_(oe,{key:h},[h!=="..."?(b(),_("button",{key:0,onClick:C=>z(h),class:se(["page-button",{active:h===q.value}])},x(h),11,Cm)):(b(),_("span",Sm,"..."))],64))),128))]),a("button",{onClick:p[2]||(p[2]=h=>z(q.value+1)),disabled:q.value===B.value,class:"pagination-button"}," Next ",8,xm)])):K("",!0),a("div",Em,[a("table",Am,[a("thead",null,[a("tr",null,[a("th",{onClick:p[3]||(p[3]=h=>ae("name")),class:"sortable"},[p[16]||(p[16]=Q(" Student Name ",-1)),a("span",$m,x(U("name")),1)]),a("th",{onClick:p[4]||(p[4]=h=>ae("group")),class:"sortable"},[p[17]||(p[17]=Q(" Group ",-1)),a("span",Tm,x(U("group")),1)]),p[24]||(p[24]=a("th",{class:"report-col"},"Report",-1)),p[25]||(p[25]=a("th",{class:"ucas-col",title:"UCAS Application (Year 12+)"},"UCAS",-1)),a("th",{onClick:p[5]||(p[5]=h=>ae("vision")),class:"score-cell sortable",title:"Vision"},[p[18]||(p[18]=Q(" V ",-1)),a("span",Im,x(U("vision")),1)]),a("th",{onClick:p[6]||(p[6]=h=>ae("effort")),class:"score-cell sortable",title:"Effort"},[p[19]||(p[19]=Q(" E ",-1)),a("span",Om,x(U("effort")),1)]),a("th",{onClick:p[7]||(p[7]=h=>ae("systems")),class:"score-cell sortable",title:"Systems"},[p[20]||(p[20]=Q(" S ",-1)),a("span",Pm,x(U("systems")),1)]),a("th",{onClick:p[8]||(p[8]=h=>ae("practice")),class:"score-cell sortable",title:"Practice"},[p[21]||(p[21]=Q(" P ",-1)),a("span",Mm,x(U("practice")),1)]),a("th",{onClick:p[9]||(p[9]=h=>ae("attitude")),class:"score-cell sortable",title:"Attitude"},[p[22]||(p[22]=Q(" A ",-1)),a("span",Fm,x(U("attitude")),1)]),a("th",{onClick:p[10]||(p[10]=h=>ae("overall")),class:"score-cell sortable",title:"Overall"},[p[23]||(p[23]=Q(" O ",-1)),a("span",Rm,x(U("overall")),1)]),p[26]||(p[26]=a("th",null,"Response",-1)),p[27]||(p[27]=a("th",null,"Action Plan",-1)),p[28]||(p[28]=a("th",null,"Staff Comments",-1))])]),a("tbody",null,[(b(!0),_(oe,null,Te(de.value,h=>{var C,k,$,O,M,T,D,L,V,G,re,fe;return b(),_("tr",{key:h.id},[a("td",Um,x(h.name),1),a("td",null,x(h.group||"-"),1),a("td",jm,[a("button",{onClick:le=>Ne(h),class:"report-button",title:"View Full Report"},"  ",8,Nm)]),a("td",Lm,[a("button",{class:"ucas-button",type:"button",onClick:le=>ee(h),disabled:!ie(h),title:ie(h)?"Open UCAS Application":"UCAS available for Year 12+ only"},"  ",8,qm)]),a("td",{class:"score-cell",style:wt({background:Xt(ls)((C=h.scores)==null?void 0:C.vision)})},x(((k=h.scores)==null?void 0:k.vision)||"-"),5),a("td",{class:"score-cell",style:wt({background:Xt(ls)(($=h.scores)==null?void 0:$.effort)})},x(((O=h.scores)==null?void 0:O.effort)||"-"),5),a("td",{class:"score-cell",style:wt({background:Xt(ls)((M=h.scores)==null?void 0:M.systems)})},x(((T=h.scores)==null?void 0:T.systems)||"-"),5),a("td",{class:"score-cell",style:wt({background:Xt(ls)((D=h.scores)==null?void 0:D.practice)})},x(((L=h.scores)==null?void 0:L.practice)||"-"),5),a("td",{class:"score-cell",style:wt({background:Xt(ls)((V=h.scores)==null?void 0:V.attitude)})},x(((G=h.scores)==null?void 0:G.attitude)||"-"),5),a("td",{class:"score-cell overall-cell",style:wt({background:Xt(ls)((re=h.scores)==null?void 0:re.overall)})},x(ge((fe=h.scores)==null?void 0:fe.overall)),5),a("td",{class:se(["text-preview clickable view-only",{"has-content":h.hasResponse,"no-content":!h.hasResponse}]),onClick:le=>At(h.name,"Response",h.response),title:h.hasResponse?"Click to view full response":"No response yet"},[h.hasResponse?(b(),_("span",Vm,x(ue(h.response,40)),1)):(b(),_("span",Dm,"Incomplete"))],10,Hm),a("td",{class:se(["text-preview clickable editable",{"has-content":h.hasGoals,"no-content":!h.hasGoals}]),onClick:le=>ut(h),title:h.hasGoals?"Click to edit action plan":"No action plan yet - Click to add"},[h.hasGoals?(b(),_("span",Ym,x(ue(h.goals,40)),1)):(b(),_("span",Km,"Incomplete"))],10,Bm),a("td",{class:se(["text-preview clickable editable",{"has-content":h.hasCoaching,"no-content-blank":!h.hasCoaching}]),onClick:le=>j(h),title:h.hasCoaching?"Click to edit coaching comments":"No coaching comments - Click to add"},x(ue(h.coachingComments,40)),11,Gm)])}),128))])])]),X.value.length>0?(b(),_("div",Wm,[a("button",{onClick:p[11]||(p[11]=h=>z(q.value-1)),disabled:q.value===1,class:"pagination-button"}," Previous ",8,zm),a("div",Jm,[(b(!0),_(oe,null,Te(xe.value,h=>(b(),_(oe,{key:h},[h!=="..."?(b(),_("button",{key:0,onClick:C=>z(h),class:se(["page-button",{active:h===q.value}])},x(h),11,Xm)):(b(),_("span",Qm,"..."))],64))),128))]),a("button",{onClick:p[12]||(p[12]=h=>z(q.value+1)),disabled:q.value===B.value,class:"pagination-button"}," Next ",8,Zm)])):K("",!0),X.value.length===0?(b(),_("div",e1,[...p[29]||(p[29]=[a("p",null,"No students match the current filters.",-1)])])):K("",!0),Ce(lu,{isOpen:l.value,title:c.value,text:d.value,onClose:ct},null,8,["isOpen","title","text"]),Ce(da,{isOpen:y.value,title:f.value,text:g.value,placeholder:"Enter action plan / study goals here...",onClose:dt,onSave:mt},null,8,["isOpen","title","text"]),Ce(da,{isOpen:E.value,title:P.value,text:H.value,placeholder:"Enter coaching comments and observations here...",onClose:N,onSave:v},null,8,["isOpen","title","text"]),Ce(pm,{isOpen:Me.value,student:Ee.value,staffEmail:Oe.value,staffName:$e.value,academicYear:"current",onClose:Xe},null,8,["isOpen","student","staffEmail","staffName"])]))}},s1=lt(t1,[["__scopeId","data-v-d9bf6065"]]),n1={class:"report-modal-container"},o1={class:"report-modal-header"},a1={class:"report-modal-body"},r1=["src"],i1={class:"iframe-loading"},l1={__name:"StudentReportModal",props:{isOpen:{type:Boolean,required:!0},studentEmail:{type:String,default:null},studentName:{type:String,default:"Student"}},emits:["close"],setup(e,{emit:t}){const s=e,n=t,o=F(null),r=F(!0),l=F(null);st(()=>[s.isOpen,s.studentEmail],([f,g])=>{f&&g?(o.value=`https://vespaacademy.knack.com/vespa-academy#vespa-coaching-report?email=${encodeURIComponent(g)}`,r.value=!0,console.log("[Report Modal] Opening report for:",g)):o.value=null},{immediate:!0});const c=()=>{try{const f=l.value;if(f&&f.contentDocument){const g=f.contentDocument.createElement("style");g.textContent=`
        /* Hide Knack default headers and navigation */
        .knHeader,
        .kn-menu,
        .kn-info,
        .kn-current_user,
        #kn-app-menu,
        .kn-back,
        .breadcrumb-back,
        .header-breadcrumb {
          display: none !important;
        }
        
        /* Adjust body padding to account for hidden header */
        body {
          padding-top: 0 !important;
        }
        
        /* Ensure content starts at top */
        .kn-scene,
        #kn-app-container {
          padding-top: 0 !important;
          margin-top: 0 !important;
        }
      `,f.contentDocument.head.appendChild(g),console.log("[Report Modal] Hid Knack headers in iframe")}}catch(f){console.log("[Report Modal] Could not hide headers (cross-origin):",f.message)}setTimeout(()=>{r.value=!1,console.log("[Report Modal] Report loaded")},500)},d=()=>{r.value=!0,n("close")},y=f=>{f.key==="Escape"&&s.isOpen&&d()};return st(()=>s.isOpen,f=>{f?(document.addEventListener("keydown",y),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",y),document.body.style.overflow="")}),(f,g)=>e.isOpen?(b(),_("div",{key:0,class:"report-modal-overlay",onClick:Ct(d,["self"])},[a("div",n1,[a("div",o1,[a("h2",null,x(e.studentName)+" - VESPA Report",1),a("button",{class:"close-button",onClick:d},[...g[0]||(g[0]=[a("span",{class:"close-icon"},"",-1)])])]),a("div",a1,[o.value?(b(),_("iframe",{key:0,ref_key:"reportIframe",ref:l,src:o.value,class:"report-iframe",onLoad:c,frameborder:"0",allowfullscreen:""},null,40,r1)):K("",!0),Pe(a("div",i1,[...g[1]||(g[1]=[a("div",{class:"spinner"},null,-1),a("p",null,"Loading report...",-1)])],512),[[Sr,r.value]])])])])):K("",!0)}},c1=lt(l1,[["__scopeId","data-v-9df7cb70"]]),u1={getUser(){try{if(typeof Knack>"u"||!Knack.getUserAttributes)return console.warn("[Knack Auth] Knack not available"),null;const e=Knack.getUserAttributes(),t=Knack.getUserRoles?Knack.getUserRoles():[];if(!e||!e.email)return console.warn("[Knack Auth] No user logged in"),null;const s=["object_5","object_7","object_18","object_78"],n=t.some(o=>s.includes(o));return{email:e.email,name:e.name||e.full_name||"",roles:t,isStaff:n,attributes:e}}catch(e){return console.error("[Knack Auth] Error getting user:",e),null}},isStaff(){const e=this.getUser();return e?e.isStaff:!1},getUserEmail(){const e=this.getUser();return e?e.email:null}},d1={id:"staff-overview-app"},f1={key:2,class:"overview-container"},v1={__name:"App",setup(e){const t=F(null),s=F({}),n=F(!0),o=F(null),r=F(null),l=F(!1),c=F(null),d=F(null),y=F({cycle:!1,group:!1,year:!1,status:!1,search:!1}),f=F({}),g=F(null),w=F(!1),E=F([]),P=async(I=1)=>{g.value=I,n.value=!0,o.value=null;try{if(r.value=u1.getUser(),!r.value||!r.value.email)throw new Error("Please log in to view the staff overview");if(!r.value.isStaff)throw new Error("This page is only accessible to staff members");console.log("[Staff Overview] Loading data for:",r.value.email,"cycle filter:",I);const B=await vt.getStaffOverview(r.value.email,I);if(!B.success)throw new Error(B.error||"Failed to load staff overview");t.value=B,console.log("[Staff Overview] Data loaded successfully:",B),w.value=!0}catch(B){console.error("[Staff Overview] Error loading data:",B),o.value=B.message||"Failed to load overview. Please try again."}finally{n.value=!1}},H=I=>{s.value=I,f.value.cycle=I.cycle||"",I.group&&(f.value.group=I.group),I.year&&(f.value.year=I.year),I.status&&(f.value.status=I.status),I.search&&(f.value.search=I.search),y.value.group&&I.group&&(f.value.group=I.group),y.value.year&&I.year&&(f.value.year=I.year),y.value.status&&I.status&&(f.value.status=I.status),y.value.search&&I.search&&(f.value.search=I.search);const B=I.cycle&&I.cycle!==""?parseInt(I.cycle):null,de=B!==g.value;de&&w.value?(console.log("[Staff Overview] Cycle filter changed, re-fetching data for cycle:",B),g.value=B,P(B)):de&&!w.value?(console.log("[Staff Overview] Initial filter sync, skipping reload"),g.value=B):console.log("[Staff Overview] Filter changed (non-cycle), updating local state only")},te=I=>{y.value=I,I.group&&s.value.group&&(f.value.group=s.value.group),I.year&&s.value.year&&(f.value.year=s.value.year),I.status&&s.value.status&&(f.value.status=s.value.status),I.search&&s.value.search&&(f.value.search=s.value.search),I.group||delete f.value.group,I.year||delete f.value.year,I.status||delete f.value.status,I.search||delete f.value.search},q=I=>{console.log("[Staff Overview] Opening report modal for:",I.name,I.email),c.value=I.email,d.value=I.name,l.value=!0},Y=()=>{l.value=!1,c.value=null,d.value=null,console.log("[Staff Overview] Refreshing data after report modal closed"),P(g.value)},X=()=>{console.log("[Staff Overview] Data updated, refreshing from Knack"),P(g.value)};return Cn(()=>{P(1)}),(I,B)=>(b(),_("div",d1,[n.value?(b(),rn(gc,{key:0,message:"Loading student data..."})):o.value?(b(),rn(_c,{key:1,message:o.value,onRetry:P},null,8,["message"])):t.value?(b(),_("div",f1,[Ce(Ac,{staffMember:t.value.staffMember,totalStudents:t.value.students.length},null,8,["staffMember","totalStudents"]),Ce(Vc,{filters:t.value.filters,lockedFilters:y.value,preservedValues:f.value,onFilterChanged:H,onLockChanged:te},null,8,["filters","lockedFilters","preservedValues"]),Ce(su,{modelValue:E.value,"onUpdate:modelValue":B[0]||(B[0]=de=>E.value=de)},null,8,["modelValue"]),Ce(s1,{students:t.value.students,activeFilters:s.value,smartFilters:E.value,onViewReport:q,onDataUpdated:X},null,8,["students","activeFilters","smartFilters"])])):K("",!0),Ce(c1,{isOpen:l.value,studentEmail:c.value,studentName:d.value,onClose:Y},null,8,["isOpen","studentEmail","studentName"])]))}},p1=lt(v1,[["__scopeId","data-v-245d25d6"]]);function h1(){console.log("[Staff Overview V2] Initializing...");try{const e=window.STAFF_OVERVIEW_V2_CONFIG||{},t=document.querySelector(e.elementSelector||"#view_3258");if(!t){console.error("[Staff Overview V2] Mount element not found:",e.elementSelector);return}fc(p1).mount(t),console.log("[Staff Overview V2] Successfully initialized!")}catch(e){console.error("[Staff Overview V2] Initialization error:",e)}}typeof window<"u"&&(window.initializeStaffOverviewV2=h1);
