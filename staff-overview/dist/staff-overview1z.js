(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fo(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const we={},cs=[],wt=()=>{},gr=()=>!1,hn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),vo=e=>e.startsWith("onUpdate:"),Ue=Object.assign,po=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Ga=Object.prototype.hasOwnProperty,pe=(e,t)=>Ga.call(e,t),W=Array.isArray,us=e=>Ns(e)==="[object Map]",mn=e=>Ns(e)==="[object Set]",Fo=e=>Ns(e)==="[object Date]",te=e=>typeof e=="function",$e=e=>typeof e=="string",kt=e=>typeof e=="symbol",me=e=>e!==null&&typeof e=="object",yr=e=>(me(e)||te(e))&&te(e.then)&&te(e.catch),br=Object.prototype.toString,Ns=e=>br.call(e),Ya=e=>Ns(e).slice(8,-1),_r=e=>Ns(e)==="[object Object]",ho=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cs=fo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Wa=/-\w/g,Kt=gn(e=>e.replace(Wa,t=>t.slice(1).toUpperCase())),za=/\B([A-Z])/g,ss=gn(e=>e.replace(za,"-$1").toLowerCase()),wr=gn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Dn=gn(e=>e?`on${wr(e)}`:""),Vt=(e,t)=>!Object.is(e,t),Js=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},kr=(e,t,s,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:s})},yn=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ja=e=>{const t=$e(e)?Number(e):NaN;return isNaN(t)?e:t};let Po;const bn=()=>Po||(Po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gt(e){if(W(e)){const t={};for(let s=0;s<e.length;s++){const o=e[s],n=$e(o)?ei(o):gt(o);if(n)for(const a in n)t[a]=n[a]}return t}else if($e(e)||me(e))return e}const Xa=/;(?![^(]*\))/g,Qa=/:([^]+)/,Za=/\/\*[^]*?\*\//g;function ei(e){const t={};return e.replace(Za,"").split(Xa).forEach(s=>{if(s){const o=s.split(Qa);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Q(e){let t="";if($e(e))t=e;else if(W(e))for(let s=0;s<e.length;s++){const o=Q(e[s]);o&&(t+=o+" ")}else if(me(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const ti="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",si=fo(ti);function Cr(e){return!!e||e===""}function ni(e,t){if(e.length!==t.length)return!1;let s=!0;for(let o=0;s&&o<e.length;o++)s=_n(e[o],t[o]);return s}function _n(e,t){if(e===t)return!0;let s=Fo(e),o=Fo(t);if(s||o)return s&&o?e.getTime()===t.getTime():!1;if(s=kt(e),o=kt(t),s||o)return e===t;if(s=W(e),o=W(t),s||o)return s&&o?ni(e,t):!1;if(s=me(e),o=me(t),s||o){if(!s||!o)return!1;const n=Object.keys(e).length,a=Object.keys(t).length;if(n!==a)return!1;for(const l in e){const u=e.hasOwnProperty(l),d=t.hasOwnProperty(l);if(u&&!d||!u&&d||!_n(e[l],t[l]))return!1}}return String(e)===String(t)}function oi(e,t){return e.findIndex(s=>_n(s,t))}const Sr=e=>!!(e&&e.__v_isRef===!0),C=e=>$e(e)?e:e==null?"":W(e)||me(e)&&(e.toString===br||!te(e.toString))?Sr(e)?C(e.value):JSON.stringify(e,xr,2):String(e),xr=(e,t)=>Sr(t)?xr(e,t.value):us(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[o,n],a)=>(s[Bn(o,a)+" =>"]=n,s),{})}:mn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Bn(s))}:kt(t)?Bn(t):me(t)&&!W(t)&&!_r(t)?String(t):t,Bn=(e,t="")=>{var s;return kt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Je;class ri{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=Je;try{return Je=this,t()}finally{Je=s}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function ai(){return Je}let Ce;const Vn=new WeakSet;class Er{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vn.has(this)&&(Vn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ro(this),$r(this);const t=Ce,s=ft;Ce=this,ft=!0;try{return this.fn()}finally{Ir(this),Ce=t,ft=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)yo(t);this.deps=this.depsTail=void 0,Ro(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zn(this)&&this.run()}get dirty(){return Zn(this)}}let Ar=0,Ss,xs;function Tr(e,t=!1){if(e.flags|=8,t){e.next=xs,xs=e;return}e.next=Ss,Ss=e}function mo(){Ar++}function go(){if(--Ar>0)return;if(xs){let t=xs;for(xs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Ss;){let t=Ss;for(Ss=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=s}}if(e)throw e}function $r(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ir(e){let t,s=e.depsTail,o=s;for(;o;){const n=o.prevDep;o.version===-1?(o===s&&(s=n),yo(o),ii(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=n}e.deps=t,e.depsTail=s}function Zn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Or(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Or(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Is)||(e.globalVersion=Is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Zn(e))))return;e.flags|=2;const t=e.dep,s=Ce,o=ft;Ce=e,ft=!0;try{$r(e);const n=e.fn(e._value);(t.version===0||Vt(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ce=s,ft=o,Ir(e),e.flags&=-3}}function yo(e,t=!1){const{dep:s,prevSub:o,nextSub:n}=e;if(o&&(o.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=o,e.nextSub=void 0),s.subs===e&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let a=s.computed.deps;a;a=a.nextDep)yo(a,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function ii(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let ft=!0;const Mr=[];function Pt(){Mr.push(ft),ft=!1}function Rt(){const e=Mr.pop();ft=e===void 0?!0:e}function Ro(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Ce;Ce=void 0;try{t()}finally{Ce=s}}}let Is=0;class li{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ce||!ft||Ce===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ce)s=this.activeLink=new li(Ce,this),Ce.deps?(s.prevDep=Ce.depsTail,Ce.depsTail.nextDep=s,Ce.depsTail=s):Ce.deps=Ce.depsTail=s,Fr(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=Ce.depsTail,s.nextDep=void 0,Ce.depsTail.nextDep=s,Ce.depsTail=s,Ce.deps===s&&(Ce.deps=o)}return s}trigger(t){this.version++,Is++,this.notify(t)}notify(t){mo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{go()}}}function Fr(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Fr(o)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const eo=new WeakMap,ts=Symbol(""),to=Symbol(""),Os=Symbol("");function Le(e,t,s){if(ft&&Ce){let o=eo.get(e);o||eo.set(e,o=new Map);let n=o.get(s);n||(o.set(s,n=new bo),n.map=o,n.key=s),n.track()}}function Mt(e,t,s,o,n,a){const l=eo.get(e);if(!l){Is++;return}const u=d=>{d&&d.trigger()};if(mo(),t==="clear")l.forEach(u);else{const d=W(e),h=d&&ho(s);if(d&&s==="length"){const v=Number(o);l.forEach((y,E)=>{(E==="length"||E===Os||!kt(E)&&E>=v)&&u(y)})}else switch((s!==void 0||l.has(void 0))&&u(l.get(s)),h&&u(l.get(Os)),t){case"add":d?h&&u(l.get("length")):(u(l.get(ts)),us(e)&&u(l.get(to)));break;case"delete":d||(u(l.get(ts)),us(e)&&u(l.get(to)));break;case"set":us(e)&&u(l.get(ts));break}}go()}function as(e){const t=ve(e);return t===e?t:(Le(t,"iterate",Os),it(e)?t:t.map(Re))}function wn(e){return Le(e=ve(e),"iterate",Os),e}const ci={__proto__:null,[Symbol.iterator](){return Kn(this,Symbol.iterator,Re)},concat(...e){return as(this).concat(...e.map(t=>W(t)?as(t):t))},entries(){return Kn(this,"entries",e=>(e[1]=Re(e[1]),e))},every(e,t){return Tt(this,"every",e,t,void 0,arguments)},filter(e,t){return Tt(this,"filter",e,t,s=>s.map(Re),arguments)},find(e,t){return Tt(this,"find",e,t,Re,arguments)},findIndex(e,t){return Tt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Tt(this,"findLast",e,t,Re,arguments)},findLastIndex(e,t){return Tt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Tt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Gn(this,"includes",e)},indexOf(...e){return Gn(this,"indexOf",e)},join(e){return as(this).join(e)},lastIndexOf(...e){return Gn(this,"lastIndexOf",e)},map(e,t){return Tt(this,"map",e,t,void 0,arguments)},pop(){return bs(this,"pop")},push(...e){return bs(this,"push",e)},reduce(e,...t){return Uo(this,"reduce",e,t)},reduceRight(e,...t){return Uo(this,"reduceRight",e,t)},shift(){return bs(this,"shift")},some(e,t){return Tt(this,"some",e,t,void 0,arguments)},splice(...e){return bs(this,"splice",e)},toReversed(){return as(this).toReversed()},toSorted(e){return as(this).toSorted(e)},toSpliced(...e){return as(this).toSpliced(...e)},unshift(...e){return bs(this,"unshift",e)},values(){return Kn(this,"values",Re)}};function Kn(e,t,s){const o=wn(e),n=o[t]();return o!==e&&!it(e)&&(n._next=n.next,n.next=()=>{const a=n._next();return a.done||(a.value=s(a.value)),a}),n}const ui=Array.prototype;function Tt(e,t,s,o,n,a){const l=wn(e),u=l!==e&&!it(e),d=l[t];if(d!==ui[t]){const y=d.apply(e,a);return u?Re(y):y}let h=s;l!==e&&(u?h=function(y,E){return s.call(this,Re(y),E,e)}:s.length>2&&(h=function(y,E){return s.call(this,y,E,e)}));const v=d.call(l,h,o);return u&&n?n(v):v}function Uo(e,t,s,o){const n=wn(e);let a=s;return n!==e&&(it(e)?s.length>3&&(a=function(l,u,d){return s.call(this,l,u,d,e)}):a=function(l,u,d){return s.call(this,l,Re(u),d,e)}),n[t](a,...o)}function Gn(e,t,s){const o=ve(e);Le(o,"iterate",Os);const n=o[t](...s);return(n===-1||n===!1)&&ko(s[0])?(s[0]=ve(s[0]),o[t](...s)):n}function bs(e,t,s=[]){Pt(),mo();const o=ve(e)[t].apply(e,s);return go(),Rt(),o}const di=fo("__proto__,__v_isRef,__isVue"),Pr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(kt));function fi(e){kt(e)||(e=String(e));const t=ve(this);return Le(t,"has",e),t.hasOwnProperty(e)}class Rr{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,o){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,a=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return a;if(s==="__v_raw")return o===(n?a?ki:Lr:a?Nr:jr).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=W(t);if(!n){let d;if(l&&(d=ci[s]))return d;if(s==="hasOwnProperty")return fi}const u=Reflect.get(t,s,qe(t)?t:o);if((kt(s)?Pr.has(s):di(s))||(n||Le(t,"get",s),a))return u;if(qe(u)){const d=l&&ho(s)?u:u.value;return n&&me(d)?no(d):d}return me(u)?n?no(u):Ms(u):u}}class Ur extends Rr{constructor(t=!1){super(!1,t)}set(t,s,o,n){let a=t[s];if(!this._isShallow){const d=Gt(a);if(!it(o)&&!Gt(o)&&(a=ve(a),o=ve(o)),!W(t)&&qe(a)&&!qe(o))return d||(a.value=o),!0}const l=W(t)&&ho(s)?Number(s)<t.length:pe(t,s),u=Reflect.set(t,s,o,qe(t)?t:n);return t===ve(n)&&(l?Vt(o,a)&&Mt(t,"set",s,o):Mt(t,"add",s,o)),u}deleteProperty(t,s){const o=pe(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&o&&Mt(t,"delete",s,void 0),n}has(t,s){const o=Reflect.has(t,s);return(!kt(s)||!Pr.has(s))&&Le(t,"has",s),o}ownKeys(t){return Le(t,"iterate",W(t)?"length":ts),Reflect.ownKeys(t)}}class vi extends Rr{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const pi=new Ur,hi=new vi,mi=new Ur(!0);const so=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function gi(e,t,s){return function(...o){const n=this.__v_raw,a=ve(n),l=us(a),u=e==="entries"||e===Symbol.iterator&&l,d=e==="keys"&&l,h=n[e](...o),v=s?so:t?tn:Re;return!t&&Le(a,"iterate",d?to:ts),{next(){const{value:y,done:E}=h.next();return E?{value:y,done:E}:{value:u?[v(y[0]),v(y[1])]:v(y),done:E}},[Symbol.iterator](){return this}}}}function Gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function yi(e,t){const s={get(n){const a=this.__v_raw,l=ve(a),u=ve(n);e||(Vt(n,u)&&Le(l,"get",n),Le(l,"get",u));const{has:d}=Ks(l),h=t?so:e?tn:Re;if(d.call(l,n))return h(a.get(n));if(d.call(l,u))return h(a.get(u));a!==l&&a.get(n)},get size(){const n=this.__v_raw;return!e&&Le(ve(n),"iterate",ts),n.size},has(n){const a=this.__v_raw,l=ve(a),u=ve(n);return e||(Vt(n,u)&&Le(l,"has",n),Le(l,"has",u)),n===u?a.has(n):a.has(n)||a.has(u)},forEach(n,a){const l=this,u=l.__v_raw,d=ve(u),h=t?so:e?tn:Re;return!e&&Le(d,"iterate",ts),u.forEach((v,y)=>n.call(a,h(v),h(y),l))}};return Ue(s,e?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(n){!t&&!it(n)&&!Gt(n)&&(n=ve(n));const a=ve(this);return Ks(a).has.call(a,n)||(a.add(n),Mt(a,"add",n,n)),this},set(n,a){!t&&!it(a)&&!Gt(a)&&(a=ve(a));const l=ve(this),{has:u,get:d}=Ks(l);let h=u.call(l,n);h||(n=ve(n),h=u.call(l,n));const v=d.call(l,n);return l.set(n,a),h?Vt(a,v)&&Mt(l,"set",n,a):Mt(l,"add",n,a),this},delete(n){const a=ve(this),{has:l,get:u}=Ks(a);let d=l.call(a,n);d||(n=ve(n),d=l.call(a,n)),u&&u.call(a,n);const h=a.delete(n);return d&&Mt(a,"delete",n,void 0),h},clear(){const n=ve(this),a=n.size!==0,l=n.clear();return a&&Mt(n,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=gi(n,e,t)}),s}function _o(e,t){const s=yi(e,t);return(o,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?o:Reflect.get(pe(s,n)&&n in o?s:o,n,a)}const bi={get:_o(!1,!1)},_i={get:_o(!1,!0)},wi={get:_o(!0,!1)};const jr=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,ki=new WeakMap;function Ci(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Si(e){return e.__v_skip||!Object.isExtensible(e)?0:Ci(Ya(e))}function Ms(e){return Gt(e)?e:wo(e,!1,pi,bi,jr)}function xi(e){return wo(e,!1,mi,_i,Nr)}function no(e){return wo(e,!0,hi,wi,Lr)}function wo(e,t,s,o,n){if(!me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Si(e);if(a===0)return e;const l=n.get(e);if(l)return l;const u=new Proxy(e,a===2?o:s);return n.set(e,u),u}function ds(e){return Gt(e)?ds(e.__v_raw):!!(e&&e.__v_isReactive)}function Gt(e){return!!(e&&e.__v_isReadonly)}function it(e){return!!(e&&e.__v_isShallow)}function ko(e){return e?!!e.__v_raw:!1}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function Ei(e){return!pe(e,"__v_skip")&&Object.isExtensible(e)&&kr(e,"__v_skip",!0),e}const Re=e=>me(e)?Ms(e):e,tn=e=>me(e)?no(e):e;function qe(e){return e?e.__v_isRef===!0:!1}function P(e){return Ai(e,!1)}function Ai(e,t){return qe(e)?e:new Ti(e,t)}class Ti{constructor(t,s){this.dep=new bo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ve(t),this._value=s?t:Re(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,o=this.__v_isShallow||it(t)||Gt(t);t=o?t:ve(t),Vt(t,s)&&(this._rawValue=t,this._value=o?t:Re(t),this.dep.trigger())}}function qt(e){return qe(e)?e.value:e}const $i={get:(e,t,s)=>t==="__v_raw"?e:qt(Reflect.get(e,t,s)),set:(e,t,s,o)=>{const n=e[t];return qe(n)&&!qe(s)?(n.value=s,!0):Reflect.set(e,t,s,o)}};function qr(e){return ds(e)?e:new Proxy(e,$i)}class Ii{constructor(t,s,o){this.fn=t,this.setter=s,this._value=void 0,this.dep=new bo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ce!==this)return Tr(this,!0),!0}get value(){const t=this.dep.track();return Or(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Oi(e,t,s=!1){let o,n;return te(e)?o=e:(o=e.get,n=e.set),new Ii(o,n,s)}const Ys={},sn=new WeakMap;let Qt;function Mi(e,t=!1,s=Qt){if(s){let o=sn.get(s);o||sn.set(s,o=[]),o.push(e)}}function Fi(e,t,s=we){const{immediate:o,deep:n,once:a,scheduler:l,augmentJob:u,call:d}=s,h=F=>n?F:it(F)||n===!1||n===0?Ft(F,1):Ft(F);let v,y,E,x,T=!1,L=!1;if(qe(e)?(y=()=>e.value,T=it(e)):ds(e)?(y=()=>h(e),T=!0):W(e)?(L=!0,T=e.some(F=>ds(F)||it(F)),y=()=>e.map(F=>{if(qe(F))return F.value;if(ds(F))return h(F);if(te(F))return d?d(F,2):F()})):te(e)?t?y=d?()=>d(e,2):e:y=()=>{if(E){Pt();try{E()}finally{Rt()}}const F=Qt;Qt=v;try{return d?d(e,3,[x]):e(x)}finally{Qt=F}}:y=wt,t&&n){const F=y,q=n===!0?1/0:n;y=()=>Ft(F(),q)}const se=ai(),j=()=>{v.stop(),se&&se.active&&po(se.effects,v)};if(a&&t){const F=t;t=(...q)=>{F(...q),j()}}let K=L?new Array(e.length).fill(Ys):Ys;const z=F=>{if(!(!(v.flags&1)||!v.dirty&&!F))if(t){const q=v.run();if(n||T||(L?q.some((ne,ge)=>Vt(ne,K[ge])):Vt(q,K))){E&&E();const ne=Qt;Qt=v;try{const ge=[q,K===Ys?void 0:L&&K[0]===Ys?[]:K,x];K=q,d?d(t,3,ge):t(...ge)}finally{Qt=ne}}}else v.run()};return u&&u(z),v=new Er(y),v.scheduler=l?()=>l(z,!1):z,x=F=>Mi(F,!1,v),E=v.onStop=()=>{const F=sn.get(v);if(F){if(d)d(F,4);else for(const q of F)q();sn.delete(v)}},t?o?z(!0):K=v.run():l?l(z.bind(null,!0),!0):v.run(),j.pause=v.pause.bind(v),j.resume=v.resume.bind(v),j.stop=j,j}function Ft(e,t=1/0,s){if(t<=0||!me(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,qe(e))Ft(e.value,t,s);else if(W(e))for(let o=0;o<e.length;o++)Ft(e[o],t,s);else if(mn(e)||us(e))e.forEach(o=>{Ft(o,t,s)});else if(_r(e)){for(const o in e)Ft(e[o],t,s);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Ft(e[o],t,s)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ls(e,t,s,o){try{return o?e(...o):e()}catch(n){kn(n,t,s)}}function vt(e,t,s,o){if(te(e)){const n=Ls(e,t,s,o);return n&&yr(n)&&n.catch(a=>{kn(a,t,s)}),n}if(W(e)){const n=[];for(let a=0;a<e.length;a++)n.push(vt(e[a],t,s,o));return n}}function kn(e,t,s,o=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||we;if(t){let u=t.parent;const d=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${s}`;for(;u;){const v=u.ec;if(v){for(let y=0;y<v.length;y++)if(v[y](e,d,h)===!1)return}u=u.parent}if(a){Pt(),Ls(a,null,10,[e,d,h]),Rt();return}}Pi(e,s,n,o,l)}function Pi(e,t,s,o=!0,n=!1){if(n)throw e;console.error(e)}const Be=[];let mt=-1;const fs=[];let Ht=null,ls=0;const Hr=Promise.resolve();let nn=null;function Dr(e){const t=nn||Hr;return e?t.then(this?e.bind(this):e):t}function Ri(e){let t=mt+1,s=Be.length;for(;t<s;){const o=t+s>>>1,n=Be[o],a=Fs(n);a<e||a===e&&n.flags&2?t=o+1:s=o}return t}function Co(e){if(!(e.flags&1)){const t=Fs(e),s=Be[Be.length-1];!s||!(e.flags&2)&&t>=Fs(s)?Be.push(e):Be.splice(Ri(t),0,e),e.flags|=1,Br()}}function Br(){nn||(nn=Hr.then(Kr))}function Ui(e){W(e)?fs.push(...e):Ht&&e.id===-1?Ht.splice(ls+1,0,e):e.flags&1||(fs.push(e),e.flags|=1),Br()}function jo(e,t,s=mt+1){for(;s<Be.length;s++){const o=Be[s];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Be.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Vr(e){if(fs.length){const t=[...new Set(fs)].sort((s,o)=>Fs(s)-Fs(o));if(fs.length=0,Ht){Ht.push(...t);return}for(Ht=t,ls=0;ls<Ht.length;ls++){const s=Ht[ls];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ht=null,ls=0}}const Fs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Kr(e){try{for(mt=0;mt<Be.length;mt++){const t=Be[mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ls(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;mt<Be.length;mt++){const t=Be[mt];t&&(t.flags&=-2)}mt=-1,Be.length=0,Vr(),nn=null,(Be.length||fs.length)&&Kr()}}let at=null,Gr=null;function on(e){const t=at;return at=e,Gr=e&&e.type.__scopeId||null,t}function Yr(e,t=at,s){if(!t||e._n)return e;const o=(...n)=>{o._d&&ln(-1);const a=on(t);let l;try{l=e(...n)}finally{on(a),o._d&&ln(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function Oe(e,t){if(at===null)return e;const s=Tn(at),o=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[a,l,u,d=we]=t[n];a&&(te(a)&&(a={mounted:a,updated:a}),a.deep&&Ft(l),o.push({dir:a,instance:s,value:l,oldValue:void 0,arg:u,modifiers:d}))}return e}function Wt(e,t,s,o){const n=e.dirs,a=t&&t.dirs;for(let l=0;l<n.length;l++){const u=n[l];a&&(u.oldValue=a[l].value);let d=u.dir[o];d&&(Pt(),vt(d,s,8,[e.el,u,e,t]),Rt())}}const ji=Symbol("_vte"),Wr=e=>e.__isTeleport,Ot=Symbol("_leaveCb"),Ws=Symbol("_enterCb");function Ni(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xn(()=>{e.isMounted=!0}),sa(()=>{e.isUnmounting=!0}),e}const ot=[Function,Array],zr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ot,onEnter:ot,onAfterEnter:ot,onEnterCancelled:ot,onBeforeLeave:ot,onLeave:ot,onAfterLeave:ot,onLeaveCancelled:ot,onBeforeAppear:ot,onAppear:ot,onAfterAppear:ot,onAppearCancelled:ot},Jr=e=>{const t=e.subTree;return t.component?Jr(t.component):t},Li={name:"BaseTransition",props:zr,setup(e,{slots:t}){const s=Ca(),o=Ni();return()=>{const n=t.default&&Zr(t.default(),!0);if(!n||!n.length)return;const a=Xr(n),l=ve(e),{mode:u}=l;if(o.isLeaving)return Yn(a);const d=No(a);if(!d)return Yn(a);let h=oo(d,l,o,s,y=>h=y);d.type!==Ve&&Ps(d,h);let v=s.subTree&&No(s.subTree);if(v&&v.type!==Ve&&!Zt(v,d)&&Jr(s).type!==Ve){let y=oo(v,l,o,s);if(Ps(v,y),u==="out-in"&&d.type!==Ve)return o.isLeaving=!0,y.afterLeave=()=>{o.isLeaving=!1,s.job.flags&8||s.update(),delete y.afterLeave,v=void 0},Yn(a);u==="in-out"&&d.type!==Ve?y.delayLeave=(E,x,T)=>{const L=Qr(o,v);L[String(v.key)]=v,E[Ot]=()=>{x(),E[Ot]=void 0,delete h.delayedLeave,v=void 0},h.delayedLeave=()=>{T(),delete h.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return a}}};function Xr(e){let t=e[0];if(e.length>1){for(const s of e)if(s.type!==Ve){t=s;break}}return t}const qi=Li;function Qr(e,t){const{leavingVNodes:s}=e;let o=s.get(t.type);return o||(o=Object.create(null),s.set(t.type,o)),o}function oo(e,t,s,o,n){const{appear:a,mode:l,persisted:u=!1,onBeforeEnter:d,onEnter:h,onAfterEnter:v,onEnterCancelled:y,onBeforeLeave:E,onLeave:x,onAfterLeave:T,onLeaveCancelled:L,onBeforeAppear:se,onAppear:j,onAfterAppear:K,onAppearCancelled:z}=t,F=String(e.key),q=Qr(s,e),ne=(G,oe)=>{G&&vt(G,o,9,oe)},ge=(G,oe)=>{const re=oe[1];ne(G,oe),W(G)?G.every(N=>N.length<=1)&&re():G.length<=1&&re()},ye={mode:l,persisted:u,beforeEnter(G){let oe=d;if(!s.isMounted)if(a)oe=se||d;else return;G[Ot]&&G[Ot](!0);const re=q[F];re&&Zt(e,re)&&re.el[Ot]&&re.el[Ot](),ne(oe,[G])},enter(G){let oe=h,re=v,N=y;if(!s.isMounted)if(a)oe=j||h,re=K||v,N=z||y;else return;let ue=!1;const be=G[Ws]=Ie=>{ue||(ue=!0,Ie?ne(N,[G]):ne(re,[G]),ye.delayedLeave&&ye.delayedLeave(),G[Ws]=void 0)};oe?ge(oe,[G,be]):be()},leave(G,oe){const re=String(e.key);if(G[Ws]&&G[Ws](!0),s.isUnmounting)return oe();ne(E,[G]);let N=!1;const ue=G[Ot]=be=>{N||(N=!0,oe(),be?ne(L,[G]):ne(T,[G]),G[Ot]=void 0,q[re]===e&&delete q[re])};q[re]=e,x?ge(x,[G,ue]):ue()},clone(G){const oe=oo(G,t,s,o,n);return n&&n(oe),oe}};return ye}function Yn(e){if(Cn(e))return e=Yt(e),e.children=null,e}function No(e){if(!Cn(e))return Wr(e.type)&&e.children?Xr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:s}=e;if(s){if(t&16)return s[0];if(t&32&&te(s.default))return s.default()}}function Ps(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ps(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Zr(e,t=!1,s){let o=[],n=0;for(let a=0;a<e.length;a++){let l=e[a];const u=s==null?l.key:String(s)+String(l.key!=null?l.key:a);l.type===ee?(l.patchFlag&128&&n++,o=o.concat(Zr(l.children,t,u))):(t||l.type!==Ve)&&o.push(u!=null?Yt(l,{key:u}):l)}if(n>1)for(let a=0;a<o.length;a++)o[a].patchFlag=-2;return o}function ea(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const rn=new WeakMap;function Es(e,t,s,o,n=!1){if(W(e)){e.forEach((T,L)=>Es(T,t&&(W(t)?t[L]:t),s,o,n));return}if(As(o)&&!n){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Es(e,t,s,o.component.subTree);return}const a=o.shapeFlag&4?Tn(o.component):o.el,l=n?null:a,{i:u,r:d}=e,h=t&&t.r,v=u.refs===we?u.refs={}:u.refs,y=u.setupState,E=ve(y),x=y===we?gr:T=>pe(E,T);if(h!=null&&h!==d){if(Lo(t),$e(h))v[h]=null,x(h)&&(y[h]=null);else if(qe(h)){h.value=null;const T=t;T.k&&(v[T.k]=null)}}if(te(d))Ls(d,u,12,[l,v]);else{const T=$e(d),L=qe(d);if(T||L){const se=()=>{if(e.f){const j=T?x(d)?y[d]:v[d]:d.value;if(n)W(j)&&po(j,a);else if(W(j))j.includes(a)||j.push(a);else if(T)v[d]=[a],x(d)&&(y[d]=v[d]);else{const K=[a];d.value=K,e.k&&(v[e.k]=K)}}else T?(v[d]=l,x(d)&&(y[d]=l)):L&&(d.value=l,e.k&&(v[e.k]=l))};if(l){const j=()=>{se(),rn.delete(e)};j.id=-1,rn.set(e,j),et(j,s)}else Lo(e),se()}}}function Lo(e){const t=rn.get(e);t&&(t.flags|=8,rn.delete(e))}bn().requestIdleCallback;bn().cancelIdleCallback;const As=e=>!!e.type.__asyncLoader,Cn=e=>e.type.__isKeepAlive;function Hi(e,t){ta(e,"a",t)}function Di(e,t){ta(e,"da",t)}function ta(e,t,s=Ke){const o=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Sn(t,o,s),s){let n=s.parent;for(;n&&n.parent;)Cn(n.parent.vnode)&&Bi(o,t,s,n),n=n.parent}}function Bi(e,t,s,o){const n=Sn(t,e,o,!0);na(()=>{po(o[t],n)},s)}function Sn(e,t,s=Ke,o=!1){if(s){const n=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...l)=>{Pt();const u=qs(s),d=vt(t,s,e,l);return u(),Rt(),d});return o?n.unshift(a):n.push(a),a}}const Ut=e=>(t,s=Ke)=>{(!Us||e==="sp")&&Sn(e,(...o)=>t(...o),s)},Vi=Ut("bm"),xn=Ut("m"),Ki=Ut("bu"),Gi=Ut("u"),sa=Ut("bum"),na=Ut("um"),Yi=Ut("sp"),Wi=Ut("rtg"),zi=Ut("rtc");function Ji(e,t=Ke){Sn("ec",e,t)}const Xi=Symbol.for("v-ndc");function Te(e,t,s,o){let n;const a=s,l=W(e);if(l||$e(e)){const u=l&&ds(e);let d=!1,h=!1;u&&(d=!it(e),h=Gt(e),e=wn(e)),n=new Array(e.length);for(let v=0,y=e.length;v<y;v++)n[v]=t(d?h?tn(Re(e[v])):Re(e[v]):e[v],v,void 0,a)}else if(typeof e=="number"){n=new Array(e);for(let u=0;u<e;u++)n[u]=t(u+1,u,void 0,a)}else if(me(e))if(e[Symbol.iterator])n=Array.from(e,(u,d)=>t(u,d,void 0,a));else{const u=Object.keys(e);n=new Array(u.length);for(let d=0,h=u.length;d<h;d++){const v=u[d];n[d]=t(e[v],v,d,a)}}else n=[];return n}const ro=e=>e?Sa(e)?Tn(e):ro(e.parent):null,Ts=Ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ro(e.parent),$root:e=>ro(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ra(e),$forceUpdate:e=>e.f||(e.f=()=>{Co(e.update)}),$nextTick:e=>e.n||(e.n=Dr.bind(e.proxy)),$watch:e=>bl.bind(e)}),Wn=(e,t)=>e!==we&&!e.__isScriptSetup&&pe(e,t),Qi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:o,data:n,props:a,accessCache:l,type:u,appContext:d}=e;let h;if(t[0]!=="$"){const x=l[t];if(x!==void 0)switch(x){case 1:return o[t];case 2:return n[t];case 4:return s[t];case 3:return a[t]}else{if(Wn(o,t))return l[t]=1,o[t];if(n!==we&&pe(n,t))return l[t]=2,n[t];if((h=e.propsOptions[0])&&pe(h,t))return l[t]=3,a[t];if(s!==we&&pe(s,t))return l[t]=4,s[t];ao&&(l[t]=0)}}const v=Ts[t];let y,E;if(v)return t==="$attrs"&&Le(e.attrs,"get",""),v(e);if((y=u.__cssModules)&&(y=y[t]))return y;if(s!==we&&pe(s,t))return l[t]=4,s[t];if(E=d.config.globalProperties,pe(E,t))return E[t]},set({_:e},t,s){const{data:o,setupState:n,ctx:a}=e;return Wn(n,t)?(n[t]=s,!0):o!==we&&pe(o,t)?(o[t]=s,!0):pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:o,appContext:n,propsOptions:a,type:l}},u){let d,h;return!!(s[u]||e!==we&&u[0]!=="$"&&pe(e,u)||Wn(t,u)||(d=a[0])&&pe(d,u)||pe(o,u)||pe(Ts,u)||pe(n.config.globalProperties,u)||(h=l.__cssModules)&&h[u])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:pe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function qo(e){return W(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let ao=!0;function Zi(e){const t=ra(e),s=e.proxy,o=e.ctx;ao=!1,t.beforeCreate&&Ho(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:l,watch:u,provide:d,inject:h,created:v,beforeMount:y,mounted:E,beforeUpdate:x,updated:T,activated:L,deactivated:se,beforeDestroy:j,beforeUnmount:K,destroyed:z,unmounted:F,render:q,renderTracked:ne,renderTriggered:ge,errorCaptured:ye,serverPrefetch:G,expose:oe,inheritAttrs:re,components:N,directives:ue,filters:be}=t;if(h&&el(h,o,null),l)for(const de in l){const ae=l[de];te(ae)&&(o[de]=ae.bind(s))}if(n){const de=n.call(s,s);me(de)&&(e.data=Ms(de))}if(ao=!0,a)for(const de in a){const ae=a[de],Ae=te(ae)?ae.bind(s,s):te(ae.get)?ae.get.bind(s,s):wt,Se=!te(ae)&&te(ae.set)?ae.set.bind(s):wt,Fe=X({get:Ae,set:Se});Object.defineProperty(o,de,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:_e=>Fe.value=_e})}if(u)for(const de in u)oa(u[de],o,s,de);if(d){const de=te(d)?d.call(s):d;Reflect.ownKeys(de).forEach(ae=>{al(ae,de[ae])})}v&&Ho(v,e,"c");function ke(de,ae){W(ae)?ae.forEach(Ae=>de(Ae.bind(s))):ae&&de(ae.bind(s))}if(ke(Vi,y),ke(xn,E),ke(Ki,x),ke(Gi,T),ke(Hi,L),ke(Di,se),ke(Ji,ye),ke(zi,ne),ke(Wi,ge),ke(sa,K),ke(na,F),ke(Yi,G),W(oe))if(oe.length){const de=e.exposed||(e.exposed={});oe.forEach(ae=>{Object.defineProperty(de,ae,{get:()=>s[ae],set:Ae=>s[ae]=Ae,enumerable:!0})})}else e.exposed||(e.exposed={});q&&e.render===wt&&(e.render=q),re!=null&&(e.inheritAttrs=re),N&&(e.components=N),ue&&(e.directives=ue),G&&ea(e)}function el(e,t,s=wt){W(e)&&(e=io(e));for(const o in e){const n=e[o];let a;me(n)?"default"in n?a=Xs(n.from||o,n.default,!0):a=Xs(n.from||o):a=Xs(n),qe(a)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[o]=a}}function Ho(e,t,s){vt(W(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,s)}function oa(e,t,s,o){let n=o.includes(".")?ya(s,o):()=>s[o];if($e(e)){const a=t[e];te(a)&&lt(n,a)}else if(te(e))lt(n,e.bind(s));else if(me(e))if(W(e))e.forEach(a=>oa(a,t,s,o));else{const a=te(e.handler)?e.handler.bind(s):t[e.handler];te(a)&&lt(n,a,e)}}function ra(e){const t=e.type,{mixins:s,extends:o}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,u=a.get(t);let d;return u?d=u:!n.length&&!s&&!o?d=t:(d={},n.length&&n.forEach(h=>an(d,h,l,!0)),an(d,t,l)),me(t)&&a.set(t,d),d}function an(e,t,s,o=!1){const{mixins:n,extends:a}=t;a&&an(e,a,s,!0),n&&n.forEach(l=>an(e,l,s,!0));for(const l in t)if(!(o&&l==="expose")){const u=tl[l]||s&&s[l];e[l]=u?u(e[l],t[l]):t[l]}return e}const tl={data:Do,props:Bo,emits:Bo,methods:ks,computed:ks,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:ks,directives:ks,watch:nl,provide:Do,inject:sl};function Do(e,t){return t?e?function(){return Ue(te(e)?e.call(this,this):e,te(t)?t.call(this,this):t)}:t:e}function sl(e,t){return ks(io(e),io(t))}function io(e){if(W(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function De(e,t){return e?[...new Set([].concat(e,t))]:t}function ks(e,t){return e?Ue(Object.create(null),e,t):t}function Bo(e,t){return e?W(e)&&W(t)?[...new Set([...e,...t])]:Ue(Object.create(null),qo(e),qo(t??{})):t}function nl(e,t){if(!e)return t;if(!t)return e;const s=Ue(Object.create(null),e);for(const o in t)s[o]=De(e[o],t[o]);return s}function aa(){return{app:null,config:{isNativeTag:gr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ol=0;function rl(e,t){return function(o,n=null){te(o)||(o=Ue({},o)),n!=null&&!me(n)&&(n=null);const a=aa(),l=new WeakSet,u=[];let d=!1;const h=a.app={_uid:ol++,_component:o,_props:n,_container:null,_context:a,_instance:null,version:Hl,get config(){return a.config},set config(v){},use(v,...y){return l.has(v)||(v&&te(v.install)?(l.add(v),v.install(h,...y)):te(v)&&(l.add(v),v(h,...y))),h},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),h},component(v,y){return y?(a.components[v]=y,h):a.components[v]},directive(v,y){return y?(a.directives[v]=y,h):a.directives[v]},mount(v,y,E){if(!d){const x=h._ceVNode||xe(o,n);return x.appContext=a,E===!0?E="svg":E===!1&&(E=void 0),e(x,v,E),d=!0,h._container=v,v.__vue_app__=h,Tn(x.component)}},onUnmount(v){u.push(v)},unmount(){d&&(vt(u,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(v,y){return a.provides[v]=y,h},runWithContext(v){const y=vs;vs=h;try{return v()}finally{vs=y}}};return h}}let vs=null;function al(e,t){if(Ke){let s=Ke.provides;const o=Ke.parent&&Ke.parent.provides;o===s&&(s=Ke.provides=Object.create(o)),s[e]=t}}function Xs(e,t,s=!1){const o=Ca();if(o||vs){let n=vs?vs._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&te(t)?t.call(o&&o.proxy):t}}const ia={},la=()=>Object.create(ia),ca=e=>Object.getPrototypeOf(e)===ia;function il(e,t,s,o=!1){const n={},a=la();e.propsDefaults=Object.create(null),ua(e,t,n,a);for(const l in e.propsOptions[0])l in n||(n[l]=void 0);s?e.props=o?n:xi(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function ll(e,t,s,o){const{props:n,attrs:a,vnode:{patchFlag:l}}=e,u=ve(n),[d]=e.propsOptions;let h=!1;if((o||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let y=0;y<v.length;y++){let E=v[y];if(En(e.emitsOptions,E))continue;const x=t[E];if(d)if(pe(a,E))x!==a[E]&&(a[E]=x,h=!0);else{const T=Kt(E);n[T]=lo(d,u,T,x,e,!1)}else x!==a[E]&&(a[E]=x,h=!0)}}}else{ua(e,t,n,a)&&(h=!0);let v;for(const y in u)(!t||!pe(t,y)&&((v=ss(y))===y||!pe(t,v)))&&(d?s&&(s[y]!==void 0||s[v]!==void 0)&&(n[y]=lo(d,u,y,void 0,e,!0)):delete n[y]);if(a!==u)for(const y in a)(!t||!pe(t,y))&&(delete a[y],h=!0)}h&&Mt(e.attrs,"set","")}function ua(e,t,s,o){const[n,a]=e.propsOptions;let l=!1,u;if(t)for(let d in t){if(Cs(d))continue;const h=t[d];let v;n&&pe(n,v=Kt(d))?!a||!a.includes(v)?s[v]=h:(u||(u={}))[v]=h:En(e.emitsOptions,d)||(!(d in o)||h!==o[d])&&(o[d]=h,l=!0)}if(a){const d=ve(s),h=u||we;for(let v=0;v<a.length;v++){const y=a[v];s[y]=lo(n,d,y,h[y],e,!pe(h,y))}}return l}function lo(e,t,s,o,n,a){const l=e[s];if(l!=null){const u=pe(l,"default");if(u&&o===void 0){const d=l.default;if(l.type!==Function&&!l.skipFactory&&te(d)){const{propsDefaults:h}=n;if(s in h)o=h[s];else{const v=qs(n);o=h[s]=d.call(null,t),v()}}else o=d;n.ce&&n.ce._setProp(s,o)}l[0]&&(a&&!u?o=!1:l[1]&&(o===""||o===ss(s))&&(o=!0))}return o}const cl=new WeakMap;function da(e,t,s=!1){const o=s?cl:t.propsCache,n=o.get(e);if(n)return n;const a=e.props,l={},u=[];let d=!1;if(!te(e)){const v=y=>{d=!0;const[E,x]=da(y,t,!0);Ue(l,E),x&&u.push(...x)};!s&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!d)return me(e)&&o.set(e,cs),cs;if(W(a))for(let v=0;v<a.length;v++){const y=Kt(a[v]);Vo(y)&&(l[y]=we)}else if(a)for(const v in a){const y=Kt(v);if(Vo(y)){const E=a[v],x=l[y]=W(E)||te(E)?{type:E}:Ue({},E),T=x.type;let L=!1,se=!0;if(W(T))for(let j=0;j<T.length;++j){const K=T[j],z=te(K)&&K.name;if(z==="Boolean"){L=!0;break}else z==="String"&&(se=!1)}else L=te(T)&&T.name==="Boolean";x[0]=L,x[1]=se,(L||pe(x,"default"))&&u.push(y)}}const h=[l,u];return me(e)&&o.set(e,h),h}function Vo(e){return e[0]!=="$"&&!Cs(e)}const So=e=>e==="_"||e==="_ctx"||e==="$stable",xo=e=>W(e)?e.map(yt):[yt(e)],ul=(e,t,s)=>{if(t._n)return t;const o=Yr((...n)=>xo(t(...n)),s);return o._c=!1,o},fa=(e,t,s)=>{const o=e._ctx;for(const n in e){if(So(n))continue;const a=e[n];if(te(a))t[n]=ul(n,a,o);else if(a!=null){const l=xo(a);t[n]=()=>l}}},va=(e,t)=>{const s=xo(t);e.slots.default=()=>s},pa=(e,t,s)=>{for(const o in t)(s||!So(o))&&(e[o]=t[o])},dl=(e,t,s)=>{const o=e.slots=la();if(e.vnode.shapeFlag&32){const n=t._;n?(pa(o,t,s),s&&kr(o,"_",n,!0)):fa(t,o)}else t&&va(e,t)},fl=(e,t,s)=>{const{vnode:o,slots:n}=e;let a=!0,l=we;if(o.shapeFlag&32){const u=t._;u?s&&u===1?a=!1:pa(n,t,s):(a=!t.$stable,fa(t,n)),l=t}else t&&(va(e,t),l={default:1});if(a)for(const u in n)!So(u)&&l[u]==null&&delete n[u]},et=Al;function vl(e){return pl(e)}function pl(e,t){const s=bn();s.__VUE__=!0;const{insert:o,remove:n,patchProp:a,createElement:l,createText:u,createComment:d,setText:h,setElementText:v,parentNode:y,nextSibling:E,setScopeId:x=wt,insertStaticContent:T}=e,L=(f,c,p,m=null,S=null,b=null,$=void 0,O=null,I=!!c.dynamicChildren)=>{if(f===c)return;f&&!Zt(f,c)&&(m=ut(f),_e(f,S,b,!0),f=null),c.patchFlag===-2&&(I=!1,c.dynamicChildren=null);const{type:M,ref:H,shapeFlag:U}=c;switch(M){case An:se(f,c,p,m);break;case Ve:j(f,c,p,m);break;case Qs:f==null&&K(c,p,m,$);break;case ee:N(f,c,p,m,S,b,$,O,I);break;default:U&1?q(f,c,p,m,S,b,$,O,I):U&6?ue(f,c,p,m,S,b,$,O,I):(U&64||U&128)&&M.process(f,c,p,m,S,b,$,O,I,Xe)}H!=null&&S?Es(H,f&&f.ref,b,c||f,!c):H==null&&f&&f.ref!=null&&Es(f.ref,null,b,f,!0)},se=(f,c,p,m)=>{if(f==null)o(c.el=u(c.children),p,m);else{const S=c.el=f.el;c.children!==f.children&&h(S,c.children)}},j=(f,c,p,m)=>{f==null?o(c.el=d(c.children||""),p,m):c.el=f.el},K=(f,c,p,m)=>{[f.el,f.anchor]=T(f.children,c,p,m,f.el,f.anchor)},z=({el:f,anchor:c},p,m)=>{let S;for(;f&&f!==c;)S=E(f),o(f,p,m),f=S;o(c,p,m)},F=({el:f,anchor:c})=>{let p;for(;f&&f!==c;)p=E(f),n(f),f=p;n(c)},q=(f,c,p,m,S,b,$,O,I)=>{if(c.type==="svg"?$="svg":c.type==="math"&&($="mathml"),f==null)ne(c,p,m,S,b,$,O,I);else{const M=f.el&&f.el._isVueCE?f.el:null;try{M&&M._beginPatch(),G(f,c,S,b,$,O,I)}finally{M&&M._endPatch()}}},ne=(f,c,p,m,S,b,$,O)=>{let I,M;const{props:H,shapeFlag:U,transition:D,dirs:V}=f;if(I=f.el=l(f.type,b,H&&H.is,H),U&8?v(I,f.children):U&16&&ye(f.children,I,null,m,S,zn(f,b),$,O),V&&Wt(f,null,m,"created"),ge(I,f,f.scopeId,$,m),H){for(const ce in H)ce!=="value"&&!Cs(ce)&&a(I,ce,null,H[ce],b,m);"value"in H&&a(I,"value",null,H.value,b),(M=H.onVnodeBeforeMount)&&pt(M,m,f)}V&&Wt(f,null,m,"beforeMount");const Z=hl(S,D);Z&&D.beforeEnter(I),o(I,c,p),((M=H&&H.onVnodeMounted)||Z||V)&&et(()=>{M&&pt(M,m,f),Z&&D.enter(I),V&&Wt(f,null,m,"mounted")},S)},ge=(f,c,p,m,S)=>{if(p&&x(f,p),m)for(let b=0;b<m.length;b++)x(f,m[b]);if(S){let b=S.subTree;if(c===b||_a(b.type)&&(b.ssContent===c||b.ssFallback===c)){const $=S.vnode;ge(f,$,$.scopeId,$.slotScopeIds,S.parent)}}},ye=(f,c,p,m,S,b,$,O,I=0)=>{for(let M=I;M<f.length;M++){const H=f[M]=O?Dt(f[M]):yt(f[M]);L(null,H,c,p,m,S,b,$,O)}},G=(f,c,p,m,S,b,$)=>{const O=c.el=f.el;let{patchFlag:I,dynamicChildren:M,dirs:H}=c;I|=f.patchFlag&16;const U=f.props||we,D=c.props||we;let V;if(p&&zt(p,!1),(V=D.onVnodeBeforeUpdate)&&pt(V,p,c,f),H&&Wt(c,f,p,"beforeUpdate"),p&&zt(p,!0),(U.innerHTML&&D.innerHTML==null||U.textContent&&D.textContent==null)&&v(O,""),M?oe(f.dynamicChildren,M,O,p,m,zn(c,S),b):$||ae(f,c,O,null,p,m,zn(c,S),b,!1),I>0){if(I&16)re(O,U,D,p,S);else if(I&2&&U.class!==D.class&&a(O,"class",null,D.class,S),I&4&&a(O,"style",U.style,D.style,S),I&8){const Z=c.dynamicProps;for(let ce=0;ce<Z.length;ce++){const le=Z[ce],Pe=U[le],Ne=D[le];(Ne!==Pe||le==="value")&&a(O,le,Pe,Ne,S,p)}}I&1&&f.children!==c.children&&v(O,c.children)}else!$&&M==null&&re(O,U,D,p,S);((V=D.onVnodeUpdated)||H)&&et(()=>{V&&pt(V,p,c,f),H&&Wt(c,f,p,"updated")},m)},oe=(f,c,p,m,S,b,$)=>{for(let O=0;O<c.length;O++){const I=f[O],M=c[O],H=I.el&&(I.type===ee||!Zt(I,M)||I.shapeFlag&198)?y(I.el):p;L(I,M,H,null,m,S,b,$,!0)}},re=(f,c,p,m,S)=>{if(c!==p){if(c!==we)for(const b in c)!Cs(b)&&!(b in p)&&a(f,b,c[b],null,S,m);for(const b in p){if(Cs(b))continue;const $=p[b],O=c[b];$!==O&&b!=="value"&&a(f,b,O,$,S,m)}"value"in p&&a(f,"value",c.value,p.value,S)}},N=(f,c,p,m,S,b,$,O,I)=>{const M=c.el=f?f.el:u(""),H=c.anchor=f?f.anchor:u("");let{patchFlag:U,dynamicChildren:D,slotScopeIds:V}=c;V&&(O=O?O.concat(V):V),f==null?(o(M,p,m),o(H,p,m),ye(c.children||[],p,H,S,b,$,O,I)):U>0&&U&64&&D&&f.dynamicChildren?(oe(f.dynamicChildren,D,p,S,b,$,O),(c.key!=null||S&&c===S.subTree)&&ha(f,c,!0)):ae(f,c,p,H,S,b,$,O,I)},ue=(f,c,p,m,S,b,$,O,I)=>{c.slotScopeIds=O,f==null?c.shapeFlag&512?S.ctx.activate(c,p,m,$,I):be(c,p,m,S,b,$,I):Ie(f,c,I)},be=(f,c,p,m,S,b,$)=>{const O=f.component=Pl(f,m,S);if(Cn(f)&&(O.ctx.renderer=Xe),Rl(O,!1,$),O.asyncDep){if(S&&S.registerDep(O,ke,$),!f.el){const I=O.subTree=xe(Ve);j(null,I,c,p),f.placeholder=I.el}}else ke(O,f,c,p,S,b,$)},Ie=(f,c,p)=>{const m=c.component=f.component;if(xl(f,c,p))if(m.asyncDep&&!m.asyncResolved){de(m,c,p);return}else m.next=c,m.update();else c.el=f.el,m.vnode=c},ke=(f,c,p,m,S,b,$)=>{const O=()=>{if(f.isMounted){let{next:U,bu:D,u:V,parent:Z,vnode:ce}=f;{const Ye=ma(f);if(Ye){U&&(U.el=ce.el,de(f,U,$)),Ye.asyncDep.then(()=>{f.isUnmounted||O()});return}}let le=U,Pe;zt(f,!1),U?(U.el=ce.el,de(f,U,$)):U=ce,D&&Js(D),(Pe=U.props&&U.props.onVnodeBeforeUpdate)&&pt(Pe,Z,U,ce),zt(f,!0);const Ne=Go(f),Qe=f.subTree;f.subTree=Ne,L(Qe,Ne,y(Qe.el),ut(Qe),f,S,b),U.el=Ne.el,le===null&&El(f,Ne.el),V&&et(V,S),(Pe=U.props&&U.props.onVnodeUpdated)&&et(()=>pt(Pe,Z,U,ce),S)}else{let U;const{el:D,props:V}=c,{bm:Z,m:ce,parent:le,root:Pe,type:Ne}=f,Qe=As(c);zt(f,!1),Z&&Js(Z),!Qe&&(U=V&&V.onVnodeBeforeMount)&&pt(U,le,c),zt(f,!0);{Pe.ce&&Pe.ce._def.shadowRoot!==!1&&Pe.ce._injectChildStyle(Ne);const Ye=f.subTree=Go(f);L(null,Ye,p,m,f,S,b),c.el=Ye.el}if(ce&&et(ce,S),!Qe&&(U=V&&V.onVnodeMounted)){const Ye=c;et(()=>pt(U,le,Ye),S)}(c.shapeFlag&256||le&&As(le.vnode)&&le.vnode.shapeFlag&256)&&f.a&&et(f.a,S),f.isMounted=!0,c=p=m=null}};f.scope.on();const I=f.effect=new Er(O);f.scope.off();const M=f.update=I.run.bind(I),H=f.job=I.runIfDirty.bind(I);H.i=f,H.id=f.uid,I.scheduler=()=>Co(H),zt(f,!0),M()},de=(f,c,p)=>{c.component=f;const m=f.vnode.props;f.vnode=c,f.next=null,ll(f,c.props,m,p),fl(f,c.children,p),Pt(),jo(f),Rt()},ae=(f,c,p,m,S,b,$,O,I=!1)=>{const M=f&&f.children,H=f?f.shapeFlag:0,U=c.children,{patchFlag:D,shapeFlag:V}=c;if(D>0){if(D&128){Se(M,U,p,m,S,b,$,O,I);return}else if(D&256){Ae(M,U,p,m,S,b,$,O,I);return}}V&8?(H&16&&je(M,S,b),U!==M&&v(p,U)):H&16?V&16?Se(M,U,p,m,S,b,$,O,I):je(M,S,b,!0):(H&8&&v(p,""),V&16&&ye(U,p,m,S,b,$,O,I))},Ae=(f,c,p,m,S,b,$,O,I)=>{f=f||cs,c=c||cs;const M=f.length,H=c.length,U=Math.min(M,H);let D;for(D=0;D<U;D++){const V=c[D]=I?Dt(c[D]):yt(c[D]);L(f[D],V,p,null,S,b,$,O,I)}M>H?je(f,S,b,!0,!1,U):ye(c,p,m,S,b,$,O,I,U)},Se=(f,c,p,m,S,b,$,O,I)=>{let M=0;const H=c.length;let U=f.length-1,D=H-1;for(;M<=U&&M<=D;){const V=f[M],Z=c[M]=I?Dt(c[M]):yt(c[M]);if(Zt(V,Z))L(V,Z,p,null,S,b,$,O,I);else break;M++}for(;M<=U&&M<=D;){const V=f[U],Z=c[D]=I?Dt(c[D]):yt(c[D]);if(Zt(V,Z))L(V,Z,p,null,S,b,$,O,I);else break;U--,D--}if(M>U){if(M<=D){const V=D+1,Z=V<H?c[V].el:m;for(;M<=D;)L(null,c[M]=I?Dt(c[M]):yt(c[M]),p,Z,S,b,$,O,I),M++}}else if(M>D)for(;M<=U;)_e(f[M],S,b,!0),M++;else{const V=M,Z=M,ce=new Map;for(M=Z;M<=D;M++){const Me=c[M]=I?Dt(c[M]):yt(c[M]);Me.key!=null&&ce.set(Me.key,M)}let le,Pe=0;const Ne=D-Z+1;let Qe=!1,Ye=0;const xt=new Array(Ne);for(M=0;M<Ne;M++)xt[M]=0;for(M=V;M<=U;M++){const Me=f[M];if(Pe>=Ne){_e(Me,S,b,!0);continue}let Ze;if(Me.key!=null)Ze=ce.get(Me.key);else for(le=Z;le<=D;le++)if(xt[le-Z]===0&&Zt(Me,c[le])){Ze=le;break}Ze===void 0?_e(Me,S,b,!0):(xt[Ze-Z]=M+1,Ze>=Ye?Ye=Ze:Qe=!0,L(Me,c[Ze],p,null,S,b,$,O,I),Pe++)}const hs=Qe?ml(xt):cs;for(le=hs.length-1,M=Ne-1;M>=0;M--){const Me=Z+M,Ze=c[Me],ms=c[Me+1],Hs=Me+1<H?ms.el||ms.placeholder:m;xt[M]===0?L(null,Ze,p,Hs,S,b,$,O,I):Qe&&(le<0||M!==hs[le]?Fe(Ze,p,Hs,2):le--)}}},Fe=(f,c,p,m,S=null)=>{const{el:b,type:$,transition:O,children:I,shapeFlag:M}=f;if(M&6){Fe(f.component.subTree,c,p,m);return}if(M&128){f.suspense.move(c,p,m);return}if(M&64){$.move(f,c,p,Xe);return}if($===ee){o(b,c,p);for(let U=0;U<I.length;U++)Fe(I[U],c,p,m);o(f.anchor,c,p);return}if($===Qs){z(f,c,p);return}if(m!==2&&M&1&&O)if(m===0)O.beforeEnter(b),o(b,c,p),et(()=>O.enter(b),S);else{const{leave:U,delayLeave:D,afterLeave:V}=O,Z=()=>{f.ctx.isUnmounted?n(b):o(b,c,p)},ce=()=>{b._isLeaving&&b[Ot](!0),U(b,()=>{Z(),V&&V()})};D?D(b,Z,ce):ce()}else o(b,c,p)},_e=(f,c,p,m=!1,S=!1)=>{const{type:b,props:$,ref:O,children:I,dynamicChildren:M,shapeFlag:H,patchFlag:U,dirs:D,cacheIndex:V}=f;if(U===-2&&(S=!1),O!=null&&(Pt(),Es(O,null,p,f,!0),Rt()),V!=null&&(c.renderCache[V]=void 0),H&256){c.ctx.deactivate(f);return}const Z=H&1&&D,ce=!As(f);let le;if(ce&&(le=$&&$.onVnodeBeforeUnmount)&&pt(le,c,f),H&6)Ge(f.component,p,m);else{if(H&128){f.suspense.unmount(p,m);return}Z&&Wt(f,null,c,"beforeUnmount"),H&64?f.type.remove(f,c,p,Xe,m):M&&!M.hasOnce&&(b!==ee||U>0&&U&64)?je(M,c,p,!1,!0):(b===ee&&U&384||!S&&H&16)&&je(I,c,p),m&&He(f)}(ce&&(le=$&&$.onVnodeUnmounted)||Z)&&et(()=>{le&&pt(le,c,f),Z&&Wt(f,null,c,"unmounted")},p)},He=f=>{const{type:c,el:p,anchor:m,transition:S}=f;if(c===ee){nt(p,m);return}if(c===Qs){F(f);return}const b=()=>{n(p),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(f.shapeFlag&1&&S&&!S.persisted){const{leave:$,delayLeave:O}=S,I=()=>$(p,b);O?O(f.el,b,I):I()}else b()},nt=(f,c)=>{let p;for(;f!==c;)p=E(f),n(f),f=p;n(c)},Ge=(f,c,p)=>{const{bum:m,scope:S,job:b,subTree:$,um:O,m:I,a:M}=f;Ko(I),Ko(M),m&&Js(m),S.stop(),b&&(b.flags|=8,_e($,f,c,p)),O&&et(O,c),et(()=>{f.isUnmounted=!0},c)},je=(f,c,p,m=!1,S=!1,b=0)=>{for(let $=b;$<f.length;$++)_e(f[$],c,p,m,S)},ut=f=>{if(f.shapeFlag&6)return ut(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const c=E(f.anchor||f.el),p=c&&c[ji];return p?E(p):c};let Ct=!1;const St=(f,c,p)=>{f==null?c._vnode&&_e(c._vnode,null,null,!0):L(c._vnode||null,f,c,null,null,null,p),c._vnode=f,Ct||(Ct=!0,jo(),Vr(),Ct=!1)},Xe={p:L,um:_e,m:Fe,r:He,mt:be,mc:ye,pc:ae,pbc:oe,n:ut,o:e};return{render:St,hydrate:void 0,createApp:rl(St)}}function zn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function zt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function hl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ha(e,t,s=!1){const o=e.children,n=t.children;if(W(o)&&W(n))for(let a=0;a<o.length;a++){const l=o[a];let u=n[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=n[a]=Dt(n[a]),u.el=l.el),!s&&u.patchFlag!==-2&&ha(l,u)),u.type===An&&u.patchFlag!==-1&&(u.el=l.el),u.type===Ve&&!u.el&&(u.el=l.el)}}function ml(e){const t=e.slice(),s=[0];let o,n,a,l,u;const d=e.length;for(o=0;o<d;o++){const h=e[o];if(h!==0){if(n=s[s.length-1],e[n]<h){t[o]=n,s.push(o);continue}for(a=0,l=s.length-1;a<l;)u=a+l>>1,e[s[u]]<h?a=u+1:l=u;h<e[s[a]]&&(a>0&&(t[o]=s[a-1]),s[a]=o)}}for(a=s.length,l=s[a-1];a-- >0;)s[a]=l,l=t[l];return s}function ma(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ma(t)}function Ko(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gl=Symbol.for("v-scx"),yl=()=>Xs(gl);function lt(e,t,s){return ga(e,t,s)}function ga(e,t,s=we){const{immediate:o,deep:n,flush:a,once:l}=s,u=Ue({},s),d=t&&o||!t&&a!=="post";let h;if(Us){if(a==="sync"){const x=yl();h=x.__watcherHandles||(x.__watcherHandles=[])}else if(!d){const x=()=>{};return x.stop=wt,x.resume=wt,x.pause=wt,x}}const v=Ke;u.call=(x,T,L)=>vt(x,v,T,L);let y=!1;a==="post"?u.scheduler=x=>{et(x,v&&v.suspense)}:a!=="sync"&&(y=!0,u.scheduler=(x,T)=>{T?x():Co(x)}),u.augmentJob=x=>{t&&(x.flags|=4),y&&(x.flags|=2,v&&(x.id=v.uid,x.i=v))};const E=Fi(e,t,u);return Us&&(h?h.push(E):d&&E()),E}function bl(e,t,s){const o=this.proxy,n=$e(e)?e.includes(".")?ya(o,e):()=>o[e]:e.bind(o,o);let a;te(t)?a=t:(a=t.handler,s=t);const l=qs(this),u=ga(n,a.bind(o),s);return l(),u}function ya(e,t){const s=t.split(".");return()=>{let o=e;for(let n=0;n<s.length&&o;n++)o=o[s[n]];return o}}const _l=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Kt(t)}Modifiers`]||e[`${ss(t)}Modifiers`];function wl(e,t,...s){if(e.isUnmounted)return;const o=e.vnode.props||we;let n=s;const a=t.startsWith("update:"),l=a&&_l(o,t.slice(7));l&&(l.trim&&(n=s.map(v=>$e(v)?v.trim():v)),l.number&&(n=s.map(yn)));let u,d=o[u=Dn(t)]||o[u=Dn(Kt(t))];!d&&a&&(d=o[u=Dn(ss(t))]),d&&vt(d,e,6,n);const h=o[u+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,vt(h,e,6,n)}}const kl=new WeakMap;function ba(e,t,s=!1){const o=s?kl:t.emitsCache,n=o.get(e);if(n!==void 0)return n;const a=e.emits;let l={},u=!1;if(!te(e)){const d=h=>{const v=ba(h,t,!0);v&&(u=!0,Ue(l,v))};!s&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!a&&!u?(me(e)&&o.set(e,null),null):(W(a)?a.forEach(d=>l[d]=null):Ue(l,a),me(e)&&o.set(e,l),l)}function En(e,t){return!e||!hn(t)?!1:(t=t.slice(2).replace(/Once$/,""),pe(e,t[0].toLowerCase()+t.slice(1))||pe(e,ss(t))||pe(e,t))}function Go(e){const{type:t,vnode:s,proxy:o,withProxy:n,propsOptions:[a],slots:l,attrs:u,emit:d,render:h,renderCache:v,props:y,data:E,setupState:x,ctx:T,inheritAttrs:L}=e,se=on(e);let j,K;try{if(s.shapeFlag&4){const F=n||o,q=F;j=yt(h.call(q,F,v,y,x,E,T)),K=u}else{const F=t;j=yt(F.length>1?F(y,{attrs:u,slots:l,emit:d}):F(y,null)),K=t.props?u:Cl(u)}}catch(F){$s.length=0,kn(F,e,1),j=xe(Ve)}let z=j;if(K&&L!==!1){const F=Object.keys(K),{shapeFlag:q}=z;F.length&&q&7&&(a&&F.some(vo)&&(K=Sl(K,a)),z=Yt(z,K,!1,!0))}return s.dirs&&(z=Yt(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(s.dirs):s.dirs),s.transition&&Ps(z,s.transition),j=z,on(se),j}const Cl=e=>{let t;for(const s in e)(s==="class"||s==="style"||hn(s))&&((t||(t={}))[s]=e[s]);return t},Sl=(e,t)=>{const s={};for(const o in e)(!vo(o)||!(o.slice(9)in t))&&(s[o]=e[o]);return s};function xl(e,t,s){const{props:o,children:n,component:a}=e,{props:l,children:u,patchFlag:d}=t,h=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&d>=0){if(d&1024)return!0;if(d&16)return o?Yo(o,l,h):!!l;if(d&8){const v=t.dynamicProps;for(let y=0;y<v.length;y++){const E=v[y];if(l[E]!==o[E]&&!En(h,E))return!0}}}else return(n||u)&&(!u||!u.$stable)?!0:o===l?!1:o?l?Yo(o,l,h):!0:!!l;return!1}function Yo(e,t,s){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let n=0;n<o.length;n++){const a=o[n];if(t[a]!==e[a]&&!En(s,a))return!0}return!1}function El({vnode:e,parent:t},s){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=s,t=t.parent;else break}}const _a=e=>e.__isSuspense;function Al(e,t){t&&t.pendingBranch?W(e)?t.effects.push(...e):t.effects.push(e):Ui(e)}const ee=Symbol.for("v-fgt"),An=Symbol.for("v-txt"),Ve=Symbol.for("v-cmt"),Qs=Symbol.for("v-stc"),$s=[];let st=null;function _(e=!1){$s.push(st=e?null:[])}function Tl(){$s.pop(),st=$s[$s.length-1]||null}let Rs=1;function ln(e,t=!1){Rs+=e,e<0&&st&&t&&(st.hasOnce=!0)}function wa(e){return e.dynamicChildren=Rs>0?st||cs:null,Tl(),Rs>0&&st&&st.push(e),e}function w(e,t,s,o,n,a){return wa(r(e,t,s,o,n,a,!0))}function cn(e,t,s,o,n){return wa(xe(e,t,s,o,n,!0))}function un(e){return e?e.__v_isVNode===!0:!1}function Zt(e,t){return e.type===t.type&&e.key===t.key}const ka=({key:e})=>e??null,Zs=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?$e(e)||qe(e)||te(e)?{i:at,r:e,k:t,f:!!s}:e:null);function r(e,t=null,s=null,o=0,n=null,a=e===ee?0:1,l=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ka(t),ref:t&&Zs(t),scopeId:Gr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:o,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:at};return u?(Eo(d,s),a&128&&e.normalize(d)):s&&(d.shapeFlag|=$e(s)?8:16),Rs>0&&!l&&st&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&st.push(d),d}const xe=$l;function $l(e,t=null,s=null,o=0,n=null,a=!1){if((!e||e===Xi)&&(e=Ve),un(e)){const u=Yt(e,t,!0);return s&&Eo(u,s),Rs>0&&!a&&st&&(u.shapeFlag&6?st[st.indexOf(e)]=u:st.push(u)),u.patchFlag=-2,u}if(Ll(e)&&(e=e.__vccOpts),t){t=Il(t);let{class:u,style:d}=t;u&&!$e(u)&&(t.class=Q(u)),me(d)&&(ko(d)&&!W(d)&&(d=Ue({},d)),t.style=gt(d))}const l=$e(e)?1:_a(e)?128:Wr(e)?64:me(e)?4:te(e)?2:0;return r(e,t,s,o,n,l,a,!0)}function Il(e){return e?ko(e)||ca(e)?Ue({},e):e:null}function Yt(e,t,s=!1,o=!1){const{props:n,ref:a,patchFlag:l,children:u,transition:d}=e,h=t?Ol(n||{},t):n,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&ka(h),ref:t&&t.ref?s&&a?W(a)?a.concat(Zs(t)):[a,Zs(t)]:Zs(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ee?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yt(e.ssContent),ssFallback:e.ssFallback&&Yt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&o&&Ps(v,d.clone(v)),v}function J(e=" ",t=0){return xe(An,null,e,t)}function tt(e,t){const s=xe(Qs,null,e);return s.staticCount=t,s}function B(e="",t=!1){return t?(_(),cn(Ve,null,e)):xe(Ve,null,e)}function yt(e){return e==null||typeof e=="boolean"?xe(Ve):W(e)?xe(ee,null,e.slice()):un(e)?Dt(e):xe(An,null,String(e))}function Dt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yt(e)}function Eo(e,t){let s=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(W(t))s=16;else if(typeof t=="object")if(o&65){const n=t.default;n&&(n._c&&(n._d=!1),Eo(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!ca(t)?t._ctx=at:n===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else te(t)?(t={default:t,_ctx:at},s=32):(t=String(t),o&64?(s=16,t=[J(t)]):s=8);e.children=t,e.shapeFlag|=s}function Ol(...e){const t={};for(let s=0;s<e.length;s++){const o=e[s];for(const n in o)if(n==="class")t.class!==o.class&&(t.class=Q([t.class,o.class]));else if(n==="style")t.style=gt([t.style,o.style]);else if(hn(n)){const a=t[n],l=o[n];l&&a!==l&&!(W(a)&&a.includes(l))&&(t[n]=a?[].concat(a,l):l)}else n!==""&&(t[n]=o[n])}return t}function pt(e,t,s,o=null){vt(e,t,7,[s,o])}const Ml=aa();let Fl=0;function Pl(e,t,s){const o=e.type,n=(t?t.appContext:e.appContext)||Ml,a={uid:Fl++,vnode:e,type:o,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ri(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:da(o,n),emitsOptions:ba(o,n),emit:null,emitted:null,propsDefaults:we,inheritAttrs:o.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=wl.bind(null,a),e.ce&&e.ce(a),a}let Ke=null;const Ca=()=>Ke||at;let dn,co;{const e=bn(),t=(s,o)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(o),a=>{n.length>1?n.forEach(l=>l(a)):n[0](a)}};dn=t("__VUE_INSTANCE_SETTERS__",s=>Ke=s),co=t("__VUE_SSR_SETTERS__",s=>Us=s)}const qs=e=>{const t=Ke;return dn(e),e.scope.on(),()=>{e.scope.off(),dn(t)}},Wo=()=>{Ke&&Ke.scope.off(),dn(null)};function Sa(e){return e.vnode.shapeFlag&4}let Us=!1;function Rl(e,t=!1,s=!1){t&&co(t);const{props:o,children:n}=e.vnode,a=Sa(e);il(e,o,a,t),dl(e,n,s||t);const l=a?Ul(e,t):void 0;return t&&co(!1),l}function Ul(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Qi);const{setup:o}=s;if(o){Pt();const n=e.setupContext=o.length>1?Nl(e):null,a=qs(e),l=Ls(o,e,0,[e.props,n]),u=yr(l);if(Rt(),a(),(u||e.sp)&&!As(e)&&ea(e),u){if(l.then(Wo,Wo),t)return l.then(d=>{zo(e,d)}).catch(d=>{kn(d,e,0)});e.asyncDep=l}else zo(e,l)}else xa(e)}function zo(e,t,s){te(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:me(t)&&(e.setupState=qr(t)),xa(e)}function xa(e,t,s){const o=e.type;e.render||(e.render=o.render||wt);{const n=qs(e);Pt();try{Zi(e)}finally{Rt(),n()}}}const jl={get(e,t){return Le(e,"get",""),e[t]}};function Nl(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,jl),slots:e.slots,emit:e.emit,expose:t}}function Tn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(qr(Ei(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ts)return Ts[s](e)},has(t,s){return s in t||s in Ts}})):e.proxy}function Ll(e){return te(e)&&"__vccOpts"in e}const X=(e,t)=>Oi(e,t,Us);function ql(e,t,s){try{ln(-1);const o=arguments.length;return o===2?me(t)&&!W(t)?un(t)?xe(e,null,[t]):xe(e,t):xe(e,null,t):(o>3?s=Array.prototype.slice.call(arguments,2):o===3&&un(s)&&(s=[s]),xe(e,t,s))}finally{ln(1)}}const Hl="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let uo;const Jo=typeof window<"u"&&window.trustedTypes;if(Jo)try{uo=Jo.createPolicy("vue",{createHTML:e=>e})}catch{}const Ea=uo?e=>uo.createHTML(e):e=>e,Dl="http://www.w3.org/2000/svg",Bl="http://www.w3.org/1998/Math/MathML",It=typeof document<"u"?document:null,Xo=It&&It.createElement("template"),Vl={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,o)=>{const n=t==="svg"?It.createElementNS(Dl,e):t==="mathml"?It.createElementNS(Bl,e):s?It.createElement(e,{is:s}):It.createElement(e);return e==="select"&&o&&o.multiple!=null&&n.setAttribute("multiple",o.multiple),n},createText:e=>It.createTextNode(e),createComment:e=>It.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>It.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,o,n,a){const l=s?s.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===a||!(n=n.nextSibling)););else{Xo.innerHTML=Ea(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const u=Xo.content;if(o==="svg"||o==="mathml"){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}t.insertBefore(u,s)}return[l?l.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Lt="transition",_s="animation",js=Symbol("_vtc"),Aa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Kl=Ue({},zr,Aa),Gl=e=>(e.displayName="Transition",e.props=Kl,e),Yl=Gl((e,{slots:t})=>ql(qi,Wl(e),t)),Jt=(e,t=[])=>{W(e)?e.forEach(s=>s(...t)):e&&e(...t)},Qo=e=>e?W(e)?e.some(t=>t.length>1):e.length>1:!1;function Wl(e){const t={};for(const N in e)N in Aa||(t[N]=e[N]);if(e.css===!1)return t;const{name:s="v",type:o,duration:n,enterFromClass:a=`${s}-enter-from`,enterActiveClass:l=`${s}-enter-active`,enterToClass:u=`${s}-enter-to`,appearFromClass:d=a,appearActiveClass:h=l,appearToClass:v=u,leaveFromClass:y=`${s}-leave-from`,leaveActiveClass:E=`${s}-leave-active`,leaveToClass:x=`${s}-leave-to`}=e,T=zl(n),L=T&&T[0],se=T&&T[1],{onBeforeEnter:j,onEnter:K,onEnterCancelled:z,onLeave:F,onLeaveCancelled:q,onBeforeAppear:ne=j,onAppear:ge=K,onAppearCancelled:ye=z}=t,G=(N,ue,be,Ie)=>{N._enterCancelled=Ie,Xt(N,ue?v:u),Xt(N,ue?h:l),be&&be()},oe=(N,ue)=>{N._isLeaving=!1,Xt(N,y),Xt(N,x),Xt(N,E),ue&&ue()},re=N=>(ue,be)=>{const Ie=N?ge:K,ke=()=>G(ue,N,be);Jt(Ie,[ue,ke]),Zo(()=>{Xt(ue,N?d:a),$t(ue,N?v:u),Qo(Ie)||er(ue,o,L,ke)})};return Ue(t,{onBeforeEnter(N){Jt(j,[N]),$t(N,a),$t(N,l)},onBeforeAppear(N){Jt(ne,[N]),$t(N,d),$t(N,h)},onEnter:re(!1),onAppear:re(!0),onLeave(N,ue){N._isLeaving=!0;const be=()=>oe(N,ue);$t(N,y),N._enterCancelled?($t(N,E),nr(N)):(nr(N),$t(N,E)),Zo(()=>{N._isLeaving&&(Xt(N,y),$t(N,x),Qo(F)||er(N,o,se,be))}),Jt(F,[N,be])},onEnterCancelled(N){G(N,!1,void 0,!0),Jt(z,[N])},onAppearCancelled(N){G(N,!0,void 0,!0),Jt(ye,[N])},onLeaveCancelled(N){oe(N),Jt(q,[N])}})}function zl(e){if(e==null)return null;if(me(e))return[Jn(e.enter),Jn(e.leave)];{const t=Jn(e);return[t,t]}}function Jn(e){return Ja(e)}function $t(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[js]||(e[js]=new Set)).add(t)}function Xt(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const s=e[js];s&&(s.delete(t),s.size||(e[js]=void 0))}function Zo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Jl=0;function er(e,t,s,o){const n=e._endId=++Jl,a=()=>{n===e._endId&&o()};if(s!=null)return setTimeout(a,s);const{type:l,timeout:u,propCount:d}=Xl(e,t);if(!l)return o();const h=l+"end";let v=0;const y=()=>{e.removeEventListener(h,E),a()},E=x=>{x.target===e&&++v>=d&&y()};setTimeout(()=>{v<d&&y()},u+1),e.addEventListener(h,E)}function Xl(e,t){const s=window.getComputedStyle(e),o=T=>(s[T]||"").split(", "),n=o(`${Lt}Delay`),a=o(`${Lt}Duration`),l=tr(n,a),u=o(`${_s}Delay`),d=o(`${_s}Duration`),h=tr(u,d);let v=null,y=0,E=0;t===Lt?l>0&&(v=Lt,y=l,E=a.length):t===_s?h>0&&(v=_s,y=h,E=d.length):(y=Math.max(l,h),v=y>0?l>h?Lt:_s:null,E=v?v===Lt?a.length:d.length:0);const x=v===Lt&&/\b(?:transform|all)(?:,|$)/.test(o(`${Lt}Property`).toString());return{type:v,timeout:y,propCount:E,hasTransform:x}}function tr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,o)=>sr(s)+sr(e[o])))}function sr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function nr(e){return(e?e.ownerDocument:document).body.offsetHeight}function Ql(e,t,s){const o=e[js];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const fn=Symbol("_vod"),Ta=Symbol("_vsh"),$a={name:"show",beforeMount(e,{value:t},{transition:s}){e[fn]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):ws(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:o}){!t!=!s&&(o?t?(o.beforeEnter(e),ws(e,!0),o.enter(e)):o.leave(e,()=>{ws(e,!1)}):ws(e,t))},beforeUnmount(e,{value:t}){ws(e,t)}};function ws(e,t){e.style.display=t?e[fn]:"none",e[Ta]=!t}const Zl=Symbol(""),ec=/(?:^|;)\s*display\s*:/;function tc(e,t,s){const o=e.style,n=$e(s);let a=!1;if(s&&!n){if(t)if($e(t))for(const l of t.split(";")){const u=l.slice(0,l.indexOf(":")).trim();s[u]==null&&en(o,u,"")}else for(const l in t)s[l]==null&&en(o,l,"");for(const l in s)l==="display"&&(a=!0),en(o,l,s[l])}else if(n){if(t!==s){const l=o[Zl];l&&(s+=";"+l),o.cssText=s,a=ec.test(s)}}else t&&e.removeAttribute("style");fn in e&&(e[fn]=a?o.display:"",e[Ta]&&(o.display="none"))}const or=/\s*!important$/;function en(e,t,s){if(W(s))s.forEach(o=>en(e,t,o));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const o=sc(e,t);or.test(s)?e.setProperty(ss(o),s.replace(or,""),"important"):e[o]=s}}const rr=["Webkit","Moz","ms"],Xn={};function sc(e,t){const s=Xn[t];if(s)return s;let o=Kt(t);if(o!=="filter"&&o in e)return Xn[t]=o;o=wr(o);for(let n=0;n<rr.length;n++){const a=rr[n]+o;if(a in e)return Xn[t]=a}return t}const ar="http://www.w3.org/1999/xlink";function ir(e,t,s,o,n,a=si(t)){o&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ar,t.slice(6,t.length)):e.setAttributeNS(ar,t,s):s==null||a&&!Cr(s)?e.removeAttribute(t):e.setAttribute(t,a?"":kt(s)?String(s):s)}function lr(e,t,s,o,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Ea(s):s);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,d=s==null?e.type==="checkbox"?"on":"":String(s);(u!==d||!("_value"in e))&&(e.value=d),s==null&&e.removeAttribute(t),e._value=s;return}let l=!1;if(s===""||s==null){const u=typeof e[t];u==="boolean"?s=Cr(s):s==null&&u==="string"?(s="",l=!0):u==="number"&&(s=0,l=!0)}try{e[t]=s}catch{}l&&e.removeAttribute(n||t)}function es(e,t,s,o){e.addEventListener(t,s,o)}function nc(e,t,s,o){e.removeEventListener(t,s,o)}const cr=Symbol("_vei");function oc(e,t,s,o,n=null){const a=e[cr]||(e[cr]={}),l=a[t];if(o&&l)l.value=o;else{const[u,d]=rc(t);if(o){const h=a[t]=lc(o,n);es(e,u,h,d)}else l&&(nc(e,u,l,d),a[t]=void 0)}}const ur=/(?:Once|Passive|Capture)$/;function rc(e){let t;if(ur.test(e)){t={};let o;for(;o=e.match(ur);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ss(e.slice(2)),t]}let Qn=0;const ac=Promise.resolve(),ic=()=>Qn||(ac.then(()=>Qn=0),Qn=Date.now());function lc(e,t){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;vt(cc(o,s.value),t,5,[o])};return s.value=e,s.attached=ic(),s}function cc(e,t){if(W(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(o=>n=>!n._stopped&&o&&o(n))}else return t}const dr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,uc=(e,t,s,o,n,a)=>{const l=n==="svg";t==="class"?Ql(e,o,l):t==="style"?tc(e,s,o):hn(t)?vo(t)||oc(e,t,s,o,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dc(e,t,o,l))?(lr(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ir(e,t,o,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!$e(o))?lr(e,Kt(t),o,a,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ir(e,t,o,l))};function dc(e,t,s,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&dr(t)&&te(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return dr(t)&&$e(s)?!1:t in e}const vn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return W(t)?s=>Js(t,s):t};function fc(e){e.target.composing=!0}function fr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ps=Symbol("_assign");function vr(e,t,s){return t&&(e=e.trim()),s&&(e=yn(e)),e}const Bt={created(e,{modifiers:{lazy:t,trim:s,number:o}},n){e[ps]=vn(n);const a=o||n.props&&n.props.type==="number";es(e,t?"change":"input",l=>{l.target.composing||e[ps](vr(e.value,s,a))}),(s||a)&&es(e,"change",()=>{e.value=vr(e.value,s,a)}),t||(es(e,"compositionstart",fc),es(e,"compositionend",fr),es(e,"change",fr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:o,trim:n,number:a}},l){if(e[ps]=vn(l),e.composing)return;const u=(a||e.type==="number")&&!/^0\d/.test(e.value)?yn(e.value):e.value,d=t??"";u!==d&&(document.activeElement===e&&e.type!=="range"&&(o&&t===s||n&&e.value.trim()===d)||(e.value=d))}},_t={deep:!0,created(e,{value:t,modifiers:{number:s}},o){const n=mn(t);es(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>s?yn(pn(l)):pn(l));e[ps](e.multiple?n?new Set(a):a:a[0]),e._assigning=!0,Dr(()=>{e._assigning=!1})}),e[ps]=vn(o)},mounted(e,{value:t}){pr(e,t)},beforeUpdate(e,t,s){e[ps]=vn(s)},updated(e,{value:t}){e._assigning||pr(e,t)}};function pr(e,t){const s=e.multiple,o=W(t);if(!(s&&!o&&!mn(t))){for(let n=0,a=e.options.length;n<a;n++){const l=e.options[n],u=pn(l);if(s)if(o){const d=typeof u;d==="string"||d==="number"?l.selected=t.some(h=>String(h)===String(u)):l.selected=oi(t,u)>-1}else l.selected=t.has(u);else if(_n(pn(l),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function pn(e){return"_value"in e?e._value:e.value}const vc=["ctrl","shift","alt","meta"],pc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>vc.some(s=>e[`${s}Key`]&&!t.includes(s))},bt=(e,t)=>{const s=e._withMods||(e._withMods={}),o=t.join(".");return s[o]||(s[o]=(n,...a)=>{for(let l=0;l<t.length;l++){const u=pc[t[l]];if(u&&u(n,t))return}return e(n,...a)})},hc=Ue({patchProp:uc},Vl);let hr;function mc(){return hr||(hr=vl(hc))}const gc=(...e)=>{const t=mc().createApp(...e),{mount:s}=t;return t.mount=o=>{const n=bc(o);if(!n)return;const a=t._component;!te(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const l=s(n,!1,yc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),l},t};function yc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function bc(e){return $e(e)?document.querySelector(e):e}const ct=(e,t)=>{const s=e.__vccOpts||e;for(const[o,n]of t)s[o]=n;return s},_c={class:"loading-container"},wc={__name:"LoadingState",props:{message:{type:String,default:"Loading student data..."}},setup(e){return(t,s)=>(_(),w("div",_c,[s[0]||(s[0]=r("div",{class:"spinner"},null,-1)),r("p",null,C(e.message),1)]))}},kc=ct(wc,[["__scopeId","data-v-5a5ef9a8"]]),Cc={class:"error-container"},Sc={__name:"ErrorState",props:{title:{type:String,default:"Something went wrong"},message:{type:String,required:!0},showRetry:{type:Boolean,default:!0}},emits:["retry"],setup(e,{emit:t}){return(s,o)=>(_(),w("div",Cc,[o[1]||(o[1]=r("div",{class:"error-icon"},"",-1)),r("h3",null,C(e.title),1),r("p",null,C(e.message),1),e.showRetry?(_(),w("button",{key:0,onClick:o[0]||(o[0]=n=>s.$emit("retry")),class:"retry-button"}," Try Again ")):B("",!0)]))}},xc=ct(Sc,[["__scopeId","data-v-fed208d7"]]),Ec={class:"staff-overview-header"},Ac={class:"header-content"},Tc={class:"header-meta"},$c={class:"staff-name"},Ic={class:"student-count"},Oc={__name:"StaffOverviewHeader",props:{staffMember:{type:Object,required:!0},totalStudents:{type:Number,default:0}},setup(e){const t=e,s={staff_admin:"Staff Admin",tutor:"Tutor",head_of_year:"Head of Year",subject_teacher:"Subject Teacher"},o=X(()=>{var n;return((n=t.staffMember.roles)==null?void 0:n.map(a=>s[a]||a))||[]});return(n,a)=>(_(),w("div",Ec,[r("div",Ac,[a[0]||(a[0]=r("h1",null,"Staff Overview",-1)),r("div",Tc,[r("span",$c,C(e.staffMember.name),1),(_(!0),w(ee,null,Te(o.value,l=>(_(),w("span",{class:"role-badge",key:l},C(l),1))),128)),r("span",Ic,C(e.totalStudents)+" students",1)])])]))}},Mc=ct(Oc,[["__scopeId","data-v-af34e02e"]]),Fc={class:"filter-bar"},Pc={class:"filter-label-row"},Rc=["title"],Uc=["value"],jc={class:"filter-label-row"},Nc=["title"],Lc=["value"],qc={class:"filter-label-row"},Hc=["title"],Dc=["value"],Bc={class:"filter-label-row"},Vc=["title"],Kc={class:"filter-label-row"},Gc=["title"],Yc={__name:"FilterBar",props:{filters:{type:Object,required:!0},lockedFilters:{type:Object,default:()=>({cycle:!1,group:!1,year:!1,status:!1,search:!1})},preservedValues:{type:Object,default:()=>({})}},emits:["filter-changed","lock-changed"],setup(e,{emit:t}){const s=e,o=t,n=P(String(s.preservedValues.cycle||"1")),a=P(String(s.preservedValues.group||"")),l=P(String(s.preservedValues.year||"")),u=P(String(s.preservedValues.status||"")),d=P(String(s.preservedValues.search||""));lt(()=>s.preservedValues,E=>{E.cycle!==void 0&&n.value!==String(E.cycle||"")&&(n.value=String(E.cycle||"")),E.group!==void 0&&a.value!==(E.group||"")&&(a.value=E.group||""),E.year!==void 0&&l.value!==(E.year||"")&&(l.value=E.year||""),E.status!==void 0&&u.value!==(E.status||"")&&(u.value=E.status||""),E.search!==void 0&&d.value!==(E.search||"")&&(d.value=E.search||"")},{deep:!0,immediate:!1});const h=E=>{const x={...s.lockedFilters};x[E]=!x[E],o("lock-changed",x)},v=()=>{o("filter-changed",{cycle:n.value||"",group:a.value||"",year:l.value||"",status:u.value||"",search:d.value||""})},y=()=>{s.lockedFilters.cycle||(n.value="1"),s.lockedFilters.group||(a.value=""),s.lockedFilters.year||(l.value=""),s.lockedFilters.status||(u.value=""),s.lockedFilters.search||(d.value=""),v()};return(E,x)=>(_(),w("div",Fc,[r("div",{class:Q(["filter-group",{locked:e.lockedFilters.cycle}])},[r("div",Pc,[x[10]||(x[10]=r("label",{for:"cycle-filter"},"Cycle:",-1)),r("button",{onClick:x[0]||(x[0]=T=>h("cycle")),class:"lock-button",title:e.lockedFilters.cycle?"Unlock filter":"Lock filter"},C(e.lockedFilters.cycle?"":""),9,Rc)]),Oe(r("select",{id:"cycle-filter","onUpdate:modelValue":x[1]||(x[1]=T=>n.value=T),onChange:v},[(_(!0),w(ee,null,Te(e.filters.cycles,T=>(_(),w("option",{key:T,value:T}," Cycle "+C(T),9,Uc))),128))],544),[[_t,n.value]])],2),r("div",{class:Q(["filter-group",{locked:e.lockedFilters.group}])},[r("div",jc,[x[11]||(x[11]=r("label",{for:"group-filter"},"Group:",-1)),r("button",{onClick:x[2]||(x[2]=T=>h("group")),class:"lock-button",title:e.lockedFilters.group?"Unlock filter":"Lock filter"},C(e.lockedFilters.group?"":""),9,Nc)]),Oe(r("select",{id:"group-filter","onUpdate:modelValue":x[3]||(x[3]=T=>a.value=T),onChange:v},[x[12]||(x[12]=r("option",{value:""},"All Groups",-1)),(_(!0),w(ee,null,Te(e.filters.groups,T=>(_(),w("option",{key:T,value:T},C(T),9,Lc))),128))],544),[[_t,a.value]])],2),r("div",{class:Q(["filter-group",{locked:e.lockedFilters.year}])},[r("div",qc,[x[13]||(x[13]=r("label",{for:"year-filter"},"Year:",-1)),r("button",{onClick:x[4]||(x[4]=T=>h("year")),class:"lock-button",title:e.lockedFilters.year?"Unlock filter":"Lock filter"},C(e.lockedFilters.year?"":""),9,Hc)]),Oe(r("select",{id:"year-filter","onUpdate:modelValue":x[5]||(x[5]=T=>l.value=T),onChange:v},[x[14]||(x[14]=r("option",{value:""},"All Years",-1)),(_(!0),w(ee,null,Te(e.filters.yearGroups,T=>(_(),w("option",{key:T,value:T}," Year "+C(T),9,Dc))),128))],544),[[_t,l.value]])],2),r("div",{class:Q(["filter-group",{locked:e.lockedFilters.status}])},[r("div",Bc,[x[15]||(x[15]=r("label",{for:"status-filter"},"Status:",-1)),r("button",{onClick:x[6]||(x[6]=T=>h("status")),class:"lock-button",title:e.lockedFilters.status?"Unlock filter":"Lock filter"},C(e.lockedFilters.status?"":""),9,Vc)]),Oe(r("select",{id:"status-filter","onUpdate:modelValue":x[7]||(x[7]=T=>u.value=T),onChange:v},[...x[16]||(x[16]=[r("option",{value:""},"All Students",-1),r("option",{value:"completed"},"Completed",-1),r("option",{value:"not_completed"},"Not Completed",-1)])],544),[[_t,u.value]])],2),r("div",{class:Q(["filter-group",{locked:e.lockedFilters.search}])},[r("div",Kc,[x[17]||(x[17]=r("label",{for:"search-input"},"Search:",-1)),r("button",{onClick:x[8]||(x[8]=T=>h("search")),class:"lock-button",title:e.lockedFilters.search?"Unlock filter":"Lock filter"},C(e.lockedFilters.search?"":""),9,Gc)]),Oe(r("input",{id:"search-input",type:"text","onUpdate:modelValue":x[9]||(x[9]=T=>d.value=T),onInput:v,placeholder:"Search by name...",class:"search-input"},null,544),[[Bt,d.value]])],2),r("button",{onClick:y,class:"clear-button"},"Clear Filters")]))}},Wc=ct(Yc,[["__scopeId","data-v-36a3b4fc"]]),zc={class:"smart-filters-section"},Jc={class:"header-left"},Xc={class:"expand-icon"},Qc={key:0,class:"filter-count-badge"},Zc={class:"smart-filters-content"},eu={key:0,class:"no-filters-message"},tu={key:1,class:"smart-filters-list"},su=["onUpdate:modelValue"],nu=["onUpdate:modelValue"],ou=["onUpdate:modelValue"],ru=["onClick"],au={__name:"SmartFilters",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=P(!1),o=e,n=t,a=P([...o.modelValue]);let l=0;const u=()=>{s.value=!s.value},d=()=>{a.value.push({id:`filter-${Date.now()}-${l++}`,dimension:"vision",operator:"gte",value:5}),s.value=!0,v()},h=y=>{a.value.splice(y,1),v()},v=()=>{n("update:modelValue",a.value)};return(y,E)=>(_(),w("div",zc,[r("div",{class:"smart-filters-header",onClick:u},[r("div",Jc,[r("span",Xc,C(s.value?"":""),1),E[0]||(E[0]=r("h3",null,"Smart Filters",-1)),a.value.length>0?(_(),w("span",Qc,C(a.value.length),1)):B("",!0)]),r("button",{onClick:bt(d,["stop"]),class:Q(["add-filter-button",{compact:!s.value}])}," + ",2)]),Oe(r("div",Zc,[a.value.length===0?(_(),w("div",eu,[...E[1]||(E[1]=[r("p",null,'Click "+ Add Filter" to filter by VESPA scores (e.g., Vision  7)',-1)])])):(_(),w("div",tu,[(_(!0),w(ee,null,Te(a.value,(x,T)=>(_(),w("div",{key:x.id,class:"smart-filter-row"},[Oe(r("select",{"onUpdate:modelValue":L=>x.dimension=L,onChange:v,class:"filter-select dimension-select"},[...E[2]||(E[2]=[tt('<option value="vision" data-v-1f780447>Vision</option><option value="effort" data-v-1f780447>Effort</option><option value="systems" data-v-1f780447>Systems</option><option value="practice" data-v-1f780447>Practice</option><option value="attitude" data-v-1f780447>Attitude</option><option value="overall" data-v-1f780447>Overall</option>',6)])],40,su),[[_t,x.dimension]]),Oe(r("select",{"onUpdate:modelValue":L=>x.operator=L,onChange:v,class:"filter-select operator-select"},[...E[3]||(E[3]=[tt('<option value="gt" data-v-1f780447>Greater than</option><option value="gte" data-v-1f780447>Greater or equal to</option><option value="lt" data-v-1f780447>Less than</option><option value="lte" data-v-1f780447>Less than or equal to</option><option value="eq" data-v-1f780447>Equal to</option>',5)])],40,nu),[[_t,x.operator]]),Oe(r("input",{type:"number","onUpdate:modelValue":L=>x.value=L,onInput:v,min:"0",max:"10",step:"0.1",class:"filter-input value-input",placeholder:"0-10"},null,40,ou),[[Bt,x.value,void 0,{number:!0}]]),r("button",{onClick:L=>h(T),class:"remove-filter-button",title:"Remove filter"},"  ",8,ru)]))),128))]))],512),[[$a,s.value]])]))}},iu=ct(au,[["__scopeId","data-v-1f780447"]]),is=e=>{if(e==null)return"#f5f5f5";const t=parseFloat(e);return t>=9?"#86efac":t>=7?"#bbf7d0":t>=5?"#fed7aa":t>=3?"#fee2e2":"#ffb5bb"},lu={class:"modal-container"},cu={class:"modal-header"},uu={class:"modal-body"},du={class:"text-content"},fu={__name:"TextViewModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"View Text"},text:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=t,o=()=>{s("close")};return(n,a)=>e.isOpen?(_(),w("div",{key:0,class:"modal-overlay",onClick:bt(o,["self"])},[r("div",lu,[r("div",cu,[r("h3",null,C(e.title),1),r("button",{class:"close-button",onClick:o},"")]),r("div",uu,[r("div",du,C(e.text),1)])])])):B("",!0)}},vu=ct(fu,[["__scopeId","data-v-5ffca5e6"]]),pu={class:"modal-container"},hu={class:"modal-header"},mu={class:"modal-body"},gu=["placeholder","disabled"],yu={class:"modal-footer"},bu={key:0,class:"error-text"},_u={class:"button-group"},wu=["disabled"],ku=["disabled"],Cu={__name:"EditableTextModal",props:{isOpen:{type:Boolean,required:!0},title:{type:String,default:"Edit Text"},text:{type:String,default:""},placeholder:{type:String,default:"Enter text here..."}},emits:["close","save"],setup(e,{emit:t}){const s=e,o=t,n=P(""),a=P(""),l=P(!1),u=P(null);lt(()=>[s.isOpen,s.text],([y,E])=>{y&&(n.value=E||"",a.value=E||"",u.value=null)},{immediate:!0});const d=X(()=>n.value.trim()!==a.value.trim()),h=async()=>{if(d.value){l.value=!0,u.value=null;try{await o("save",n.value),o("close")}catch(y){u.value=y.message||"Failed to save"}finally{l.value=!1}}},v=()=>{d.value&&!confirm("You have unsaved changes. Close without saving?")||o("close")};return(y,E)=>e.isOpen?(_(),w("div",{key:0,class:"modal-overlay",onClick:bt(v,["self"])},[r("div",pu,[r("div",hu,[r("h3",null,C(e.title),1),r("button",{class:"close-button",onClick:v},"")]),r("div",mu,[Oe(r("textarea",{"onUpdate:modelValue":E[0]||(E[0]=x=>n.value=x),class:"edit-textarea",placeholder:e.placeholder,rows:"12",disabled:l.value},null,8,gu),[[Bt,n.value]])]),r("div",yu,[u.value?(_(),w("span",bu,C(u.value),1)):B("",!0),r("div",_u,[r("button",{onClick:v,class:"cancel-button",disabled:l.value}," Cancel ",8,wu),r("button",{onClick:h,class:"save-button",disabled:l.value||!d.value},C(l.value?"Saving...":"Save Changes"),9,ku)])])])])):B("",!0)}},mr=ct(Cu,[["__scopeId","data-v-e2fc5fac"]]),dt="https://vespa-dashboard-9a1f84ee5341.herokuapp.com",rt={async getStaffOverview(e,t=null){try{let s=`${dt}/api/vespa/staff-overview?email=${encodeURIComponent(e)}`;t!=null&&t!==""&&(s+=`&cycle=${t}`);const o=await fetch(s);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(s){throw console.error("[Staff API] Error fetching overview:",s),s}},async saveStudentGoals(e,t,s){try{console.log("[Staff API] Saving student goals:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});const o=await fetch(`${dt}/api/vespa/report/save-goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,cycle:t,goalText:s.goalText||"",goalSetDate:s.goalSetDate||null,goalDueDate:s.goalDueDate||null,knackRecordId:s.knackRecordId||null})});if(!o.ok){const a=await o.json();throw new Error(a.error||`HTTP error! status: ${o.status}`)}const n=await o.json();return console.log("[Staff API] Goals saved successfully:",n),n}catch(o){throw console.error("[Staff API] Error saving goals:",o),o}},async saveCoachingComments(e,t,s){try{console.log("[Staff API] Saving coaching comments:",{studentEmail:e,cycle:t,knackRecordId:s.knackRecordId});let o=null;if(typeof Knack<"u"&&Knack.getUserAttributes){const l=Knack.getUserAttributes();o=l==null?void 0:l.email}if(!o)throw new Error("Staff email not available");const n=await fetch(`${dt}/api/vespa/report/save-coaching`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentEmail:e,staffEmail:o,cycle:t,coachingText:s.coachingText||"",coachingDate:s.coachingDate||null,knackRecordId:s.knackRecordId||null})});if(!n.ok){const l=await n.json();throw new Error(l.error||`HTTP error! status: ${n.status}`)}const a=await n.json();return console.log("[Staff API] Coaching comments saved successfully:",a),a}catch(o){throw console.error("[Staff API] Error saving coaching comments:",o),o}},async getAcademicProfile(e,t="current"){try{let s=`${dt}/api/academic-profile/${encodeURIComponent(e)}`;const o=(t||"").toString().trim();o&&o.toLowerCase()!=="current"&&(s+=`?academic_year=${encodeURIComponent(o)}`);const n=await fetch(s);if(!n.ok){const a=await n.json().catch(()=>null);throw new Error((a==null?void 0:a.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching academic profile:",s),s}},async getUcasApplication(e,t="current"){try{let s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`;const o=(t||"").toString().trim();o&&o.toLowerCase()!=="current"&&(s+=`?academic_year=${encodeURIComponent(o)}`);const n=await fetch(s);if(!n.ok){const a=await n.json().catch(()=>null);throw new Error((a==null?void 0:a.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching UCAS application:",s),s}},async getReferenceFull(e,t="current"){try{let s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/reference/full`;const o=(t||"").toString().trim();o&&o.toLowerCase()!=="current"&&(s+=`?academic_year=${encodeURIComponent(o)}`);const n=await fetch(s);if(!n.ok){const a=await n.json().catch(()=>null);throw new Error((a==null?void 0:a.error)||`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("[Staff API] Error fetching reference full:",s),s}},async saveTutorCompiled(e,t){try{const s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled`,o=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!o.ok){const n=await o.json().catch(()=>null);throw new Error((n==null?void 0:n.error)||`HTTP error! status: ${o.status}`)}return await o.json()}catch(s){throw console.error("[Staff API] Error saving tutor compiled narrative:",s),s}},async markTutorCompiledComplete(e,t){try{const s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/mark-complete`,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!o.ok){const n=await o.json().catch(()=>null);throw new Error((n==null?void 0:n.error)||`HTTP error! status: ${o.status}`)}return await o.json()}catch(s){throw console.error("[Staff API] Error marking tutor compiled complete:",s),s}},async unmarkTutorCompiledComplete(e,t){try{const s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/reference/tutor-compiled/unmark-complete`,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!o.ok){const n=await o.json().catch(()=>null);throw new Error((n==null?void 0:n.error)||`HTTP error! status: ${o.status}`)}return await o.json()}catch(s){throw console.error("[Staff API] Error unmarking tutor compiled complete:",s),s}},async requestUcasStatementEdits(e,t){try{const s=`${dt}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/request-edits`,o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!o.ok){const n=await o.json().catch(()=>null);throw new Error((n==null?void 0:n.error)||`HTTP error! status: ${o.status}`)}return await o.json()}catch(s){throw console.error("[Staff API] Error requesting UCAS statement edits:",s),s}}};async function Su(e,t,s=null){try{const o=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`,n=new URLSearchParams;s&&n.append("academic_year",s);const a=await fetch(n.toString()?`${o}?${n.toString()}`:o,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){if(a.status===404)return{success:!0,data:null};let l=`API error: ${a.status}`;try{const u=await a.json();u&&(u.error||u.message)&&(l=u.error||u.message)}catch{}throw new Error(l)}return await a.json()}catch(o){return console.error("[Academic Profile API] fetchUcasApplication error:",o),{success:!1,error:o.message||"Failed to fetch UCAS Application"}}}async function xu(e,t,s,o=null,n=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application`;let l=null;const u=n&&typeof n=="object"?n.roleHint:null;u&&(l=String(u).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:o,...t})});if(!d.ok){let h=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(h=v.error||v.message)}catch{}throw new Error(h)}return await d.json()}catch(a){return console.error("[Academic Profile API] saveUcasApplication error:",a),{success:!1,error:a.message||"Failed to save UCAS Application"}}}async function Eu(e,t,s,o=null){try{const n=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/comment`;let a=null;const l=t&&typeof t=="object"?t.__roleHint:null;l&&(a=String(l).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const h=(Knack.getUserRoles()||[]).some(v=>v&&v.name==="Student"||typeof v=="string"&&v.toLowerCase().includes("student"));a||(a=h?"student":"staff")}}catch{}const u=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...a?{"X-User-Role":a}:{}},body:JSON.stringify({academicYear:o,...t||{}})});if(!u.ok){let d=`API error: ${u.status}`;try{const h=await u.json();h&&(h.error||h.message)&&(d=h.error||h.message)}catch{}throw new Error(d)}return await u.json()}catch(n){return console.error("[Academic Profile API] addUcasApplicationComment error:",n),{success:!1,error:n.message||"Failed to add comment"}}}async function Au(e,t,s,o=null,n=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/feedback`;let l=null;const u=n&&typeof n=="object"?n.roleHint:null;u&&(l=String(u).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:o,...t||{}})});if(!d.ok){let h=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(h=v.error||v.message)}catch{}throw new Error(h)}return await d.json()}catch(a){return console.error("[Academic Profile API] generateUcasFeedback error:",a),{success:!1,error:a.message||"Failed to generate feedback"}}}async function Tu(e,t,s,o=null,n=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/virtual-tutor-comment`;let l=null;const u=n&&typeof n=="object"?n.roleHint:null;u&&(l=String(u).trim().toLowerCase());try{if(typeof Knack<"u"&&Knack.getUserRoles){const v=(Knack.getUserRoles()||[]).some(y=>y&&y.name==="Student"||typeof y=="string"&&y.toLowerCase().includes("student"));l||(l=v?"student":"staff")}}catch{}const d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...l?{"X-User-Role":l}:{}},body:JSON.stringify({academicYear:o,...t||{}})});if(!d.ok){let h=`API error: ${d.status}`;try{const v=await d.json();v&&(v.error||v.message)&&(h=v.error||v.message)}catch{}throw new Error(h)}return await d.json()}catch(a){return console.error("[Academic Profile API] addVirtualTutorComment error:",a),{success:!1,error:a.message||"Failed to add comment"}}}async function $u(e,t,s=null){try{const o=s?`?academic_year=${encodeURIComponent(s)}`:"",n=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/status${o}`,a=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}),l=await a.json().catch(()=>({}));if(!a.ok)throw new Error((l==null?void 0:l.error)||(l==null?void 0:l.message)||`API error: ${a.status}`);return l}catch(o){return console.error("[Academic Profile API] fetchReferenceStatus error:",o),{success:!1,error:o.message||"Failed to fetch reference status"}}}async function Iu(e,t,s,o=null,n=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/invite`,l=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"student",u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:o,...t||{}})}),d=await u.json().catch(()=>({}));if(!u.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${u.status}`);return d}catch(a){return console.error("[Academic Profile API] createReferenceInvite error:",a),{success:!1,error:a.message||"Failed to invite teacher"}}}async function Ou(e,t,s=null,o=null){try{const n=s?`?academic_year=${encodeURIComponent(s)}`:"",a=`${t}/api/academic-profile/${encodeURIComponent(e)}/reference/full${n}`,l=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"staff",u=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json","X-User-Role":l}}),d=await u.json().catch(()=>({}));if(!u.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${u.status}`);return d}catch(n){return console.error("[Academic Profile API] fetchReferenceFull error:",n),{success:!1,error:n.message||"Failed to fetch reference"}}}async function Mu(e,t,s,o=null,n=null){try{const a=`${s}/api/academic-profile/${encodeURIComponent(e)}/reference/contribution`,l=n&&n.roleHint?String(n.roleHint).trim().toLowerCase():"staff",u=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":l},body:JSON.stringify({academicYear:o,...t||{}})}),d=await u.json().catch(()=>({}));if(!u.ok)throw new Error((d==null?void 0:d.error)||(d==null?void 0:d.message)||`API error: ${u.status}`);return d}catch(a){return console.error("[Academic Profile API] saveReferenceContribution error:",a),{success:!1,error:a.message||"Failed to save contribution"}}}async function Fu(e,t,s=null,o=null){try{const n=`${t}/api/academic-profile/${encodeURIComponent(e)}/ucas-application/mark-complete`,a=o&&o.roleHint?String(o.roleHint).trim().toLowerCase():"student",l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":a},body:JSON.stringify({academicYear:s})}),u=await l.json().catch(()=>({}));if(!l.ok)throw new Error((u==null?void 0:u.error)||(u==null?void 0:u.message)||`API error: ${l.status}`);return u}catch(n){return console.error("[Academic Profile API] markUcasStatementComplete error:",n),{success:!1,error:n.message||"Failed to mark complete"}}}const Pu=["aria-label","title"],Ru={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Uu={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ju={class:"ucas-header"},Nu={class:"ucas-header-left"},Lu={class:"ucas-course-row"},qu=["disabled"],Hu={key:0,value:""},Du=["value"],Bu=["href"],Vu={key:1,class:"ucas-course-meta"},Ku=["title"],Gu={class:"ucas-meta-value"},Yu=["title"],Wu={class:"ucas-meta-value"},zu={class:"ucas-header-right"},Ju={key:0,class:"ucas-refbar"},Xu=["disabled"],Qu={key:0,class:"ucas-refbar-count"},Zu={key:1,class:"ucas-refbar"},ed=["disabled"],td=["disabled","title"],sd=["disabled"],nd=["disabled","title"],od=["disabled","title"],rd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ad={key:1,class:"ucas-spinner"},id={class:"ucas-body"},ld={class:"ucas-top-grid"},cd={class:"ucas-card"},ud={key:0,class:"ucas-empty"},dd={key:1,class:"ucas-subjects-grid"},fd=["title"],vd=["disabled","value","onInput"],pd={key:2,class:"ucas-tariff"},hd={class:"ucas-tariff-grid"},md=["title"],gd={class:"ucas-tariff-value"},yd={class:"ucas-tariff-sub"},bd={class:"ucas-tariff-sub-val"},_d=["title"],wd={class:"ucas-tariff-value"},kd={class:"ucas-tariff-sub"},Cd={class:"ucas-tariff-sub-val"},Sd=["title"],xd={class:"ucas-tariff-value"},Ed={class:"ucas-tariff-sub"},Ad={class:"ucas-tariff-sub-val"},Td={key:0,class:"ucas-tariff-note"},$d={class:"ucas-card"},Id={class:"ucas-metrics"},Od={class:"ucas-metric-value"},Md={class:"ucas-metric-max"},Fd={class:"ucas-progress-bar"},Pd={class:"ucas-metric-status"},Rd={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ud={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},jd={class:"ucas-preview"},Nd={class:"ucas-preview-header"},Ld={class:"ucas-preview-box"},qd={class:"ucas-questions"},Hd={class:"ucas-q"},Dd={class:"ucas-q-header"},Bd={class:"ucas-q-actions"},Vd=["title"],Kd=["disabled","value"],Gd={class:"ucas-q"},Yd={class:"ucas-q-header"},Wd={class:"ucas-q-actions"},zd=["title"],Jd=["disabled","value"],Xd={class:"ucas-q"},Qd={class:"ucas-q-header"},Zd={class:"ucas-q-actions"},ef=["title"],tf=["disabled","value"],sf={key:0,class:"ucas-comments"},nf={class:"ucas-comments-shell"},of={class:"ucas-comments-header"},rf=["title"],af={class:"ucas-comments-count-num"},lf={key:0,class:"ucas-comments-compose"},cf={class:"ucas-comments-compose-row"},uf={class:"ucas-comments-avatar ucas-comments-avatar--compose"},df={class:"ucas-comments-compose-main"},ff=["disabled"],vf={class:"ucas-comments-compose-footer"},pf={class:"ucas-comments-compose-actions"},hf=["disabled"],mf=["disabled"],gf={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},yf={class:"ucas-comments-quick"},bf={class:"ucas-comments-quick-chips"},_f=["onClick","disabled"],wf={key:1,class:"ucas-comments-empty"},kf={key:2,class:"ucas-comments-list"},Cf=["aria-label"],Sf={class:"ucas-comments-divider-text"},xf={class:"ucas-comments-item-main"},Ef={class:"ucas-comments-item-content"},Af={class:"ucas-comments-item-header"},Tf={class:"ucas-comments-item-author"},$f={class:"ucas-comments-author"},If={key:0,class:"ucas-comments-role"},Of={class:"ucas-comments-date"},Mf=["onClick"],Ff={class:"ucas-footer"},Pf={class:"ucas-footer-left"},Rf={class:"ucas-footer-stats"},Uf={class:"ucas-footer-total"},jf={class:"ucas-footer-max"},Nf={class:"ucas-footer-remaining"},Lf={key:0,class:"ucas-footer-warning"},qf={key:1,class:"ucas-footer-error"},Hf={key:2,class:"ucas-footer-error"},Df={class:"ucas-footer-right"},Bf={key:0,class:"ucas-toast"},Vf={class:"ucas-feedback-modal",role:"dialog","aria-modal":"true","aria-label":"Feedback"},Kf={class:"ucas-feedback-header"},Gf={class:"ucas-feedback-body"},Yf={key:0,class:"ucas-feedback-loading"},Wf={key:1,class:"ucas-feedback-error"},zf={key:2,class:"ucas-feedback-text"},Jf={class:"ucas-feedback-footer"},Xf=["disabled"],Qf=["disabled","title"],Zf={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded writing"},ev={class:"ucas-expand-header"},tv={class:"ucas-expand-title"},sv={class:"ucas-expand-meta"},nv={class:"ucas-expand-pill"},ov={class:"ucas-expand-pill"},rv={class:"ucas-expand-body"},av={key:0,class:"ucas-preview-box ucas-preview-box--expanded"},iv=["disabled","value"],lv={class:"ucas-expand-modal",role:"dialog","aria-modal":"true","aria-label":"Expanded reference writing"},cv={class:"ucas-expand-header"},uv={class:"ucas-expand-title"},dv={class:"ucas-expand-meta"},fv={class:"ucas-expand-pill"},vv={class:"ucas-expand-body"},pv=["disabled","value"],hv={class:"ucas-feedback-modal ucas-ref-modal",role:"dialog","aria-modal":"true","aria-label":"Teacher reference"},mv={class:"ucas-ref-header"},gv={class:"ucas-ref-header-left"},yv={class:"ucas-ref-icon","aria-hidden":"true"},bv={width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},_v={key:0,d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},wv={key:1,cx:"9",cy:"7",r:"4"},kv={key:2,d:"M22 21v-2a4 4 0 0 0-3-3.87"},Cv={key:3,d:"M16 3.13a4 4 0 0 1 0 7.75"},Sv={key:4,d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},xv={key:5,points:"14 2 14 8 20 8"},Ev={key:6,x1:"16",y1:"13",x2:"8",y2:"13"},Av={key:7,x1:"16",y1:"17",x2:"8",y2:"17"},Tv={key:8,x1:"10",y1:"9",x2:"8",y2:"9"},$v={class:"ucas-ref-title-group"},Iv={class:"ucas-ref-subtitle"},Ov={key:0},Mv={key:1},Fv={class:"ucas-ref-statusbar"},Pv={class:"ucas-ref-statusbar-left"},Rv={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Uv={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},jv={key:0,class:"ucas-ref-status-count"},Nv={key:1,class:"ucas-ref-status-count"},Lv=["disabled"],qv={class:"ucas-ref-body"},Hv={key:0,class:"ucas-ref-student"},Dv={class:"ucas-ref-steps"},Bv={class:"ucas-ref-step"},Vv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Kv={key:1},Gv={class:"ucas-ref-step"},Yv={class:"ucas-ref-step"},Wv={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},zv={key:1},Jv={class:"ucas-ref-section"},Xv={class:"ucas-ref-section-head"},Qv={class:"ucas-ref-section-pill"},Zv={key:0,class:"ucas-ref-empty"},ep={key:1,class:"ucas-ref-invite-list"},tp={class:"ucas-ref-invite-left"},sp={class:"ucas-ref-invite-meta"},np={class:"ucas-ref-invite-name"},op={class:"ucas-ref-invite-sub"},rp={class:"ucas-ref-invite-actions"},ap=["onClick","disabled"],ip=["onClick"],lp={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},cp={key:1,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},up={key:2,class:"ucas-ref-hidden-row"},dp={class:"hint"},fp={class:"ucas-ref-section ucas-ref-section--form"},vp={class:"ucas-ref-form-grid"},pp=["value"],hp={class:"ucas-ref-form-actions"},mp=["disabled"],gp=["disabled"],yp={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},bp={key:0,class:"ucas-ref-linkcopy"},_p={class:"ucas-ref-linkcopy-row"},wp=["value"],kp={key:1,class:"ucas-ref-staff"},Cp={class:"ucas-ref-staff-head"},Sp={key:0,class:"ucas-ref-staff-meta"},xp={key:0,class:"ucas-empty ucas-empty--small"},Ep={key:1,class:"ucas-empty ucas-empty--small"},Ap={key:2,class:"ucas-ref-staff-body"},Tp={class:"ucas-ref-contrib"},$p={class:"ucas-ref-contrib-head"},Ip={class:"ucas-ref-badge has-content"},Op={class:"ucas-ref-editor"},Mp={class:"ucas-ref-editor-select"},Fp=["value"],Pp={class:"ucas-ref-editor-footer"},Rp={class:"ucas-ref-char"},Up=["disabled"],jp=["disabled"],Np={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Lp={key:0,class:"hint"},qp={key:0,class:"ucas-ref-existing"},Hp={class:"ucas-ref-existing-list"},Dp={class:"ucas-ref-existing-meta"},Bp={class:"ucas-ref-existing-author"},Vp={class:"ucas-ref-existing-avatar"},Kp={class:"ucas-ref-existing-name"},Gp={class:"ucas-ref-existing-subject"},Yp={class:"ucas-ref-existing-text"},Wp={class:"ucas-ref-contrib ucas-ref-contrib--accordion"},zp={class:"ucas-ref-accordion-right"},Jp={class:"ucas-ref-accordion-chevron"},Xp={key:0,class:"ucas-ref-accordion-body"},Qp={class:"ucas-ref-editor"},Zp={class:"ucas-ref-editor-footer"},eh={class:"ucas-ref-char"},th=["disabled"],sh=["disabled"],nh={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oh={key:0,class:"hint"},rh={class:"ucas-ref-section"},ah={class:"ucas-ref-section-body"},ih={class:"ucas-ref-section"},lh={class:"ucas-ref-section-head"},ch={class:"ucas-ref-section-pill"},uh={key:0,class:"ucas-empty ucas-empty--small"},dh={key:1,class:"ucas-ref-contrib-list"},fh={class:"ucas-ref-contrib-meta"},vh={key:0},ph={class:"ucas-ref-contrib-text"},hh={class:"ucas-ref-section"},mh={class:"ucas-ref-section-head"},gh={class:"ucas-ref-section-pill"},yh={key:0,class:"ucas-empty ucas-empty--small"},bh={key:1,class:"ucas-ref-invite-list"},_h={class:"ucas-ref-invite-left"},wh={class:"ucas-ref-invite-meta"},kh={class:"ucas-ref-invite-name"},Ch={class:"ucas-ref-invite-sub"},Sh={class:"ucas-ref-invite-actions"},xh=["onClick","disabled"],Eh=["onClick"],Ah={key:2,class:"ucas-ref-hidden-row"},Th={class:"hint"},$h={class:"ucas-ref-footer"},ze=4e3,ht=350,zs=450,Ih={__name:"UcasApplicationModal",props:{studentEmail:{type:String,default:""},academicYear:{type:String,default:""},subjects:{type:Array,default:()=>[]},offers:{type:Array,default:()=>[]},topOffer:{type:Object,default:null},apiUrl:{type:String,default:""},canEdit:{type:Boolean,default:!1},commentsEnabled:{type:Boolean,default:!0},canAddComment:{type:Boolean,default:!1},staffEmail:{type:String,default:""}},emits:["close"],setup(e,{emit:t}){const s=P(!1);function o(){s.value=!s.value}const n=e,a=t,l=P("");let u=null;function d(k){l.value=k,u&&clearTimeout(u),u=setTimeout(()=>l.value="",2200)}function h(k){return k==null?"":String(k)}function v(k){const i=h(k==null?void 0:k.universityName).trim().toLowerCase(),A=h(k==null?void 0:k.courseTitle).trim().toLowerCase(),g=h(k==null?void 0:k.courseLink).trim().toLowerCase();return`${i}|${A}|${g}`.replace(/\s+/g," ").trim()}const y=X(()=>(Array.isArray(n.offers)?n.offers:[]).map(A=>({key:v(A),ranking:(A==null?void 0:A.ranking)??1,universityName:h(A==null?void 0:A.universityName).trim()||"University",courseTitle:h(A==null?void 0:A.courseTitle).trim(),courseLink:h(A==null?void 0:A.courseLink).trim(),offer:h(A==null?void 0:A.offer).trim(),ucasPoints:(A==null?void 0:A.ucasPoints)===null||(A==null?void 0:A.ucasPoints)===void 0||String(A==null?void 0:A.ucasPoints).trim()===""?null:Number(A==null?void 0:A.ucasPoints)})).filter(A=>A.key).sort((A,g)=>(Number(A.ranking)||999)-(Number(g.ranking)||999))),E=P(""),x=X(()=>y.value.find(k=>k.key===E.value)||null),T=Ms({q1:"",q2:"",q3:""}),L=Ms({}),se=P([]),j=P(""),K=P(!1),z=P(!1),F=P(!1),q=P(!1),ne=P(""),ge=P(""),ye=P(new Set),G=[" Add more specific examples",' Strengthen your "why this course"'," Trim repetition"," Show reflection, not just description"," Link skills to the course"];function oe(k){return ye.value.has(String(k||""))}function re(k){const i=String(k||""),A=new Set(ye.value);A.has(i)?A.delete(i):A.add(i),ye.value=A}function N(k){const i=h(k);return i.length<=zs?i:i.slice(0,zs).trimEnd()+""}function ue(k){const i=h(k).trim();if(!i)return;const A=h(j.value),g=A?A.trimEnd()+`
`+i:i;j.value=g}function be(k){const i=h(k).trim();if(!i)return"ST";const g=(i.includes("@")?i.split("@")[0]:i).replace(/[^a-zA-Z0-9]+/g," ").trim().split(/\s+/).filter(Boolean),R=(g[0]||"").slice(0,1),Y=(g[1]||g[0]||"").slice(1,2);return(R+Y).toUpperCase()||"ST"}function Ie(k){const i=h(k).trim().toLowerCase();if(!i)return"ucas-comments-avatar--blue";let A=0;for(let R=0;R<i.length;R++)A=A*31+i.charCodeAt(R)>>>0;const g=A%4;return g===0?"ucas-comments-avatar--green":g===1?"ucas-comments-avatar--blue":g===2?"ucas-comments-avatar--purple":"ucas-comments-avatar--orange"}function ke(k){try{const i=new Date(k);if(Number.isNaN(i.getTime()))return null;const A=i.getFullYear(),g=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0");return`${A}-${g}-${R}`}catch{return null}}function de(k){try{const i=new Date,A=i.getFullYear(),g=String(i.getMonth()+1).padStart(2,"0"),R=String(i.getDate()).padStart(2,"0"),Y=`${A}-${g}-${R}`,he=new Date(Y+"T00:00:00"),ie=new Date(k+"T00:00:00"),fe=Math.round((he.getTime()-ie.getTime())/(1e3*60*60*24));return fe===0?"Today":fe===1?"Yesterday":ie.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})}catch{return k}}const ae=X(()=>{const k=Array.isArray(se.value)?se.value:[],i=[];let A=null;for(const g of k){const R=ke(g==null?void 0:g.createdAt)||"unknown";(!A||A.key!==R)&&(A={key:R,label:R==="unknown"?"Earlier":de(R),items:[]},i.push(A)),A.items.push(g)}return i}),Ae=P(!1),Se=P("not_started"),Fe=P([]),_e=P(new Set),He=P(""),nt=P(""),Ge=P(!1),je=P(""),ut=X(()=>{const k=h(n.studentEmail).trim().toLowerCase(),i=h(n.academicYear).trim().toLowerCase();return`ucas_ref_hidden_invites:${k||"unknown"}:${i||"unknown"}`});function Ct(){try{const k=localStorage.getItem(ut.value);if(!k){_e.value=new Set;return}const i=JSON.parse(k);_e.value=new Set(Array.isArray(i)?i.map(A=>String(A)):[])}catch{_e.value=new Set}}function St(){try{localStorage.setItem(ut.value,JSON.stringify(Array.from(_e.value)))}catch{}}function Xe(k){try{const i=String((k==null?void 0:k.id)||"");if(!i)return;const A=new Set(_e.value);A.add(i),_e.value=A,St(),d("Invite removed from list")}catch{}}function jt(){_e.value=new Set,St(),d("Restored hidden invites")}const f=X(()=>{const k=Array.isArray(Fe.value)?Fe.value:[],i=_e.value,A=k.filter(R=>R&&!i.has(String(R.id||""))),g=new Map;for(const R of A){const Y=h((R==null?void 0:R.teacherEmail)||(R==null?void 0:R.email)).trim().toLowerCase(),he=h(R==null?void 0:R.subjectKey).trim().toLowerCase(),ie=`${Y}__${he}`,fe=g.get(ie);if(!fe){g.set(ie,R);continue}const ys=Date.parse((fe==null?void 0:fe.createdAt)||(fe==null?void 0:fe.expiresAt)||"")||0;(Date.parse((R==null?void 0:R.createdAt)||(R==null?void 0:R.expiresAt)||"")||0)>ys&&g.set(ie,R)}return Array.from(g.values())}),c=X(()=>{const k=Se.value;return k==="finalised"?"Finalised":k==="completed"?"Completed":k==="in_progress"?"In progress":"Not started"}),p=X(()=>{const k=Array.isArray(f.value)?f.value:[],i=k.length,A=k.filter(g=>g&&g.status==="submitted").length;return{total:i,submitted:A}}),m=P(!1),S=P(!1),b=P(null),$=X(()=>!n.canEdit&&!!h(n.staffEmail).trim()&&!!h(n.apiUrl).trim()&&!!h(n.studentEmail).trim()),O=P(""),I=P(""),M=P(""),H=P(!1),U=P(!1),D=P(!1),V=P(!1),Z=P("staff3"),ce=P(null),le=X(()=>Z.value==="staff2"?"Section 2: Extenuating circumstances":"Section 3: Subject teacher contribution"),Pe=X(()=>Z.value==="staff2"?h(O.value):h(M.value)),Ne=X(()=>h(Pe.value).length);function Qe(k){$.value&&(Z.value=k==="staff2"?"staff2":"staff3",V.value=!0,setTimeout(()=>{try{ce.value&&ce.value.focus&&ce.value.focus()}catch{}},0))}function Ye(){V.value=!1}function xt(k,i){const A=h(n.staffEmail).trim().toLowerCase();if(!A)return null;const g=b.value;if(!g)return null;const R=k===2?g.section2||[]:g.section3||[],Y=h(i||"").trim().toLowerCase();for(const he of Array.isArray(R)?R:[]){if(!he||h(he.authorEmail).trim().toLowerCase()!==A)continue;const fe=h(he.subjectKey||"").trim().toLowerCase();if(k===3){if(fe===Y)return he}else return he}return null}async function hs(k){if(!$.value)return;const i=Number(k);if(i!==2&&i!==3)return;const g=h(i===2?O.value:M.value).trim();if(g){i===2?H.value=!0:U.value=!0;try{const R={section:i,text:g,subjectKey:i===3&&h(I.value).trim()||null,authorName:null,staffEmail:h(n.staffEmail).trim()},Y=await Mu(n.studentEmail,R,n.apiUrl,n.academicYear||null,{roleHint:"staff"});if(!(Y!=null&&Y.success))throw new Error((Y==null?void 0:Y.error)||"Save failed");d("Saved"),await Me()}catch(R){d((R==null?void 0:R.message)||"Save failed")}finally{i===2?H.value=!1:U.value=!1}}}async function Me(){var k,i,A,g,R;if(!(!n.apiUrl||!n.studentEmail)){Ae.value=!0;try{if(Ct(),n.canEdit){const fe=await $u(n.studentEmail,n.apiUrl,n.academicYear||null);if(!(fe!=null&&fe.success))throw new Error((fe==null?void 0:fe.error)||"Failed to load reference status");Se.value=h(((k=fe==null?void 0:fe.data)==null?void 0:k.status)||"not_started"),Fe.value=Array.isArray((i=fe==null?void 0:fe.data)==null?void 0:i.invites)?fe.data.invites:[];return}S.value=!0;const Y=await Ou(n.studentEmail,n.apiUrl,n.academicYear||null,{roleHint:"staff"});if(!(Y!=null&&Y.success))throw new Error((Y==null?void 0:Y.error)||"Failed to load reference");b.value=(Y==null?void 0:Y.data)||null,Se.value=h(((A=Y==null?void 0:Y.data)==null?void 0:A.status)||"not_started"),Fe.value=Array.isArray((g=Y==null?void 0:Y.data)==null?void 0:g.invites)?Y.data.invites:[];const he=xt(2,null);O.value=h((he==null?void 0:he.text)||""),!h(I.value).trim()&&At.value.length&&(I.value=h(((R=At.value[0])==null?void 0:R.label)||""));const ie=xt(3,I.value);M.value=h((ie==null?void 0:ie.text)||"")}catch(Y){d((Y==null?void 0:Y.message)||"Failed to load reference")}finally{Ae.value=!1,S.value=!1}}}lt(()=>I.value,()=>{const k=xt(3,I.value);M.value=h((k==null?void 0:k.text)||"")}),lt(()=>m.value,async k=>{k&&await Me()});async function Ze(){var i,A;if(!n.canEdit||!n.apiUrl||!n.studentEmail)return;const k=He.value.trim();if(k){Ge.value=!0,je.value="";try{const g=await Iu(n.studentEmail,{teacherEmail:k,subjectKey:nt.value||null,allowedSections:[3]},n.apiUrl,n.academicYear||null,{roleHint:"student"});if(!(g!=null&&g.success))throw new Error((g==null?void 0:g.error)||"Invite failed");const R=h(((i=g==null?void 0:g.data)==null?void 0:i.inboxUrl)||((A=g==null?void 0:g.data)==null?void 0:A.inviteUrl)||"");R.includes("/reference-contribution")&&R.includes("token=")?je.value=R.replace("/reference-contribution","/reference-inbox"):je.value=R,d("Invite created"),He.value="",nt.value="",await Me()}catch(g){d((g==null?void 0:g.message)||"Invite failed")}finally{Ge.value=!1}}}async function ms(k){n.canEdit&&(He.value=h((k==null?void 0:k.teacherEmail)||(k==null?void 0:k.email)||"").trim(),nt.value=h((k==null?void 0:k.subjectKey)||"").trim(),He.value&&await Ze())}function Hs(k){try{navigator.clipboard.writeText(String(k||"")),d("Copied")}catch{d("Copy failed")}}const $n=P(!1),Et=P("q1"),Ds=P(null),Oa=X(()=>Et.value==="preview"?"Preview: Combined statement":Et.value==="q2"?"Q2: How studies prepared you":Et.value==="q3"?"Q3: Outside education":"Q1: Why this course?"),In=X(()=>Et.value==="preview"?gs.value||"":T[Et.value]||""),Ma=X(()=>In.value.length),Ao=P(0);function Nt(){if(n.canEdit)return;const k=Date.now();k-Ao.value<1500||(Ao.value=k,d("Only students can edit their UCAS statement."))}function Bs(k){Et.value=k,$n.value=!0,setTimeout(()=>{try{Et.value!=="preview"&&n.canEdit&&Ds.value&&Ds.value.focus&&Ds.value.focus()}catch{}},0)}function On(){$n.value=!1}const At=X(()=>(Array.isArray(n.subjects)?n.subjects:[]).slice(0,5).map((i,A)=>{const g=h((i==null?void 0:i.id)||(i==null?void 0:i.originalRecordId)||(i==null?void 0:i.position)||(i==null?void 0:i.subjectName)||`idx_${A}`),R=h(i==null?void 0:i.subjectName).trim()||"Subject",Y=R.replace(/^\s*(?:[a-z]{1,2}\d?\s*-\s*)+/i,"").trim()||R;return{key:g,label:Y}})),Mn=X(()=>{const k=E.value||"";return k?L[k]||{}:{}});function Fa(k,i){if(!n.canEdit)return;const A=E.value||"";A&&(L[A]||(L[A]={}),L[A][k]=h(i).slice(0,24))}const Ee=X(()=>T.q1.length+T.q2.length+T.q3.length),Fn=X(()=>Math.max(0,ze-Ee.value)),ns=X(()=>Math.max(0,Ee.value-ze)),gs=X(()=>{const k=h(T.q1).trim(),i=h(T.q2).trim(),A=h(T.q3).trim();return[k,i,A].filter(Boolean).join(`

`)});function Vs(k,i){n.canEdit&&(T[k]=h(i))}function Pa(){try{if(!gs.value)return;navigator.clipboard.writeText(gs.value),d("Copied to clipboard")}catch{d("Copy failed (browser blocked)")}}function Ra(k){try{const i=new Date(k);return Number.isNaN(i.getTime())?"":i.toLocaleString()}catch{return""}}const Pn=X(()=>`vespa:ucas_application:v1:${(n.studentEmail||"").toLowerCase()}:${n.academicYear||"current"}`);function Ua(){try{const k=localStorage.getItem(Pn.value);if(!k)return;const i=JSON.parse(k);if(i!=null&&i.answers&&(T.q1=h(i.answers.q1),T.q2=h(i.answers.q2),T.q3=h(i.answers.q3)),i!=null&&i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,g]of Object.entries(i.requirementsByCourse))L[A]=g&&typeof g=="object"?g:{};i!=null&&i.selectedCourseKey&&(E.value=h(i.selectedCourseKey))}catch{}}function ja(){try{localStorage.setItem(Pn.value,JSON.stringify({updatedAt:new Date().toISOString(),selectedCourseKey:E.value,answers:{...T},requirementsByCourse:{...L}}))}catch{}}let Rn=null;lt(()=>[T.q1,T.q2,T.q3,E.value,JSON.stringify(L),Pn.value],()=>{Rn&&clearTimeout(Rn),Rn=setTimeout(()=>ja(),450)});const os=P(!1),rs=P(""),Un=P(!1);async function Na(){if(!n.apiUrl||!n.studentEmail)return;const k=await Su(n.studentEmail,n.apiUrl,n.academicYear||null);if(!(k!=null&&k.success))return;const i=k.data||{};if(i.answers&&(T.q1=h(i.answers.q1),T.q2=h(i.answers.q2),T.q3=h(i.answers.q3)),i.requirementsByCourse&&typeof i.requirementsByCourse=="object")for(const[A,g]of Object.entries(i.requirementsByCourse))L[A]=g&&typeof g=="object"?g:{};se.value=Array.isArray(i.staffComments)?i.staffComments:[],i.selectedCourseKey&&(E.value=h(i.selectedCourseKey)),rs.value=h(i.statementCompletedAt||"")}async function La(){var k;if(!(!n.canEdit||!n.apiUrl||!n.studentEmail)&&!rs.value){if(Ee.value>ze){d(`Over the ${ze} character limit  please shorten before marking complete`);return}if(Ee.value<ht){d(`Need at least ${ht} characters before marking complete`);return}Un.value=!0;try{const i=await Fu(n.studentEmail,n.apiUrl,n.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to mark statement complete");rs.value=h(((k=i==null?void 0:i.data)==null?void 0:k.statementCompletedAt)||new Date().toISOString()),d("Statement marked complete (staff notified)")}catch(i){d((i==null?void 0:i.message)||"Failed to mark statement complete")}finally{Un.value=!1}}}async function qa(){if(!n.canEdit){d("Read-only for staff  students can save");return}if(!(!n.apiUrl||!n.studentEmail)){os.value=!0;try{const k={selectedCourseKey:E.value||null,answers:{q1:T.q1,q2:T.q2,q3:T.q3},requirementsByCourse:{...L}},i=await xu(n.studentEmail,k,n.apiUrl,n.academicYear||null,{roleHint:n.canEdit?"student":"staff"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Save failed");d("Saved")}catch(k){d((k==null?void 0:k.message)||"Save failed")}finally{os.value=!1}}}async function To(k=!1){if(!n.canEdit){d("Available for students");return}z.value=!0,!(!k&&ne.value)&&await Ha()}async function Ha(){var k;if(!(!n.apiUrl||!n.studentEmail)){F.value=!0,ge.value="",ne.value="";try{const i={answers:{q1:T.q1,q2:T.q2,q3:T.q3},course:x.value?{...x.value}:null,totals:{totalChars:Ee.value,remainingChars:Fn.value}},A=await Au(n.studentEmail,i,n.apiUrl,n.academicYear||null,{roleHint:"student"});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Failed to generate feedback");const g=h(((k=A==null?void 0:A.data)==null?void 0:k.feedback)||(A==null?void 0:A.data)||"");ne.value=g.trim(),ne.value||(ge.value="No feedback returned.")}catch(i){ge.value=(i==null?void 0:i.message)||"Failed to generate feedback"}finally{F.value=!1}}}async function Da(){var k;if(!(!ne.value||!n.apiUrl||!n.studentEmail)){q.value=!0;try{const i=await Tu(n.studentEmail,{comment:ne.value},n.apiUrl,n.academicYear||null,{roleHint:"student"});if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to add comment");se.value=Array.isArray((k=i.data)==null?void 0:k.staffComments)?i.data.staffComments:se.value,d("Added to Tutor comments"),z.value=!1}catch(i){d((i==null?void 0:i.message)||"Failed to add comment")}finally{q.value=!1}}}const Ba={"A-Level":{grades:{"A*":56,A:48,B:40,C:32,D:24,E:16}},"AS-Level":{grades:{A:20,B:16,C:12,D:10,E:6}},"BTEC Extended Certificate (1 A-Level)":{grades:{"D*":56,D:48,M:32,P:16}},"EPQ (Extended Project)":{grades:{"A*":28,A:24,B:20,C:16,D:12,E:8}}};function $o(k){const i=h(k).trim();if(!i)return"";const A=i.toUpperCase();return A==="DISTINCTION*"||A==="DISTINCTION *"?"D*":A==="DISTINCTION"?"D":A==="MERIT"?"M":A==="PASS"?"P":A.replace(/\s+/g,"")}function Va(k){const i=h(k==null?void 0:k.examType).toLowerCase();return i.includes("epq")||i.includes("extended project")?"EPQ (Extended Project)":i.includes("as")&&i.includes("level")?"AS-Level":i.includes("a level")||i.includes("a-level")?"A-Level":i.includes("btec")?"BTEC Extended Certificate (1 A-Level)":"A-Level"}function jn(k,i){var he;const A=$o(i);if(!A)return{points:0,unknown:0};const g=Va(k),Y=(((he=Ba[g])==null?void 0:he.grades)||{})[A];return typeof Y=="number"?{points:Y,unknown:0}:{points:0,unknown:1}}function Nn(k){const i=(Array.isArray(k)?k:[]).map(A=>$o(A)).filter(Boolean);return i.length?i.join("  "):""}const Ln=X(()=>{var Y,he;const k=Array.isArray(n.subjects)?n.subjects.slice(0,5):[],i=Nn(k.map(ie=>ie==null?void 0:ie.currentGrade)),A=Nn(k.map(ie=>ie==null?void 0:ie.targetGrade)),g=[];for(let ie=0;ie<k.length;ie++){const fe=(Y=At.value[ie])==null?void 0:Y.key,ys=fe&&Mn.value[fe]||"";g.push(ys)}let R=Nn(g);return R||(R=h((he=x.value)==null?void 0:he.offer).trim()||""),{current:i,target:A,required:R}}),We=X(()=>{var Y;const k=Array.isArray(n.subjects)?n.subjects.slice(0,5):[];let i=0,A=0,g=0,R=0;for(let he=0;he<k.length;he++){const ie=k[he],fe=(Y=At.value[he])==null?void 0:Y.key,ys=fe&&Mn.value[fe]||"",Hn=jn(ie,ie==null?void 0:ie.currentGrade),Oo=jn(ie,ie==null?void 0:ie.targetGrade),Mo=jn(ie,ys);i+=Hn.points,A+=Oo.points,g+=Mo.points,R+=Hn.unknown+Oo.unknown+Mo.unknown}return{current:i,target:A,required:g,unknownCount:R}});function Io(k,i){const A=Number(k)||0,g=Number(i)||0;return!g||!A?"":A>=g?"ucas-tariff-box--good":A>=Math.ceil(g*.9)?"ucas-tariff-box--warn":"ucas-tariff-box--bad"}function qn(k,i,A,g){const R=Number(A)||0,Y=Number(g)||0,he=[`${k} UCAS points`,i,`Total: ${R}`];if(k!=="Required"&&Y){he.push(`Required: ${Y}`);const ie=R-Y;he.push(ie>=0?`Above by: ${ie}`:`Below by: ${Math.abs(ie)}`)}return he.join(`
`)}async function Ka(){var i;if(!n.canAddComment)return;const k=j.value.trim();if(k){K.value=!0;try{const A=await Eu(n.studentEmail,{comment:k,staffEmail:n.staffEmail||null,__roleHint:n.canAddComment?"staff":"student"},n.apiUrl,n.academicYear||null);if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Comment failed");se.value=Array.isArray((i=A.data)==null?void 0:i.staffComments)?A.data.staffComments:se.value,j.value="",d("Comment posted")}catch(A){d((A==null?void 0:A.message)||"Comment failed")}finally{K.value=!1}}}return xn(async()=>{const k=n.topOffer||(n.offers&&n.offers.length?n.offers[0]:null);k&&(E.value=v(k)),Ua(),await Na(),n.canEdit&&await Me(),!E.value&&k&&(E.value=v(k))}),(k,i)=>{var A;return _(),w("div",{class:Q(["ucas-overlay",{"ucas-overlay--fullscreen":s.value}]),role:"dialog","aria-modal":"true","aria-label":"UCAS Application",onClick:i[33]||(i[33]=bt(g=>a("close"),["self"]))},[r("div",{class:Q(["ucas-modal",{"ucas-modal--fullscreen":s.value}])},[r("button",{class:"ucas-btn-close ucas-btn-close--corner ucas-btn-close--corner-secondary",type:"button",onClick:o,"aria-label":s.value?"Exit full screen":"Full screen UCAS application",title:s.value?"Exit full screen":"Full screen"},[s.value?(_(),w("svg",Uu,[...i[35]||(i[35]=[r("path",{d:"M9 3H3v6"},null,-1),r("path",{d:"M15 21h6v-6"},null,-1),r("path",{d:"M3 3l7 7"},null,-1),r("path",{d:"M21 21l-7-7"},null,-1)])])):(_(),w("svg",Ru,[...i[34]||(i[34]=[r("path",{d:"M15 3h6v6"},null,-1),r("path",{d:"M9 21H3v-6"},null,-1),r("path",{d:"M21 3l-7 7"},null,-1),r("path",{d:"M3 21l7-7"},null,-1)])]))],8,Pu),r("button",{class:"ucas-btn-close ucas-btn-close--corner",type:"button",onClick:i[0]||(i[0]=g=>a("close")),"aria-label":"Close UCAS application"},[...i[36]||(i[36]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])]),r("header",ju,[r("div",Nu,[i[41]||(i[41]=r("div",{class:"ucas-title"},"UCAS Application",-1)),r("div",Lu,[i[40]||(i[40]=r("label",{class:"ucas-course-label",for:"course-select"},"Course",-1)),Oe(r("select",{id:"course-select","onUpdate:modelValue":i[1]||(i[1]=g=>E.value=g),class:"ucas-select",disabled:y.value.length===0},[y.value.length===0?(_(),w("option",Hu,"No offers yet")):B("",!0),(_(!0),w(ee,null,Te(y.value,g=>(_(),w("option",{key:g.key,value:g.key}," #"+C(g.ranking)+" "+C(g.universityName)+"  "+C(g.courseTitle||"Course"),9,Du))),128))],8,qu),[[_t,E.value]]),(A=x.value)!=null&&A.courseLink?(_(),w("a",{key:0,class:"ucas-btn ucas-btn-outline",href:x.value.courseLink,target:"_blank",rel:"noopener noreferrer",title:"Open course link in a new tab"},[...i[37]||(i[37]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),r("polyline",{points:"15 3 21 3 21 9"}),r("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1),J(" Course link ",-1)])],8,Bu)):B("",!0),x.value?(_(),w("div",Vu,[x.value.offer?(_(),w("div",{key:0,class:"ucas-meta-pill",title:`Course offer requirement (grade): ${x.value.offer}`},[i[38]||(i[38]=r("span",{class:"ucas-meta-label"},"Required grade",-1)),r("span",Gu,C(x.value.offer),1)],8,Ku)):B("",!0),x.value.ucasPoints!==null&&x.value.ucasPoints!==void 0&&x.value.ucasPoints!==""?(_(),w("div",{key:1,class:"ucas-meta-pill",title:`Course offer requirement (UCAS points): ${x.value.ucasPoints}`},[i[39]||(i[39]=r("span",{class:"ucas-meta-label"},"Required UCAS",-1)),r("span",Wu,C(x.value.ucasPoints),1)],8,Yu)):B("",!0)])):B("",!0)])]),r("div",zu,[e.canEdit?(_(),w("div",Ju,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[2]||(i[2]=g=>m.value=!0),disabled:Ae.value||!e.studentEmail||!e.apiUrl,title:"Invite a teacher and track reference progress"},[...i[42]||(i[42]=[tt('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z" data-v-cc60684e></path><path d="M4 21a8 8 0 0 1 16 0" data-v-cc60684e></path><path d="M19 8h2" data-v-cc60684e></path><path d="M20 7v2" data-v-cc60684e></path></svg> Teacher reference ',2)])],8,Xu),r("span",{class:Q(["ucas-refbar-pill",`ucas-refbar--${Se.value}`])},[J(C(c.value)+" ",1),p.value.total?(_(),w("span",Qu," ("+C(p.value.submitted)+"/"+C(p.value.total)+") ",1)):B("",!0)],2)])):(_(),w("div",Zu,[r("button",{class:"ucas-refbar-btn",type:"button",onClick:i[3]||(i[3]=g=>m.value=!0),disabled:Ae.value||!e.studentEmail||!e.apiUrl,title:"View teacher reference"},[...i[43]||(i[43]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M12 12c2.5 0 4.5-2 4.5-4.5S14.5 3 12 3 7.5 5 7.5 7.5 9.5 12 12 12Z"}),r("path",{d:"M4 21a8 8 0 0 1 16 0"})],-1),J(" Teacher reference ",-1)])],8,ed),r("span",{class:Q(["ucas-refbar-pill",`ucas-refbar--${Se.value}`])},C(c.value),3)])),i[48]||(i[48]=r("a",{class:"ucas-btn ucas-btn-outline",href:"https://www.ucas.com/",target:"_blank",rel:"noopener noreferrer",title:"Open UCAS in a new tab"},[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"})]),J(" UCAS ")],-1)),r("button",{class:"ucas-btn ucas-btn-feedback",type:"button",onClick:To,disabled:!e.canEdit||F.value||!e.studentEmail||!e.apiUrl,title:e.canEdit?"Get feedback to improve your statement":"Available for students"},[...i[44]||(i[44]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 4V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"}),r("path",{d:"M8 11h8"}),r("path",{d:"M8 15h5"})],-1),J(" Get Feedback ",-1)])],8,td),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:Pa,disabled:!gs.value},[...i[45]||(i[45]=[r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),r("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})],-1),J(" Copy ",-1)])],8,sd),e.canEdit?(_(),w("button",{key:2,class:"ucas-btn ucas-btn-outline",type:"button",onClick:La,disabled:Un.value||!!rs.value||Ee.value>ze||Ee.value<ht||!e.studentEmail,title:rs.value?"Already marked complete":"Mark your personal statement complete and notify staff"},[i[46]||(i[46]=r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M20 6 9 17l-5-5"})],-1)),J(" "+C(rs.value?"Statement complete":"Mark statement complete"),1)],8,nd)):B("",!0),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:qa,disabled:!e.canEdit||os.value||!e.studentEmail,title:e.canEdit?"Save UCAS application":"Read-only for staff  students can save"},[os.value?B("",!0):(_(),w("svg",rd,[...i[47]||(i[47]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),os.value?(_(),w("span",ad)):B("",!0),J(" "+C(os.value?"Saving":"Save"),1)],8,od)])]),r("main",id,[r("section",ld,[r("div",cd,[i[59]||(i[59]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Subjects + offer requirements"),r("p",{class:"ucas-card-hint"},"Enter the grades required by the university for this course (max 5 subjects).")],-1)),At.value.length===0?(_(),w("div",ud,[...i[49]||(i[49]=[r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[r("path",{d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),r("span",null,"No subjects found in the academic profile.",-1)])])):(_(),w("div",dd,[i[50]||(i[50]=r("div",{class:"ucas-subjects-head"},"Subject",-1)),i[51]||(i[51]=r("div",{class:"ucas-subjects-head"},"Offer grade",-1)),(_(!0),w(ee,null,Te(At.value,g=>(_(),w(ee,{key:g.key},[r("div",{class:"ucas-subject-name",title:g.label},C(g.label),9,fd),r("div",null,[r("input",{class:"ucas-input",type:"text",disabled:!e.canEdit,value:Mn.value[g.key]||"",onClick:Nt,onFocus:Nt,onInput:R=>Fa(g.key,R.target.value),placeholder:"e.g. AAA"},null,40,vd)])],64))),128))])),At.value.length?(_(),w("div",pd,[i[58]||(i[58]=r("div",{class:"ucas-preview-header"},[r("h3",{class:"ucas-preview-title"},"UCAS points (estimated)"),r("span",{class:"ucas-preview-hint"},"Based on the subjects shown (max 5)")],-1)),r("div",hd,[r("div",{class:Q(["ucas-tariff-box",Io(We.value.current,We.value.required)]),title:qn("Current","Calculated from Current grades shown in your Academic Profile.",We.value.current,We.value.required)},[i[53]||(i[53]=r("div",{class:"ucas-tariff-label"},"Current",-1)),r("div",gd,C(We.value.current.toLocaleString()),1),r("div",yd,[i[52]||(i[52]=J("Grades: ",-1)),r("span",bd,C(Ln.value.current||""),1)])],10,md),r("div",{class:Q(["ucas-tariff-box",Io(We.value.target,We.value.required)]),title:qn("Target","Calculated from Target grades shown in your Academic Profile.",We.value.target,We.value.required)},[i[55]||(i[55]=r("div",{class:"ucas-tariff-label"},"Target",-1)),r("div",wd,C(We.value.target.toLocaleString()),1),r("div",kd,[i[54]||(i[54]=J("Grades: ",-1)),r("span",Cd,C(Ln.value.target||""),1)])],10,_d),r("div",{class:"ucas-tariff-box ucas-tariff-box--required",title:qn("Required","Calculated from the Offer grade inputs on this page (per subject).",We.value.required,We.value.required)},[i[57]||(i[57]=r("div",{class:"ucas-tariff-label"},"Required",-1)),r("div",xd,C(We.value.required.toLocaleString()),1),r("div",Ed,[i[56]||(i[56]=J("Grades: ",-1)),r("span",Ad,C(Ln.value.required||""),1)])],8,Sd)]),We.value.unknownCount>0?(_(),w("div",Td," Some grades couldnt be converted to points (format/qualification not recognised). ")):B("",!0)])):B("",!0)]),r("div",$d,[i[68]||(i[68]=r("div",{class:"ucas-card-header"},[r("h2",{class:"ucas-card-title"},"Character budget")],-1)),r("div",Id,[r("div",{class:Q(["ucas-metric",{"ucas-metric--danger":Ee.value>=ze}])},[i[60]||(i[60]=r("div",{class:"ucas-metric-label"},"Total characters",-1)),r("div",Od,[J(C(Ee.value.toLocaleString())+" ",1),r("span",Md,"/ "+C(ze.toLocaleString()),1)]),r("div",Fd,[r("div",{class:Q(["ucas-progress-fill",{"ucas-progress--warning":Ee.value>ze*.85,"ucas-progress--danger":Ee.value>=ze}]),style:gt({width:Math.min(100,Ee.value/ze*100)+"%"})},null,6)]),r("div",{class:Q(["ucas-metric-sub",{"ucas-metric-sub--danger":ns.value>0}])},[ns.value>0?(_(),w(ee,{key:0},[J(C(ns.value.toLocaleString())+" over limit",1)],64)):(_(),w(ee,{key:1},[J(C(Fn.value.toLocaleString())+" remaining",1)],64))],2)],2),r("div",{class:Q(["ucas-metric",{"ucas-metric--success":Ee.value>=ht}])},[i[64]||(i[64]=r("div",{class:"ucas-metric-label"},"Minimum required",-1)),r("div",{class:"ucas-metric-value"},[J(C(ht)+" "),i[61]||(i[61]=r("span",{class:"ucas-metric-max"},"characters",-1))]),r("div",Pd,[Ee.value>=ht?(_(),w("svg",Rd,[...i[62]||(i[62]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(_(),w("svg",Ud,[...i[63]||(i[63]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),r("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)])])),r("span",null,C(Ee.value>=ht?"Minimum met":`Need ${ht-Ee.value} more`),1)])],2)]),r("div",jd,[r("div",Nd,[i[66]||(i[66]=r("h3",{class:"ucas-preview-title"},"Preview",-1)),i[67]||(i[67]=r("span",{class:"ucas-preview-hint"},"Combined statement as it will appear",-1)),r("button",{class:"ucas-q-expand",type:"button",onClick:i[4]||(i[4]=g=>Bs("preview")),title:"Expand preview to read comfortably"},[...i[65]||(i[65]=[tt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M15 3h6v6" data-v-cc60684e></path><path d="M9 21H3v-6" data-v-cc60684e></path><path d="M21 3l-7 7" data-v-cc60684e></path><path d="M3 21l7-7" data-v-cc60684e></path></svg> Expand ',2)])])]),r("div",Ld,C(gs.value||"Your combined statement will appear here as you type"),1)])])]),r("section",qd,[r("div",Hd,[r("div",Dd,[i[70]||(i[70]=r("label",{class:"ucas-q-label",for:"q1"},[r("span",{class:"ucas-q-number"},"1"),r("span",{class:"ucas-q-title"},"Why do you want to study this course or subject?")],-1)),r("div",Bd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[5]||(i[5]=g=>Bs("q1")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[69]||(i[69]=[tt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M15 3h6v6" data-v-cc60684e></path><path d="M9 21H3v-6" data-v-cc60684e></path><path d="M21 3l-7 7" data-v-cc60684e></path><path d="M3 21l7-7" data-v-cc60684e></path></svg> Expand ',2)])],8,Vd),r("span",{class:Q(["ucas-q-count",{"ucas-q-count--active":T.q1.length>0}])},C(T.q1.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q1",class:"ucas-textarea",disabled:!e.canEdit,value:T.q1,onClick:Nt,onFocus:Nt,onInput:i[6]||(i[6]=g=>Vs("q1",g.target.value)),placeholder:"Be specific. What sparked your interest, and why this course?"},null,40,Kd)]),r("div",Gd,[r("div",Yd,[i[72]||(i[72]=r("label",{class:"ucas-q-label",for:"q2"},[r("span",{class:"ucas-q-number"},"2"),r("span",{class:"ucas-q-title"},"How have your qualifications and studies prepared you?")],-1)),r("div",Wd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[7]||(i[7]=g=>Bs("q2")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[71]||(i[71]=[tt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M15 3h6v6" data-v-cc60684e></path><path d="M9 21H3v-6" data-v-cc60684e></path><path d="M21 3l-7 7" data-v-cc60684e></path><path d="M3 21l7-7" data-v-cc60684e></path></svg> Expand ',2)])],8,zd),r("span",{class:Q(["ucas-q-count",{"ucas-q-count--active":T.q2.length>0}])},C(T.q2.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q2",class:"ucas-textarea",disabled:!e.canEdit,value:T.q2,onClick:Nt,onFocus:Nt,onInput:i[8]||(i[8]=g=>Vs("q2",g.target.value)),placeholder:"Use evidence: topics, projects, what you learned, and how it links."},null,40,Jd)]),r("div",Xd,[r("div",Qd,[i[74]||(i[74]=r("label",{class:"ucas-q-label",for:"q3"},[r("span",{class:"ucas-q-number"},"3"),r("span",{class:"ucas-q-title"},"What have you done outside education to prepare, and why is it useful?")],-1)),r("div",Zd,[r("button",{class:"ucas-q-expand",type:"button",onClick:i[9]||(i[9]=g=>Bs("q3")),title:e.canEdit?"Expand for focused writing":"Expand to read comfortably"},[...i[73]||(i[73]=[tt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M15 3h6v6" data-v-cc60684e></path><path d="M9 21H3v-6" data-v-cc60684e></path><path d="M21 3l-7 7" data-v-cc60684e></path><path d="M3 21l7-7" data-v-cc60684e></path></svg> Expand ',2)])],8,ef),r("span",{class:Q(["ucas-q-count",{"ucas-q-count--active":T.q3.length>0}])},C(T.q3.length.toLocaleString())+" chars ",3)])]),r("textarea",{id:"q3",class:"ucas-textarea",disabled:!e.canEdit,value:T.q3,onClick:Nt,onFocus:Nt,onInput:i[10]||(i[10]=g=>Vs("q3",g.target.value)),placeholder:"Super-curricular, work experience, reading, volunteering, clubs what did it develop?"},null,40,tf)])]),e.commentsEnabled?(_(),w("section",sf,[r("div",nf,[r("div",of,[i[76]||(i[76]=tt('<div class="ucas-comments-header-left" data-v-cc60684e><div class="ucas-comments-icon" aria-hidden="true" data-v-cc60684e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-cc60684e></path></svg></div><div class="ucas-comments-title-group" data-v-cc60684e><h2 class="ucas-comments-title" data-v-cc60684e>Tutor feedback</h2><p class="ucas-comments-subtitle" data-v-cc60684e>Comments from staff to help improve your statement</p></div></div>',1)),r("div",{class:"ucas-comments-count",title:`${(se.value||[]).length} comment(s)`},[r("span",af,C((se.value||[]).length),1),i[75]||(i[75]=r("span",null,"Comments",-1))],8,rf)]),e.canAddComment?(_(),w("div",lf,[r("div",cf,[r("div",uf,C(be(e.staffEmail||"Staff")),1),r("div",df,[Oe(r("textarea",{"onUpdate:modelValue":i[11]||(i[11]=g=>j.value=g),class:"ucas-comments-textarea",placeholder:"Write feedback for this student's personal statement",disabled:K.value},null,8,ff),[[Bt,j.value]]),r("div",vf,[i[78]||(i[78]=tt('<div class="ucas-comments-compose-hint" data-v-cc60684e><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><circle cx="12" cy="12" r="10" data-v-cc60684e></circle><path d="M12 16v-4" data-v-cc60684e></path><path d="M12 8h.01" data-v-cc60684e></path></svg><span data-v-cc60684e>Visible to the student immediately</span></div>',1)),r("div",pf,[r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:i[12]||(i[12]=g=>j.value=""),disabled:K.value||!j.value}," Cancel ",8,hf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ka,disabled:K.value||!j.value.trim()},[K.value?B("",!0):(_(),w("svg",gf,[...i[77]||(i[77]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),J(" "+C(K.value?"Posting":"Post feedback"),1)],8,mf)])])])]),r("div",yf,[i[79]||(i[79]=r("div",{class:"ucas-comments-quick-label"},"Quick feedback",-1)),r("div",bf,[(_(),w(ee,null,Te(G,g=>r("button",{key:g,class:"ucas-comments-chip",type:"button",onClick:R=>ue(g),disabled:K.value},C(g),9,_f)),64))])])])):B("",!0),ae.value.length===0?(_(),w("div",wf,[...i[80]||(i[80]=[tt('<div class="ucas-comments-empty-icon" aria-hidden="true" data-v-cc60684e><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-cc60684e><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-cc60684e></path></svg></div><div class="ucas-comments-empty-title" data-v-cc60684e>No feedback yet</div><div class="ucas-comments-empty-text" data-v-cc60684e>Staff comments will appear here to help improve your personal statement.</div>',3)])])):(_(),w("div",kf,[(_(!0),w(ee,null,Te(ae.value,g=>(_(),w(ee,{key:g.key},[r("div",{class:"ucas-comments-divider","aria-label":g.label},[i[81]||(i[81]=r("div",{class:"ucas-comments-divider-line"},null,-1)),r("span",Sf,C(g.label),1),i[82]||(i[82]=r("div",{class:"ucas-comments-divider-line"},null,-1))],8,Cf),(_(!0),w(ee,null,Te(g.items,R=>(_(),w("div",{key:R.id,class:"ucas-comments-item"},[r("div",xf,[r("div",{class:Q(["ucas-comments-avatar",Ie(R.staffEmail)])},C(be(R.staffEmail||"Staff")),3),r("div",Ef,[r("div",Af,[r("div",Tf,[r("span",$f,C(R.staffEmail||"Staff"),1),h(R.staffEmail).trim().toLowerCase()==="virtual tutor"?(_(),w("span",If," Virtual Tutor ")):B("",!0)]),r("span",Of,C(Ra(R.createdAt)),1)]),r("div",{class:Q(["ucas-comments-body",{"ucas-comments-body--collapsed":!oe(R.id)&&h(R.comment).length>zs}])},[oe(R.id)?(_(),w(ee,{key:0},[J(C(R.comment),1)],64)):(_(),w(ee,{key:1},[J(C(N(R.comment)),1)],64))],2),h(R.comment).length>zs?(_(),w("button",{key:0,class:"ucas-comments-more",type:"button",onClick:Y=>re(R.id)},C(oe(R.id)?"Show less":"Show more"),9,Mf)):B("",!0)])])]))),128))],64))),128))]))])])):B("",!0)]),r("footer",Ff,[r("div",Pf,[r("div",Rf,[r("span",Uf,C(Ee.value.toLocaleString()),1),i[85]||(i[85]=r("span",{class:"ucas-footer-divider"},"/",-1)),r("span",jf,C(ze.toLocaleString()),1),r("span",Nf,[i[83]||(i[83]=J(" ( ",-1)),ns.value>0?(_(),w(ee,{key:0},[J(C(ns.value.toLocaleString())+" over",1)],64)):(_(),w(ee,{key:1},[J(C(Fn.value.toLocaleString())+" remaining",1)],64)),i[84]||(i[84]=J(" ) ",-1))])]),Ee.value>0&&Ee.value<ht?(_(),w("div",Lf,[i[86]||(i[86]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),r("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),r("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)),J(" Add "+C(ht-Ee.value)+" more characters to reach the minimum. ",1)])):B("",!0),Ee.value>ze?(_(),w("div",qf,[i[87]||(i[87]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1)),J(" Over the limit by "+C(ns.value)+" characters. Shorten your statement before saving or marking complete. ",1)])):Ee.value>=ze?(_(),w("div",Hf,[...i[88]||(i[88]=[r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("circle",{cx:"12",cy:"12",r:"10"}),r("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),J(" Maximum character limit reached. ",-1)])])):B("",!0)]),r("div",Df,[xe(Yl,{name:"toast-fade"},{default:Yr(()=>[l.value?(_(),w("span",Bf,[i[89]||(i[89]=r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),J(" "+C(l.value),1)])):B("",!0)]),_:1})])]),z.value?(_(),w("div",{key:0,class:"ucas-feedback-overlay",onClick:i[15]||(i[15]=bt(g=>z.value=!1,["self"]))},[r("div",Vf,[r("div",Kf,[i[91]||(i[91]=r("div",{class:"ucas-feedback-title"},"Feedback",-1)),r("button",{class:"ucas-btn-close",type:"button",onClick:i[13]||(i[13]=g=>z.value=!1),"aria-label":"Close feedback"},[...i[90]||(i[90]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Gf,[F.value?(_(),w("div",Yf,[...i[92]||(i[92]=[r("span",{class:"ucas-spinner"},null,-1),J(" Generating feedback ",-1)])])):ge.value?(_(),w("div",Wf,C(ge.value),1)):(_(),w("div",zf,C(ne.value||"No feedback available yet."),1))]),r("div",Jf,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[14]||(i[14]=g=>To(!0)),disabled:F.value}," Regenerate ",8,Xf),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Da,disabled:F.value||q.value||!ne.value,title:ne.value?"Add this feedback into Tutor comments as Virtual Tutor":"Generate feedback first"},C(q.value?"Adding":"Add as a comment"),9,Qf)])])])):B("",!0),$n.value?(_(),w("div",{key:1,class:"ucas-expand-overlay",onClick:bt(On,["self"])},[r("div",Zf,[r("div",ev,[r("div",tv,C(Oa.value),1),r("div",sv,[r("span",nv,C(Ma.value.toLocaleString())+" in this section",1),r("span",ov,C(Ee.value.toLocaleString())+"/"+C(ze.toLocaleString())+" total",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:On,"aria-label":"Close expanded writing"},[...i[93]||(i[93]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",rv,[Et.value==="preview"?(_(),w("div",av,C(In.value||"Your combined statement will appear here as you type"),1)):(_(),w("textarea",{key:1,ref_key:"expandedTextareaEl",ref:Ds,class:"ucas-textarea ucas-textarea-expanded",disabled:!e.canEdit,value:In.value,onInput:i[16]||(i[16]=g=>Vs(Et.value,g.target.value))},null,40,iv))]),r("div",{class:"ucas-expand-footer"},[i[94]||(i[94]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to see the full page again. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:On},"Done")])])])):B("",!0),V.value?(_(),w("div",{key:2,class:"ucas-expand-overlay",onClick:bt(Ye,["self"])},[r("div",lv,[r("div",cv,[r("div",uv,C(le.value),1),r("div",dv,[r("span",fv,C(Ne.value.toLocaleString())+" characters",1)]),r("button",{class:"ucas-btn-close",type:"button",onClick:Ye,"aria-label":"Close expanded writing"},[...i[95]||(i[95]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",vv,[r("textarea",{ref_key:"refExpandedTextareaEl",ref:ce,class:"ucas-textarea ucas-textarea-expanded",disabled:!$.value,value:Pe.value,onInput:i[17]||(i[17]=g=>{Z.value==="staff2"?O.value=g.target.value:M.value=g.target.value})},null,40,pv)]),r("div",{class:"ucas-expand-footer"},[i[96]||(i[96]=r("div",{class:"ucas-expand-hint"}," Tip: write freely here, then close to return to the reference panel. ",-1)),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ye},"Done")])])])):B("",!0),m.value?(_(),w("div",{key:3,class:"ucas-feedback-overlay",onClick:i[32]||(i[32]=bt(g=>m.value=!1,["self"]))},[r("div",hv,[r("div",mv,[r("div",gv,[r("div",yv,[(_(),w("svg",bv,[e.canEdit?(_(),w("path",_v)):B("",!0),e.canEdit?(_(),w("circle",wv)):B("",!0),e.canEdit?(_(),w("path",kv)):B("",!0),e.canEdit?(_(),w("path",Cv)):(_(),w("path",Sv)),e.canEdit?B("",!0):(_(),w("polyline",xv)),e.canEdit?B("",!0):(_(),w("line",Ev)),e.canEdit?B("",!0):(_(),w("line",Av)),e.canEdit?B("",!0):(_(),w("line",Tv))]))]),r("div",$v,[i[97]||(i[97]=r("div",{class:"ucas-ref-title"},"Teacher reference",-1)),r("div",Iv,[e.canEdit?(_(),w("span",Ov,"Invite teachers to contribute to your UCAS reference")):(_(),w("span",Mv,"View and add contributions (Sections 2 & 3)"))])])]),r("button",{class:"ucas-ref-close",type:"button",onClick:i[18]||(i[18]=g=>m.value=!1),"aria-label":"Close"},[...i[98]||(i[98]=[r("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[r("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),r("div",Fv,[r("div",Pv,[i[101]||(i[101]=r("span",{class:"ucas-ref-status-label"},"Reference status",-1)),r("span",{class:Q(["ucas-ref-status-pill",`ucas-ref-status--${Se.value}`])},[Se.value==="completed"||Se.value==="finalised"?(_(),w("svg",Rv,[...i[99]||(i[99]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(_(),w("svg",Uv,[...i[100]||(i[100]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),J(" "+C(c.value),1)],2),p.value.total?(_(),w("span",jv,C(p.value.submitted)+"/"+C(p.value.total)+" submitted",1)):(_(),w("span",Nv,"No invites yet"))]),r("button",{class:"ucas-ref-refresh",type:"button",onClick:Me,disabled:Ae.value},[i[102]||(i[102]=tt('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-cc60684e></path><path d="M21 3v5h-5" data-v-cc60684e></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-cc60684e></path><path d="M3 21v-5h5" data-v-cc60684e></path></svg>',1)),J(" "+C(Ae.value?"Refreshing":"Refresh"),1)],8,Lv)]),r("div",qv,[e.canEdit?(_(),w("div",Hv,[r("div",Dv,[r("div",Bv,[r("div",{class:Q(["ucas-ref-step-circle",{complete:p.value.total>0}])},[p.value.total>0?(_(),w("svg",Vv,[...i[103]||(i[103]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(_(),w("span",Kv,"1"))],2),i[104]||(i[104]=r("div",{class:"ucas-ref-step-label"},"Invite teachers",-1))]),r("div",Gv,[r("div",{class:Q(["ucas-ref-step-circle",{active:p.value.total>0&&p.value.submitted<p.value.total,complete:p.value.total>0&&p.value.submitted===p.value.total}])},[...i[105]||(i[105]=[r("span",null,"2",-1)])],2),r("div",{class:Q(["ucas-ref-step-label",{active:p.value.total>0&&p.value.submitted<p.value.total}])},"Awaiting responses",2)]),r("div",Yv,[r("div",{class:Q(["ucas-ref-step-circle",{complete:Se.value==="completed"||Se.value==="finalised"}])},[Se.value==="completed"||Se.value==="finalised"?(_(),w("svg",Wv,[...i[106]||(i[106]=[r("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(_(),w("span",zv,"3"))],2),i[107]||(i[107]=r("div",{class:"ucas-ref-step-label"},"Reference complete",-1))])]),r("div",Jv,[r("div",Xv,[i[108]||(i[108]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Track who has been asked to contribute")],-1)),r("div",Qv,C((f.value||[]).length)+" invited",1)]),f.value.length===0?(_(),w("div",Zv,[...i[109]||(i[109]=[tt('<div class="ucas-ref-empty-icon" aria-hidden="true" data-v-cc60684e><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" data-v-cc60684e><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-cc60684e></path></svg></div><div data-v-cc60684e><div class="ucas-ref-empty-title" data-v-cc60684e>No invitations yet</div><div class="ucas-ref-empty-text" data-v-cc60684e>Invite a teacher below to get started.</div></div>',2)])])):(_(),w("div",ep,[(_(!0),w(ee,null,Te(f.value,g=>(_(),w("div",{key:g.id,class:Q(["ucas-ref-invite",{submitted:g.status==="submitted"}])},[r("div",tp,[r("div",{class:Q(["ucas-ref-invite-avatar",Ie(g.teacherEmail)])},C(be(g.teacherName||g.teacherEmail)),3),r("div",sp,[r("div",np,C(g.teacherName||g.teacherEmail),1),r("div",op,C(g.subjectKey||"No subject"),1)])]),r("div",rp,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>ms(g),disabled:Ge.value}," Reinvite ",8,ap),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>Xe(g)}," Remove ",8,ip)]),r("div",{class:Q(["ucas-ref-invite-status",g.status==="submitted"?"ok":"wait"])},[g.status==="submitted"?(_(),w("svg",lp,[...i[110]||(i[110]=[r("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),r("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)])])):(_(),w("svg",cp,[...i[111]||(i[111]=[r("circle",{cx:"12",cy:"12",r:"10"},null,-1),r("polyline",{points:"12 6 12 12 16 14"},null,-1)])])),J(" "+C(g.status==="submitted"?"Submitted":"Pending"),1)],2)],2))),128))])),_e.value.size?(_(),w("div",up,[r("span",dp,C(_e.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:jt},"Restore")])):B("",!0)]),r("div",fp,[i[118]||(i[118]=tt('<div class="ucas-ref-form-title" data-v-cc60684e><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-cc60684e><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-cc60684e></path><circle cx="9" cy="7" r="4" data-v-cc60684e></circle><line x1="19" y1="8" x2="19" y2="14" data-v-cc60684e></line><line x1="22" y1="11" x2="16" y2="11" data-v-cc60684e></line></svg> Invite another teacher </div>',1)),r("div",vp,[r("div",null,[i[112]||(i[112]=r("div",{class:"ucas-ref-label"},"Teacher email",-1)),Oe(r("input",{class:"ucas-ref-input",type:"email","onUpdate:modelValue":i[19]||(i[19]=g=>He.value=g),placeholder:"teacher@school.org"},null,512),[[Bt,He.value]])]),r("div",null,[i[114]||(i[114]=r("div",{class:"ucas-ref-label"},"Subject (optional)",-1)),Oe(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[20]||(i[20]=g=>nt.value=g)},[i[113]||(i[113]=r("option",{value:""},"No subject",-1)),(_(!0),w(ee,null,Te(At.value,g=>(_(),w("option",{key:g.key,value:g.label},C(g.label),9,pp))),128))],512),[[_t,nt.value]])])]),r("div",hp,[r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[21]||(i[21]=g=>{He.value="",nt.value=""}),disabled:Ge.value}," Clear ",8,mp),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:Ze,disabled:Ge.value||!He.value.trim()},[Ge.value?B("",!0):(_(),w("svg",yp,[...i[115]||(i[115]=[r("path",{d:"m22 2-7 20-4-9-9-4 20-7z"},null,-1),r("path",{d:"M22 2 11 13"},null,-1)])])),J(" "+C(Ge.value?"Sending":"Send invitation"),1)],8,gp)]),je.value?(_(),w("div",bp,[i[116]||(i[116]=r("div",{class:"ucas-ref-linkcopy-label"},"Or copy invite link",-1)),r("div",_p,[r("input",{class:"ucas-ref-linkcopy-input",type:"text",value:je.value,readonly:""},null,8,wp),r("button",{class:"ucas-ref-linkcopy-btn",type:"button",onClick:i[22]||(i[22]=g=>Hs(je.value))},"Copy")]),i[117]||(i[117]=r("div",{class:"ucas-ref-linkcopy-hint"},"Share this link directly with your teacher if email doesn't arrive.",-1))])):B("",!0)])])):(_(),w("div",kp,[r("div",Cp,[i[119]||(i[119]=r("div",{class:"ucas-ref-staff-title"},"Reference (staff view)",-1)),b.value&&b.value.updatedAt?(_(),w("div",Sp,"Updated "+C(new Date(b.value.updatedAt).toLocaleString()),1)):B("",!0)]),S.value?(_(),w("div",xp,[...i[120]||(i[120]=[r("span",null,"Loading reference",-1)])])):b.value?(_(),w("div",Ap,[r("div",Tp,[r("div",$p,[i[122]||(i[122]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"3"),J(" Subject teacher contributions ")],-1)),r("span",Ip,C((b.value.section3||[]).length)+" contributions",1)]),i[126]||(i[126]=r("div",{class:"ucas-ref-contrib-sub"},"Add specific evidence of academic potential and engagement relevant to the course.",-1)),r("div",Op,[r("div",Mp,[Oe(r("select",{class:"ucas-ref-select","onUpdate:modelValue":i[23]||(i[23]=g=>I.value=g)},[i[123]||(i[123]=r("option",{value:""},"No subject",-1)),(_(!0),w(ee,null,Te(At.value,g=>(_(),w("option",{key:g.key,value:g.label},C(g.label),9,Fp))),128))],512),[[_t,I.value]])]),Oe(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[24]||(i[24]=g=>M.value=g),placeholder:"Describe the student's ability, achievements, and potential in your subject"},null,512),[[Bt,M.value]]),r("div",Pp,[r("span",Rp,C((M.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[25]||(i[25]=g=>Qe("staff3")),disabled:!$.value}," Expand ",8,Up),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[26]||(i[26]=g=>hs(3)),disabled:U.value||!$.value||!M.value.trim()},[U.value?B("",!0):(_(),w("svg",Np,[...i[124]||(i[124]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),J(" "+C(U.value?"Saving":"Save Section 3"),1)],8,jp)]),$.value?B("",!0):(_(),w("div",Lp,"Saving is unavailable because your staff email is missing in this embedded context."))]),(b.value.section3||[]).length?(_(),w("div",qp,[i[125]||(i[125]=r("div",{class:"ucas-ref-existing-title"},"Existing contributions",-1)),r("div",Hp,[(_(!0),w(ee,null,Te(b.value.section3,g=>(_(),w("div",{key:g.id,class:"ucas-ref-existing-item"},[r("div",Dp,[r("div",Bp,[r("div",Vp,C(be(g.authorName||g.authorEmail)),1),r("span",Kp,C(g.authorName||g.authorEmail),1)]),r("span",Gp,C(g.subjectKey||""),1)]),r("div",Yp,C(g.text),1)]))),128))])])):B("",!0)]),r("div",Wp,[r("button",{class:"ucas-ref-accordion-head",type:"button",onClick:i[27]||(i[27]=g=>D.value=!D.value)},[i[128]||(i[128]=r("div",{class:"ucas-ref-contrib-title"},[r("span",{class:"ucas-ref-num"},"2"),J(" Extenuating circumstances ")],-1)),r("div",zp,[i[127]||(i[127]=r("span",{class:"ucas-ref-badge"},"Optional",-1)),r("span",Jp,C(D.value?"":""),1)])]),D.value?(_(),w("div",Xp,[i[130]||(i[130]=r("div",{class:"ucas-ref-contrib-sub"},"Add factual, course-relevant context (with student permission).",-1)),r("div",Qp,[Oe(r("textarea",{class:"ucas-ref-textarea","onUpdate:modelValue":i[28]||(i[28]=g=>O.value=g),placeholder:"Add any relevant extenuating circumstances here"},null,512),[[Bt,O.value]]),r("div",Zp,[r("span",eh,C((O.value||"").length.toLocaleString())+" characters",1),r("button",{class:"ucas-btn ucas-btn-outline",type:"button",onClick:i[29]||(i[29]=g=>Qe("staff2")),disabled:!$.value}," Expand ",8,th),r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[30]||(i[30]=g=>hs(2)),disabled:H.value||!$.value||!O.value.trim()},[H.value?B("",!0):(_(),w("svg",nh,[...i[129]||(i[129]=[r("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,-1),r("polyline",{points:"17 21 17 13 7 13 7 21"},null,-1),r("polyline",{points:"7 3 7 8 15 8"},null,-1)])])),J(" "+C(H.value?"Saving":"Save Section 2"),1)],8,sh)]),$.value?B("",!0):(_(),w("div",oh,"Saving is unavailable because your staff email is missing in this embedded context."))])])):B("",!0)]),r("div",rh,[i[131]||(i[131]=r("div",{class:"ucas-ref-section-head"},[r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 1  Centre statement"),r("div",{class:"ucas-ref-section-subtitle"},"Standard centre template (usually written once)")])],-1)),r("div",ah,C(h(b.value.section1Text)||"No centre template yet."),1)]),r("div",ih,[r("div",lh,[i[132]||(i[132]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Section 2  Extenuating circumstances"),r("div",{class:"ucas-ref-section-subtitle"},"Existing contributions")],-1)),r("div",ch,C((b.value.section2||[]).length),1)]),(b.value.section2||[]).length===0?(_(),w("div",uh,[...i[133]||(i[133]=[r("span",null,"No contributions yet.",-1)])])):(_(),w("div",dh,[(_(!0),w(ee,null,Te(b.value.section2,g=>(_(),w("div",{key:g.id,class:"ucas-ref-contrib-item"},[r("div",fh,[J(C(g.authorName||g.authorEmail)+" ",1),g.subjectKey?(_(),w("span",vh," "+C(g.subjectKey),1)):B("",!0)]),r("div",ph,C(g.text),1)]))),128))]))]),r("div",hh,[r("div",mh,[i[134]||(i[134]=r("div",null,[r("div",{class:"ucas-ref-section-title"},"Invited teachers"),r("div",{class:"ucas-ref-section-subtitle"},"Status of external invites")],-1)),r("div",gh,C((f.value||[]).length),1)]),f.value.length===0?(_(),w("div",yh,[...i[135]||(i[135]=[r("span",null,"No invitations yet.",-1)])])):(_(),w("div",bh,[(_(!0),w(ee,null,Te(f.value,g=>(_(),w("div",{key:g.id,class:Q(["ucas-ref-invite",{submitted:g.status==="submitted"}])},[r("div",_h,[r("div",{class:Q(["ucas-ref-invite-avatar",Ie(g.teacherEmail)])},C(be(g.teacherName||g.teacherEmail)),3),r("div",wh,[r("div",kh,C(g.teacherName||g.teacherEmail),1),r("div",Ch,C(g.subjectKey||"No subject"),1)])]),r("div",Sh,[r("button",{class:"ucas-ref-invite-action",type:"button",onClick:R=>ms(g),disabled:Ge.value}," Reinvite ",8,xh),r("button",{class:"ucas-ref-invite-action ucas-ref-invite-action--danger",type:"button",onClick:R=>Xe(g)}," Remove ",8,Eh)]),r("div",{class:Q(["ucas-ref-invite-status",g.status==="submitted"?"ok":"wait"])},C(g.status==="submitted"?"Submitted":"Pending"),3)],2))),128))])),_e.value.size?(_(),w("div",Ah,[r("span",Th,C(_e.value.size)+" removed from list",1),r("button",{class:"ucas-btn ucas-btn-ghost",type:"button",onClick:jt},"Restore")])):B("",!0)])])):(_(),w("div",Ep,[...i[121]||(i[121]=[r("span",null,"No reference data found.",-1)])]))]))]),r("div",$h,[r("button",{class:"ucas-btn ucas-btn-primary",type:"button",onClick:i[31]||(i[31]=g=>m.value=!1)},"Done")])])])):B("",!0)],2)],2)}}},Oh=ct(Ih,[["__scopeId","data-v-cc60684e"]]),Mh={class:"tutor-ucas-modal"},Fh={class:"tutor-ucas-header"},Ph={class:"tutor-ucas-title"},Rh={class:"tutor-ucas-sub"},Uh={class:"tutor-ucas-body"},jh={key:0,class:"tutor-ucas-loading"},Nh={key:1,class:"tutor-ucas-error"},Lh={class:"tutor-ucas-error-msg"},qh={key:2,class:"tutor-ucas-content"},Hh={class:"tutor-ucas-status-row"},Dh={class:"tutor-ucas-status-card"},Bh={class:"detail"},Vh={class:"tutor-ucas-status-card"},Kh={class:"detail"},Gh={key:0},Yh={class:"tutor-ucas-status-card"},Wh={class:"detail"},zh={key:0},Jh={class:"tutor-ucas-actions"},Xh=["disabled"],Qh=["disabled"],Zh={class:"tutor-ucas-section"},em={class:"tutor-ucas-section-head"},tm={class:"muted"},sm={key:0,class:"tutor-ucas-empty"},nm={key:1,class:"tutor-ucas-contribs"},om={class:"tutor-ucas-contrib-group-title"},rm={class:"tutor-ucas-contrib-meta"},am={class:"name"},im={class:"muted"},lm={class:"tutor-ucas-contrib-text"},cm={class:"tutor-ucas-contrib-actions"},um=["onClick"],dm=["onClick"],fm={class:"tutor-ucas-section"},vm={class:"tutor-ucas-section-head"},pm={class:"muted"},hm=["disabled"],mm={class:"tutor-ucas-editor-footer"},gm={key:0,class:"tutor-ucas-inline-error"},ym={class:"tutor-ucas-editor-actions"},bm=["disabled"],_m=["disabled"],wm=["disabled"],km={__name:"TutorUcasModal",props:{isOpen:{type:Boolean,required:!0},student:{type:Object,default:null},staffEmail:{type:String,default:""},staffName:{type:String,default:""},academicYear:{type:String,default:"current"},autoOpenApplication:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:t}){const s=e,o=t,n=P(!1),a=P(""),l=P(null),u=P(null),d=P(!1),h=P(!1),v=P(""),y=P(null),E=dt,x=P(s.academicYear||"current"),T=X(()=>{var c;const f=((c=y.value)==null?void 0:c.data)||y.value||{};return f.academic_year||f.academicYear||x.value||"current"}),L=X(()=>{var c;const f=((c=y.value)==null?void 0:c.data)||y.value||{};return Array.isArray(f.subjects)?f.subjects:[]}),se=X(()=>{var c;const f=((c=y.value)==null?void 0:c.data)||y.value||{};return Array.isArray(f.offers)?f.offers:[]}),j=P(""),K=P(""),z=P(!1),F=P(""),q=P(!1),ne=P(!1),ge=P(null),ye=P(null),G=P(null),oe=X(()=>{var S,b;const f=((b=(S=l.value)==null?void 0:S.data)==null?void 0:b.answers)||{},c=(f.q1||"").length,p=(f.q2||"").length,m=(f.q3||"").length;return c+p+m}),re=X(()=>{var m;const f=((m=l.value)==null?void 0:m.data)||{},c=!!f.selectedCourseKey,p=!!(f.requirementsByCourse&&Object.keys(f.requirementsByCourse).length>0);return c||p}),N=X(()=>G.value?"Completed":oe.value>=350?"In progress":"Not started"),ue=X(()=>G.value?"pill--ok":oe.value>=350?"pill--warn":"pill--muted"),be=X(()=>(j.value||"").trim()),Ie=X(()=>be.value.length>0),ke=X(()=>j.value.trim()!==(K.value||"").trim()),de=X(()=>{var m,S;const f=((S=(m=u.value)==null?void 0:m.data)==null?void 0:S.section3)||[],c=new Map;for(const b of f){const $=(b.subjectKey||"General").trim()||"General",O=c.get($)||[];O.push(b),c.set($,O)}const p=[];for(const[b,$]of c.entries())p.push({subjectKey:b,items:[...$].sort((O,I)=>String(I.updatedAt||I.createdAt||"").localeCompare(String(O.updatedAt||O.createdAt||"")))});return p.sort((b,$)=>b.subjectKey.localeCompare($.subjectKey)),p});async function ae(){var f,c,p,m,S,b,$,O,I,M,H;if((f=s.student)!=null&&f.email){n.value=!0,a.value="",F.value="";try{await Se();const[U,D]=await Promise.all([rt.getUcasApplication(s.student.email,x.value),rt.getReferenceFull(s.student.email,x.value)]);l.value=U,u.value=D,G.value=((p=(c=l.value)==null?void 0:c.data)==null?void 0:p.statement_completed_at)||((S=(m=l.value)==null?void 0:m.data)==null?void 0:S.statementCompletedAt)||null;const V=(($=(b=u.value)==null?void 0:b.data)==null?void 0:$.tutorCompiledSection3)||"";j.value=V,K.value=V,ge.value=((I=(O=u.value)==null?void 0:O.data)==null?void 0:I.tutorCompiledUpdatedAt)||null,ye.value=((H=(M=u.value)==null?void 0:M.data)==null?void 0:H.tutorCompiledCompletedAt)||null}catch(U){a.value=(U==null?void 0:U.message)||"Failed to load"}finally{n.value=!1}}}lt(()=>{var f;return[s.isOpen,(f=s.student)==null?void 0:f.email,s.academicYear]},([f])=>{f&&ae()});function Ae(f){const c=(f??"").toString().trim();return!c||c.toLowerCase()==="current"?"current":c}async function Se(){var c;const f=Ae(s.academicYear);if(!((c=s.student)!=null&&c.email)){x.value=f;return}if(f!=="current"){x.value=f;return}try{const p=await rt.getAcademicProfile(s.student.email,"current"),m=(p==null?void 0:p.data)||p||{},S=Ae(m.academic_year||m.academicYear||f);x.value=S||f}catch{x.value=f}}function Fe(){ke.value&&!confirm("You have unsaved changes. Close without saving?")||o("close")}async function _e(){var f;if((f=s.student)!=null&&f.email){F.value="",z.value=!0;try{await rt.saveTutorCompiled(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName,text:j.value}),await ae()}catch(c){F.value=(c==null?void 0:c.message)||"Failed to save"}finally{z.value=!1}}}async function He(){var f;if((f=s.student)!=null&&f.email&&Ie.value&&confirm("Mark this tutor reference as READY for UCAS?")){q.value=!0,F.value="";try{ke.value&&await rt.saveTutorCompiled(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName,text:j.value}),await rt.markTutorCompiledComplete(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ae()}catch(c){F.value=(c==null?void 0:c.message)||"Failed to mark complete"}finally{q.value=!1}}}async function nt(){var f;if((f=s.student)!=null&&f.email&&confirm("Send back to tutor (unmark complete)?")){q.value=!0,F.value="";try{await rt.unmarkTutorCompiledComplete(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ae()}catch(c){F.value=(c==null?void 0:c.message)||"Failed to unmark complete"}finally{q.value=!1}}}function Ge(f){const c=((f==null?void 0:f.text)||"").trim();if(!c)return;const p=j.value||"",m=p.trim().length?`

`:"";j.value=`${p}${m}${c}`.trimStart()}async function je(f){try{await navigator.clipboard.writeText(f||"")}catch{}}async function ut(){var c;const f=String(((c=s.student)==null?void 0:c.email)||"").trim();if(f){v.value="",h.value=!0;try{await Se();const p=await rt.getAcademicProfile(f,x.value);y.value=p,d.value=!0}catch(p){v.value=(p==null?void 0:p.message)||"Failed to open UCAS application",a.value=v.value}finally{h.value=!1}}}function Ct(){d.value=!1,y.value=null,v.value=""}async function St(){var f;if((f=s.student)!=null&&f.email&&confirm("Request further edits to the students personal statement?")){ne.value=!0;try{await rt.requestUcasStatementEdits(s.student.email,{academicYear:s.academicYear,staffEmail:s.staffEmail,staffName:s.staffName}),await ae()}catch(c){a.value=(c==null?void 0:c.message)||"Failed to request edits"}finally{ne.value=!1}}}function Xe(){ae()}function jt(f){if(!f)return"";try{const c=new Date(f);return Number.isNaN(c.getTime())?String(f):c.toLocaleString()}catch{return String(f)}}return(f,c)=>{var p,m,S,b,$;return _(),w(ee,null,[e.isOpen?(_(),w("div",{key:0,class:"tutor-ucas-overlay",onClick:bt(Fe,["self"])},[r("div",Mh,[r("div",Fh,[r("div",Ph,[r("h3",null,C(((p=e.student)==null?void 0:p.name)||"Student")+"  UCAS",1),r("div",Rh,C(((m=e.student)==null?void 0:m.email)||""),1)]),r("button",{class:"tutor-ucas-close",onClick:Fe},"")]),r("div",Uh,[n.value?(_(),w("div",jh,[...c[1]||(c[1]=[r("div",{class:"spinner"},null,-1),r("div",null,"Loading UCAS data",-1)])])):a.value?(_(),w("div",Nh,[c[2]||(c[2]=r("div",{class:"tutor-ucas-error-title"},"Could not load UCAS data",-1)),r("div",Lh,C(a.value),1),r("button",{class:"tutor-ucas-btn",onClick:Xe},"Try again")])):(_(),w("div",qh,[r("div",Hh,[r("div",Dh,[c[3]||(c[3]=r("div",{class:"label"},"Application",-1)),r("div",{class:Q(["pill",re.value?"pill--ok":"pill--muted"])},C(re.value?"Started":"Not started"),3),r("div",Bh,C(re.value?"Course / offers started":"No course/offers yet"),1)]),r("div",Vh,[c[4]||(c[4]=r("div",{class:"label"},"Personal statement",-1)),r("div",{class:Q(["pill",ue.value])},C(N.value),3),r("div",Kh,[J(C(oe.value)+" chars ",1),G.value?(_(),w("span",Gh,"  completed")):B("",!0)])]),r("div",Yh,[c[5]||(c[5]=r("div",{class:"label"},"Tutor reference",-1)),r("div",{class:Q(["pill",ye.value?"pill--ok":Ie.value?"pill--warn":"pill--muted"])},C(ye.value?"Complete":Ie.value?"In progress":"Not started"),3),r("div",Wh,[J(C(be.value.length)+" chars ",1),ye.value?(_(),w("span",zh,"  marked complete")):B("",!0)])])]),r("div",Jh,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--primary",disabled:h.value,onClick:ut},C(h.value?"Opening":"Open UCAS application"),9,Xh),r("button",{class:"tutor-ucas-btn",disabled:ne.value,onClick:St},C(ne.value?"Requesting":"Request edits (statement)"),9,Qh),c[6]||(c[6]=r("div",{class:"tutor-ucas-actions-spacer"},null,-1)),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--ghost",onClick:Xe}," Reload ")]),r("div",Zh,[r("div",em,[c[7]||(c[7]=r("h4",null,"Incoming subject teacher references",-1)),r("div",tm,C((((S=u.value)==null?void 0:S.section3)||[]).length)+" contributions",1)]),(((b=u.value)==null?void 0:b.section3)||[]).length===0?(_(),w("div",sm," No subject teacher contributions yet. ")):(_(),w("div",nm,[(_(!0),w(ee,null,Te(de.value,O=>(_(),w("div",{key:O.subjectKey,class:"tutor-ucas-contrib-group"},[r("div",om,C(O.subjectKey),1),(_(!0),w(ee,null,Te(O.items,I=>(_(),w("div",{key:I.id,class:"tutor-ucas-contrib"},[r("div",rm,[r("div",am,C(I.authorName||I.authorEmail||"Teacher"),1),r("div",im,C(jt(I.updatedAt||I.createdAt)),1)]),r("div",lm,C(I.text),1),r("div",cm,[r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm",onClick:M=>Ge(I)}," Add to compiled ",8,um),r("button",{class:"tutor-ucas-btn tutor-ucas-btn--sm tutor-ucas-btn--ghost",onClick:M=>je(I.text)}," Copy ",8,dm)])]))),128))]))),128))]))]),r("div",fm,[r("div",vm,[c[8]||(c[8]=r("h4",null,"Tutor compiled reference (final narrative)",-1)),r("div",pm," Saved: "+C(ge.value?jt(ge.value):""),1)]),Oe(r("textarea",{"onUpdate:modelValue":c[0]||(c[0]=O=>j.value=O),class:"tutor-ucas-textarea",placeholder:"Build the final tutor narrative here",disabled:z.value||q.value,rows:"10"},null,8,hm),[[Bt,j.value]]),r("div",mm,[F.value?(_(),w("div",gm,C(F.value),1)):B("",!0),r("div",ym,[r("button",{class:"tutor-ucas-btn",disabled:z.value||!ke.value,onClick:_e},C(z.value?"Saving":"Save draft"),9,bm),ye.value?(_(),w("button",{key:1,class:"tutor-ucas-btn tutor-ucas-btn--danger",disabled:q.value,onClick:nt},C(q.value?"Updating":"Send back (unmark complete)"),9,wm)):(_(),w("button",{key:0,class:"tutor-ucas-btn tutor-ucas-btn--primary",disabled:q.value||!Ie.value,onClick:He},C(q.value?"Marking":"Mark ready for UCAS"),9,_m))])])]),c[9]||(c[9]=r("div",{class:"tutor-ucas-footnote"}," Students can see status, not the reference content. Subject teachers submit into Incoming above; tutors collate into the final narrative. ",-1))]))])])])):B("",!0),d.value?(_(),cn(Oh,{key:1,studentEmail:(($=e.student)==null?void 0:$.email)||"",academicYear:T.value,subjects:L.value,offers:se.value,apiUrl:qt(E),canEdit:!1,staffEmail:e.staffEmail,onClose:Ct},null,8,["studentEmail","academicYear","subjects","offers","apiUrl","staffEmail"])):B("",!0)],64)}}},Cm=ct(km,[["__scopeId","data-v-aa749bb2"]]),Sm={class:"student-table-container"},xm={class:"table-header"},Em={class:"header-controls"},Am={class:"student-count"},Tm={class:"page-size-selector"},$m={key:0,class:"pagination-controls pagination-top"},Im=["disabled"],Om={class:"page-numbers"},Mm=["onClick"],Fm={key:1,class:"page-ellipsis"},Pm=["disabled"],Rm={class:"table-wrapper"},Um={class:"student-table"},jm={class:"sort-indicator"},Nm={class:"sort-indicator"},Lm={class:"sort-indicator"},qm={class:"sort-indicator"},Hm={class:"sort-indicator"},Dm={class:"sort-indicator"},Bm={class:"sort-indicator"},Vm={class:"sort-indicator"},Km={class:"student-name"},Gm={class:"report-cell"},Ym=["onClick"],Wm={class:"report-cell"},zm=["onClick","disabled","title"],Jm=["onClick","title"],Xm={key:0,class:"incomplete"},Qm={key:1},Zm=["onClick","title"],e1={key:0,class:"incomplete"},t1={key:1},s1=["onClick","title"],n1={key:1,class:"pagination-controls"},o1=["disabled"],r1={class:"page-numbers"},a1=["onClick"],i1={key:1,class:"page-ellipsis"},l1=["disabled"],c1={key:2,class:"no-results"},u1={__name:"StudentTable",props:{students:{type:Array,required:!0},activeFilters:{type:Object,default:()=>({})},smartFilters:{type:Array,default:()=>[]}},emits:["view-report","data-updated"],setup(e,{emit:t}){const s=e,o=t,n=P("name"),a=P("asc"),l=P(!1),u=P(""),d=P(""),h=P(!1),v=P(""),y=P(""),E=P(null),x=P(!1),T=P(""),L=P(""),se=P(null),j=P(1),K=P(50),z=X(()=>{let c=[...s.students];if(s.activeFilters.group&&(c=c.filter(p=>p.group===s.activeFilters.group)),s.activeFilters.year&&(c=c.filter(p=>p.yearGroup===s.activeFilters.year)),s.activeFilters.status==="completed"?c=c.filter(p=>p.hasCompleted):s.activeFilters.status==="not_completed"&&(c=c.filter(p=>!p.hasCompleted)),s.activeFilters.search){const p=s.activeFilters.search.toLowerCase();c=c.filter(m=>m.name.toLowerCase().includes(p)||m.group&&m.group.toLowerCase().includes(p))}return s.smartFilters&&s.smartFilters.length>0&&(c=c.filter(p=>s.smartFilters.every(m=>{var O;const S=(O=p.scores)==null?void 0:O[m.dimension];if(S==null)return!1;const b=parseFloat(S),$=parseFloat(m.value);switch(m.operator){case"gt":return b>$;case"gte":return b>=$;case"lt":return b<$;case"lte":return b<=$;case"eq":return Math.abs(b-$)<.01;default:return!0}}))),c}),F=X(()=>{const c=[...z.value];return c.sort((p,m)=>{var $,O;let S,b;return["vision","effort","systems","practice","attitude","overall"].includes(n.value)?(S=($=p.scores)==null?void 0:$[n.value],b=(O=m.scores)==null?void 0:O[n.value],S==null&&(S=-1),b==null&&(b=-1),S=parseFloat(S),b=parseFloat(b)):(S=p[n.value],b=m[n.value],S==null&&(S=""),b==null&&(b=""),typeof S=="string"&&(S=S.toLowerCase(),b=b.toLowerCase())),S<b?a.value==="asc"?-1:1:S>b?a.value==="asc"?1:-1:0}),c}),q=X(()=>Math.ceil(z.value.length/K.value)),ne=X(()=>{const c=(j.value-1)*K.value,p=c+K.value;return F.value.slice(c,p)}),ge=X(()=>{const c=z.value.length;if(c===0)return"No students";const p=(j.value-1)*K.value+1,m=Math.min(j.value*K.value,c);return`Showing ${p}-${m} of ${c} students`}),ye=X(()=>{const c=q.value,p=j.value,m=[];if(c<=7)for(let S=1;S<=c;S++)m.push(S);else{m.push(1),p>3&&m.push("...");const S=Math.max(2,p-1),b=Math.min(c-1,p+1);for(let $=S;$<=b;$++)m.push($);p<c-2&&m.push("..."),c>1&&m.push(c)}return m});lt(()=>[s.activeFilters,z.value.length],()=>{j.value=1});const G=c=>{if(c>=1&&c<=q.value){j.value=c;const p=document.querySelector(".student-table-container");p&&p.scrollIntoView({behavior:"smooth",block:"start"})}},oe=()=>{j.value=1},re=c=>{console.log("[Table] Sorting by:",c),n.value===c?a.value=a.value==="asc"?"desc":"asc":(n.value=c,a.value=c.includes("score")||["vision","effort","systems","practice","attitude","overall"].includes(c)?"desc":"asc")},N=c=>n.value!==c?"":a.value==="asc"?"":"",ue=(c,p)=>c?c.length<=p?c:c.substring(0,p)+"...":"-",be=c=>c==null?"-":Math.round(parseFloat(c)),Ie=c=>{o("view-report",c)};function ke(c){const m=((c==null?void 0:c.yearGroup)??(c==null?void 0:c.year)??"").toString().match(/(\d{1,2})/),S=m?parseInt(m[1],10):NaN;return Number.isFinite(S)?S:null}function de(c){const p=ke(c);return!!(c!=null&&c.email)&&p!==null&&p>=12}function ae(c){de(c)&&He(c)}const Ae=P(!1),Se=P(null),Fe=X(()=>{try{const c=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((c==null?void 0:c.email)||"").toString().trim().toLowerCase()}catch{return""}}),_e=X(()=>{try{const c=typeof Knack<"u"&&Knack.getUserAttributes?Knack.getUserAttributes():null;return((c==null?void 0:c.name)||(c==null?void 0:c.full_name)||"").toString().trim()}catch{return""}});function He(c){de(c)&&(Se.value={name:(c==null?void 0:c.name)||"",email:(c==null?void 0:c.email)||"",group:(c==null?void 0:c.group)||"",yearGroup:(c==null?void 0:c.yearGroup)||(c==null?void 0:c.year)||""},Ae.value=!0)}function nt(){Ae.value=!1,Se.value=null}const Ge=(c,p,m)=>{!m||m.trim()===""||m==="-"||(u.value=`${c} - ${p}`,d.value=m,l.value=!0)},je=()=>{l.value=!1,u.value="",d.value=""},ut=c=>{E.value=c,v.value=`${c.name} - Edit Action Plan`,y.value=c.goals||"",h.value=!0},Ct=()=>{h.value=!1,v.value="",y.value="",E.value=null},St=async c=>{if(!E.value)return;const p=E.value.email,m=E.value.id,S=E.value.targetCycle;try{console.log("[StudentTable] Saving goals for:",p,"Knack ID:",m);const b=s.students.find($=>$.id===m);if(b){const $=b.goals,O=b.hasGoals;b.goals=c,b.hasGoals=!!c.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const I=await rt.saveStudentGoals(p,S,{goalText:c,knackRecordId:m});if(I.knackWritten)console.log("[StudentTable]  Goals saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Goals saved to Supabase ONLY. Knack error:",I.knackError),b.goals=$,b.hasGoals=O,new Error("Failed to save to Knack: "+I.knackError);console.log("[StudentTable] Goals saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(b){throw console.error("[StudentTable] Error saving goals:",b),b}},Xe=c=>{se.value=c,T.value=`${c.name} - Staff Coaching Comments`,L.value=c.coachingComments||"",x.value=!0},jt=()=>{x.value=!1,T.value="",L.value="",se.value=null},f=async c=>{if(!se.value)return;const p=se.value.email,m=se.value.id,S=se.value.targetCycle;try{console.log("[StudentTable] Saving coaching comments for:",p,"Knack ID:",m);const b=s.students.find($=>$.id===m);if(b){const $=b.coachingComments,O=b.hasCoaching;b.coachingComments=c,b.hasCoaching=!!c.trim(),console.log("[StudentTable]  Optimistic update applied - UI updated instantly");const I=await rt.saveCoachingComments(p,S,{coachingText:c,knackRecordId:m});if(I.knackWritten)console.log("[StudentTable]  Coaching saved to BOTH Supabase AND Knack");else throw console.warn("[StudentTable]  Coaching saved to Supabase ONLY. Knack error:",I.knackError),b.coachingComments=$,b.hasCoaching=O,new Error("Failed to save to Knack: "+I.knackError);console.log("[StudentTable] Coaching comments saved successfully - optimistic update persists in table")}else throw console.error("[StudentTable] Could not find student in array for optimistic update"),new Error("Student not found in table")}catch(b){throw console.error("[StudentTable] Error saving coaching comments:",b),b}};return(c,p)=>(_(),w("div",Sm,[r("div",xm,[p[15]||(p[15]=r("h3",null,"Student Overview",-1)),r("div",Em,[r("p",Am,C(ge.value),1),r("div",Tm,[p[14]||(p[14]=r("label",{for:"page-size"},"Show:",-1)),Oe(r("select",{id:"page-size","onUpdate:modelValue":p[0]||(p[0]=m=>K.value=m),onChange:oe},[...p[13]||(p[13]=[r("option",{value:10},"10",-1),r("option",{value:50},"50",-1),r("option",{value:100},"100",-1),r("option",{value:500},"500",-1)])],544),[[_t,K.value]])])])]),z.value.length>0?(_(),w("div",$m,[r("button",{onClick:p[1]||(p[1]=m=>G(j.value-1)),disabled:j.value===1,class:"pagination-button"}," Previous ",8,Im),r("div",Om,[(_(!0),w(ee,null,Te(ye.value,m=>(_(),w(ee,{key:m},[m!=="..."?(_(),w("button",{key:0,onClick:S=>G(m),class:Q(["page-button",{active:m===j.value}])},C(m),11,Mm)):(_(),w("span",Fm,"..."))],64))),128))]),r("button",{onClick:p[2]||(p[2]=m=>G(j.value+1)),disabled:j.value===q.value,class:"pagination-button"}," Next ",8,Pm)])):B("",!0),r("div",Rm,[r("table",Um,[r("thead",null,[r("tr",null,[r("th",{onClick:p[3]||(p[3]=m=>re("name")),class:"sortable"},[p[16]||(p[16]=J(" Student Name ",-1)),r("span",jm,C(N("name")),1)]),r("th",{onClick:p[4]||(p[4]=m=>re("group")),class:"sortable"},[p[17]||(p[17]=J(" Group ",-1)),r("span",Nm,C(N("group")),1)]),p[24]||(p[24]=r("th",{class:"report-col"},"Report",-1)),p[25]||(p[25]=r("th",{class:"ucas-col",title:"UCAS Application (Year 12+)"},"UCAS",-1)),r("th",{onClick:p[5]||(p[5]=m=>re("vision")),class:"score-cell sortable",title:"Vision"},[p[18]||(p[18]=J(" V ",-1)),r("span",Lm,C(N("vision")),1)]),r("th",{onClick:p[6]||(p[6]=m=>re("effort")),class:"score-cell sortable",title:"Effort"},[p[19]||(p[19]=J(" E ",-1)),r("span",qm,C(N("effort")),1)]),r("th",{onClick:p[7]||(p[7]=m=>re("systems")),class:"score-cell sortable",title:"Systems"},[p[20]||(p[20]=J(" S ",-1)),r("span",Hm,C(N("systems")),1)]),r("th",{onClick:p[8]||(p[8]=m=>re("practice")),class:"score-cell sortable",title:"Practice"},[p[21]||(p[21]=J(" P ",-1)),r("span",Dm,C(N("practice")),1)]),r("th",{onClick:p[9]||(p[9]=m=>re("attitude")),class:"score-cell sortable",title:"Attitude"},[p[22]||(p[22]=J(" A ",-1)),r("span",Bm,C(N("attitude")),1)]),r("th",{onClick:p[10]||(p[10]=m=>re("overall")),class:"score-cell sortable",title:"Overall"},[p[23]||(p[23]=J(" O ",-1)),r("span",Vm,C(N("overall")),1)]),p[26]||(p[26]=r("th",null,"Response",-1)),p[27]||(p[27]=r("th",null,"Action Plan",-1)),p[28]||(p[28]=r("th",null,"Staff Comments",-1))])]),r("tbody",null,[(_(!0),w(ee,null,Te(ne.value,m=>{var S,b,$,O,I,M,H,U,D,V,Z,ce;return _(),w("tr",{key:m.id},[r("td",Km,C(m.name),1),r("td",null,C(m.group||"-"),1),r("td",Gm,[r("button",{onClick:le=>Ie(m),class:"report-button",title:"View Full Report"},"  ",8,Ym)]),r("td",Wm,[r("button",{class:"ucas-button",type:"button",onClick:le=>ae(m),disabled:!de(m),title:de(m)?"Open UCAS Application":"UCAS available for Year 12+ only"},"  ",8,zm)]),r("td",{class:"score-cell",style:gt({background:qt(is)((S=m.scores)==null?void 0:S.vision)})},C(((b=m.scores)==null?void 0:b.vision)||"-"),5),r("td",{class:"score-cell",style:gt({background:qt(is)(($=m.scores)==null?void 0:$.effort)})},C(((O=m.scores)==null?void 0:O.effort)||"-"),5),r("td",{class:"score-cell",style:gt({background:qt(is)((I=m.scores)==null?void 0:I.systems)})},C(((M=m.scores)==null?void 0:M.systems)||"-"),5),r("td",{class:"score-cell",style:gt({background:qt(is)((H=m.scores)==null?void 0:H.practice)})},C(((U=m.scores)==null?void 0:U.practice)||"-"),5),r("td",{class:"score-cell",style:gt({background:qt(is)((D=m.scores)==null?void 0:D.attitude)})},C(((V=m.scores)==null?void 0:V.attitude)||"-"),5),r("td",{class:"score-cell overall-cell",style:gt({background:qt(is)((Z=m.scores)==null?void 0:Z.overall)})},C(be((ce=m.scores)==null?void 0:ce.overall)),5),r("td",{class:Q(["text-preview clickable view-only",{"has-content":m.hasResponse,"no-content":!m.hasResponse}]),onClick:le=>Ge(m.name,"Response",m.response),title:m.hasResponse?"Click to view full response":"No response yet"},[m.hasResponse?(_(),w("span",Qm,C(ue(m.response,40)),1)):(_(),w("span",Xm,"Incomplete"))],10,Jm),r("td",{class:Q(["text-preview clickable editable",{"has-content":m.hasGoals,"no-content":!m.hasGoals}]),onClick:le=>ut(m),title:m.hasGoals?"Click to edit action plan":"No action plan yet - Click to add"},[m.hasGoals?(_(),w("span",t1,C(ue(m.goals,40)),1)):(_(),w("span",e1,"Incomplete"))],10,Zm),r("td",{class:Q(["text-preview clickable editable",{"has-content":m.hasCoaching,"no-content-blank":!m.hasCoaching}]),onClick:le=>Xe(m),title:m.hasCoaching?"Click to edit coaching comments":"No coaching comments - Click to add"},C(ue(m.coachingComments,40)),11,s1)])}),128))])])]),z.value.length>0?(_(),w("div",n1,[r("button",{onClick:p[11]||(p[11]=m=>G(j.value-1)),disabled:j.value===1,class:"pagination-button"}," Previous ",8,o1),r("div",r1,[(_(!0),w(ee,null,Te(ye.value,m=>(_(),w(ee,{key:m},[m!=="..."?(_(),w("button",{key:0,onClick:S=>G(m),class:Q(["page-button",{active:m===j.value}])},C(m),11,a1)):(_(),w("span",i1,"..."))],64))),128))]),r("button",{onClick:p[12]||(p[12]=m=>G(j.value+1)),disabled:j.value===q.value,class:"pagination-button"}," Next ",8,l1)])):B("",!0),z.value.length===0?(_(),w("div",c1,[...p[29]||(p[29]=[r("p",null,"No students match the current filters.",-1)])])):B("",!0),xe(vu,{isOpen:l.value,title:u.value,text:d.value,onClose:je},null,8,["isOpen","title","text"]),xe(mr,{isOpen:h.value,title:v.value,text:y.value,placeholder:"Enter action plan / study goals here...",onClose:Ct,onSave:St},null,8,["isOpen","title","text"]),xe(mr,{isOpen:x.value,title:T.value,text:L.value,placeholder:"Enter coaching comments and observations here...",onClose:jt,onSave:f},null,8,["isOpen","title","text"]),xe(Cm,{isOpen:Ae.value,student:Se.value,staffEmail:Fe.value,staffName:_e.value,academicYear:"current",onClose:nt},null,8,["isOpen","student","staffEmail","staffName"])]))}},d1=ct(u1,[["__scopeId","data-v-d9bf6065"]]),f1={class:"report-modal-container"},v1={class:"report-modal-header"},p1={class:"report-modal-body"},h1=["src"],m1={class:"iframe-loading"},g1={__name:"StudentReportModal",props:{isOpen:{type:Boolean,required:!0},studentEmail:{type:String,default:null},studentName:{type:String,default:"Student"}},emits:["close"],setup(e,{emit:t}){const s=e,o=t,n=P(null),a=P(!0),l=P(null);lt(()=>[s.isOpen,s.studentEmail],([v,y])=>{v&&y?(n.value=`https://vespaacademy.knack.com/vespa-academy#vespa-coaching-report?email=${encodeURIComponent(y)}`,a.value=!0,console.log("[Report Modal] Opening report for:",y)):n.value=null},{immediate:!0});const u=()=>{try{const v=l.value;if(v&&v.contentDocument){const y=v.contentDocument.createElement("style");y.textContent=`
        /* Hide Knack default headers and navigation */
        .knHeader,
        .kn-menu,
        .kn-info,
        .kn-current_user,
        #kn-app-menu,
        .kn-back,
        .breadcrumb-back,
        .header-breadcrumb {
          display: none !important;
        }
        
        /* Adjust body padding to account for hidden header */
        body {
          padding-top: 0 !important;
        }
        
        /* Ensure content starts at top */
        .kn-scene,
        #kn-app-container {
          padding-top: 0 !important;
          margin-top: 0 !important;
        }
      `,v.contentDocument.head.appendChild(y),console.log("[Report Modal] Hid Knack headers in iframe")}}catch(v){console.log("[Report Modal] Could not hide headers (cross-origin):",v.message)}setTimeout(()=>{a.value=!1,console.log("[Report Modal] Report loaded")},500)},d=()=>{a.value=!0,o("close")},h=v=>{v.key==="Escape"&&s.isOpen&&d()};return lt(()=>s.isOpen,v=>{v?(document.addEventListener("keydown",h),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",h),document.body.style.overflow="")}),(v,y)=>e.isOpen?(_(),w("div",{key:0,class:"report-modal-overlay",onClick:bt(d,["self"])},[r("div",f1,[r("div",v1,[r("h2",null,C(e.studentName)+" - VESPA Report",1),r("button",{class:"close-button",onClick:d},[...y[0]||(y[0]=[r("span",{class:"close-icon"},"",-1)])])]),r("div",p1,[n.value?(_(),w("iframe",{key:0,ref_key:"reportIframe",ref:l,src:n.value,class:"report-iframe",onLoad:u,frameborder:"0",allowfullscreen:""},null,40,h1)):B("",!0),Oe(r("div",m1,[...y[1]||(y[1]=[r("div",{class:"spinner"},null,-1),r("p",null,"Loading report...",-1)])],512),[[$a,a.value]])])])])):B("",!0)}},y1=ct(g1,[["__scopeId","data-v-9df7cb70"]]),b1=["object_5","object_7","object_18","object_78"],_1=["tutor","staff","admin","head","teacher","subject"],Ia=e=>Array.isArray(e)?e.flatMap(t=>{if(!t)return[];if(typeof t=="string")return[t];const s=[];return t.identifier&&s.push(t.identifier),t.id&&s.push(t.id),t.key&&s.push(t.key),t.name&&s.push(t.name),s}).map(t=>String(t).trim().toLowerCase()).filter(Boolean):[],w1=e=>{const t=Ia(e),s=b1.map(o=>o.toLowerCase());return t.some(o=>s.includes(o))||t.some(o=>_1.some(n=>o.includes(n)))},k1={getUser(){try{if(typeof Knack>"u"||!Knack.getUserAttributes)return console.warn("[Knack Auth] Knack not available"),null;const e=Knack.getUserAttributes(),t=Knack.getUserRoles?Knack.getUserRoles():[];if(!e||!e.email)return console.warn("[Knack Auth] No user logged in"),null;const s=w1(t),o=Ia(t);return{email:e.email,name:e.name||e.full_name||"",roles:t,roleTokens:o,isStaff:s,attributes:e}}catch(e){return console.error("[Knack Auth] Error getting user:",e),null}},isStaff(){const e=this.getUser();return e?e.isStaff:!1},getUserEmail(){const e=this.getUser();return e?e.email:null}},C1={id:"staff-overview-app"},S1={key:2,class:"overview-container"},x1={__name:"App",setup(e){const t=P(null),s=P({}),o=P(!0),n=P(null),a=P(null),l=P(!1),u=P(null),d=P(null),h=P({cycle:!1,group:!1,year:!1,status:!1,search:!1}),v=P({}),y=P(null),E=P(!1),x=P([]),T=async(F=1)=>{y.value=F,o.value=!0,n.value=null;try{if(a.value=k1.getUser(),!a.value||!a.value.email)throw new Error("Please log in to view the staff overview");if(!a.value.isStaff)throw new Error("This page is only accessible to staff members");console.log("[Staff Overview] Loading data for:",a.value.email,"cycle filter:",F);const q=await rt.getStaffOverview(a.value.email,F);if(!q.success)throw new Error(q.error||"Failed to load staff overview");t.value=q,console.log("[Staff Overview] Data loaded successfully:",q),E.value=!0}catch(q){console.error("[Staff Overview] Error loading data:",q),n.value=q.message||"Failed to load overview. Please try again."}finally{o.value=!1}},L=F=>{s.value=F,v.value.cycle=F.cycle||"",F.group&&(v.value.group=F.group),F.year&&(v.value.year=F.year),F.status&&(v.value.status=F.status),F.search&&(v.value.search=F.search),h.value.group&&F.group&&(v.value.group=F.group),h.value.year&&F.year&&(v.value.year=F.year),h.value.status&&F.status&&(v.value.status=F.status),h.value.search&&F.search&&(v.value.search=F.search);const q=F.cycle&&F.cycle!==""?parseInt(F.cycle):null,ne=q!==y.value;ne&&E.value?(console.log("[Staff Overview] Cycle filter changed, re-fetching data for cycle:",q),y.value=q,T(q)):ne&&!E.value?(console.log("[Staff Overview] Initial filter sync, skipping reload"),y.value=q):console.log("[Staff Overview] Filter changed (non-cycle), updating local state only")},se=F=>{h.value=F,F.group&&s.value.group&&(v.value.group=s.value.group),F.year&&s.value.year&&(v.value.year=s.value.year),F.status&&s.value.status&&(v.value.status=s.value.status),F.search&&s.value.search&&(v.value.search=s.value.search),F.group||delete v.value.group,F.year||delete v.value.year,F.status||delete v.value.status,F.search||delete v.value.search},j=F=>{console.log("[Staff Overview] Opening report modal for:",F.name,F.email),u.value=F.email,d.value=F.name,l.value=!0},K=()=>{l.value=!1,u.value=null,d.value=null,console.log("[Staff Overview] Refreshing data after report modal closed"),T(y.value)},z=()=>{console.log("[Staff Overview] Data updated, refreshing from Knack"),T(y.value)};return xn(()=>{T(1)}),(F,q)=>(_(),w("div",C1,[o.value?(_(),cn(kc,{key:0,message:"Loading student data..."})):n.value?(_(),cn(xc,{key:1,message:n.value,onRetry:T},null,8,["message"])):t.value?(_(),w("div",S1,[xe(Mc,{staffMember:t.value.staffMember,totalStudents:t.value.students.length},null,8,["staffMember","totalStudents"]),xe(Wc,{filters:t.value.filters,lockedFilters:h.value,preservedValues:v.value,onFilterChanged:L,onLockChanged:se},null,8,["filters","lockedFilters","preservedValues"]),xe(iu,{modelValue:x.value,"onUpdate:modelValue":q[0]||(q[0]=ne=>x.value=ne)},null,8,["modelValue"]),xe(d1,{students:t.value.students,activeFilters:s.value,smartFilters:x.value,onViewReport:j,onDataUpdated:z},null,8,["students","activeFilters","smartFilters"])])):B("",!0),xe(y1,{isOpen:l.value,studentEmail:u.value,studentName:d.value,onClose:K},null,8,["isOpen","studentEmail","studentName"])]))}},E1=ct(x1,[["__scopeId","data-v-245d25d6"]]);function A1(){console.log("[Staff Overview V2] Initializing...");try{const e=window.STAFF_OVERVIEW_V2_CONFIG||{},t=document.querySelector(e.elementSelector||"#view_3258");if(!t){console.error("[Staff Overview V2] Mount element not found:",e.elementSelector);return}gc(E1).mount(t),console.log("[Staff Overview V2] Successfully initialized!")}catch(e){console.error("[Staff Overview V2] Initialization error:",e)}}typeof window<"u"&&(window.initializeStaffOverviewV2=A1);
